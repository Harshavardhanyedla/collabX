(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function s2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Bm={exports:{}},Mc={},zm={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o1;function lN(){if(o1)return Fe;o1=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function w(U){return U===null||typeof U!="object"?null:(U=v&&U[v]||U["@@iterator"],typeof U=="function"?U:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,N={};function C(U,J,ve){this.props=U,this.context=J,this.refs=N,this.updater=ve||T}C.prototype.isReactComponent={},C.prototype.setState=function(U,J){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,J,"setState")},C.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function D(){}D.prototype=C.prototype;function j(U,J,ve){this.props=U,this.context=J,this.refs=N,this.updater=ve||T}var F=j.prototype=new D;F.constructor=j,A(F,C.prototype),F.isPureReactComponent=!0;var W=Array.isArray,K=Object.prototype.hasOwnProperty,B={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function R(U,J,ve){var be,Pe={},Te=null,Ue=null;if(J!=null)for(be in J.ref!==void 0&&(Ue=J.ref),J.key!==void 0&&(Te=""+J.key),J)K.call(J,be)&&!I.hasOwnProperty(be)&&(Pe[be]=J[be]);var je=arguments.length-2;if(je===1)Pe.children=ve;else if(1<je){for(var Oe=Array(je),Ie=0;Ie<je;Ie++)Oe[Ie]=arguments[Ie+2];Pe.children=Oe}if(U&&U.defaultProps)for(be in je=U.defaultProps,je)Pe[be]===void 0&&(Pe[be]=je[be]);return{$$typeof:t,type:U,key:Te,ref:Ue,props:Pe,_owner:B.current}}function P(U,J){return{$$typeof:t,type:U.type,key:J,ref:U.ref,props:U.props,_owner:U._owner}}function M(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function O(U){var J={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ve){return J[ve]})}var q=/\/+/g;function L(U,J){return typeof U=="object"&&U!==null&&U.key!=null?O(""+U.key):J.toString(36)}function ke(U,J,ve,be,Pe){var Te=typeof U;(Te==="undefined"||Te==="boolean")&&(U=null);var Ue=!1;if(U===null)Ue=!0;else switch(Te){case"string":case"number":Ue=!0;break;case"object":switch(U.$$typeof){case t:case e:Ue=!0}}if(Ue)return Ue=U,Pe=Pe(Ue),U=be===""?"."+L(Ue,0):be,W(Pe)?(ve="",U!=null&&(ve=U.replace(q,"$&/")+"/"),ke(Pe,J,ve,"",function(Ie){return Ie})):Pe!=null&&(M(Pe)&&(Pe=P(Pe,ve+(!Pe.key||Ue&&Ue.key===Pe.key?"":(""+Pe.key).replace(q,"$&/")+"/")+U)),J.push(Pe)),1;if(Ue=0,be=be===""?".":be+":",W(U))for(var je=0;je<U.length;je++){Te=U[je];var Oe=be+L(Te,je);Ue+=ke(Te,J,ve,Oe,Pe)}else if(Oe=w(U),typeof Oe=="function")for(U=Oe.call(U),je=0;!(Te=U.next()).done;)Te=Te.value,Oe=be+L(Te,je++),Ue+=ke(Te,J,ve,Oe,Pe);else if(Te==="object")throw J=String(U),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return Ue}function Xe(U,J,ve){if(U==null)return U;var be=[],Pe=0;return ke(U,be,"","",function(Te){return J.call(ve,Te,Pe++)}),be}function ht(U){if(U._status===-1){var J=U._result;J=J(),J.then(function(ve){(U._status===0||U._status===-1)&&(U._status=1,U._result=ve)},function(ve){(U._status===0||U._status===-1)&&(U._status=2,U._result=ve)}),U._status===-1&&(U._status=0,U._result=J)}if(U._status===1)return U._result.default;throw U._result}var ge={current:null},se={transition:null},le={ReactCurrentDispatcher:ge,ReactCurrentBatchConfig:se,ReactCurrentOwner:B};function Z(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:Xe,forEach:function(U,J,ve){Xe(U,function(){J.apply(this,arguments)},ve)},count:function(U){var J=0;return Xe(U,function(){J++}),J},toArray:function(U){return Xe(U,function(J){return J})||[]},only:function(U){if(!M(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Fe.Component=C,Fe.Fragment=n,Fe.Profiler=s,Fe.PureComponent=j,Fe.StrictMode=r,Fe.Suspense=d,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=le,Fe.act=Z,Fe.cloneElement=function(U,J,ve){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var be=A({},U.props),Pe=U.key,Te=U.ref,Ue=U._owner;if(J!=null){if(J.ref!==void 0&&(Te=J.ref,Ue=B.current),J.key!==void 0&&(Pe=""+J.key),U.type&&U.type.defaultProps)var je=U.type.defaultProps;for(Oe in J)K.call(J,Oe)&&!I.hasOwnProperty(Oe)&&(be[Oe]=J[Oe]===void 0&&je!==void 0?je[Oe]:J[Oe])}var Oe=arguments.length-2;if(Oe===1)be.children=ve;else if(1<Oe){je=Array(Oe);for(var Ie=0;Ie<Oe;Ie++)je[Ie]=arguments[Ie+2];be.children=je}return{$$typeof:t,type:U.type,key:Pe,ref:Te,props:be,_owner:Ue}},Fe.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:o,_context:U},U.Consumer=U},Fe.createElement=R,Fe.createFactory=function(U){var J=R.bind(null,U);return J.type=U,J},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(U){return{$$typeof:u,render:U}},Fe.isValidElement=M,Fe.lazy=function(U){return{$$typeof:g,_payload:{_status:-1,_result:U},_init:ht}},Fe.memo=function(U,J){return{$$typeof:p,type:U,compare:J===void 0?null:J}},Fe.startTransition=function(U){var J=se.transition;se.transition={};try{U()}finally{se.transition=J}},Fe.unstable_act=Z,Fe.useCallback=function(U,J){return ge.current.useCallback(U,J)},Fe.useContext=function(U){return ge.current.useContext(U)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(U){return ge.current.useDeferredValue(U)},Fe.useEffect=function(U,J){return ge.current.useEffect(U,J)},Fe.useId=function(){return ge.current.useId()},Fe.useImperativeHandle=function(U,J,ve){return ge.current.useImperativeHandle(U,J,ve)},Fe.useInsertionEffect=function(U,J){return ge.current.useInsertionEffect(U,J)},Fe.useLayoutEffect=function(U,J){return ge.current.useLayoutEffect(U,J)},Fe.useMemo=function(U,J){return ge.current.useMemo(U,J)},Fe.useReducer=function(U,J,ve){return ge.current.useReducer(U,J,ve)},Fe.useRef=function(U){return ge.current.useRef(U)},Fe.useState=function(U){return ge.current.useState(U)},Fe.useSyncExternalStore=function(U,J,ve){return ge.current.useSyncExternalStore(U,J,ve)},Fe.useTransition=function(){return ge.current.useTransition()},Fe.version="18.3.1",Fe}var a1;function B0(){return a1||(a1=1,zm.exports=lN()),zm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l1;function cN(){if(l1)return Mc;l1=1;var t=B0(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,p){var g,v={},w=null,T=null;p!==void 0&&(w=""+p),d.key!==void 0&&(w=""+d.key),d.ref!==void 0&&(T=d.ref);for(g in d)r.call(d,g)&&!o.hasOwnProperty(g)&&(v[g]=d[g]);if(u&&u.defaultProps)for(g in d=u.defaultProps,d)v[g]===void 0&&(v[g]=d[g]);return{$$typeof:e,type:u,key:w,ref:T,props:v,_owner:s.current}}return Mc.Fragment=n,Mc.jsx=l,Mc.jsxs=l,Mc}var c1;function uN(){return c1||(c1=1,Bm.exports=cN()),Bm.exports}var h=uN(),x=B0();const Cn=s2(x);var uh={},$m={exports:{}},Kn={},Wm={exports:{}},qm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u1;function dN(){return u1||(u1=1,(function(t){function e(se,le){var Z=se.length;se.push(le);e:for(;0<Z;){var U=Z-1>>>1,J=se[U];if(0<s(J,le))se[U]=le,se[Z]=J,Z=U;else break e}}function n(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var le=se[0],Z=se.pop();if(Z!==le){se[0]=Z;e:for(var U=0,J=se.length,ve=J>>>1;U<ve;){var be=2*(U+1)-1,Pe=se[be],Te=be+1,Ue=se[Te];if(0>s(Pe,Z))Te<J&&0>s(Ue,Pe)?(se[U]=Ue,se[Te]=Z,U=Te):(se[U]=Pe,se[be]=Z,U=be);else if(Te<J&&0>s(Ue,Z))se[U]=Ue,se[Te]=Z,U=Te;else break e}}return le}function s(se,le){var Z=se.sortIndex-le.sortIndex;return Z!==0?Z:se.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var d=[],p=[],g=1,v=null,w=3,T=!1,A=!1,N=!1,C=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(se){for(var le=n(p);le!==null;){if(le.callback===null)r(p);else if(le.startTime<=se)r(p),le.sortIndex=le.expirationTime,e(d,le);else break;le=n(p)}}function W(se){if(N=!1,F(se),!A)if(n(d)!==null)A=!0,ht(K);else{var le=n(p);le!==null&&ge(W,le.startTime-se)}}function K(se,le){A=!1,N&&(N=!1,D(R),R=-1),T=!0;var Z=w;try{for(F(le),v=n(d);v!==null&&(!(v.expirationTime>le)||se&&!O());){var U=v.callback;if(typeof U=="function"){v.callback=null,w=v.priorityLevel;var J=U(v.expirationTime<=le);le=t.unstable_now(),typeof J=="function"?v.callback=J:v===n(d)&&r(d),F(le)}else r(d);v=n(d)}if(v!==null)var ve=!0;else{var be=n(p);be!==null&&ge(W,be.startTime-le),ve=!1}return ve}finally{v=null,w=Z,T=!1}}var B=!1,I=null,R=-1,P=5,M=-1;function O(){return!(t.unstable_now()-M<P)}function q(){if(I!==null){var se=t.unstable_now();M=se;var le=!0;try{le=I(!0,se)}finally{le?L():(B=!1,I=null)}}else B=!1}var L;if(typeof j=="function")L=function(){j(q)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,Xe=ke.port2;ke.port1.onmessage=q,L=function(){Xe.postMessage(null)}}else L=function(){C(q,0)};function ht(se){I=se,B||(B=!0,L())}function ge(se,le){R=C(function(){se(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(se){se.callback=null},t.unstable_continueExecution=function(){A||T||(A=!0,ht(K))},t.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<se?Math.floor(1e3/se):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(se){switch(w){case 1:case 2:case 3:var le=3;break;default:le=w}var Z=w;w=le;try{return se()}finally{w=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(se,le){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var Z=w;w=se;try{return le()}finally{w=Z}},t.unstable_scheduleCallback=function(se,le,Z){var U=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?U+Z:U):Z=U,se){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=Z+J,se={id:g++,callback:le,priorityLevel:se,startTime:Z,expirationTime:J,sortIndex:-1},Z>U?(se.sortIndex=Z,e(p,se),n(d)===null&&se===n(p)&&(N?(D(R),R=-1):N=!0,ge(W,Z-U))):(se.sortIndex=J,e(d,se),A||T||(A=!0,ht(K))),se},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(se){var le=w;return function(){var Z=w;w=le;try{return se.apply(this,arguments)}finally{w=Z}}}})(qm)),qm}var d1;function hN(){return d1||(d1=1,Wm.exports=dN()),Wm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h1;function fN(){if(h1)return Kn;h1=1;var t=B0(),e=hN();function n(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function w(i){return d.call(v,i)?!0:d.call(g,i)?!1:p.test(i)?v[i]=!0:(g[i]=!0,!1)}function T(i,a,c,m){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function A(i,a,c,m){if(a===null||typeof a>"u"||T(i,a,c,m))return!0;if(m)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function N(i,a,c,m,y,b,S){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=y,this.mustUseProperty=c,this.propertyName=i,this.type=a,this.sanitizeURL=b,this.removeEmptyString=S}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new N(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];C[a]=new N(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new N(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new N(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new N(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new N(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new N(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new N(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new N(i,5,!1,i.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function j(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(D,j);C[a]=new N(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(D,j);C[a]=new N(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(D,j);C[a]=new N(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new N(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new N(i,1,!1,i.toLowerCase(),null,!0,!0)});function F(i,a,c,m){var y=C.hasOwnProperty(a)?C[a]:null;(y!==null?y.type!==0:m||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(A(a,c,y,m)&&(c=null),m||y===null?w(a)&&(c===null?i.removeAttribute(a):i.setAttribute(a,""+c)):y.mustUseProperty?i[y.propertyName]=c===null?y.type===3?!1:"":c:(a=y.attributeName,m=y.attributeNamespace,c===null?i.removeAttribute(a):(y=y.type,c=y===3||y===4&&c===!0?"":""+c,m?i.setAttributeNS(m,a,c):i.setAttribute(a,c))))}var W=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),B=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),O=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),ke=Symbol.for("react.suspense_list"),Xe=Symbol.for("react.memo"),ht=Symbol.for("react.lazy"),ge=Symbol.for("react.offscreen"),se=Symbol.iterator;function le(i){return i===null||typeof i!="object"?null:(i=se&&i[se]||i["@@iterator"],typeof i=="function"?i:null)}var Z=Object.assign,U;function J(i){if(U===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);U=a&&a[1]||""}return`
`+U+i}var ve=!1;function be(i,a){if(!i||ve)return"";ve=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Q){var m=Q}Reflect.construct(i,[],a)}else{try{a.call()}catch(Q){m=Q}i.call(a.prototype)}else{try{throw Error()}catch(Q){m=Q}i()}}catch(Q){if(Q&&m&&typeof Q.stack=="string"){for(var y=Q.stack.split(`
`),b=m.stack.split(`
`),S=y.length-1,V=b.length-1;1<=S&&0<=V&&y[S]!==b[V];)V--;for(;1<=S&&0<=V;S--,V--)if(y[S]!==b[V]){if(S!==1||V!==1)do if(S--,V--,0>V||y[S]!==b[V]){var z=`
`+y[S].replace(" at new "," at ");return i.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",i.displayName)),z}while(1<=S&&0<=V);break}}}finally{ve=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?J(i):""}function Pe(i){switch(i.tag){case 5:return J(i.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return i=be(i.type,!1),i;case 11:return i=be(i.type.render,!1),i;case 1:return i=be(i.type,!0),i;default:return""}}function Te(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case I:return"Fragment";case B:return"Portal";case P:return"Profiler";case R:return"StrictMode";case L:return"Suspense";case ke:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case O:return(i.displayName||"Context")+".Consumer";case M:return(i._context.displayName||"Context")+".Provider";case q:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Xe:return a=i.displayName||null,a!==null?a:Te(i.type)||"Memo";case ht:a=i._payload,i=i._init;try{return Te(i(a))}catch{}}return null}function Ue(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Te(a);case 8:return a===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function je(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Oe(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ie(i){var a=Oe(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),m=""+i[a];if(!i.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,b=c.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return y.call(this)},set:function(S){m=""+S,b.call(this,S)}}),Object.defineProperty(i,a,{enumerable:c.enumerable}),{getValue:function(){return m},setValue:function(S){m=""+S},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function vr(i){i._valueTracker||(i._valueTracker=Ie(i))}function mn(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),m="";return i&&(m=Oe(i)?i.checked?"true":"false":i.value),i=m,i!==c?(a.setValue(i),!0):!1}function kn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function gn(i,a){var c=a.checked;return Z({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function Fr(i,a){var c=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;c=je(a.value!=null?a.value:c),i._wrapperState={initialChecked:m,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function nr(i,a){a=a.checked,a!=null&&F(i,"checked",a,!1)}function as(i,a){nr(i,a);var c=je(a.value),m=a.type;if(c!=null)m==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(m==="submit"||m==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?ft(i,a.type,c):a.hasOwnProperty("defaultValue")&&ft(i,a.type,je(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function _i(i,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,c||a===i.value||(i.value=a),i.defaultValue=a}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function ft(i,a,c){(a!=="number"||kn(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var Je=Array.isArray;function yn(i,a,c,m){if(i=i.options,a){a={};for(var y=0;y<c.length;y++)a["$"+c[y]]=!0;for(c=0;c<i.length;c++)y=a.hasOwnProperty("$"+i[c].value),i[c].selected!==y&&(i[c].selected=y),y&&m&&(i[c].defaultSelected=!0)}else{for(c=""+je(c),a=null,y=0;y<i.length;y++){if(i[y].value===c){i[y].selected=!0,m&&(i[y].defaultSelected=!0);return}a!==null||i[y].disabled||(a=i[y])}a!==null&&(a.selected=!0)}}function ls(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return Z({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Ei(i,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(n(92));if(Je(c)){if(1<c.length)throw Error(n(93));c=c[0]}a=c}a==null&&(a=""),c=a}i._wrapperState={initialValue:je(c)}}function Co(i,a){var c=je(a.value),m=je(a.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),a.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),m!=null&&(i.defaultValue=""+m)}function cs(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function Io(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rr(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?Io(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Pn,us=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,m,y){MSApp.execUnsafeLocalFunction(function(){return i(a,c,m,y)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(Pn=Pn||document.createElement("div"),Pn.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Pn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function ds(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var tn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ro=["Webkit","ms","Moz","O"];Object.keys(tn).forEach(function(i){Ro.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),tn[a]=tn[i]})});function hs(i,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||tn.hasOwnProperty(i)&&tn[i]?(""+a).trim():a+"px"}function Ti(i,a){i=i.style;for(var c in a)if(a.hasOwnProperty(c)){var m=c.indexOf("--")===0,y=hs(c,a[c],m);c==="float"&&(c="cssFloat"),m?i.setProperty(c,y):i[c]=y}}var Ws=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bn(i,a){if(a){if(Ws[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function Si(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ur=null;function Ci(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Br=null,zr=null,Ve=null;function Ut(i){if(i=xc(i)){if(typeof Br!="function")throw Error(n(280));var a=i.stateNode;a&&(a=Sd(a),Br(i.stateNode,i.type,a))}}function bt(i){zr?Ve?Ve.push(i):Ve=[i]:zr=i}function nn(){if(zr){var i=zr,a=Ve;if(Ve=zr=null,Ut(i),a)for(i=0;i<a.length;i++)Ut(a[i])}}function rn(i,a){return i(a)}function Ht(){}var It=!1;function $r(i,a,c){if(It)return i(a,c);It=!0;try{return rn(i,a,c)}finally{It=!1,(zr!==null||Ve!==null)&&(Ht(),nn())}}function lt(i,a){var c=i.stateNode;if(c===null)return null;var m=Sd(c);if(m===null)return null;c=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(n(231,a,typeof c));return c}var sn=!1;if(u)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){sn=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch{sn=!1}function zn(i,a,c,m,y,b,S,V,z){var Q=Array.prototype.slice.call(arguments,3);try{a.apply(c,Q)}catch(re){this.onError(re)}}var jn=!1,vn=null,Dn=!1,Gt=null,Ii={onError:function(i){jn=!0,vn=i}};function sd(i,a,c,m,y,b,S,V,z){jn=!1,vn=null,zn.apply(Ii,arguments)}function Kl(i,a,c,m,y,b,S,V,z){if(sd.apply(this,arguments),jn){if(jn){var Q=vn;jn=!1,vn=null}else throw Error(n(198));Dn||(Dn=!0,Gt=Q)}}function Wr(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function Yl(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function id(i){if(Wr(i)!==i)throw Error(n(188))}function od(i){var a=i.alternate;if(!a){if(a=Wr(i),a===null)throw Error(n(188));return a!==i?null:i}for(var c=i,m=a;;){var y=c.return;if(y===null)break;var b=y.alternate;if(b===null){if(m=y.return,m!==null){c=m;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===c)return id(y),i;if(b===m)return id(y),a;b=b.sibling}throw Error(n(188))}if(c.return!==m.return)c=y,m=b;else{for(var S=!1,V=y.child;V;){if(V===c){S=!0,c=y,m=b;break}if(V===m){S=!0,m=y,c=b;break}V=V.sibling}if(!S){for(V=b.child;V;){if(V===c){S=!0,c=b,m=y;break}if(V===m){S=!0,m=b,c=y;break}V=V.sibling}if(!S)throw Error(n(189))}}if(c.alternate!==m)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?i:a}function ad(i){return i=od(i),i!==null?Ao(i):null}function Ao(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=Ao(i);if(a!==null)return a;i=i.sibling}return null}var Ql=e.unstable_scheduleCallback,Ca=e.unstable_cancelCallback,No=e.unstable_shouldYield,qs=e.unstable_requestPaint,ct=e.unstable_now,vp=e.unstable_getCurrentPriorityLevel,Ia=e.unstable_ImmediatePriority,Xl=e.unstable_UserBlockingPriority,ko=e.unstable_NormalPriority,Jl=e.unstable_LowPriority,Ra=e.unstable_IdlePriority,Po=null,sr=null;function ld(i){if(sr&&typeof sr.onCommitFiberRoot=="function")try{sr.onCommitFiberRoot(Po,i,void 0,(i.current.flags&128)===128)}catch{}}var ir=Math.clz32?Math.clz32:jo,fs=Math.log,wr=Math.LN2;function jo(i){return i>>>=0,i===0?32:31-(fs(i)/wr|0)|0}var ps=64,Ri=4194304;function Ye(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Hs(i,a){var c=i.pendingLanes;if(c===0)return 0;var m=0,y=i.suspendedLanes,b=i.pingedLanes,S=c&268435455;if(S!==0){var V=S&~y;V!==0?m=Ye(V):(b&=S,b!==0&&(m=Ye(b)))}else S=c&~y,S!==0?m=Ye(S):b!==0&&(m=Ye(b));if(m===0)return 0;if(a!==0&&a!==m&&(a&y)===0&&(y=m&-m,b=a&-a,y>=b||y===16&&(b&4194240)!==0))return a;if((m&4)!==0&&(m|=c&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=m;0<a;)c=31-ir(a),y=1<<c,m|=i[c],a&=~y;return m}function Do(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mo(i,a){for(var c=i.suspendedLanes,m=i.pingedLanes,y=i.expirationTimes,b=i.pendingLanes;0<b;){var S=31-ir(b),V=1<<S,z=y[S];z===-1?((V&c)===0||(V&m)!==0)&&(y[S]=Do(V,a)):z<=a&&(i.expiredLanes|=V),b&=~V}}function Zl(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function ec(){var i=ps;return ps<<=1,(ps&4194240)===0&&(ps=64),i}function tc(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function Lo(i,a,c){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-ir(a),i[a]=c}function wp(i,a){var c=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var m=i.eventTimes;for(i=i.expirationTimes;0<c;){var y=31-ir(c),b=1<<y;a[y]=0,m[y]=-1,i[y]=-1,c&=~b}}function nc(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var m=31-ir(c),y=1<<m;y&a|i[m]&a&&(i[m]|=a),c&=~y}}var We=0;function ms(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var rc,Aa,sc,ic,oc,gs=!1,Na=[],ys=null,vs=null,on=null,Oo=new Map,Gs=new Map,or=[],cd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ai(i,a){switch(i){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":vs=null;break;case"mouseover":case"mouseout":on=null;break;case"pointerover":case"pointerout":Oo.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gs.delete(a.pointerId)}}function qr(i,a,c,m,y,b){return i===null||i.nativeEvent!==b?(i={blockedOn:a,domEventName:c,eventSystemFlags:m,nativeEvent:b,targetContainers:[y]},a!==null&&(a=xc(a),a!==null&&Aa(a)),i):(i.eventSystemFlags|=m,a=i.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),i)}function ud(i,a,c,m,y){switch(a){case"focusin":return ys=qr(ys,i,a,c,m,y),!0;case"dragenter":return vs=qr(vs,i,a,c,m,y),!0;case"mouseover":return on=qr(on,i,a,c,m,y),!0;case"pointerover":var b=y.pointerId;return Oo.set(b,qr(Oo.get(b)||null,i,a,c,m,y)),!0;case"gotpointercapture":return b=y.pointerId,Gs.set(b,qr(Gs.get(b)||null,i,a,c,m,y)),!0}return!1}function ka(i){var a=Bo(i.target);if(a!==null){var c=Wr(a);if(c!==null){if(a=c.tag,a===13){if(a=Yl(c),a!==null){i.blockedOn=a,oc(i.priority,function(){sc(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function nt(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=Pa(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var m=new c.constructor(c.type,c);Ur=m,c.target.dispatchEvent(m),Ur=null}else return a=xc(c),a!==null&&Aa(a),i.blockedOn=c,!1;a.shift()}return!0}function dd(i,a,c){nt(i)&&c.delete(a)}function xp(){gs=!1,ys!==null&&nt(ys)&&(ys=null),vs!==null&&nt(vs)&&(vs=null),on!==null&&nt(on)&&(on=null),Oo.forEach(dd),Gs.forEach(dd)}function Ni(i,a){i.blockedOn===a&&(i.blockedOn=null,gs||(gs=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,xp)))}function ki(i){function a(y){return Ni(y,i)}if(0<Na.length){Ni(Na[0],i);for(var c=1;c<Na.length;c++){var m=Na[c];m.blockedOn===i&&(m.blockedOn=null)}}for(ys!==null&&Ni(ys,i),vs!==null&&Ni(vs,i),on!==null&&Ni(on,i),Oo.forEach(a),Gs.forEach(a),c=0;c<or.length;c++)m=or[c],m.blockedOn===i&&(m.blockedOn=null);for(;0<or.length&&(c=or[0],c.blockedOn===null);)ka(c),c.blockedOn===null&&or.shift()}var Ks=W.ReactCurrentBatchConfig,Ys=!0;function ws(i,a,c,m){var y=We,b=Ks.transition;Ks.transition=null;try{We=1,ac(i,a,c,m)}finally{We=y,Ks.transition=b}}function hd(i,a,c,m){var y=We,b=Ks.transition;Ks.transition=null;try{We=4,ac(i,a,c,m)}finally{We=y,Ks.transition=b}}function ac(i,a,c,m){if(Ys){var y=Pa(i,a,c,m);if(y===null)kp(i,a,m,xs,c),Ai(i,m);else if(ud(y,i,a,c,m))m.stopPropagation();else if(Ai(i,m),a&4&&-1<cd.indexOf(i)){for(;y!==null;){var b=xc(y);if(b!==null&&rc(b),b=Pa(i,a,c,m),b===null&&kp(i,a,m,xs,c),b===y)break;y=b}y!==null&&m.stopPropagation()}else kp(i,a,m,null,c)}}var xs=null;function Pa(i,a,c,m){if(xs=null,i=Ci(m),i=Bo(i),i!==null)if(a=Wr(i),a===null)i=null;else if(c=a.tag,c===13){if(i=Yl(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return xs=i,null}function ja(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vp()){case Ia:return 1;case Xl:return 4;case ko:case Jl:return 16;case Ra:return 536870912;default:return 16}default:return 16}}var ar=null,Da=null,Qs=null;function fd(){if(Qs)return Qs;var i,a=Da,c=a.length,m,y="value"in ar?ar.value:ar.textContent,b=y.length;for(i=0;i<c&&a[i]===y[i];i++);var S=c-i;for(m=1;m<=S&&a[c-m]===y[b-m];m++);return Qs=y.slice(i,1<m?1-m:void 0)}function Vo(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function bs(){return!0}function lc(){return!1}function wn(i){function a(c,m,y,b,S){this._reactName=c,this._targetInst=y,this.type=m,this.nativeEvent=b,this.target=S,this.currentTarget=null;for(var V in i)i.hasOwnProperty(V)&&(c=i[V],this[V]=c?c(b):b[V]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?bs:lc,this.isPropagationStopped=lc,this}return Z(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=bs)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=bs)},persist:function(){},isPersistent:bs}),a}var _s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fo=wn(_s),Pi=Z({},_s,{view:0,detail:0}),Ma=wn(Pi),La,Oa,lr,Uo=Z({},Pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Me,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==lr&&(lr&&i.type==="mousemove"?(La=i.screenX-lr.screenX,Oa=i.screenY-lr.screenY):Oa=La=0,lr=i),La)},movementY:function(i){return"movementY"in i?i.movementY:Oa}}),cc=wn(Uo),pd=Z({},Uo,{dataTransfer:0}),md=wn(pd),Va=Z({},Pi,{relatedTarget:0}),an=wn(Va),gd=Z({},_s,{animationName:0,elapsedTime:0,pseudoElement:0}),yd=wn(gd),ji=Z({},_s,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),f=wn(ji),_=Z({},_s,{data:0}),E=wn(_),k={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ae(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=X[i])?!!a[i]:!1}function Me(){return ae}var Rt=Z({},Pi,{key:function(i){if(i.key){var a=k[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Vo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?G[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Me,charCode:function(i){return i.type==="keypress"?Vo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Vo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ze=wn(Rt),Pt=Z({},Uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cr=wn(Pt),Xs=Z({},Pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Me}),Es=wn(Xs),Ts=Z({},_s,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fa=wn(Ts),uc=Z({},Uo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),nA=wn(uc),rA=[9,13,27,32],bp=u&&"CompositionEvent"in window,dc=null;u&&"documentMode"in document&&(dc=document.documentMode);var sA=u&&"TextEvent"in window&&!dc,Jv=u&&(!bp||dc&&8<dc&&11>=dc),Zv=" ",ew=!1;function tw(i,a){switch(i){case"keyup":return rA.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nw(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ua=!1;function iA(i,a){switch(i){case"compositionend":return nw(a);case"keypress":return a.which!==32?null:(ew=!0,Zv);case"textInput":return i=a.data,i===Zv&&ew?null:i;default:return null}}function oA(i,a){if(Ua)return i==="compositionend"||!bp&&tw(i,a)?(i=fd(),Qs=Da=ar=null,Ua=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Jv&&a.locale!=="ko"?null:a.data;default:return null}}var aA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rw(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!aA[i.type]:a==="textarea"}function sw(i,a,c,m){bt(m),a=_d(a,"onChange"),0<a.length&&(c=new Fo("onChange","change",null,c,m),i.push({event:c,listeners:a}))}var hc=null,fc=null;function lA(i){_w(i,0)}function vd(i){var a=qa(i);if(mn(a))return i}function cA(i,a){if(i==="change")return a}var iw=!1;if(u){var _p;if(u){var Ep="oninput"in document;if(!Ep){var ow=document.createElement("div");ow.setAttribute("oninput","return;"),Ep=typeof ow.oninput=="function"}_p=Ep}else _p=!1;iw=_p&&(!document.documentMode||9<document.documentMode)}function aw(){hc&&(hc.detachEvent("onpropertychange",lw),fc=hc=null)}function lw(i){if(i.propertyName==="value"&&vd(fc)){var a=[];sw(a,fc,i,Ci(i)),$r(lA,a)}}function uA(i,a,c){i==="focusin"?(aw(),hc=a,fc=c,hc.attachEvent("onpropertychange",lw)):i==="focusout"&&aw()}function dA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return vd(fc)}function hA(i,a){if(i==="click")return vd(a)}function fA(i,a){if(i==="input"||i==="change")return vd(a)}function pA(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Hr=typeof Object.is=="function"?Object.is:pA;function pc(i,a){if(Hr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),m=Object.keys(a);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var y=c[m];if(!d.call(a,y)||!Hr(i[y],a[y]))return!1}return!0}function cw(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function uw(i,a){var c=cw(i);i=0;for(var m;c;){if(c.nodeType===3){if(m=i+c.textContent.length,i<=a&&m>=a)return{node:c,offset:a-i};i=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=cw(c)}}function dw(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?dw(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function hw(){for(var i=window,a=kn();a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=kn(i.document)}return a}function Tp(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function mA(i){var a=hw(),c=i.focusedElem,m=i.selectionRange;if(a!==c&&c&&c.ownerDocument&&dw(c.ownerDocument.documentElement,c)){if(m!==null&&Tp(c)){if(a=m.start,i=m.end,i===void 0&&(i=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(i,c.value.length);else if(i=(a=c.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var y=c.textContent.length,b=Math.min(m.start,y);m=m.end===void 0?b:Math.min(m.end,y),!i.extend&&b>m&&(y=m,m=b,b=y),y=uw(c,b);var S=uw(c,m);y&&S&&(i.rangeCount!==1||i.anchorNode!==y.node||i.anchorOffset!==y.offset||i.focusNode!==S.node||i.focusOffset!==S.offset)&&(a=a.createRange(),a.setStart(y.node,y.offset),i.removeAllRanges(),b>m?(i.addRange(a),i.extend(S.node,S.offset)):(a.setEnd(S.node,S.offset),i.addRange(a)))}}for(a=[],i=c;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)i=a[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var gA=u&&"documentMode"in document&&11>=document.documentMode,Ba=null,Sp=null,mc=null,Cp=!1;function fw(i,a,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Cp||Ba==null||Ba!==kn(m)||(m=Ba,"selectionStart"in m&&Tp(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),mc&&pc(mc,m)||(mc=m,m=_d(Sp,"onSelect"),0<m.length&&(a=new Fo("onSelect","select",null,a,c),i.push({event:a,listeners:m}),a.target=Ba)))}function wd(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var za={animationend:wd("Animation","AnimationEnd"),animationiteration:wd("Animation","AnimationIteration"),animationstart:wd("Animation","AnimationStart"),transitionend:wd("Transition","TransitionEnd")},Ip={},pw={};u&&(pw=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function xd(i){if(Ip[i])return Ip[i];if(!za[i])return i;var a=za[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in pw)return Ip[i]=a[c];return i}var mw=xd("animationend"),gw=xd("animationiteration"),yw=xd("animationstart"),vw=xd("transitionend"),ww=new Map,xw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(i,a){ww.set(i,a),o(a,[i])}for(var Rp=0;Rp<xw.length;Rp++){var Ap=xw[Rp],yA=Ap.toLowerCase(),vA=Ap[0].toUpperCase()+Ap.slice(1);Di(yA,"on"+vA)}Di(mw,"onAnimationEnd"),Di(gw,"onAnimationIteration"),Di(yw,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(vw,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wA=new Set("cancel close invalid load scroll toggle".split(" ").concat(gc));function bw(i,a,c){var m=i.type||"unknown-event";i.currentTarget=c,Kl(m,a,void 0,i),i.currentTarget=null}function _w(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var m=i[c],y=m.event;m=m.listeners;e:{var b=void 0;if(a)for(var S=m.length-1;0<=S;S--){var V=m[S],z=V.instance,Q=V.currentTarget;if(V=V.listener,z!==b&&y.isPropagationStopped())break e;bw(y,V,Q),b=z}else for(S=0;S<m.length;S++){if(V=m[S],z=V.instance,Q=V.currentTarget,V=V.listener,z!==b&&y.isPropagationStopped())break e;bw(y,V,Q),b=z}}}if(Dn)throw i=Gt,Dn=!1,Gt=null,i}function ut(i,a){var c=a[Op];c===void 0&&(c=a[Op]=new Set);var m=i+"__bubble";c.has(m)||(Ew(a,i,2,!1),c.add(m))}function Np(i,a,c){var m=0;a&&(m|=4),Ew(c,i,m,a)}var bd="_reactListening"+Math.random().toString(36).slice(2);function yc(i){if(!i[bd]){i[bd]=!0,r.forEach(function(c){c!=="selectionchange"&&(wA.has(c)||Np(c,!1,i),Np(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[bd]||(a[bd]=!0,Np("selectionchange",!1,a))}}function Ew(i,a,c,m){switch(ja(a)){case 1:var y=ws;break;case 4:y=hd;break;default:y=ac}c=y.bind(null,a,c,i),y=void 0,!sn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),m?y!==void 0?i.addEventListener(a,c,{capture:!0,passive:y}):i.addEventListener(a,c,!0):y!==void 0?i.addEventListener(a,c,{passive:y}):i.addEventListener(a,c,!1)}function kp(i,a,c,m,y){var b=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var S=m.tag;if(S===3||S===4){var V=m.stateNode.containerInfo;if(V===y||V.nodeType===8&&V.parentNode===y)break;if(S===4)for(S=m.return;S!==null;){var z=S.tag;if((z===3||z===4)&&(z=S.stateNode.containerInfo,z===y||z.nodeType===8&&z.parentNode===y))return;S=S.return}for(;V!==null;){if(S=Bo(V),S===null)return;if(z=S.tag,z===5||z===6){m=b=S;continue e}V=V.parentNode}}m=m.return}$r(function(){var Q=b,re=Ci(c),ie=[];e:{var ne=ww.get(i);if(ne!==void 0){var ue=Fo,fe=i;switch(i){case"keypress":if(Vo(c)===0)break e;case"keydown":case"keyup":ue=Ze;break;case"focusin":fe="focus",ue=an;break;case"focusout":fe="blur",ue=an;break;case"beforeblur":case"afterblur":ue=an;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=md;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=Es;break;case mw:case gw:case yw:ue=yd;break;case vw:ue=Fa;break;case"scroll":ue=Ma;break;case"wheel":ue=nA;break;case"copy":case"cut":case"paste":ue=f;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=cr}var pe=(a&4)!==0,At=!pe&&i==="scroll",H=pe?ne!==null?ne+"Capture":null:ne;pe=[];for(var $=Q,Y;$!==null;){Y=$;var oe=Y.stateNode;if(Y.tag===5&&oe!==null&&(Y=oe,H!==null&&(oe=lt($,H),oe!=null&&pe.push(vc($,oe,Y)))),At)break;$=$.return}0<pe.length&&(ne=new ue(ne,fe,null,c,re),ie.push({event:ne,listeners:pe}))}}if((a&7)===0){e:{if(ne=i==="mouseover"||i==="pointerover",ue=i==="mouseout"||i==="pointerout",ne&&c!==Ur&&(fe=c.relatedTarget||c.fromElement)&&(Bo(fe)||fe[Js]))break e;if((ue||ne)&&(ne=re.window===re?re:(ne=re.ownerDocument)?ne.defaultView||ne.parentWindow:window,ue?(fe=c.relatedTarget||c.toElement,ue=Q,fe=fe?Bo(fe):null,fe!==null&&(At=Wr(fe),fe!==At||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ue=null,fe=Q),ue!==fe)){if(pe=cc,oe="onMouseLeave",H="onMouseEnter",$="mouse",(i==="pointerout"||i==="pointerover")&&(pe=cr,oe="onPointerLeave",H="onPointerEnter",$="pointer"),At=ue==null?ne:qa(ue),Y=fe==null?ne:qa(fe),ne=new pe(oe,$+"leave",ue,c,re),ne.target=At,ne.relatedTarget=Y,oe=null,Bo(re)===Q&&(pe=new pe(H,$+"enter",fe,c,re),pe.target=Y,pe.relatedTarget=At,oe=pe),At=oe,ue&&fe)t:{for(pe=ue,H=fe,$=0,Y=pe;Y;Y=$a(Y))$++;for(Y=0,oe=H;oe;oe=$a(oe))Y++;for(;0<$-Y;)pe=$a(pe),$--;for(;0<Y-$;)H=$a(H),Y--;for(;$--;){if(pe===H||H!==null&&pe===H.alternate)break t;pe=$a(pe),H=$a(H)}pe=null}else pe=null;ue!==null&&Tw(ie,ne,ue,pe,!1),fe!==null&&At!==null&&Tw(ie,At,fe,pe,!0)}}e:{if(ne=Q?qa(Q):window,ue=ne.nodeName&&ne.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ne.type==="file")var me=cA;else if(rw(ne))if(iw)me=fA;else{me=dA;var _e=uA}else(ue=ne.nodeName)&&ue.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(me=hA);if(me&&(me=me(i,Q))){sw(ie,me,c,re);break e}_e&&_e(i,ne,Q),i==="focusout"&&(_e=ne._wrapperState)&&_e.controlled&&ne.type==="number"&&ft(ne,"number",ne.value)}switch(_e=Q?qa(Q):window,i){case"focusin":(rw(_e)||_e.contentEditable==="true")&&(Ba=_e,Sp=Q,mc=null);break;case"focusout":mc=Sp=Ba=null;break;case"mousedown":Cp=!0;break;case"contextmenu":case"mouseup":case"dragend":Cp=!1,fw(ie,c,re);break;case"selectionchange":if(gA)break;case"keydown":case"keyup":fw(ie,c,re)}var Ee;if(bp)e:{switch(i){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Ua?tw(i,c)&&(Ae="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Ae="onCompositionStart");Ae&&(Jv&&c.locale!=="ko"&&(Ua||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Ua&&(Ee=fd()):(ar=re,Da="value"in ar?ar.value:ar.textContent,Ua=!0)),_e=_d(Q,Ae),0<_e.length&&(Ae=new E(Ae,i,null,c,re),ie.push({event:Ae,listeners:_e}),Ee?Ae.data=Ee:(Ee=nw(c),Ee!==null&&(Ae.data=Ee)))),(Ee=sA?iA(i,c):oA(i,c))&&(Q=_d(Q,"onBeforeInput"),0<Q.length&&(re=new E("onBeforeInput","beforeinput",null,c,re),ie.push({event:re,listeners:Q}),re.data=Ee))}_w(ie,a)})}function vc(i,a,c){return{instance:i,listener:a,currentTarget:c}}function _d(i,a){for(var c=a+"Capture",m=[];i!==null;){var y=i,b=y.stateNode;y.tag===5&&b!==null&&(y=b,b=lt(i,c),b!=null&&m.unshift(vc(i,b,y)),b=lt(i,a),b!=null&&m.push(vc(i,b,y))),i=i.return}return m}function $a(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Tw(i,a,c,m,y){for(var b=a._reactName,S=[];c!==null&&c!==m;){var V=c,z=V.alternate,Q=V.stateNode;if(z!==null&&z===m)break;V.tag===5&&Q!==null&&(V=Q,y?(z=lt(c,b),z!=null&&S.unshift(vc(c,z,V))):y||(z=lt(c,b),z!=null&&S.push(vc(c,z,V)))),c=c.return}S.length!==0&&i.push({event:a,listeners:S})}var xA=/\r\n?/g,bA=/\u0000|\uFFFD/g;function Sw(i){return(typeof i=="string"?i:""+i).replace(xA,`
`).replace(bA,"")}function Ed(i,a,c){if(a=Sw(a),Sw(i)!==a&&c)throw Error(n(425))}function Td(){}var Pp=null,jp=null;function Dp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Mp=typeof setTimeout=="function"?setTimeout:void 0,_A=typeof clearTimeout=="function"?clearTimeout:void 0,Cw=typeof Promise=="function"?Promise:void 0,EA=typeof queueMicrotask=="function"?queueMicrotask:typeof Cw<"u"?function(i){return Cw.resolve(null).then(i).catch(TA)}:Mp;function TA(i){setTimeout(function(){throw i})}function Lp(i,a){var c=a,m=0;do{var y=c.nextSibling;if(i.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(m===0){i.removeChild(y),ki(a);return}m--}else c!=="$"&&c!=="$?"&&c!=="$!"||m++;c=y}while(c);ki(a)}function Mi(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function Iw(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return i;a--}else c==="/$"&&a++}i=i.previousSibling}return null}var Wa=Math.random().toString(36).slice(2),Ss="__reactFiber$"+Wa,wc="__reactProps$"+Wa,Js="__reactContainer$"+Wa,Op="__reactEvents$"+Wa,SA="__reactListeners$"+Wa,CA="__reactHandles$"+Wa;function Bo(i){var a=i[Ss];if(a)return a;for(var c=i.parentNode;c;){if(a=c[Js]||c[Ss]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=Iw(i);i!==null;){if(c=i[Ss])return c;i=Iw(i)}return a}i=c,c=i.parentNode}return null}function xc(i){return i=i[Ss]||i[Js],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function qa(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function Sd(i){return i[wc]||null}var Vp=[],Ha=-1;function Li(i){return{current:i}}function dt(i){0>Ha||(i.current=Vp[Ha],Vp[Ha]=null,Ha--)}function it(i,a){Ha++,Vp[Ha]=i.current,i.current=a}var Oi={},xn=Li(Oi),$n=Li(!1),zo=Oi;function Ga(i,a){var c=i.type.contextTypes;if(!c)return Oi;var m=i.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var y={},b;for(b in c)y[b]=a[b];return m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=y),y}function Wn(i){return i=i.childContextTypes,i!=null}function Cd(){dt($n),dt(xn)}function Rw(i,a,c){if(xn.current!==Oi)throw Error(n(168));it(xn,a),it($n,c)}function Aw(i,a,c){var m=i.stateNode;if(a=a.childContextTypes,typeof m.getChildContext!="function")return c;m=m.getChildContext();for(var y in m)if(!(y in a))throw Error(n(108,Ue(i)||"Unknown",y));return Z({},c,m)}function Id(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Oi,zo=xn.current,it(xn,i),it($n,$n.current),!0}function Nw(i,a,c){var m=i.stateNode;if(!m)throw Error(n(169));c?(i=Aw(i,a,zo),m.__reactInternalMemoizedMergedChildContext=i,dt($n),dt(xn),it(xn,i)):dt($n),it($n,c)}var Zs=null,Rd=!1,Fp=!1;function kw(i){Zs===null?Zs=[i]:Zs.push(i)}function IA(i){Rd=!0,kw(i)}function Vi(){if(!Fp&&Zs!==null){Fp=!0;var i=0,a=We;try{var c=Zs;for(We=1;i<c.length;i++){var m=c[i];do m=m(!0);while(m!==null)}Zs=null,Rd=!1}catch(y){throw Zs!==null&&(Zs=Zs.slice(i+1)),Ql(Ia,Vi),y}finally{We=a,Fp=!1}}return null}var Ka=[],Ya=0,Ad=null,Nd=0,xr=[],br=0,$o=null,ei=1,ti="";function Wo(i,a){Ka[Ya++]=Nd,Ka[Ya++]=Ad,Ad=i,Nd=a}function Pw(i,a,c){xr[br++]=ei,xr[br++]=ti,xr[br++]=$o,$o=i;var m=ei;i=ti;var y=32-ir(m)-1;m&=~(1<<y),c+=1;var b=32-ir(a)+y;if(30<b){var S=y-y%5;b=(m&(1<<S)-1).toString(32),m>>=S,y-=S,ei=1<<32-ir(a)+y|c<<y|m,ti=b+i}else ei=1<<b|c<<y|m,ti=i}function Up(i){i.return!==null&&(Wo(i,1),Pw(i,1,0))}function Bp(i){for(;i===Ad;)Ad=Ka[--Ya],Ka[Ya]=null,Nd=Ka[--Ya],Ka[Ya]=null;for(;i===$o;)$o=xr[--br],xr[br]=null,ti=xr[--br],xr[br]=null,ei=xr[--br],xr[br]=null}var ur=null,dr=null,pt=!1,Gr=null;function jw(i,a){var c=Sr(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=i,a=i.deletions,a===null?(i.deletions=[c],i.flags|=16):a.push(c)}function Dw(i,a){switch(i.tag){case 5:var c=i.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,ur=i,dr=Mi(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,ur=i,dr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=$o!==null?{id:ei,overflow:ti}:null,i.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=Sr(18,null,null,0),c.stateNode=a,c.return=i,i.child=c,ur=i,dr=null,!0):!1;default:return!1}}function zp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function $p(i){if(pt){var a=dr;if(a){var c=a;if(!Dw(i,a)){if(zp(i))throw Error(n(418));a=Mi(c.nextSibling);var m=ur;a&&Dw(i,a)?jw(m,c):(i.flags=i.flags&-4097|2,pt=!1,ur=i)}}else{if(zp(i))throw Error(n(418));i.flags=i.flags&-4097|2,pt=!1,ur=i}}}function Mw(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;ur=i}function kd(i){if(i!==ur)return!1;if(!pt)return Mw(i),pt=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!Dp(i.type,i.memoizedProps)),a&&(a=dr)){if(zp(i))throw Lw(),Error(n(418));for(;a;)jw(i,a),a=Mi(a.nextSibling)}if(Mw(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(a===0){dr=Mi(i.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}i=i.nextSibling}dr=null}}else dr=ur?Mi(i.stateNode.nextSibling):null;return!0}function Lw(){for(var i=dr;i;)i=Mi(i.nextSibling)}function Qa(){dr=ur=null,pt=!1}function Wp(i){Gr===null?Gr=[i]:Gr.push(i)}var RA=W.ReactCurrentBatchConfig;function bc(i,a,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var m=c.stateNode}if(!m)throw Error(n(147,i));var y=m,b=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===b?a.ref:(a=function(S){var V=y.refs;S===null?delete V[b]:V[b]=S},a._stringRef=b,a)}if(typeof i!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,i))}return i}function Pd(i,a){throw i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function Ow(i){var a=i._init;return a(i._payload)}function Vw(i){function a(H,$){if(i){var Y=H.deletions;Y===null?(H.deletions=[$],H.flags|=16):Y.push($)}}function c(H,$){if(!i)return null;for(;$!==null;)a(H,$),$=$.sibling;return null}function m(H,$){for(H=new Map;$!==null;)$.key!==null?H.set($.key,$):H.set($.index,$),$=$.sibling;return H}function y(H,$){return H=Hi(H,$),H.index=0,H.sibling=null,H}function b(H,$,Y){return H.index=Y,i?(Y=H.alternate,Y!==null?(Y=Y.index,Y<$?(H.flags|=2,$):Y):(H.flags|=2,$)):(H.flags|=1048576,$)}function S(H){return i&&H.alternate===null&&(H.flags|=2),H}function V(H,$,Y,oe){return $===null||$.tag!==6?($=Mm(Y,H.mode,oe),$.return=H,$):($=y($,Y),$.return=H,$)}function z(H,$,Y,oe){var me=Y.type;return me===I?re(H,$,Y.props.children,oe,Y.key):$!==null&&($.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===ht&&Ow(me)===$.type)?(oe=y($,Y.props),oe.ref=bc(H,$,Y),oe.return=H,oe):(oe=nh(Y.type,Y.key,Y.props,null,H.mode,oe),oe.ref=bc(H,$,Y),oe.return=H,oe)}function Q(H,$,Y,oe){return $===null||$.tag!==4||$.stateNode.containerInfo!==Y.containerInfo||$.stateNode.implementation!==Y.implementation?($=Lm(Y,H.mode,oe),$.return=H,$):($=y($,Y.children||[]),$.return=H,$)}function re(H,$,Y,oe,me){return $===null||$.tag!==7?($=Jo(Y,H.mode,oe,me),$.return=H,$):($=y($,Y),$.return=H,$)}function ie(H,$,Y){if(typeof $=="string"&&$!==""||typeof $=="number")return $=Mm(""+$,H.mode,Y),$.return=H,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case K:return Y=nh($.type,$.key,$.props,null,H.mode,Y),Y.ref=bc(H,null,$),Y.return=H,Y;case B:return $=Lm($,H.mode,Y),$.return=H,$;case ht:var oe=$._init;return ie(H,oe($._payload),Y)}if(Je($)||le($))return $=Jo($,H.mode,Y,null),$.return=H,$;Pd(H,$)}return null}function ne(H,$,Y,oe){var me=$!==null?$.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return me!==null?null:V(H,$,""+Y,oe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case K:return Y.key===me?z(H,$,Y,oe):null;case B:return Y.key===me?Q(H,$,Y,oe):null;case ht:return me=Y._init,ne(H,$,me(Y._payload),oe)}if(Je(Y)||le(Y))return me!==null?null:re(H,$,Y,oe,null);Pd(H,Y)}return null}function ue(H,$,Y,oe,me){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return H=H.get(Y)||null,V($,H,""+oe,me);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case K:return H=H.get(oe.key===null?Y:oe.key)||null,z($,H,oe,me);case B:return H=H.get(oe.key===null?Y:oe.key)||null,Q($,H,oe,me);case ht:var _e=oe._init;return ue(H,$,Y,_e(oe._payload),me)}if(Je(oe)||le(oe))return H=H.get(Y)||null,re($,H,oe,me,null);Pd($,oe)}return null}function fe(H,$,Y,oe){for(var me=null,_e=null,Ee=$,Ae=$=0,Qt=null;Ee!==null&&Ae<Y.length;Ae++){Ee.index>Ae?(Qt=Ee,Ee=null):Qt=Ee.sibling;var Ke=ne(H,Ee,Y[Ae],oe);if(Ke===null){Ee===null&&(Ee=Qt);break}i&&Ee&&Ke.alternate===null&&a(H,Ee),$=b(Ke,$,Ae),_e===null?me=Ke:_e.sibling=Ke,_e=Ke,Ee=Qt}if(Ae===Y.length)return c(H,Ee),pt&&Wo(H,Ae),me;if(Ee===null){for(;Ae<Y.length;Ae++)Ee=ie(H,Y[Ae],oe),Ee!==null&&($=b(Ee,$,Ae),_e===null?me=Ee:_e.sibling=Ee,_e=Ee);return pt&&Wo(H,Ae),me}for(Ee=m(H,Ee);Ae<Y.length;Ae++)Qt=ue(Ee,H,Ae,Y[Ae],oe),Qt!==null&&(i&&Qt.alternate!==null&&Ee.delete(Qt.key===null?Ae:Qt.key),$=b(Qt,$,Ae),_e===null?me=Qt:_e.sibling=Qt,_e=Qt);return i&&Ee.forEach(function(Gi){return a(H,Gi)}),pt&&Wo(H,Ae),me}function pe(H,$,Y,oe){var me=le(Y);if(typeof me!="function")throw Error(n(150));if(Y=me.call(Y),Y==null)throw Error(n(151));for(var _e=me=null,Ee=$,Ae=$=0,Qt=null,Ke=Y.next();Ee!==null&&!Ke.done;Ae++,Ke=Y.next()){Ee.index>Ae?(Qt=Ee,Ee=null):Qt=Ee.sibling;var Gi=ne(H,Ee,Ke.value,oe);if(Gi===null){Ee===null&&(Ee=Qt);break}i&&Ee&&Gi.alternate===null&&a(H,Ee),$=b(Gi,$,Ae),_e===null?me=Gi:_e.sibling=Gi,_e=Gi,Ee=Qt}if(Ke.done)return c(H,Ee),pt&&Wo(H,Ae),me;if(Ee===null){for(;!Ke.done;Ae++,Ke=Y.next())Ke=ie(H,Ke.value,oe),Ke!==null&&($=b(Ke,$,Ae),_e===null?me=Ke:_e.sibling=Ke,_e=Ke);return pt&&Wo(H,Ae),me}for(Ee=m(H,Ee);!Ke.done;Ae++,Ke=Y.next())Ke=ue(Ee,H,Ae,Ke.value,oe),Ke!==null&&(i&&Ke.alternate!==null&&Ee.delete(Ke.key===null?Ae:Ke.key),$=b(Ke,$,Ae),_e===null?me=Ke:_e.sibling=Ke,_e=Ke);return i&&Ee.forEach(function(aN){return a(H,aN)}),pt&&Wo(H,Ae),me}function At(H,$,Y,oe){if(typeof Y=="object"&&Y!==null&&Y.type===I&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case K:e:{for(var me=Y.key,_e=$;_e!==null;){if(_e.key===me){if(me=Y.type,me===I){if(_e.tag===7){c(H,_e.sibling),$=y(_e,Y.props.children),$.return=H,H=$;break e}}else if(_e.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===ht&&Ow(me)===_e.type){c(H,_e.sibling),$=y(_e,Y.props),$.ref=bc(H,_e,Y),$.return=H,H=$;break e}c(H,_e);break}else a(H,_e);_e=_e.sibling}Y.type===I?($=Jo(Y.props.children,H.mode,oe,Y.key),$.return=H,H=$):(oe=nh(Y.type,Y.key,Y.props,null,H.mode,oe),oe.ref=bc(H,$,Y),oe.return=H,H=oe)}return S(H);case B:e:{for(_e=Y.key;$!==null;){if($.key===_e)if($.tag===4&&$.stateNode.containerInfo===Y.containerInfo&&$.stateNode.implementation===Y.implementation){c(H,$.sibling),$=y($,Y.children||[]),$.return=H,H=$;break e}else{c(H,$);break}else a(H,$);$=$.sibling}$=Lm(Y,H.mode,oe),$.return=H,H=$}return S(H);case ht:return _e=Y._init,At(H,$,_e(Y._payload),oe)}if(Je(Y))return fe(H,$,Y,oe);if(le(Y))return pe(H,$,Y,oe);Pd(H,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,$!==null&&$.tag===6?(c(H,$.sibling),$=y($,Y),$.return=H,H=$):(c(H,$),$=Mm(Y,H.mode,oe),$.return=H,H=$),S(H)):c(H,$)}return At}var Xa=Vw(!0),Fw=Vw(!1),jd=Li(null),Dd=null,Ja=null,qp=null;function Hp(){qp=Ja=Dd=null}function Gp(i){var a=jd.current;dt(jd),i._currentValue=a}function Kp(i,a,c){for(;i!==null;){var m=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),i===c)break;i=i.return}}function Za(i,a){Dd=i,qp=Ja=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(qn=!0),i.firstContext=null)}function _r(i){var a=i._currentValue;if(qp!==i)if(i={context:i,memoizedValue:a,next:null},Ja===null){if(Dd===null)throw Error(n(308));Ja=i,Dd.dependencies={lanes:0,firstContext:i}}else Ja=Ja.next=i;return a}var qo=null;function Yp(i){qo===null?qo=[i]:qo.push(i)}function Uw(i,a,c,m){var y=a.interleaved;return y===null?(c.next=c,Yp(a)):(c.next=y.next,y.next=c),a.interleaved=c,ni(i,m)}function ni(i,a){i.lanes|=a;var c=i.alternate;for(c!==null&&(c.lanes|=a),c=i,i=i.return;i!==null;)i.childLanes|=a,c=i.alternate,c!==null&&(c.childLanes|=a),c=i,i=i.return;return c.tag===3?c.stateNode:null}var Fi=!1;function Qp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bw(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ri(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Ui(i,a,c){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(Ge&2)!==0){var y=m.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),m.pending=a,ni(i,c)}return y=m.interleaved,y===null?(a.next=a,Yp(m)):(a.next=y.next,y.next=a),m.interleaved=a,ni(i,c)}function Md(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var m=a.lanes;m&=i.pendingLanes,c|=m,a.lanes=c,nc(i,c)}}function zw(i,a){var c=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var y=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var S={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};b===null?y=b=S:b=b.next=S,c=c.next}while(c!==null);b===null?y=b=a:b=b.next=a}else y=b=a;c={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:m.shared,effects:m.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}function Ld(i,a,c,m){var y=i.updateQueue;Fi=!1;var b=y.firstBaseUpdate,S=y.lastBaseUpdate,V=y.shared.pending;if(V!==null){y.shared.pending=null;var z=V,Q=z.next;z.next=null,S===null?b=Q:S.next=Q,S=z;var re=i.alternate;re!==null&&(re=re.updateQueue,V=re.lastBaseUpdate,V!==S&&(V===null?re.firstBaseUpdate=Q:V.next=Q,re.lastBaseUpdate=z))}if(b!==null){var ie=y.baseState;S=0,re=Q=z=null,V=b;do{var ne=V.lane,ue=V.eventTime;if((m&ne)===ne){re!==null&&(re=re.next={eventTime:ue,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var fe=i,pe=V;switch(ne=a,ue=c,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){ie=fe.call(ue,ie,ne);break e}ie=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,ne=typeof fe=="function"?fe.call(ue,ie,ne):fe,ne==null)break e;ie=Z({},ie,ne);break e;case 2:Fi=!0}}V.callback!==null&&V.lane!==0&&(i.flags|=64,ne=y.effects,ne===null?y.effects=[V]:ne.push(V))}else ue={eventTime:ue,lane:ne,tag:V.tag,payload:V.payload,callback:V.callback,next:null},re===null?(Q=re=ue,z=ie):re=re.next=ue,S|=ne;if(V=V.next,V===null){if(V=y.shared.pending,V===null)break;ne=V,V=ne.next,ne.next=null,y.lastBaseUpdate=ne,y.shared.pending=null}}while(!0);if(re===null&&(z=ie),y.baseState=z,y.firstBaseUpdate=Q,y.lastBaseUpdate=re,a=y.shared.interleaved,a!==null){y=a;do S|=y.lane,y=y.next;while(y!==a)}else b===null&&(y.shared.lanes=0);Ko|=S,i.lanes=S,i.memoizedState=ie}}function $w(i,a,c){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var m=i[a],y=m.callback;if(y!==null){if(m.callback=null,m=c,typeof y!="function")throw Error(n(191,y));y.call(m)}}}var _c={},Cs=Li(_c),Ec=Li(_c),Tc=Li(_c);function Ho(i){if(i===_c)throw Error(n(174));return i}function Xp(i,a){switch(it(Tc,a),it(Ec,i),it(Cs,_c),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:rr(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=rr(a,i)}dt(Cs),it(Cs,a)}function el(){dt(Cs),dt(Ec),dt(Tc)}function Ww(i){Ho(Tc.current);var a=Ho(Cs.current),c=rr(a,i.type);a!==c&&(it(Ec,i),it(Cs,c))}function Jp(i){Ec.current===i&&(dt(Cs),dt(Ec))}var yt=Li(0);function Od(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Zp=[];function em(){for(var i=0;i<Zp.length;i++)Zp[i]._workInProgressVersionPrimary=null;Zp.length=0}var Vd=W.ReactCurrentDispatcher,tm=W.ReactCurrentBatchConfig,Go=0,vt=null,zt=null,Kt=null,Fd=!1,Sc=!1,Cc=0,AA=0;function bn(){throw Error(n(321))}function nm(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!Hr(i[c],a[c]))return!1;return!0}function rm(i,a,c,m,y,b){if(Go=b,vt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Vd.current=i===null||i.memoizedState===null?jA:DA,i=c(m,y),Sc){b=0;do{if(Sc=!1,Cc=0,25<=b)throw Error(n(301));b+=1,Kt=zt=null,a.updateQueue=null,Vd.current=MA,i=c(m,y)}while(Sc)}if(Vd.current=zd,a=zt!==null&&zt.next!==null,Go=0,Kt=zt=vt=null,Fd=!1,a)throw Error(n(300));return i}function sm(){var i=Cc!==0;return Cc=0,i}function Is(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?vt.memoizedState=Kt=i:Kt=Kt.next=i,Kt}function Er(){if(zt===null){var i=vt.alternate;i=i!==null?i.memoizedState:null}else i=zt.next;var a=Kt===null?vt.memoizedState:Kt.next;if(a!==null)Kt=a,zt=i;else{if(i===null)throw Error(n(310));zt=i,i={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Kt===null?vt.memoizedState=Kt=i:Kt=Kt.next=i}return Kt}function Ic(i,a){return typeof a=="function"?a(i):a}function im(i){var a=Er(),c=a.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var m=zt,y=m.baseQueue,b=c.pending;if(b!==null){if(y!==null){var S=y.next;y.next=b.next,b.next=S}m.baseQueue=y=b,c.pending=null}if(y!==null){b=y.next,m=m.baseState;var V=S=null,z=null,Q=b;do{var re=Q.lane;if((Go&re)===re)z!==null&&(z=z.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),m=Q.hasEagerState?Q.eagerState:i(m,Q.action);else{var ie={lane:re,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};z===null?(V=z=ie,S=m):z=z.next=ie,vt.lanes|=re,Ko|=re}Q=Q.next}while(Q!==null&&Q!==b);z===null?S=m:z.next=V,Hr(m,a.memoizedState)||(qn=!0),a.memoizedState=m,a.baseState=S,a.baseQueue=z,c.lastRenderedState=m}if(i=c.interleaved,i!==null){y=i;do b=y.lane,vt.lanes|=b,Ko|=b,y=y.next;while(y!==i)}else y===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function om(i){var a=Er(),c=a.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var m=c.dispatch,y=c.pending,b=a.memoizedState;if(y!==null){c.pending=null;var S=y=y.next;do b=i(b,S.action),S=S.next;while(S!==y);Hr(b,a.memoizedState)||(qn=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),c.lastRenderedState=b}return[b,m]}function qw(){}function Hw(i,a){var c=vt,m=Er(),y=a(),b=!Hr(m.memoizedState,y);if(b&&(m.memoizedState=y,qn=!0),m=m.queue,am(Yw.bind(null,c,m,i),[i]),m.getSnapshot!==a||b||Kt!==null&&Kt.memoizedState.tag&1){if(c.flags|=2048,Rc(9,Kw.bind(null,c,m,y,a),void 0,null),Yt===null)throw Error(n(349));(Go&30)!==0||Gw(c,a,y)}return y}function Gw(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=vt.updateQueue,a===null?(a={lastEffect:null,stores:null},vt.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function Kw(i,a,c,m){a.value=c,a.getSnapshot=m,Qw(a)&&Xw(i)}function Yw(i,a,c){return c(function(){Qw(a)&&Xw(i)})}function Qw(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!Hr(i,c)}catch{return!0}}function Xw(i){var a=ni(i,1);a!==null&&Xr(a,i,1,-1)}function Jw(i){var a=Is();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ic,lastRenderedState:i},a.queue=i,i=i.dispatch=PA.bind(null,vt,i),[a.memoizedState,i]}function Rc(i,a,c,m){return i={tag:i,create:a,destroy:c,deps:m,next:null},a=vt.updateQueue,a===null?(a={lastEffect:null,stores:null},vt.updateQueue=a,a.lastEffect=i.next=i):(c=a.lastEffect,c===null?a.lastEffect=i.next=i:(m=c.next,c.next=i,i.next=m,a.lastEffect=i)),i}function Zw(){return Er().memoizedState}function Ud(i,a,c,m){var y=Is();vt.flags|=i,y.memoizedState=Rc(1|a,c,void 0,m===void 0?null:m)}function Bd(i,a,c,m){var y=Er();m=m===void 0?null:m;var b=void 0;if(zt!==null){var S=zt.memoizedState;if(b=S.destroy,m!==null&&nm(m,S.deps)){y.memoizedState=Rc(a,c,b,m);return}}vt.flags|=i,y.memoizedState=Rc(1|a,c,b,m)}function ex(i,a){return Ud(8390656,8,i,a)}function am(i,a){return Bd(2048,8,i,a)}function tx(i,a){return Bd(4,2,i,a)}function nx(i,a){return Bd(4,4,i,a)}function rx(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function sx(i,a,c){return c=c!=null?c.concat([i]):null,Bd(4,4,rx.bind(null,a,i),c)}function lm(){}function ix(i,a){var c=Er();a=a===void 0?null:a;var m=c.memoizedState;return m!==null&&a!==null&&nm(a,m[1])?m[0]:(c.memoizedState=[i,a],i)}function ox(i,a){var c=Er();a=a===void 0?null:a;var m=c.memoizedState;return m!==null&&a!==null&&nm(a,m[1])?m[0]:(i=i(),c.memoizedState=[i,a],i)}function ax(i,a,c){return(Go&21)===0?(i.baseState&&(i.baseState=!1,qn=!0),i.memoizedState=c):(Hr(c,a)||(c=ec(),vt.lanes|=c,Ko|=c,i.baseState=!0),a)}function NA(i,a){var c=We;We=c!==0&&4>c?c:4,i(!0);var m=tm.transition;tm.transition={};try{i(!1),a()}finally{We=c,tm.transition=m}}function lx(){return Er().memoizedState}function kA(i,a,c){var m=Wi(i);if(c={lane:m,action:c,hasEagerState:!1,eagerState:null,next:null},cx(i))ux(a,c);else if(c=Uw(i,a,c,m),c!==null){var y=Ln();Xr(c,i,m,y),dx(c,a,m)}}function PA(i,a,c){var m=Wi(i),y={lane:m,action:c,hasEagerState:!1,eagerState:null,next:null};if(cx(i))ux(a,y);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var S=a.lastRenderedState,V=b(S,c);if(y.hasEagerState=!0,y.eagerState=V,Hr(V,S)){var z=a.interleaved;z===null?(y.next=y,Yp(a)):(y.next=z.next,z.next=y),a.interleaved=y;return}}catch{}finally{}c=Uw(i,a,y,m),c!==null&&(y=Ln(),Xr(c,i,m,y),dx(c,a,m))}}function cx(i){var a=i.alternate;return i===vt||a!==null&&a===vt}function ux(i,a){Sc=Fd=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function dx(i,a,c){if((c&4194240)!==0){var m=a.lanes;m&=i.pendingLanes,c|=m,a.lanes=c,nc(i,c)}}var zd={readContext:_r,useCallback:bn,useContext:bn,useEffect:bn,useImperativeHandle:bn,useInsertionEffect:bn,useLayoutEffect:bn,useMemo:bn,useReducer:bn,useRef:bn,useState:bn,useDebugValue:bn,useDeferredValue:bn,useTransition:bn,useMutableSource:bn,useSyncExternalStore:bn,useId:bn,unstable_isNewReconciler:!1},jA={readContext:_r,useCallback:function(i,a){return Is().memoizedState=[i,a===void 0?null:a],i},useContext:_r,useEffect:ex,useImperativeHandle:function(i,a,c){return c=c!=null?c.concat([i]):null,Ud(4194308,4,rx.bind(null,a,i),c)},useLayoutEffect:function(i,a){return Ud(4194308,4,i,a)},useInsertionEffect:function(i,a){return Ud(4,2,i,a)},useMemo:function(i,a){var c=Is();return a=a===void 0?null:a,i=i(),c.memoizedState=[i,a],i},useReducer:function(i,a,c){var m=Is();return a=c!==void 0?c(a):a,m.memoizedState=m.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},m.queue=i,i=i.dispatch=kA.bind(null,vt,i),[m.memoizedState,i]},useRef:function(i){var a=Is();return i={current:i},a.memoizedState=i},useState:Jw,useDebugValue:lm,useDeferredValue:function(i){return Is().memoizedState=i},useTransition:function(){var i=Jw(!1),a=i[0];return i=NA.bind(null,i[1]),Is().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,c){var m=vt,y=Is();if(pt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=a(),Yt===null)throw Error(n(349));(Go&30)!==0||Gw(m,a,c)}y.memoizedState=c;var b={value:c,getSnapshot:a};return y.queue=b,ex(Yw.bind(null,m,b,i),[i]),m.flags|=2048,Rc(9,Kw.bind(null,m,b,c,a),void 0,null),c},useId:function(){var i=Is(),a=Yt.identifierPrefix;if(pt){var c=ti,m=ei;c=(m&~(1<<32-ir(m)-1)).toString(32)+c,a=":"+a+"R"+c,c=Cc++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=AA++,a=":"+a+"r"+c.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},DA={readContext:_r,useCallback:ix,useContext:_r,useEffect:am,useImperativeHandle:sx,useInsertionEffect:tx,useLayoutEffect:nx,useMemo:ox,useReducer:im,useRef:Zw,useState:function(){return im(Ic)},useDebugValue:lm,useDeferredValue:function(i){var a=Er();return ax(a,zt.memoizedState,i)},useTransition:function(){var i=im(Ic)[0],a=Er().memoizedState;return[i,a]},useMutableSource:qw,useSyncExternalStore:Hw,useId:lx,unstable_isNewReconciler:!1},MA={readContext:_r,useCallback:ix,useContext:_r,useEffect:am,useImperativeHandle:sx,useInsertionEffect:tx,useLayoutEffect:nx,useMemo:ox,useReducer:om,useRef:Zw,useState:function(){return om(Ic)},useDebugValue:lm,useDeferredValue:function(i){var a=Er();return zt===null?a.memoizedState=i:ax(a,zt.memoizedState,i)},useTransition:function(){var i=om(Ic)[0],a=Er().memoizedState;return[i,a]},useMutableSource:qw,useSyncExternalStore:Hw,useId:lx,unstable_isNewReconciler:!1};function Kr(i,a){if(i&&i.defaultProps){a=Z({},a),i=i.defaultProps;for(var c in i)a[c]===void 0&&(a[c]=i[c]);return a}return a}function cm(i,a,c,m){a=i.memoizedState,c=c(m,a),c=c==null?a:Z({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var $d={isMounted:function(i){return(i=i._reactInternals)?Wr(i)===i:!1},enqueueSetState:function(i,a,c){i=i._reactInternals;var m=Ln(),y=Wi(i),b=ri(m,y);b.payload=a,c!=null&&(b.callback=c),a=Ui(i,b,y),a!==null&&(Xr(a,i,y,m),Md(a,i,y))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var m=Ln(),y=Wi(i),b=ri(m,y);b.tag=1,b.payload=a,c!=null&&(b.callback=c),a=Ui(i,b,y),a!==null&&(Xr(a,i,y,m),Md(a,i,y))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=Ln(),m=Wi(i),y=ri(c,m);y.tag=2,a!=null&&(y.callback=a),a=Ui(i,y,m),a!==null&&(Xr(a,i,m,c),Md(a,i,m))}};function hx(i,a,c,m,y,b,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,b,S):a.prototype&&a.prototype.isPureReactComponent?!pc(c,m)||!pc(y,b):!0}function fx(i,a,c){var m=!1,y=Oi,b=a.contextType;return typeof b=="object"&&b!==null?b=_r(b):(y=Wn(a)?zo:xn.current,m=a.contextTypes,b=(m=m!=null)?Ga(i,y):Oi),a=new a(c,b),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=$d,i.stateNode=a,a._reactInternals=i,m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=y,i.__reactInternalMemoizedMaskedChildContext=b),a}function px(i,a,c,m){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,m),a.state!==i&&$d.enqueueReplaceState(a,a.state,null)}function um(i,a,c,m){var y=i.stateNode;y.props=c,y.state=i.memoizedState,y.refs={},Qp(i);var b=a.contextType;typeof b=="object"&&b!==null?y.context=_r(b):(b=Wn(a)?zo:xn.current,y.context=Ga(i,b)),y.state=i.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(cm(i,a,b,c),y.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&$d.enqueueReplaceState(y,y.state,null),Ld(i,c,y,m),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308)}function tl(i,a){try{var c="",m=a;do c+=Pe(m),m=m.return;while(m);var y=c}catch(b){y=`
Error generating stack: `+b.message+`
`+b.stack}return{value:i,source:a,stack:y,digest:null}}function dm(i,a,c){return{value:i,source:null,stack:c??null,digest:a??null}}function hm(i,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var LA=typeof WeakMap=="function"?WeakMap:Map;function mx(i,a,c){c=ri(-1,c),c.tag=3,c.payload={element:null};var m=a.value;return c.callback=function(){Qd||(Qd=!0,Im=m),hm(i,a)},c}function gx(i,a,c){c=ri(-1,c),c.tag=3;var m=i.type.getDerivedStateFromError;if(typeof m=="function"){var y=a.value;c.payload=function(){return m(y)},c.callback=function(){hm(i,a)}}var b=i.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(c.callback=function(){hm(i,a),typeof m!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var S=a.stack;this.componentDidCatch(a.value,{componentStack:S!==null?S:""})}),c}function yx(i,a,c){var m=i.pingCache;if(m===null){m=i.pingCache=new LA;var y=new Set;m.set(a,y)}else y=m.get(a),y===void 0&&(y=new Set,m.set(a,y));y.has(c)||(y.add(c),i=QA.bind(null,i,a,c),a.then(i,i))}function vx(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function wx(i,a,c,m,y){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=ri(-1,1),a.tag=2,Ui(c,a,1))),c.lanes|=1),i):(i.flags|=65536,i.lanes=y,i)}var OA=W.ReactCurrentOwner,qn=!1;function Mn(i,a,c,m){a.child=i===null?Fw(a,null,c,m):Xa(a,i.child,c,m)}function xx(i,a,c,m,y){c=c.render;var b=a.ref;return Za(a,y),m=rm(i,a,c,m,b,y),c=sm(),i!==null&&!qn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,si(i,a,y)):(pt&&c&&Up(a),a.flags|=1,Mn(i,a,m,y),a.child)}function bx(i,a,c,m,y){if(i===null){var b=c.type;return typeof b=="function"&&!Dm(b)&&b.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=b,_x(i,a,b,m,y)):(i=nh(c.type,null,m,a,a.mode,y),i.ref=a.ref,i.return=a,a.child=i)}if(b=i.child,(i.lanes&y)===0){var S=b.memoizedProps;if(c=c.compare,c=c!==null?c:pc,c(S,m)&&i.ref===a.ref)return si(i,a,y)}return a.flags|=1,i=Hi(b,m),i.ref=a.ref,i.return=a,a.child=i}function _x(i,a,c,m,y){if(i!==null){var b=i.memoizedProps;if(pc(b,m)&&i.ref===a.ref)if(qn=!1,a.pendingProps=m=b,(i.lanes&y)!==0)(i.flags&131072)!==0&&(qn=!0);else return a.lanes=i.lanes,si(i,a,y)}return fm(i,a,c,m,y)}function Ex(i,a,c){var m=a.pendingProps,y=m.children,b=i!==null?i.memoizedState:null;if(m.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(rl,hr),hr|=c;else{if((c&1073741824)===0)return i=b!==null?b.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,it(rl,hr),hr|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=b!==null?b.baseLanes:c,it(rl,hr),hr|=m}else b!==null?(m=b.baseLanes|c,a.memoizedState=null):m=c,it(rl,hr),hr|=m;return Mn(i,a,y,c),a.child}function Tx(i,a){var c=a.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function fm(i,a,c,m,y){var b=Wn(c)?zo:xn.current;return b=Ga(a,b),Za(a,y),c=rm(i,a,c,m,b,y),m=sm(),i!==null&&!qn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,si(i,a,y)):(pt&&m&&Up(a),a.flags|=1,Mn(i,a,c,y),a.child)}function Sx(i,a,c,m,y){if(Wn(c)){var b=!0;Id(a)}else b=!1;if(Za(a,y),a.stateNode===null)qd(i,a),fx(a,c,m),um(a,c,m,y),m=!0;else if(i===null){var S=a.stateNode,V=a.memoizedProps;S.props=V;var z=S.context,Q=c.contextType;typeof Q=="object"&&Q!==null?Q=_r(Q):(Q=Wn(c)?zo:xn.current,Q=Ga(a,Q));var re=c.getDerivedStateFromProps,ie=typeof re=="function"||typeof S.getSnapshotBeforeUpdate=="function";ie||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(V!==m||z!==Q)&&px(a,S,m,Q),Fi=!1;var ne=a.memoizedState;S.state=ne,Ld(a,m,S,y),z=a.memoizedState,V!==m||ne!==z||$n.current||Fi?(typeof re=="function"&&(cm(a,c,re,m),z=a.memoizedState),(V=Fi||hx(a,c,V,m,ne,z,Q))?(ie||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(a.flags|=4194308)):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=z),S.props=m,S.state=z,S.context=Q,m=V):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{S=a.stateNode,Bw(i,a),V=a.memoizedProps,Q=a.type===a.elementType?V:Kr(a.type,V),S.props=Q,ie=a.pendingProps,ne=S.context,z=c.contextType,typeof z=="object"&&z!==null?z=_r(z):(z=Wn(c)?zo:xn.current,z=Ga(a,z));var ue=c.getDerivedStateFromProps;(re=typeof ue=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(V!==ie||ne!==z)&&px(a,S,m,z),Fi=!1,ne=a.memoizedState,S.state=ne,Ld(a,m,S,y);var fe=a.memoizedState;V!==ie||ne!==fe||$n.current||Fi?(typeof ue=="function"&&(cm(a,c,ue,m),fe=a.memoizedState),(Q=Fi||hx(a,c,Q,m,ne,fe,z)||!1)?(re||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(m,fe,z),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(m,fe,z)),typeof S.componentDidUpdate=="function"&&(a.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof S.componentDidUpdate!="function"||V===i.memoizedProps&&ne===i.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||V===i.memoizedProps&&ne===i.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=fe),S.props=m,S.state=fe,S.context=z,m=Q):(typeof S.componentDidUpdate!="function"||V===i.memoizedProps&&ne===i.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||V===i.memoizedProps&&ne===i.memoizedState||(a.flags|=1024),m=!1)}return pm(i,a,c,m,b,y)}function pm(i,a,c,m,y,b){Tx(i,a);var S=(a.flags&128)!==0;if(!m&&!S)return y&&Nw(a,c,!1),si(i,a,b);m=a.stateNode,OA.current=a;var V=S&&typeof c.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,i!==null&&S?(a.child=Xa(a,i.child,null,b),a.child=Xa(a,null,V,b)):Mn(i,a,V,b),a.memoizedState=m.state,y&&Nw(a,c,!0),a.child}function Cx(i){var a=i.stateNode;a.pendingContext?Rw(i,a.pendingContext,a.pendingContext!==a.context):a.context&&Rw(i,a.context,!1),Xp(i,a.containerInfo)}function Ix(i,a,c,m,y){return Qa(),Wp(y),a.flags|=256,Mn(i,a,c,m),a.child}var mm={dehydrated:null,treeContext:null,retryLane:0};function gm(i){return{baseLanes:i,cachePool:null,transitions:null}}function Rx(i,a,c){var m=a.pendingProps,y=yt.current,b=!1,S=(a.flags&128)!==0,V;if((V=S)||(V=i!==null&&i.memoizedState===null?!1:(y&2)!==0),V?(b=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(y|=1),it(yt,y&1),i===null)return $p(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(S=m.children,i=m.fallback,b?(m=a.mode,b=a.child,S={mode:"hidden",children:S},(m&1)===0&&b!==null?(b.childLanes=0,b.pendingProps=S):b=rh(S,m,0,null),i=Jo(i,m,c,null),b.return=a,i.return=a,b.sibling=i,a.child=b,a.child.memoizedState=gm(c),a.memoizedState=mm,i):ym(a,S));if(y=i.memoizedState,y!==null&&(V=y.dehydrated,V!==null))return VA(i,a,S,m,V,y,c);if(b){b=m.fallback,S=a.mode,y=i.child,V=y.sibling;var z={mode:"hidden",children:m.children};return(S&1)===0&&a.child!==y?(m=a.child,m.childLanes=0,m.pendingProps=z,a.deletions=null):(m=Hi(y,z),m.subtreeFlags=y.subtreeFlags&14680064),V!==null?b=Hi(V,b):(b=Jo(b,S,c,null),b.flags|=2),b.return=a,m.return=a,m.sibling=b,a.child=m,m=b,b=a.child,S=i.child.memoizedState,S=S===null?gm(c):{baseLanes:S.baseLanes|c,cachePool:null,transitions:S.transitions},b.memoizedState=S,b.childLanes=i.childLanes&~c,a.memoizedState=mm,m}return b=i.child,i=b.sibling,m=Hi(b,{mode:"visible",children:m.children}),(a.mode&1)===0&&(m.lanes=c),m.return=a,m.sibling=null,i!==null&&(c=a.deletions,c===null?(a.deletions=[i],a.flags|=16):c.push(i)),a.child=m,a.memoizedState=null,m}function ym(i,a){return a=rh({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Wd(i,a,c,m){return m!==null&&Wp(m),Xa(a,i.child,null,c),i=ym(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function VA(i,a,c,m,y,b,S){if(c)return a.flags&256?(a.flags&=-257,m=dm(Error(n(422))),Wd(i,a,S,m)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(b=m.fallback,y=a.mode,m=rh({mode:"visible",children:m.children},y,0,null),b=Jo(b,y,S,null),b.flags|=2,m.return=a,b.return=a,m.sibling=b,a.child=m,(a.mode&1)!==0&&Xa(a,i.child,null,S),a.child.memoizedState=gm(S),a.memoizedState=mm,b);if((a.mode&1)===0)return Wd(i,a,S,null);if(y.data==="$!"){if(m=y.nextSibling&&y.nextSibling.dataset,m)var V=m.dgst;return m=V,b=Error(n(419)),m=dm(b,m,void 0),Wd(i,a,S,m)}if(V=(S&i.childLanes)!==0,qn||V){if(m=Yt,m!==null){switch(S&-S){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(m.suspendedLanes|S))!==0?0:y,y!==0&&y!==b.retryLane&&(b.retryLane=y,ni(i,y),Xr(m,i,y,-1))}return jm(),m=dm(Error(n(421))),Wd(i,a,S,m)}return y.data==="$?"?(a.flags|=128,a.child=i.child,a=XA.bind(null,i),y._reactRetry=a,null):(i=b.treeContext,dr=Mi(y.nextSibling),ur=a,pt=!0,Gr=null,i!==null&&(xr[br++]=ei,xr[br++]=ti,xr[br++]=$o,ei=i.id,ti=i.overflow,$o=a),a=ym(a,m.children),a.flags|=4096,a)}function Ax(i,a,c){i.lanes|=a;var m=i.alternate;m!==null&&(m.lanes|=a),Kp(i.return,a,c)}function vm(i,a,c,m,y){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:y}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=m,b.tail=c,b.tailMode=y)}function Nx(i,a,c){var m=a.pendingProps,y=m.revealOrder,b=m.tail;if(Mn(i,a,m.children,c),m=yt.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ax(i,c,a);else if(i.tag===19)Ax(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}if(it(yt,m),(a.mode&1)===0)a.memoizedState=null;else switch(y){case"forwards":for(c=a.child,y=null;c!==null;)i=c.alternate,i!==null&&Od(i)===null&&(y=c),c=c.sibling;c=y,c===null?(y=a.child,a.child=null):(y=c.sibling,c.sibling=null),vm(a,!1,y,c,b);break;case"backwards":for(c=null,y=a.child,a.child=null;y!==null;){if(i=y.alternate,i!==null&&Od(i)===null){a.child=y;break}i=y.sibling,y.sibling=c,c=y,y=i}vm(a,!0,c,null,b);break;case"together":vm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function qd(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function si(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),Ko|=a.lanes,(c&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,c=Hi(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=Hi(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function FA(i,a,c){switch(a.tag){case 3:Cx(a),Qa();break;case 5:Ww(a);break;case 1:Wn(a.type)&&Id(a);break;case 4:Xp(a,a.stateNode.containerInfo);break;case 10:var m=a.type._context,y=a.memoizedProps.value;it(jd,m._currentValue),m._currentValue=y;break;case 13:if(m=a.memoizedState,m!==null)return m.dehydrated!==null?(it(yt,yt.current&1),a.flags|=128,null):(c&a.child.childLanes)!==0?Rx(i,a,c):(it(yt,yt.current&1),i=si(i,a,c),i!==null?i.sibling:null);it(yt,yt.current&1);break;case 19:if(m=(c&a.childLanes)!==0,(i.flags&128)!==0){if(m)return Nx(i,a,c);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),it(yt,yt.current),m)break;return null;case 22:case 23:return a.lanes=0,Ex(i,a,c)}return si(i,a,c)}var kx,wm,Px,jx;kx=function(i,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},wm=function(){},Px=function(i,a,c,m){var y=i.memoizedProps;if(y!==m){i=a.stateNode,Ho(Cs.current);var b=null;switch(c){case"input":y=gn(i,y),m=gn(i,m),b=[];break;case"select":y=Z({},y,{value:void 0}),m=Z({},m,{value:void 0}),b=[];break;case"textarea":y=ls(i,y),m=ls(i,m),b=[];break;default:typeof y.onClick!="function"&&typeof m.onClick=="function"&&(i.onclick=Td)}Bn(c,m);var S;c=null;for(Q in y)if(!m.hasOwnProperty(Q)&&y.hasOwnProperty(Q)&&y[Q]!=null)if(Q==="style"){var V=y[Q];for(S in V)V.hasOwnProperty(S)&&(c||(c={}),c[S]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(s.hasOwnProperty(Q)?b||(b=[]):(b=b||[]).push(Q,null));for(Q in m){var z=m[Q];if(V=y?.[Q],m.hasOwnProperty(Q)&&z!==V&&(z!=null||V!=null))if(Q==="style")if(V){for(S in V)!V.hasOwnProperty(S)||z&&z.hasOwnProperty(S)||(c||(c={}),c[S]="");for(S in z)z.hasOwnProperty(S)&&V[S]!==z[S]&&(c||(c={}),c[S]=z[S])}else c||(b||(b=[]),b.push(Q,c)),c=z;else Q==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,V=V?V.__html:void 0,z!=null&&V!==z&&(b=b||[]).push(Q,z)):Q==="children"?typeof z!="string"&&typeof z!="number"||(b=b||[]).push(Q,""+z):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(s.hasOwnProperty(Q)?(z!=null&&Q==="onScroll"&&ut("scroll",i),b||V===z||(b=[])):(b=b||[]).push(Q,z))}c&&(b=b||[]).push("style",c);var Q=b;(a.updateQueue=Q)&&(a.flags|=4)}},jx=function(i,a,c,m){c!==m&&(a.flags|=4)};function Ac(i,a){if(!pt)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function _n(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,m=0;if(a)for(var y=i.child;y!==null;)c|=y.lanes|y.childLanes,m|=y.subtreeFlags&14680064,m|=y.flags&14680064,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)c|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=m,i.childLanes=c,a}function UA(i,a,c){var m=a.pendingProps;switch(Bp(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _n(a),null;case 1:return Wn(a.type)&&Cd(),_n(a),null;case 3:return m=a.stateNode,el(),dt($n),dt(xn),em(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(i===null||i.child===null)&&(kd(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Gr!==null&&(Nm(Gr),Gr=null))),wm(i,a),_n(a),null;case 5:Jp(a);var y=Ho(Tc.current);if(c=a.type,i!==null&&a.stateNode!=null)Px(i,a,c,m,y),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!m){if(a.stateNode===null)throw Error(n(166));return _n(a),null}if(i=Ho(Cs.current),kd(a)){m=a.stateNode,c=a.type;var b=a.memoizedProps;switch(m[Ss]=a,m[wc]=b,i=(a.mode&1)!==0,c){case"dialog":ut("cancel",m),ut("close",m);break;case"iframe":case"object":case"embed":ut("load",m);break;case"video":case"audio":for(y=0;y<gc.length;y++)ut(gc[y],m);break;case"source":ut("error",m);break;case"img":case"image":case"link":ut("error",m),ut("load",m);break;case"details":ut("toggle",m);break;case"input":Fr(m,b),ut("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!b.multiple},ut("invalid",m);break;case"textarea":Ei(m,b),ut("invalid",m)}Bn(c,b),y=null;for(var S in b)if(b.hasOwnProperty(S)){var V=b[S];S==="children"?typeof V=="string"?m.textContent!==V&&(b.suppressHydrationWarning!==!0&&Ed(m.textContent,V,i),y=["children",V]):typeof V=="number"&&m.textContent!==""+V&&(b.suppressHydrationWarning!==!0&&Ed(m.textContent,V,i),y=["children",""+V]):s.hasOwnProperty(S)&&V!=null&&S==="onScroll"&&ut("scroll",m)}switch(c){case"input":vr(m),_i(m,b,!0);break;case"textarea":vr(m),cs(m);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(m.onclick=Td)}m=y,a.updateQueue=m,m!==null&&(a.flags|=4)}else{S=y.nodeType===9?y:y.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Io(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=S.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof m.is=="string"?i=S.createElement(c,{is:m.is}):(i=S.createElement(c),c==="select"&&(S=i,m.multiple?S.multiple=!0:m.size&&(S.size=m.size))):i=S.createElementNS(i,c),i[Ss]=a,i[wc]=m,kx(i,a,!1,!1),a.stateNode=i;e:{switch(S=Si(c,m),c){case"dialog":ut("cancel",i),ut("close",i),y=m;break;case"iframe":case"object":case"embed":ut("load",i),y=m;break;case"video":case"audio":for(y=0;y<gc.length;y++)ut(gc[y],i);y=m;break;case"source":ut("error",i),y=m;break;case"img":case"image":case"link":ut("error",i),ut("load",i),y=m;break;case"details":ut("toggle",i),y=m;break;case"input":Fr(i,m),y=gn(i,m),ut("invalid",i);break;case"option":y=m;break;case"select":i._wrapperState={wasMultiple:!!m.multiple},y=Z({},m,{value:void 0}),ut("invalid",i);break;case"textarea":Ei(i,m),y=ls(i,m),ut("invalid",i);break;default:y=m}Bn(c,y),V=y;for(b in V)if(V.hasOwnProperty(b)){var z=V[b];b==="style"?Ti(i,z):b==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&us(i,z)):b==="children"?typeof z=="string"?(c!=="textarea"||z!=="")&&ds(i,z):typeof z=="number"&&ds(i,""+z):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(s.hasOwnProperty(b)?z!=null&&b==="onScroll"&&ut("scroll",i):z!=null&&F(i,b,z,S))}switch(c){case"input":vr(i),_i(i,m,!1);break;case"textarea":vr(i),cs(i);break;case"option":m.value!=null&&i.setAttribute("value",""+je(m.value));break;case"select":i.multiple=!!m.multiple,b=m.value,b!=null?yn(i,!!m.multiple,b,!1):m.defaultValue!=null&&yn(i,!!m.multiple,m.defaultValue,!0);break;default:typeof y.onClick=="function"&&(i.onclick=Td)}switch(c){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return _n(a),null;case 6:if(i&&a.stateNode!=null)jx(i,a,i.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(n(166));if(c=Ho(Tc.current),Ho(Cs.current),kd(a)){if(m=a.stateNode,c=a.memoizedProps,m[Ss]=a,(b=m.nodeValue!==c)&&(i=ur,i!==null))switch(i.tag){case 3:Ed(m.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Ed(m.nodeValue,c,(i.mode&1)!==0)}b&&(a.flags|=4)}else m=(c.nodeType===9?c:c.ownerDocument).createTextNode(m),m[Ss]=a,a.stateNode=m}return _n(a),null;case 13:if(dt(yt),m=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(pt&&dr!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Lw(),Qa(),a.flags|=98560,b=!1;else if(b=kd(a),m!==null&&m.dehydrated!==null){if(i===null){if(!b)throw Error(n(318));if(b=a.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[Ss]=a}else Qa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;_n(a),b=!1}else Gr!==null&&(Nm(Gr),Gr=null),b=!0;if(!b)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=c,a):(m=m!==null,m!==(i!==null&&i.memoizedState!==null)&&m&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(yt.current&1)!==0?$t===0&&($t=3):jm())),a.updateQueue!==null&&(a.flags|=4),_n(a),null);case 4:return el(),wm(i,a),i===null&&yc(a.stateNode.containerInfo),_n(a),null;case 10:return Gp(a.type._context),_n(a),null;case 17:return Wn(a.type)&&Cd(),_n(a),null;case 19:if(dt(yt),b=a.memoizedState,b===null)return _n(a),null;if(m=(a.flags&128)!==0,S=b.rendering,S===null)if(m)Ac(b,!1);else{if($t!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(S=Od(i),S!==null){for(a.flags|=128,Ac(b,!1),m=S.updateQueue,m!==null&&(a.updateQueue=m,a.flags|=4),a.subtreeFlags=0,m=c,c=a.child;c!==null;)b=c,i=m,b.flags&=14680066,S=b.alternate,S===null?(b.childLanes=0,b.lanes=i,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=S.childLanes,b.lanes=S.lanes,b.child=S.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=S.memoizedProps,b.memoizedState=S.memoizedState,b.updateQueue=S.updateQueue,b.type=S.type,i=S.dependencies,b.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return it(yt,yt.current&1|2),a.child}i=i.sibling}b.tail!==null&&ct()>sl&&(a.flags|=128,m=!0,Ac(b,!1),a.lanes=4194304)}else{if(!m)if(i=Od(S),i!==null){if(a.flags|=128,m=!0,c=i.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),Ac(b,!0),b.tail===null&&b.tailMode==="hidden"&&!S.alternate&&!pt)return _n(a),null}else 2*ct()-b.renderingStartTime>sl&&c!==1073741824&&(a.flags|=128,m=!0,Ac(b,!1),a.lanes=4194304);b.isBackwards?(S.sibling=a.child,a.child=S):(c=b.last,c!==null?c.sibling=S:a.child=S,b.last=S)}return b.tail!==null?(a=b.tail,b.rendering=a,b.tail=a.sibling,b.renderingStartTime=ct(),a.sibling=null,c=yt.current,it(yt,m?c&1|2:c&1),a):(_n(a),null);case 22:case 23:return Pm(),m=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==m&&(a.flags|=8192),m&&(a.mode&1)!==0?(hr&1073741824)!==0&&(_n(a),a.subtreeFlags&6&&(a.flags|=8192)):_n(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function BA(i,a){switch(Bp(a),a.tag){case 1:return Wn(a.type)&&Cd(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return el(),dt($n),dt(xn),em(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return Jp(a),null;case 13:if(dt(yt),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Qa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return dt(yt),null;case 4:return el(),null;case 10:return Gp(a.type._context),null;case 22:case 23:return Pm(),null;case 24:return null;default:return null}}var Hd=!1,En=!1,zA=typeof WeakSet=="function"?WeakSet:Set,he=null;function nl(i,a){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(m){_t(i,a,m)}else c.current=null}function xm(i,a,c){try{c()}catch(m){_t(i,a,m)}}var Dx=!1;function $A(i,a){if(Pp=Ys,i=hw(),Tp(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var y=m.anchorOffset,b=m.focusNode;m=m.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var S=0,V=-1,z=-1,Q=0,re=0,ie=i,ne=null;t:for(;;){for(var ue;ie!==c||y!==0&&ie.nodeType!==3||(V=S+y),ie!==b||m!==0&&ie.nodeType!==3||(z=S+m),ie.nodeType===3&&(S+=ie.nodeValue.length),(ue=ie.firstChild)!==null;)ne=ie,ie=ue;for(;;){if(ie===i)break t;if(ne===c&&++Q===y&&(V=S),ne===b&&++re===m&&(z=S),(ue=ie.nextSibling)!==null)break;ie=ne,ne=ie.parentNode}ie=ue}c=V===-1||z===-1?null:{start:V,end:z}}else c=null}c=c||{start:0,end:0}}else c=null;for(jp={focusedElem:i,selectionRange:c},Ys=!1,he=a;he!==null;)if(a=he,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,he=i;else for(;he!==null;){a=he;try{var fe=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,At=fe.memoizedState,H=a.stateNode,$=H.getSnapshotBeforeUpdate(a.elementType===a.type?pe:Kr(a.type,pe),At);H.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var Y=a.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(oe){_t(a,a.return,oe)}if(i=a.sibling,i!==null){i.return=a.return,he=i;break}he=a.return}return fe=Dx,Dx=!1,fe}function Nc(i,a,c){var m=a.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var y=m=m.next;do{if((y.tag&i)===i){var b=y.destroy;y.destroy=void 0,b!==void 0&&xm(a,c,b)}y=y.next}while(y!==m)}}function Gd(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&i)===i){var m=c.create;c.destroy=m()}c=c.next}while(c!==a)}}function bm(i){var a=i.ref;if(a!==null){var c=i.stateNode;switch(i.tag){case 5:i=c;break;default:i=c}typeof a=="function"?a(i):a.current=i}}function Mx(i){var a=i.alternate;a!==null&&(i.alternate=null,Mx(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Ss],delete a[wc],delete a[Op],delete a[SA],delete a[CA])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Lx(i){return i.tag===5||i.tag===3||i.tag===4}function Ox(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Lx(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function _m(i,a,c){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(i,a):c.insertBefore(i,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(i,c)):(a=c,a.appendChild(i)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Td));else if(m!==4&&(i=i.child,i!==null))for(_m(i,a,c),i=i.sibling;i!==null;)_m(i,a,c),i=i.sibling}function Em(i,a,c){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(m!==4&&(i=i.child,i!==null))for(Em(i,a,c),i=i.sibling;i!==null;)Em(i,a,c),i=i.sibling}var ln=null,Yr=!1;function Bi(i,a,c){for(c=c.child;c!==null;)Vx(i,a,c),c=c.sibling}function Vx(i,a,c){if(sr&&typeof sr.onCommitFiberUnmount=="function")try{sr.onCommitFiberUnmount(Po,c)}catch{}switch(c.tag){case 5:En||nl(c,a);case 6:var m=ln,y=Yr;ln=null,Bi(i,a,c),ln=m,Yr=y,ln!==null&&(Yr?(i=ln,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):ln.removeChild(c.stateNode));break;case 18:ln!==null&&(Yr?(i=ln,c=c.stateNode,i.nodeType===8?Lp(i.parentNode,c):i.nodeType===1&&Lp(i,c),ki(i)):Lp(ln,c.stateNode));break;case 4:m=ln,y=Yr,ln=c.stateNode.containerInfo,Yr=!0,Bi(i,a,c),ln=m,Yr=y;break;case 0:case 11:case 14:case 15:if(!En&&(m=c.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){y=m=m.next;do{var b=y,S=b.destroy;b=b.tag,S!==void 0&&((b&2)!==0||(b&4)!==0)&&xm(c,a,S),y=y.next}while(y!==m)}Bi(i,a,c);break;case 1:if(!En&&(nl(c,a),m=c.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=c.memoizedProps,m.state=c.memoizedState,m.componentWillUnmount()}catch(V){_t(c,a,V)}Bi(i,a,c);break;case 21:Bi(i,a,c);break;case 22:c.mode&1?(En=(m=En)||c.memoizedState!==null,Bi(i,a,c),En=m):Bi(i,a,c);break;default:Bi(i,a,c)}}function Fx(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new zA),a.forEach(function(m){var y=JA.bind(null,i,m);c.has(m)||(c.add(m),m.then(y,y))})}}function Qr(i,a){var c=a.deletions;if(c!==null)for(var m=0;m<c.length;m++){var y=c[m];try{var b=i,S=a,V=S;e:for(;V!==null;){switch(V.tag){case 5:ln=V.stateNode,Yr=!1;break e;case 3:ln=V.stateNode.containerInfo,Yr=!0;break e;case 4:ln=V.stateNode.containerInfo,Yr=!0;break e}V=V.return}if(ln===null)throw Error(n(160));Vx(b,S,y),ln=null,Yr=!1;var z=y.alternate;z!==null&&(z.return=null),y.return=null}catch(Q){_t(y,a,Q)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Ux(a,i),a=a.sibling}function Ux(i,a){var c=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Qr(a,i),Rs(i),m&4){try{Nc(3,i,i.return),Gd(3,i)}catch(pe){_t(i,i.return,pe)}try{Nc(5,i,i.return)}catch(pe){_t(i,i.return,pe)}}break;case 1:Qr(a,i),Rs(i),m&512&&c!==null&&nl(c,c.return);break;case 5:if(Qr(a,i),Rs(i),m&512&&c!==null&&nl(c,c.return),i.flags&32){var y=i.stateNode;try{ds(y,"")}catch(pe){_t(i,i.return,pe)}}if(m&4&&(y=i.stateNode,y!=null)){var b=i.memoizedProps,S=c!==null?c.memoizedProps:b,V=i.type,z=i.updateQueue;if(i.updateQueue=null,z!==null)try{V==="input"&&b.type==="radio"&&b.name!=null&&nr(y,b),Si(V,S);var Q=Si(V,b);for(S=0;S<z.length;S+=2){var re=z[S],ie=z[S+1];re==="style"?Ti(y,ie):re==="dangerouslySetInnerHTML"?us(y,ie):re==="children"?ds(y,ie):F(y,re,ie,Q)}switch(V){case"input":as(y,b);break;case"textarea":Co(y,b);break;case"select":var ne=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!b.multiple;var ue=b.value;ue!=null?yn(y,!!b.multiple,ue,!1):ne!==!!b.multiple&&(b.defaultValue!=null?yn(y,!!b.multiple,b.defaultValue,!0):yn(y,!!b.multiple,b.multiple?[]:"",!1))}y[wc]=b}catch(pe){_t(i,i.return,pe)}}break;case 6:if(Qr(a,i),Rs(i),m&4){if(i.stateNode===null)throw Error(n(162));y=i.stateNode,b=i.memoizedProps;try{y.nodeValue=b}catch(pe){_t(i,i.return,pe)}}break;case 3:if(Qr(a,i),Rs(i),m&4&&c!==null&&c.memoizedState.isDehydrated)try{ki(a.containerInfo)}catch(pe){_t(i,i.return,pe)}break;case 4:Qr(a,i),Rs(i);break;case 13:Qr(a,i),Rs(i),y=i.child,y.flags&8192&&(b=y.memoizedState!==null,y.stateNode.isHidden=b,!b||y.alternate!==null&&y.alternate.memoizedState!==null||(Cm=ct())),m&4&&Fx(i);break;case 22:if(re=c!==null&&c.memoizedState!==null,i.mode&1?(En=(Q=En)||re,Qr(a,i),En=Q):Qr(a,i),Rs(i),m&8192){if(Q=i.memoizedState!==null,(i.stateNode.isHidden=Q)&&!re&&(i.mode&1)!==0)for(he=i,re=i.child;re!==null;){for(ie=he=re;he!==null;){switch(ne=he,ue=ne.child,ne.tag){case 0:case 11:case 14:case 15:Nc(4,ne,ne.return);break;case 1:nl(ne,ne.return);var fe=ne.stateNode;if(typeof fe.componentWillUnmount=="function"){m=ne,c=ne.return;try{a=m,fe.props=a.memoizedProps,fe.state=a.memoizedState,fe.componentWillUnmount()}catch(pe){_t(m,c,pe)}}break;case 5:nl(ne,ne.return);break;case 22:if(ne.memoizedState!==null){$x(ie);continue}}ue!==null?(ue.return=ne,he=ue):$x(ie)}re=re.sibling}e:for(re=null,ie=i;;){if(ie.tag===5){if(re===null){re=ie;try{y=ie.stateNode,Q?(b=y.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(V=ie.stateNode,z=ie.memoizedProps.style,S=z!=null&&z.hasOwnProperty("display")?z.display:null,V.style.display=hs("display",S))}catch(pe){_t(i,i.return,pe)}}}else if(ie.tag===6){if(re===null)try{ie.stateNode.nodeValue=Q?"":ie.memoizedProps}catch(pe){_t(i,i.return,pe)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===i)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===i)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===i)break e;re===ie&&(re=null),ie=ie.return}re===ie&&(re=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:Qr(a,i),Rs(i),m&4&&Fx(i);break;case 21:break;default:Qr(a,i),Rs(i)}}function Rs(i){var a=i.flags;if(a&2){try{e:{for(var c=i.return;c!==null;){if(Lx(c)){var m=c;break e}c=c.return}throw Error(n(160))}switch(m.tag){case 5:var y=m.stateNode;m.flags&32&&(ds(y,""),m.flags&=-33);var b=Ox(i);Em(i,b,y);break;case 3:case 4:var S=m.stateNode.containerInfo,V=Ox(i);_m(i,V,S);break;default:throw Error(n(161))}}catch(z){_t(i,i.return,z)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function WA(i,a,c){he=i,Bx(i)}function Bx(i,a,c){for(var m=(i.mode&1)!==0;he!==null;){var y=he,b=y.child;if(y.tag===22&&m){var S=y.memoizedState!==null||Hd;if(!S){var V=y.alternate,z=V!==null&&V.memoizedState!==null||En;V=Hd;var Q=En;if(Hd=S,(En=z)&&!Q)for(he=y;he!==null;)S=he,z=S.child,S.tag===22&&S.memoizedState!==null?Wx(y):z!==null?(z.return=S,he=z):Wx(y);for(;b!==null;)he=b,Bx(b),b=b.sibling;he=y,Hd=V,En=Q}zx(i)}else(y.subtreeFlags&8772)!==0&&b!==null?(b.return=y,he=b):zx(i)}}function zx(i){for(;he!==null;){var a=he;if((a.flags&8772)!==0){var c=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:En||Gd(5,a);break;case 1:var m=a.stateNode;if(a.flags&4&&!En)if(c===null)m.componentDidMount();else{var y=a.elementType===a.type?c.memoizedProps:Kr(a.type,c.memoizedProps);m.componentDidUpdate(y,c.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var b=a.updateQueue;b!==null&&$w(a,b,m);break;case 3:var S=a.updateQueue;if(S!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}$w(a,S,c)}break;case 5:var V=a.stateNode;if(c===null&&a.flags&4){c=V;var z=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&c.focus();break;case"img":z.src&&(c.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Q=a.alternate;if(Q!==null){var re=Q.memoizedState;if(re!==null){var ie=re.dehydrated;ie!==null&&ki(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}En||a.flags&512&&bm(a)}catch(ne){_t(a,a.return,ne)}}if(a===i){he=null;break}if(c=a.sibling,c!==null){c.return=a.return,he=c;break}he=a.return}}function $x(i){for(;he!==null;){var a=he;if(a===i){he=null;break}var c=a.sibling;if(c!==null){c.return=a.return,he=c;break}he=a.return}}function Wx(i){for(;he!==null;){var a=he;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{Gd(4,a)}catch(z){_t(a,c,z)}break;case 1:var m=a.stateNode;if(typeof m.componentDidMount=="function"){var y=a.return;try{m.componentDidMount()}catch(z){_t(a,y,z)}}var b=a.return;try{bm(a)}catch(z){_t(a,b,z)}break;case 5:var S=a.return;try{bm(a)}catch(z){_t(a,S,z)}}}catch(z){_t(a,a.return,z)}if(a===i){he=null;break}var V=a.sibling;if(V!==null){V.return=a.return,he=V;break}he=a.return}}var qA=Math.ceil,Kd=W.ReactCurrentDispatcher,Tm=W.ReactCurrentOwner,Tr=W.ReactCurrentBatchConfig,Ge=0,Yt=null,jt=null,cn=0,hr=0,rl=Li(0),$t=0,kc=null,Ko=0,Yd=0,Sm=0,Pc=null,Hn=null,Cm=0,sl=1/0,ii=null,Qd=!1,Im=null,zi=null,Xd=!1,$i=null,Jd=0,jc=0,Rm=null,Zd=-1,eh=0;function Ln(){return(Ge&6)!==0?ct():Zd!==-1?Zd:Zd=ct()}function Wi(i){return(i.mode&1)===0?1:(Ge&2)!==0&&cn!==0?cn&-cn:RA.transition!==null?(eh===0&&(eh=ec()),eh):(i=We,i!==0||(i=window.event,i=i===void 0?16:ja(i.type)),i)}function Xr(i,a,c,m){if(50<jc)throw jc=0,Rm=null,Error(n(185));Lo(i,c,m),((Ge&2)===0||i!==Yt)&&(i===Yt&&((Ge&2)===0&&(Yd|=c),$t===4&&qi(i,cn)),Gn(i,m),c===1&&Ge===0&&(a.mode&1)===0&&(sl=ct()+500,Rd&&Vi()))}function Gn(i,a){var c=i.callbackNode;Mo(i,a);var m=Hs(i,i===Yt?cn:0);if(m===0)c!==null&&Ca(c),i.callbackNode=null,i.callbackPriority=0;else if(a=m&-m,i.callbackPriority!==a){if(c!=null&&Ca(c),a===1)i.tag===0?IA(Hx.bind(null,i)):kw(Hx.bind(null,i)),EA(function(){(Ge&6)===0&&Vi()}),c=null;else{switch(ms(m)){case 1:c=Ia;break;case 4:c=Xl;break;case 16:c=ko;break;case 536870912:c=Ra;break;default:c=ko}c=e1(c,qx.bind(null,i))}i.callbackPriority=a,i.callbackNode=c}}function qx(i,a){if(Zd=-1,eh=0,(Ge&6)!==0)throw Error(n(327));var c=i.callbackNode;if(il()&&i.callbackNode!==c)return null;var m=Hs(i,i===Yt?cn:0);if(m===0)return null;if((m&30)!==0||(m&i.expiredLanes)!==0||a)a=th(i,m);else{a=m;var y=Ge;Ge|=2;var b=Kx();(Yt!==i||cn!==a)&&(ii=null,sl=ct()+500,Qo(i,a));do try{KA();break}catch(V){Gx(i,V)}while(!0);Hp(),Kd.current=b,Ge=y,jt!==null?a=0:(Yt=null,cn=0,a=$t)}if(a!==0){if(a===2&&(y=Zl(i),y!==0&&(m=y,a=Am(i,y))),a===1)throw c=kc,Qo(i,0),qi(i,m),Gn(i,ct()),c;if(a===6)qi(i,m);else{if(y=i.current.alternate,(m&30)===0&&!HA(y)&&(a=th(i,m),a===2&&(b=Zl(i),b!==0&&(m=b,a=Am(i,b))),a===1))throw c=kc,Qo(i,0),qi(i,m),Gn(i,ct()),c;switch(i.finishedWork=y,i.finishedLanes=m,a){case 0:case 1:throw Error(n(345));case 2:Xo(i,Hn,ii);break;case 3:if(qi(i,m),(m&130023424)===m&&(a=Cm+500-ct(),10<a)){if(Hs(i,0)!==0)break;if(y=i.suspendedLanes,(y&m)!==m){Ln(),i.pingedLanes|=i.suspendedLanes&y;break}i.timeoutHandle=Mp(Xo.bind(null,i,Hn,ii),a);break}Xo(i,Hn,ii);break;case 4:if(qi(i,m),(m&4194240)===m)break;for(a=i.eventTimes,y=-1;0<m;){var S=31-ir(m);b=1<<S,S=a[S],S>y&&(y=S),m&=~b}if(m=y,m=ct()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*qA(m/1960))-m,10<m){i.timeoutHandle=Mp(Xo.bind(null,i,Hn,ii),m);break}Xo(i,Hn,ii);break;case 5:Xo(i,Hn,ii);break;default:throw Error(n(329))}}}return Gn(i,ct()),i.callbackNode===c?qx.bind(null,i):null}function Am(i,a){var c=Pc;return i.current.memoizedState.isDehydrated&&(Qo(i,a).flags|=256),i=th(i,a),i!==2&&(a=Hn,Hn=c,a!==null&&Nm(a)),i}function Nm(i){Hn===null?Hn=i:Hn.push.apply(Hn,i)}function HA(i){for(var a=i;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var m=0;m<c.length;m++){var y=c[m],b=y.getSnapshot;y=y.value;try{if(!Hr(b(),y))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function qi(i,a){for(a&=~Sm,a&=~Yd,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var c=31-ir(a),m=1<<c;i[c]=-1,a&=~m}}function Hx(i){if((Ge&6)!==0)throw Error(n(327));il();var a=Hs(i,0);if((a&1)===0)return Gn(i,ct()),null;var c=th(i,a);if(i.tag!==0&&c===2){var m=Zl(i);m!==0&&(a=m,c=Am(i,m))}if(c===1)throw c=kc,Qo(i,0),qi(i,a),Gn(i,ct()),c;if(c===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,Xo(i,Hn,ii),Gn(i,ct()),null}function km(i,a){var c=Ge;Ge|=1;try{return i(a)}finally{Ge=c,Ge===0&&(sl=ct()+500,Rd&&Vi())}}function Yo(i){$i!==null&&$i.tag===0&&(Ge&6)===0&&il();var a=Ge;Ge|=1;var c=Tr.transition,m=We;try{if(Tr.transition=null,We=1,i)return i()}finally{We=m,Tr.transition=c,Ge=a,(Ge&6)===0&&Vi()}}function Pm(){hr=rl.current,dt(rl)}function Qo(i,a){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,_A(c)),jt!==null)for(c=jt.return;c!==null;){var m=c;switch(Bp(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Cd();break;case 3:el(),dt($n),dt(xn),em();break;case 5:Jp(m);break;case 4:el();break;case 13:dt(yt);break;case 19:dt(yt);break;case 10:Gp(m.type._context);break;case 22:case 23:Pm()}c=c.return}if(Yt=i,jt=i=Hi(i.current,null),cn=hr=a,$t=0,kc=null,Sm=Yd=Ko=0,Hn=Pc=null,qo!==null){for(a=0;a<qo.length;a++)if(c=qo[a],m=c.interleaved,m!==null){c.interleaved=null;var y=m.next,b=c.pending;if(b!==null){var S=b.next;b.next=y,m.next=S}c.pending=m}qo=null}return i}function Gx(i,a){do{var c=jt;try{if(Hp(),Vd.current=zd,Fd){for(var m=vt.memoizedState;m!==null;){var y=m.queue;y!==null&&(y.pending=null),m=m.next}Fd=!1}if(Go=0,Kt=zt=vt=null,Sc=!1,Cc=0,Tm.current=null,c===null||c.return===null){$t=1,kc=a,jt=null;break}e:{var b=i,S=c.return,V=c,z=a;if(a=cn,V.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var Q=z,re=V,ie=re.tag;if((re.mode&1)===0&&(ie===0||ie===11||ie===15)){var ne=re.alternate;ne?(re.updateQueue=ne.updateQueue,re.memoizedState=ne.memoizedState,re.lanes=ne.lanes):(re.updateQueue=null,re.memoizedState=null)}var ue=vx(S);if(ue!==null){ue.flags&=-257,wx(ue,S,V,b,a),ue.mode&1&&yx(b,Q,a),a=ue,z=Q;var fe=a.updateQueue;if(fe===null){var pe=new Set;pe.add(z),a.updateQueue=pe}else fe.add(z);break e}else{if((a&1)===0){yx(b,Q,a),jm();break e}z=Error(n(426))}}else if(pt&&V.mode&1){var At=vx(S);if(At!==null){(At.flags&65536)===0&&(At.flags|=256),wx(At,S,V,b,a),Wp(tl(z,V));break e}}b=z=tl(z,V),$t!==4&&($t=2),Pc===null?Pc=[b]:Pc.push(b),b=S;do{switch(b.tag){case 3:b.flags|=65536,a&=-a,b.lanes|=a;var H=mx(b,z,a);zw(b,H);break e;case 1:V=z;var $=b.type,Y=b.stateNode;if((b.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(zi===null||!zi.has(Y)))){b.flags|=65536,a&=-a,b.lanes|=a;var oe=gx(b,V,a);zw(b,oe);break e}}b=b.return}while(b!==null)}Qx(c)}catch(me){a=me,jt===c&&c!==null&&(jt=c=c.return);continue}break}while(!0)}function Kx(){var i=Kd.current;return Kd.current=zd,i===null?zd:i}function jm(){($t===0||$t===3||$t===2)&&($t=4),Yt===null||(Ko&268435455)===0&&(Yd&268435455)===0||qi(Yt,cn)}function th(i,a){var c=Ge;Ge|=2;var m=Kx();(Yt!==i||cn!==a)&&(ii=null,Qo(i,a));do try{GA();break}catch(y){Gx(i,y)}while(!0);if(Hp(),Ge=c,Kd.current=m,jt!==null)throw Error(n(261));return Yt=null,cn=0,$t}function GA(){for(;jt!==null;)Yx(jt)}function KA(){for(;jt!==null&&!No();)Yx(jt)}function Yx(i){var a=Zx(i.alternate,i,hr);i.memoizedProps=i.pendingProps,a===null?Qx(i):jt=a,Tm.current=null}function Qx(i){var a=i;do{var c=a.alternate;if(i=a.return,(a.flags&32768)===0){if(c=UA(c,a,hr),c!==null){jt=c;return}}else{if(c=BA(c,a),c!==null){c.flags&=32767,jt=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{$t=6,jt=null;return}}if(a=a.sibling,a!==null){jt=a;return}jt=a=i}while(a!==null);$t===0&&($t=5)}function Xo(i,a,c){var m=We,y=Tr.transition;try{Tr.transition=null,We=1,YA(i,a,c,m)}finally{Tr.transition=y,We=m}return null}function YA(i,a,c,m){do il();while($i!==null);if((Ge&6)!==0)throw Error(n(327));c=i.finishedWork;var y=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var b=c.lanes|c.childLanes;if(wp(i,b),i===Yt&&(jt=Yt=null,cn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Xd||(Xd=!0,e1(ko,function(){return il(),null})),b=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||b){b=Tr.transition,Tr.transition=null;var S=We;We=1;var V=Ge;Ge|=4,Tm.current=null,$A(i,c),Ux(c,i),mA(jp),Ys=!!Pp,jp=Pp=null,i.current=c,WA(c),qs(),Ge=V,We=S,Tr.transition=b}else i.current=c;if(Xd&&(Xd=!1,$i=i,Jd=y),b=i.pendingLanes,b===0&&(zi=null),ld(c.stateNode),Gn(i,ct()),a!==null)for(m=i.onRecoverableError,c=0;c<a.length;c++)y=a[c],m(y.value,{componentStack:y.stack,digest:y.digest});if(Qd)throw Qd=!1,i=Im,Im=null,i;return(Jd&1)!==0&&i.tag!==0&&il(),b=i.pendingLanes,(b&1)!==0?i===Rm?jc++:(jc=0,Rm=i):jc=0,Vi(),null}function il(){if($i!==null){var i=ms(Jd),a=Tr.transition,c=We;try{if(Tr.transition=null,We=16>i?16:i,$i===null)var m=!1;else{if(i=$i,$i=null,Jd=0,(Ge&6)!==0)throw Error(n(331));var y=Ge;for(Ge|=4,he=i.current;he!==null;){var b=he,S=b.child;if((he.flags&16)!==0){var V=b.deletions;if(V!==null){for(var z=0;z<V.length;z++){var Q=V[z];for(he=Q;he!==null;){var re=he;switch(re.tag){case 0:case 11:case 15:Nc(8,re,b)}var ie=re.child;if(ie!==null)ie.return=re,he=ie;else for(;he!==null;){re=he;var ne=re.sibling,ue=re.return;if(Mx(re),re===Q){he=null;break}if(ne!==null){ne.return=ue,he=ne;break}he=ue}}}var fe=b.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var At=pe.sibling;pe.sibling=null,pe=At}while(pe!==null)}}he=b}}if((b.subtreeFlags&2064)!==0&&S!==null)S.return=b,he=S;else e:for(;he!==null;){if(b=he,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:Nc(9,b,b.return)}var H=b.sibling;if(H!==null){H.return=b.return,he=H;break e}he=b.return}}var $=i.current;for(he=$;he!==null;){S=he;var Y=S.child;if((S.subtreeFlags&2064)!==0&&Y!==null)Y.return=S,he=Y;else e:for(S=$;he!==null;){if(V=he,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:Gd(9,V)}}catch(me){_t(V,V.return,me)}if(V===S){he=null;break e}var oe=V.sibling;if(oe!==null){oe.return=V.return,he=oe;break e}he=V.return}}if(Ge=y,Vi(),sr&&typeof sr.onPostCommitFiberRoot=="function")try{sr.onPostCommitFiberRoot(Po,i)}catch{}m=!0}return m}finally{We=c,Tr.transition=a}}return!1}function Xx(i,a,c){a=tl(c,a),a=mx(i,a,1),i=Ui(i,a,1),a=Ln(),i!==null&&(Lo(i,1,a),Gn(i,a))}function _t(i,a,c){if(i.tag===3)Xx(i,i,c);else for(;a!==null;){if(a.tag===3){Xx(a,i,c);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(zi===null||!zi.has(m))){i=tl(c,i),i=gx(a,i,1),a=Ui(a,i,1),i=Ln(),a!==null&&(Lo(a,1,i),Gn(a,i));break}}a=a.return}}function QA(i,a,c){var m=i.pingCache;m!==null&&m.delete(a),a=Ln(),i.pingedLanes|=i.suspendedLanes&c,Yt===i&&(cn&c)===c&&($t===4||$t===3&&(cn&130023424)===cn&&500>ct()-Cm?Qo(i,0):Sm|=c),Gn(i,a)}function Jx(i,a){a===0&&((i.mode&1)===0?a=1:(a=Ri,Ri<<=1,(Ri&130023424)===0&&(Ri=4194304)));var c=Ln();i=ni(i,a),i!==null&&(Lo(i,a,c),Gn(i,c))}function XA(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),Jx(i,c)}function JA(i,a){var c=0;switch(i.tag){case 13:var m=i.stateNode,y=i.memoizedState;y!==null&&(c=y.retryLane);break;case 19:m=i.stateNode;break;default:throw Error(n(314))}m!==null&&m.delete(a),Jx(i,c)}var Zx;Zx=function(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps||$n.current)qn=!0;else{if((i.lanes&c)===0&&(a.flags&128)===0)return qn=!1,FA(i,a,c);qn=(i.flags&131072)!==0}else qn=!1,pt&&(a.flags&1048576)!==0&&Pw(a,Nd,a.index);switch(a.lanes=0,a.tag){case 2:var m=a.type;qd(i,a),i=a.pendingProps;var y=Ga(a,xn.current);Za(a,c),y=rm(null,a,m,i,y,c);var b=sm();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Wn(m)?(b=!0,Id(a)):b=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Qp(a),y.updater=$d,a.stateNode=y,y._reactInternals=a,um(a,m,i,c),a=pm(null,a,m,!0,b,c)):(a.tag=0,pt&&b&&Up(a),Mn(null,a,y,c),a=a.child),a;case 16:m=a.elementType;e:{switch(qd(i,a),i=a.pendingProps,y=m._init,m=y(m._payload),a.type=m,y=a.tag=eN(m),i=Kr(m,i),y){case 0:a=fm(null,a,m,i,c);break e;case 1:a=Sx(null,a,m,i,c);break e;case 11:a=xx(null,a,m,i,c);break e;case 14:a=bx(null,a,m,Kr(m.type,i),c);break e}throw Error(n(306,m,""))}return a;case 0:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Kr(m,y),fm(i,a,m,y,c);case 1:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Kr(m,y),Sx(i,a,m,y,c);case 3:e:{if(Cx(a),i===null)throw Error(n(387));m=a.pendingProps,b=a.memoizedState,y=b.element,Bw(i,a),Ld(a,m,null,c);var S=a.memoizedState;if(m=S.element,b.isDehydrated)if(b={element:m,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){y=tl(Error(n(423)),a),a=Ix(i,a,m,c,y);break e}else if(m!==y){y=tl(Error(n(424)),a),a=Ix(i,a,m,c,y);break e}else for(dr=Mi(a.stateNode.containerInfo.firstChild),ur=a,pt=!0,Gr=null,c=Fw(a,null,m,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Qa(),m===y){a=si(i,a,c);break e}Mn(i,a,m,c)}a=a.child}return a;case 5:return Ww(a),i===null&&$p(a),m=a.type,y=a.pendingProps,b=i!==null?i.memoizedProps:null,S=y.children,Dp(m,y)?S=null:b!==null&&Dp(m,b)&&(a.flags|=32),Tx(i,a),Mn(i,a,S,c),a.child;case 6:return i===null&&$p(a),null;case 13:return Rx(i,a,c);case 4:return Xp(a,a.stateNode.containerInfo),m=a.pendingProps,i===null?a.child=Xa(a,null,m,c):Mn(i,a,m,c),a.child;case 11:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Kr(m,y),xx(i,a,m,y,c);case 7:return Mn(i,a,a.pendingProps,c),a.child;case 8:return Mn(i,a,a.pendingProps.children,c),a.child;case 12:return Mn(i,a,a.pendingProps.children,c),a.child;case 10:e:{if(m=a.type._context,y=a.pendingProps,b=a.memoizedProps,S=y.value,it(jd,m._currentValue),m._currentValue=S,b!==null)if(Hr(b.value,S)){if(b.children===y.children&&!$n.current){a=si(i,a,c);break e}}else for(b=a.child,b!==null&&(b.return=a);b!==null;){var V=b.dependencies;if(V!==null){S=b.child;for(var z=V.firstContext;z!==null;){if(z.context===m){if(b.tag===1){z=ri(-1,c&-c),z.tag=2;var Q=b.updateQueue;if(Q!==null){Q=Q.shared;var re=Q.pending;re===null?z.next=z:(z.next=re.next,re.next=z),Q.pending=z}}b.lanes|=c,z=b.alternate,z!==null&&(z.lanes|=c),Kp(b.return,c,a),V.lanes|=c;break}z=z.next}}else if(b.tag===10)S=b.type===a.type?null:b.child;else if(b.tag===18){if(S=b.return,S===null)throw Error(n(341));S.lanes|=c,V=S.alternate,V!==null&&(V.lanes|=c),Kp(S,c,a),S=b.sibling}else S=b.child;if(S!==null)S.return=b;else for(S=b;S!==null;){if(S===a){S=null;break}if(b=S.sibling,b!==null){b.return=S.return,S=b;break}S=S.return}b=S}Mn(i,a,y.children,c),a=a.child}return a;case 9:return y=a.type,m=a.pendingProps.children,Za(a,c),y=_r(y),m=m(y),a.flags|=1,Mn(i,a,m,c),a.child;case 14:return m=a.type,y=Kr(m,a.pendingProps),y=Kr(m.type,y),bx(i,a,m,y,c);case 15:return _x(i,a,a.type,a.pendingProps,c);case 17:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Kr(m,y),qd(i,a),a.tag=1,Wn(m)?(i=!0,Id(a)):i=!1,Za(a,c),fx(a,m,y),um(a,m,y,c),pm(null,a,m,!0,i,c);case 19:return Nx(i,a,c);case 22:return Ex(i,a,c)}throw Error(n(156,a.tag))};function e1(i,a){return Ql(i,a)}function ZA(i,a,c,m){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sr(i,a,c,m){return new ZA(i,a,c,m)}function Dm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function eN(i){if(typeof i=="function")return Dm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===q)return 11;if(i===Xe)return 14}return 2}function Hi(i,a){var c=i.alternate;return c===null?(c=Sr(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function nh(i,a,c,m,y,b){var S=2;if(m=i,typeof i=="function")Dm(i)&&(S=1);else if(typeof i=="string")S=5;else e:switch(i){case I:return Jo(c.children,y,b,a);case R:S=8,y|=8;break;case P:return i=Sr(12,c,a,y|2),i.elementType=P,i.lanes=b,i;case L:return i=Sr(13,c,a,y),i.elementType=L,i.lanes=b,i;case ke:return i=Sr(19,c,a,y),i.elementType=ke,i.lanes=b,i;case ge:return rh(c,y,b,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case M:S=10;break e;case O:S=9;break e;case q:S=11;break e;case Xe:S=14;break e;case ht:S=16,m=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return a=Sr(S,c,a,y),a.elementType=i,a.type=m,a.lanes=b,a}function Jo(i,a,c,m){return i=Sr(7,i,m,a),i.lanes=c,i}function rh(i,a,c,m){return i=Sr(22,i,m,a),i.elementType=ge,i.lanes=c,i.stateNode={isHidden:!1},i}function Mm(i,a,c){return i=Sr(6,i,null,a),i.lanes=c,i}function Lm(i,a,c){return a=Sr(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function tN(i,a,c,m,y){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tc(0),this.expirationTimes=tc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tc(0),this.identifierPrefix=m,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Om(i,a,c,m,y,b,S,V,z){return i=new tN(i,a,c,V,z),a===1?(a=1,b===!0&&(a|=8)):a=0,b=Sr(3,null,null,a),i.current=b,b.stateNode=i,b.memoizedState={element:m,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qp(b),i}function nN(i,a,c){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:m==null?null:""+m,children:i,containerInfo:a,implementation:c}}function t1(i){if(!i)return Oi;i=i._reactInternals;e:{if(Wr(i)!==i||i.tag!==1)throw Error(n(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Wn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(i.tag===1){var c=i.type;if(Wn(c))return Aw(i,c,a)}return a}function n1(i,a,c,m,y,b,S,V,z){return i=Om(c,m,!0,i,y,b,S,V,z),i.context=t1(null),c=i.current,m=Ln(),y=Wi(c),b=ri(m,y),b.callback=a??null,Ui(c,b,y),i.current.lanes=y,Lo(i,y,m),Gn(i,m),i}function sh(i,a,c,m){var y=a.current,b=Ln(),S=Wi(y);return c=t1(c),a.context===null?a.context=c:a.pendingContext=c,a=ri(b,S),a.payload={element:i},m=m===void 0?null:m,m!==null&&(a.callback=m),i=Ui(y,a,S),i!==null&&(Xr(i,y,S,b),Md(i,y,S)),S}function ih(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function r1(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function Vm(i,a){r1(i,a),(i=i.alternate)&&r1(i,a)}function rN(){return null}var s1=typeof reportError=="function"?reportError:function(i){console.error(i)};function Fm(i){this._internalRoot=i}oh.prototype.render=Fm.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));sh(i,a,null,null)},oh.prototype.unmount=Fm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Yo(function(){sh(null,i,null,null)}),a[Js]=null}};function oh(i){this._internalRoot=i}oh.prototype.unstable_scheduleHydration=function(i){if(i){var a=ic();i={blockedOn:null,target:i,priority:a};for(var c=0;c<or.length&&a!==0&&a<or[c].priority;c++);or.splice(c,0,i),c===0&&ka(i)}};function Um(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ah(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function i1(){}function sN(i,a,c,m,y){if(y){if(typeof m=="function"){var b=m;m=function(){var Q=ih(S);b.call(Q)}}var S=n1(a,m,i,0,null,!1,!1,"",i1);return i._reactRootContainer=S,i[Js]=S.current,yc(i.nodeType===8?i.parentNode:i),Yo(),S}for(;y=i.lastChild;)i.removeChild(y);if(typeof m=="function"){var V=m;m=function(){var Q=ih(z);V.call(Q)}}var z=Om(i,0,!1,null,null,!1,!1,"",i1);return i._reactRootContainer=z,i[Js]=z.current,yc(i.nodeType===8?i.parentNode:i),Yo(function(){sh(a,z,c,m)}),z}function lh(i,a,c,m,y){var b=c._reactRootContainer;if(b){var S=b;if(typeof y=="function"){var V=y;y=function(){var z=ih(S);V.call(z)}}sh(a,S,i,y)}else S=sN(c,a,i,y,m);return ih(S)}rc=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var c=Ye(a.pendingLanes);c!==0&&(nc(a,c|1),Gn(a,ct()),(Ge&6)===0&&(sl=ct()+500,Vi()))}break;case 13:Yo(function(){var m=ni(i,1);if(m!==null){var y=Ln();Xr(m,i,1,y)}}),Vm(i,1)}},Aa=function(i){if(i.tag===13){var a=ni(i,134217728);if(a!==null){var c=Ln();Xr(a,i,134217728,c)}Vm(i,134217728)}},sc=function(i){if(i.tag===13){var a=Wi(i),c=ni(i,a);if(c!==null){var m=Ln();Xr(c,i,a,m)}Vm(i,a)}},ic=function(){return We},oc=function(i,a){var c=We;try{return We=i,a()}finally{We=c}},Br=function(i,a,c){switch(a){case"input":if(as(i,c),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var m=c[a];if(m!==i&&m.form===i.form){var y=Sd(m);if(!y)throw Error(n(90));mn(m),as(m,y)}}}break;case"textarea":Co(i,c);break;case"select":a=c.value,a!=null&&yn(i,!!c.multiple,a,!1)}},rn=km,Ht=Yo;var iN={usingClientEntryPoint:!1,Events:[xc,qa,Sd,bt,nn,km]},Dc={findFiberByHostInstance:Bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oN={bundleType:Dc.bundleType,version:Dc.version,rendererPackageName:Dc.rendererPackageName,rendererConfig:Dc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=ad(i),i===null?null:i.stateNode},findFiberByHostInstance:Dc.findFiberByHostInstance||rN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ch.isDisabled&&ch.supportsFiber)try{Po=ch.inject(oN),sr=ch}catch{}}return Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iN,Kn.createPortal=function(i,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Um(a))throw Error(n(200));return nN(i,a,null,c)},Kn.createRoot=function(i,a){if(!Um(i))throw Error(n(299));var c=!1,m="",y=s1;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=Om(i,1,!1,null,null,c,!1,m,y),i[Js]=a.current,yc(i.nodeType===8?i.parentNode:i),new Fm(a)},Kn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=ad(a),i=i===null?null:i.stateNode,i},Kn.flushSync=function(i){return Yo(i)},Kn.hydrate=function(i,a,c){if(!ah(a))throw Error(n(200));return lh(null,i,a,!0,c)},Kn.hydrateRoot=function(i,a,c){if(!Um(i))throw Error(n(405));var m=c!=null&&c.hydratedSources||null,y=!1,b="",S=s1;if(c!=null&&(c.unstable_strictMode===!0&&(y=!0),c.identifierPrefix!==void 0&&(b=c.identifierPrefix),c.onRecoverableError!==void 0&&(S=c.onRecoverableError)),a=n1(a,null,i,1,c??null,y,!1,b,S),i[Js]=a.current,yc(i),m)for(i=0;i<m.length;i++)c=m[i],y=c._getVersion,y=y(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,y]:a.mutableSourceEagerHydrationData.push(c,y);return new oh(a)},Kn.render=function(i,a,c){if(!ah(a))throw Error(n(200));return lh(null,i,a,!1,c)},Kn.unmountComponentAtNode=function(i){if(!ah(i))throw Error(n(40));return i._reactRootContainer?(Yo(function(){lh(null,null,i,!1,function(){i._reactRootContainer=null,i[Js]=null})}),!0):!1},Kn.unstable_batchedUpdates=km,Kn.unstable_renderSubtreeIntoContainer=function(i,a,c,m){if(!ah(c))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return lh(i,a,c,!1,m)},Kn.version="18.3.1-next-f1338f8080-20240426",Kn}var f1;function i2(){if(f1)return $m.exports;f1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),$m.exports=fN(),$m.exports}var p1;function pN(){if(p1)return uh;p1=1;var t=i2();return uh.createRoot=t.createRoot,uh.hydrateRoot=t.hydrateRoot,uh}var mN=pN();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var m1="popstate";function gN(t={}){function e(s,o){let{pathname:l="/",search:u="",hash:d=""}=xa(s.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Lg("",{pathname:l,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let l=s.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let d=s.location.href,p=d.indexOf("#");u=p===-1?d:d.slice(0,p)}return u+"#"+(typeof o=="string"?o:hu(o))}function r(s,o){yr(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return vN(e,n,r,t)}function gt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yN(){return Math.random().toString(36).substring(2,10)}function g1(t,e){return{usr:t.state,key:t.key,idx:e}}function Lg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?xa(e):e,state:n,key:e&&e.key||r||yN()}}function hu({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function xa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function vN(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,u="POP",d=null,p=g();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function g(){return(l.state||{idx:null}).idx}function v(){u="POP";let C=g(),D=C==null?null:C-p;p=C,d&&d({action:u,location:N.location,delta:D})}function w(C,D){u="PUSH";let j=Lg(N.location,C,D);n&&n(j,C),p=g()+1;let F=g1(j,p),W=N.createHref(j);try{l.pushState(F,"",W)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;s.location.assign(W)}o&&d&&d({action:u,location:N.location,delta:1})}function T(C,D){u="REPLACE";let j=Lg(N.location,C,D);n&&n(j,C),p=g();let F=g1(j,p),W=N.createHref(j);l.replaceState(F,"",W),o&&d&&d({action:u,location:N.location,delta:0})}function A(C){return wN(C)}let N={get action(){return u},get location(){return t(s,l)},listen(C){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(m1,v),d=C,()=>{s.removeEventListener(m1,v),d=null}},createHref(C){return e(s,C)},createURL:A,encodeLocation(C){let D=A(C);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:w,replace:T,go(C){return l.go(C)}};return N}function wN(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),gt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:hu(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function o2(t,e,n="/"){return xN(t,e,n,!1)}function xN(t,e,n,r){let s=typeof e=="string"?xa(e):e,o=di(s.pathname||"/",n);if(o==null)return null;let l=a2(t);bN(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let p=PN(o);u=NN(l[d],p,r)}return u}function a2(t,e=[],n=[],r="",s=!1){let o=(l,u,d=s,p)=>{let g={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&d)return;gt(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let v=ci([r,g.relativePath]),w=n.concat(g);l.children&&l.children.length>0&&(gt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),a2(l.children,e,w,v,d)),!(l.path==null&&!l.index)&&e.push({path:v,score:RN(v,l.index),routesMeta:w})};return t.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of l2(l.path))o(l,u,!0,d)}),e}function l2(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=l2(r.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...l),u.map(d=>t.startsWith("/")&&d===""?"/":d)}function bN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:AN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var _N=/^:[\w-]+$/,EN=3,TN=2,SN=1,CN=10,IN=-2,y1=t=>t==="*";function RN(t,e){let n=t.split("/"),r=n.length;return n.some(y1)&&(r+=IN),e&&(r+=TN),n.filter(s=>!y1(s)).reduce((s,o)=>s+(_N.test(o)?EN:o===""?SN:CN),r)}function AN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function NN(t,e,n=!1){let{routesMeta:r}=t,s={},o="/",l=[];for(let u=0;u<r.length;++u){let d=r[u],p=u===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",v=Gh({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},g),w=d.route;if(!v&&p&&n&&!r[r.length-1].route.index&&(v=Gh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:ci([o,v.pathname]),pathnameBase:LN(ci([o,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(o=ci([o,v.pathnameBase]))}return l}function Gh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=kN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((p,{paramName:g,isOptional:v},w)=>{if(g==="*"){let A=u[w]||"";l=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const T=u[w];return v&&!T?p[g]=void 0:p[g]=(T||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:t}}function kN(t,e=!1,n=!0){yr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function PN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function di(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function jN(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?xa(t):t;return{pathname:n?n.startsWith("/")?n:DN(n,e):e,search:ON(r),hash:VN(s)}}function DN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Hm(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function MN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function z0(t){let e=MN(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function $0(t,e,n,r=!1){let s;typeof t=="string"?s=xa(t):(s={...t},gt(!s.pathname||!s.pathname.includes("?"),Hm("?","pathname","search",s)),gt(!s.pathname||!s.pathname.includes("#"),Hm("#","pathname","hash",s)),gt(!s.search||!s.search.includes("#"),Hm("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=n;else{let v=e.length-1;if(!r&&l.startsWith("..")){let w=l.split("/");for(;w[0]==="..";)w.shift(),v-=1;s.pathname=w.join("/")}u=v>=0?e[v]:"/"}let d=jN(s,u),p=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||g)&&(d.pathname+="/"),d}var ci=t=>t.join("/").replace(/\/\/+/g,"/"),LN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ON=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function FN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var c2=["POST","PUT","PATCH","DELETE"];new Set(c2);var UN=["GET",...c2];new Set(UN);var Pl=x.createContext(null);Pl.displayName="DataRouter";var If=x.createContext(null);If.displayName="DataRouterState";x.createContext(!1);var u2=x.createContext({isTransitioning:!1});u2.displayName="ViewTransition";var BN=x.createContext(new Map);BN.displayName="Fetchers";var zN=x.createContext(null);zN.displayName="Await";var is=x.createContext(null);is.displayName="Navigation";var Mu=x.createContext(null);Mu.displayName="Location";var os=x.createContext({outlet:null,matches:[],isDataRoute:!1});os.displayName="Route";var W0=x.createContext(null);W0.displayName="RouteError";function $N(t,{relative:e}={}){gt(jl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=x.useContext(is),{hash:s,pathname:o,search:l}=Lu(t,{relative:e}),u=o;return n!=="/"&&(u=o==="/"?n:ci([n,o])),r.createHref({pathname:u,search:l,hash:s})}function jl(){return x.useContext(Mu)!=null}function Or(){return gt(jl(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(Mu).location}var d2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function h2(t){x.useContext(is).static||x.useLayoutEffect(t)}function er(){let{isDataRoute:t}=x.useContext(os);return t?nk():WN()}function WN(){gt(jl(),"useNavigate() may be used only in the context of a <Router> component.");let t=x.useContext(Pl),{basename:e,navigator:n}=x.useContext(is),{matches:r}=x.useContext(os),{pathname:s}=Or(),o=JSON.stringify(z0(r)),l=x.useRef(!1);return h2(()=>{l.current=!0}),x.useCallback((d,p={})=>{if(yr(l.current,d2),!l.current)return;if(typeof d=="number"){n.go(d);return}let g=$0(d,JSON.parse(o),s,p.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ci([e,g.pathname])),(p.replace?n.replace:n.push)(g,p.state,p)},[e,n,o,s,t])}x.createContext(null);function f2(){let{matches:t}=x.useContext(os),e=t[t.length-1];return e?e.params:{}}function Lu(t,{relative:e}={}){let{matches:n}=x.useContext(os),{pathname:r}=Or(),s=JSON.stringify(z0(n));return x.useMemo(()=>$0(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function qN(t,e){return p2(t,e)}function p2(t,e,n,r,s){gt(jl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=x.useContext(is),{matches:l}=x.useContext(os),u=l[l.length-1],d=u?u.params:{},p=u?u.pathname:"/",g=u?u.pathnameBase:"/",v=u&&u.route;{let j=v&&v.path||"";m2(p,!v||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let w=Or(),T;if(e){let j=typeof e=="string"?xa(e):e;gt(g==="/"||j.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${j.pathname}" was given in the \`location\` prop.`),T=j}else T=w;let A=T.pathname||"/",N=A;if(g!=="/"){let j=g.replace(/^\//,"").split("/");N="/"+A.replace(/^\//,"").split("/").slice(j.length).join("/")}let C=o2(t,{pathname:N});yr(v||C!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),yr(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=QN(C&&C.map(j=>Object.assign({},j,{params:Object.assign({},d,j.params),pathname:ci([g,o.encodeLocation?o.encodeLocation(j.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?g:ci([g,o.encodeLocation?o.encodeLocation(j.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathnameBase])})),l,n,r,s);return e&&D?x.createElement(Mu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},D):D}function HN(){let t=tk(),e=FN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:o},"ErrorBoundary")," or"," ",x.createElement("code",{style:o},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:s},n):null,l)}var GN=x.createElement(HN,null),KN=class extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?x.createElement(os.Provider,{value:this.props.routeContext},x.createElement(W0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function YN({routeContext:t,match:e,children:n}){let r=x.useContext(Pl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(os.Provider,{value:t},n)}function QN(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=n?.errors;if(l!=null){let p=o.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);gt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,d=-1;if(n)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=p),g.route.id){let{loaderData:v,errors:w}=n,T=g.route.loader&&!v.hasOwnProperty(g.route.id)&&(!w||w[g.route.id]===void 0);if(g.route.lazy||T){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((p,g,v)=>{let w,T=!1,A=null,N=null;n&&(w=l&&g.route.id?l[g.route.id]:void 0,A=g.route.errorElement||GN,u&&(d<0&&v===0?(m2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,N=null):d===v&&(T=!0,N=g.route.hydrateFallbackElement||null)));let C=e.concat(o.slice(0,v+1)),D=()=>{let j;return w?j=A:T?j=N:g.route.Component?j=x.createElement(g.route.Component,null):g.route.element?j=g.route.element:j=p,x.createElement(YN,{match:g,routeContext:{outlet:p,matches:C,isDataRoute:n!=null},children:j})};return n&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?x.createElement(KN,{location:n.location,revalidation:n.revalidation,component:A,error:w,children:D(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:r}):D()},null)}function q0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XN(t){let e=x.useContext(Pl);return gt(e,q0(t)),e}function JN(t){let e=x.useContext(If);return gt(e,q0(t)),e}function ZN(t){let e=x.useContext(os);return gt(e,q0(t)),e}function H0(t){let e=ZN(t),n=e.matches[e.matches.length-1];return gt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function ek(){return H0("useRouteId")}function tk(){let t=x.useContext(W0),e=JN("useRouteError"),n=H0("useRouteError");return t!==void 0?t:e.errors?.[n]}function nk(){let{router:t}=XN("useNavigate"),e=H0("useNavigate"),n=x.useRef(!1);return h2(()=>{n.current=!0}),x.useCallback(async(s,o={})=>{yr(n.current,d2),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...o}))},[t,e])}var v1={};function m2(t,e,n){!e&&!v1[t]&&(v1[t]=!0,yr(!1,n))}x.memo(rk);function rk({routes:t,future:e,state:n,unstable_onError:r}){return p2(t,void 0,n,r,e)}function sk({to:t,replace:e,state:n,relative:r}){gt(jl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=x.useContext(is);yr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=x.useContext(os),{pathname:l}=Or(),u=er(),d=$0(t,z0(o),l,r==="path"),p=JSON.stringify(d);return x.useEffect(()=>{u(JSON.parse(p),{replace:e,state:n,relative:r})},[u,p,r,e,n]),null}function fr(t){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ik({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:o=!1}){gt(!jl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=x.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof n=="string"&&(n=xa(n));let{pathname:d="/",search:p="",hash:g="",state:v=null,key:w="default"}=n,T=x.useMemo(()=>{let A=di(d,l);return A==null?null:{location:{pathname:A,search:p,hash:g,state:v,key:w},navigationType:r}},[l,d,p,g,v,w,r]);return yr(T!=null,`<Router basename="${l}"> is not able to match the URL "${d}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:x.createElement(is.Provider,{value:u},x.createElement(Mu.Provider,{children:e,value:T}))}function ok({children:t,location:e}){return qN(Og(t),e)}function Og(t,e=[]){let n=[];return x.Children.forEach(t,(r,s)=>{if(!x.isValidElement(r))return;let o=[...e,s];if(r.type===x.Fragment){n.push.apply(n,Og(r.props.children,o));return}gt(r.type===fr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Og(r.props.children,o)),n.push(l)}),n}var Rh="get",Ah="application/x-www-form-urlencoded";function Rf(t){return t!=null&&typeof t.tagName=="string"}function ak(t){return Rf(t)&&t.tagName.toLowerCase()==="button"}function lk(t){return Rf(t)&&t.tagName.toLowerCase()==="form"}function ck(t){return Rf(t)&&t.tagName.toLowerCase()==="input"}function uk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function dk(t,e){return t.button===0&&(!e||e==="_self")&&!uk(t)}function Vg(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function hk(t,e){let n=Vg(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(o=>{n.append(s,o)})}),n}var dh=null;function fk(){if(dh===null)try{new FormData(document.createElement("form"),0),dh=!1}catch{dh=!0}return dh}var pk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gm(t){return t!=null&&!pk.has(t)?(yr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ah}"`),null):t}function mk(t,e){let n,r,s,o,l;if(lk(t)){let u=t.getAttribute("action");r=u?di(u,e):null,n=t.getAttribute("method")||Rh,s=Gm(t.getAttribute("enctype"))||Ah,o=new FormData(t)}else if(ak(t)||ck(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||u.getAttribute("action");if(r=d?di(d,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||Rh,s=Gm(t.getAttribute("formenctype"))||Gm(u.getAttribute("enctype"))||Ah,o=new FormData(u,t),!fk()){let{name:p,type:g,value:v}=t;if(g==="image"){let w=p?`${p}.`:"";o.append(`${w}x`,"0"),o.append(`${w}y`,"0")}else p&&o.append(p,v)}}else{if(Rf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Rh,r=null,s=Ah,l=t}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function G0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function gk(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&di(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function yk(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vk(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function wk(t,e,n){let r=await Promise.all(t.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await yk(o,n);return l.links?l.links():[]}return[]}));return Ek(r.flat(1).filter(vk).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function w1(t,e,n,r,s,o){let l=(d,p)=>n[p]?d.route.id!==n[p].route.id:!0,u=(d,p)=>n[p].pathname!==d.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,p)=>l(d,p)||u(d,p)):o==="data"?e.filter((d,p)=>{let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,p)||u(d,p))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function xk(t,e,{includeHydrateFallback:n}={}){return bk(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function bk(t){return[...new Set(t)]}function _k(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Ek(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let o=JSON.stringify(_k(s));return n.has(o)||(n.add(o),r.push({key:o,link:s})),r},[])}function g2(){let t=x.useContext(Pl);return G0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Tk(){let t=x.useContext(If);return G0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var K0=x.createContext(void 0);K0.displayName="FrameworkContext";function y2(){let t=x.useContext(K0);return G0(t,"You must render this element inside a <HydratedRouter> element"),t}function Sk(t,e){let n=x.useContext(K0),[r,s]=x.useState(!1),[o,l]=x.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:p,onMouseLeave:g,onTouchStart:v}=e,w=x.useRef(null);x.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let N=D=>{D.forEach(j=>{l(j.isIntersecting)})},C=new IntersectionObserver(N,{threshold:.5});return w.current&&C.observe(w.current),()=>{C.disconnect()}}},[t]),x.useEffect(()=>{if(r){let N=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(N)}}},[r]);let T=()=>{s(!0)},A=()=>{s(!1),l(!1)};return n?t!=="intent"?[o,w,{}]:[o,w,{onFocus:Lc(u,T),onBlur:Lc(d,A),onMouseEnter:Lc(p,T),onMouseLeave:Lc(g,A),onTouchStart:Lc(v,T)}]:[!1,w,{}]}function Lc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Ck({page:t,...e}){let{router:n}=g2(),r=x.useMemo(()=>o2(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?x.createElement(Rk,{page:t,matches:r,...e}):null}function Ik(t){let{manifest:e,routeModules:n}=y2(),[r,s]=x.useState([]);return x.useEffect(()=>{let o=!1;return wk(t,e,n).then(l=>{o||s(l)}),()=>{o=!0}},[t,e,n]),r}function Rk({page:t,matches:e,...n}){let r=Or(),{manifest:s,routeModules:o}=y2(),{basename:l}=g2(),{loaderData:u,matches:d}=Tk(),p=x.useMemo(()=>w1(t,e,d,s,r,"data"),[t,e,d,s,r]),g=x.useMemo(()=>w1(t,e,d,s,r,"assets"),[t,e,d,s,r]),v=x.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let A=new Set,N=!1;if(e.forEach(D=>{let j=s.routes[D.route.id];!j||!j.hasLoader||(!p.some(F=>F.route.id===D.route.id)&&D.route.id in u&&o[D.route.id]?.shouldRevalidate||j.hasClientLoader?N=!0:A.add(D.route.id))}),A.size===0)return[];let C=gk(t,l,"data");return N&&A.size>0&&C.searchParams.set("_routes",e.filter(D=>A.has(D.route.id)).map(D=>D.route.id).join(",")),[C.pathname+C.search]},[l,u,r,s,p,e,t,o]),w=x.useMemo(()=>xk(g,s),[g,s]),T=Ik(g);return x.createElement(x.Fragment,null,v.map(A=>x.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...n})),w.map(A=>x.createElement("link",{key:A,rel:"modulepreload",href:A,...n})),T.map(({key:A,link:N})=>x.createElement("link",{key:A,nonce:n.nonce,...N})))}function Ak(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var v2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{v2&&(window.__reactRouterVersion="7.9.4")}catch{}function Nk({basename:t,children:e,window:n}){let r=x.useRef();r.current==null&&(r.current=gN({window:n,v5Compat:!0}));let s=r.current,[o,l]=x.useState({action:s.action,location:s.location}),u=x.useCallback(d=>{x.startTransition(()=>l(d))},[l]);return x.useLayoutEffect(()=>s.listen(u),[s,u]),x.createElement(ik,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s})}var w2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ar=x.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:u,target:d,to:p,preventScrollReset:g,viewTransition:v,...w},T){let{basename:A}=x.useContext(is),N=typeof p=="string"&&w2.test(p),C,D=!1;if(typeof p=="string"&&N&&(C=p,v2))try{let P=new URL(window.location.href),M=p.startsWith("//")?new URL(P.protocol+p):new URL(p),O=di(M.pathname,A);M.origin===P.origin&&O!=null?p=O+M.search+M.hash:D=!0}catch{yr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=$N(p,{relative:s}),[F,W,K]=Sk(r,w),B=Dk(p,{replace:l,state:u,target:d,preventScrollReset:g,relative:s,viewTransition:v});function I(P){e&&e(P),P.defaultPrevented||B(P)}let R=x.createElement("a",{...w,...K,href:C||j,onClick:D||o?e:I,ref:Ak(T,W),target:d,"data-discover":!N&&n==="render"?"true":void 0});return F&&!N?x.createElement(x.Fragment,null,R,x.createElement(Ck,{page:j})):R});Ar.displayName="Link";var kk=x.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:u,children:d,...p},g){let v=Lu(l,{relative:p.relative}),w=Or(),T=x.useContext(If),{navigator:A,basename:N}=x.useContext(is),C=T!=null&&Uk(v)&&u===!0,D=A.encodeLocation?A.encodeLocation(v).pathname:v.pathname,j=w.pathname,F=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;n||(j=j.toLowerCase(),F=F?F.toLowerCase():null,D=D.toLowerCase()),F&&N&&(F=di(F,N)||F);const W=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let K=j===D||!s&&j.startsWith(D)&&j.charAt(W)==="/",B=F!=null&&(F===D||!s&&F.startsWith(D)&&F.charAt(D.length)==="/"),I={isActive:K,isPending:B,isTransitioning:C},R=K?e:void 0,P;typeof r=="function"?P=r(I):P=[r,K?"active":null,B?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let M=typeof o=="function"?o(I):o;return x.createElement(Ar,{...p,"aria-current":R,className:P,ref:g,style:M,to:l,viewTransition:u},typeof d=="function"?d(I):d)});kk.displayName="NavLink";var Pk=x.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:o,method:l=Rh,action:u,onSubmit:d,relative:p,preventScrollReset:g,viewTransition:v,...w},T)=>{let A=Vk(),N=Fk(u,{relative:p}),C=l.toLowerCase()==="get"?"get":"post",D=typeof u=="string"&&w2.test(u),j=F=>{if(d&&d(F),F.defaultPrevented)return;F.preventDefault();let W=F.nativeEvent.submitter,K=W?.getAttribute("formmethod")||l;A(W||F.currentTarget,{fetcherKey:e,method:K,navigate:n,replace:s,state:o,relative:p,preventScrollReset:g,viewTransition:v})};return x.createElement("form",{ref:T,method:C,action:N,onSubmit:r?d:j,...w,"data-discover":!D&&t==="render"?"true":void 0})});Pk.displayName="Form";function jk(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function x2(t){let e=x.useContext(Pl);return gt(e,jk(t)),e}function Dk(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:o,viewTransition:l}={}){let u=er(),d=Or(),p=Lu(t,{relative:o});return x.useCallback(g=>{if(dk(g,e)){g.preventDefault();let v=n!==void 0?n:hu(d)===hu(p);u(t,{replace:v,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[d,u,p,n,r,e,t,s,o,l])}function Mk(t){yr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=x.useRef(Vg(t)),n=x.useRef(!1),r=Or(),s=x.useMemo(()=>hk(r.search,n.current?null:e.current),[r.search]),o=er(),l=x.useCallback((u,d)=>{const p=Vg(typeof u=="function"?u(new URLSearchParams(s)):u);n.current=!0,o("?"+p,d)},[o,s]);return[s,l]}var Lk=0,Ok=()=>`__${String(++Lk)}__`;function Vk(){let{router:t}=x2("useSubmit"),{basename:e}=x.useContext(is),n=ek();return x.useCallback(async(r,s={})=>{let{action:o,method:l,encType:u,formData:d,body:p}=mk(r,e);if(s.navigate===!1){let g=s.fetcherKey||Ok();await t.fetch(g,n,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:p,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await t.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:p,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function Fk(t,{relative:e}={}){let{basename:n}=x.useContext(is),r=x.useContext(os);gt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...Lu(t||".",{relative:e})},l=Or();if(t==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(v=>v).forEach(v=>u.append("index",v));let g=u.toString();o.search=g?`?${g}`:""}}return(!t||t===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:ci([n,o.pathname])),hu(o)}function Uk(t,{relative:e}={}){let n=x.useContext(u2);gt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=x2("useViewTransitionState"),s=Lu(t,{relative:e});if(!n.isTransitioning)return!1;let o=di(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=di(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Gh(s.pathname,l)!=null||Gh(s.pathname,o)!=null}var zc=i2();const Bk=()=>{};var x1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},zk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],u=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},_2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,u=l?t[s+1]:0,d=s+2<t.length,p=d?t[s+2]:0,g=o>>2,v=(o&3)<<4|u>>4;let w=(u&15)<<2|p>>6,T=p&63;d||(T=64,l||(w=64)),r.push(n[g],n[v],n[w],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(b2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const p=s<t.length?n[t.charAt(s)]:64;++s;const v=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||u==null||p==null||v==null)throw new $k;const w=o<<2|u>>4;if(r.push(w),p!==64){const T=u<<4&240|p>>2;if(r.push(T),v!==64){const A=p<<6&192|v;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $k extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Wk=function(t){const e=b2(t);return _2.encodeByteArray(e,!0)},Kh=function(t){return Wk(t).replace(/\./g,"")},E2=function(t){try{return _2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=()=>qk().__FIREBASE_DEFAULTS__,Gk=()=>{if(typeof process>"u"||typeof x1>"u")return;const t=x1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Kk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&E2(t[1]);return e&&JSON.parse(e)},Af=()=>{try{return Bk()||Hk()||Gk()||Kk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},T2=t=>Af()?.emulatorHosts?.[t],S2=t=>{const e=T2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},C2=()=>Af()?.config,I2=t=>Af()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Y0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Kh(JSON.stringify(n)),Kh(JSON.stringify(l)),""].join(".")}const Qc={};function Qk(){const t={prod:[],emulator:[]};for(const e of Object.keys(Qc))Qc[e]?t.emulator.push(e):t.prod.push(e);return t}function Xk(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let b1=!1;function Q0(t,e){if(typeof window>"u"||typeof document>"u"||!vo(window.location.host)||Qc[t]===e||Qc[t]||b1)return;Qc[t]=e;function n(w){return`__firebase__banner__${w}`}const r="__firebase__banner",o=Qk().prod.length>0;function l(){const w=document.getElementById(r);w&&w.remove()}function u(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function d(w,T){w.setAttribute("width","24"),w.setAttribute("id",T),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{b1=!0,l()},w}function g(w,T){w.setAttribute("id",T),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function v(){const w=Xk(r),T=n("text"),A=document.getElementById(T)||document.createElement("span"),N=n("learnmore"),C=document.getElementById(N)||document.createElement("a"),D=n("preprendIcon"),j=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const F=w.element;u(F),g(C,N);const W=p();d(j,D),F.append(j,A,C,W),document.body.appendChild(F)}o?(A.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Jk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(An())}function Zk(){const t=Af()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function A2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function tP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nP(){const t=An();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function rP(){return!Zk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N2(){try{return typeof indexedDB=="object"}catch{return!1}}function k2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}function sP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP="FirebaseError";class Vr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iP,Object.setPrototypeOf(this,Vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ba.prototype.create)}}class ba{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?oP(o,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new Vr(s,u,r)}}function oP(t,e){return t.replace(aP,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const aP=/\{\$([^}]+)}/g;function lP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],l=e[s];if(_1(o)&&_1(l)){if(!hi(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function _1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $c(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Wc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function cP(t,e){const n=new uP(t,e);return n.subscribe.bind(n)}class uP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");dP(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Km),s.error===void 0&&(s.error=Km),s.complete===void 0&&(s.complete=Km);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Km(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=1e3,fP=2,pP=14400*1e3,mP=.5;function E1(t,e=hP,n=fP){const r=e*Math.pow(n,t),s=Math.round(mP*r*(Math.random()-.5)*2);return Math.min(pP,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t){return t&&t._delegate?t._delegate:t}class Dr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Yk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vP(e))try{this.getOrInitializeService({instanceIdentifier:ea})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=ea){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ea){return this.instances.has(e)}getOptions(e=ea){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&l.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ea){return this.component?this.component.multipleInstances?e:ea:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yP(t){return t===ea?void 0:t}function vP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Be||(Be={}));const xP={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},bP=Be.INFO,_P={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},EP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=_P[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nf{constructor(e){this.name=e,this._logLevel=bP,this._logHandler=EP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const TP=(t,e)=>e.some(n=>t instanceof n);let T1,S1;function SP(){return T1||(T1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CP(){return S1||(S1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const P2=new WeakMap,Fg=new WeakMap,j2=new WeakMap,Ym=new WeakMap,X0=new WeakMap;function IP(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(io(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&P2.set(n,t)}).catch(()=>{}),X0.set(e,t),e}function RP(t){if(Fg.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Fg.set(t,e)}let Ug={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||j2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return io(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function AP(t){Ug=t(Ug)}function NP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Qm(this),e,...n);return j2.set(r,e.sort?e.sort():[e]),io(r)}:CP().includes(t)?function(...e){return t.apply(Qm(this),e),io(P2.get(this))}:function(...e){return io(t.apply(Qm(this),e))}}function kP(t){return typeof t=="function"?NP(t):(t instanceof IDBTransaction&&RP(t),TP(t,SP())?new Proxy(t,Ug):t)}function io(t){if(t instanceof IDBRequest)return IP(t);if(Ym.has(t))return Ym.get(t);const e=kP(t);return e!==t&&(Ym.set(t,e),X0.set(e,t)),e}const Qm=t=>X0.get(t);function D2(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),u=io(l);return r&&l.addEventListener("upgradeneeded",d=>{r(io(l.result),d.oldVersion,d.newVersion,io(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),u}const PP=["get","getKey","getAll","getAllKeys","count"],jP=["put","add","delete","clear"],Xm=new Map;function C1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xm.get(e))return Xm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=jP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||PP.includes(n)))return;const o=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(u.shift())),(await Promise.all([p[n](...u),s&&d.done]))[0]};return Xm.set(e,o),o}AP(t=>({...t,get:(e,n,r)=>C1(e,n)||t.get(e,n,r),has:(e,n)=>!!C1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(MP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function MP(t){return t.getComponent()?.type==="VERSION"}const Bg="@firebase/app",I1="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=new Nf("@firebase/app"),LP="@firebase/app-compat",OP="@firebase/analytics-compat",VP="@firebase/analytics",FP="@firebase/app-check-compat",UP="@firebase/app-check",BP="@firebase/auth",zP="@firebase/auth-compat",$P="@firebase/database",WP="@firebase/data-connect",qP="@firebase/database-compat",HP="@firebase/functions",GP="@firebase/functions-compat",KP="@firebase/installations",YP="@firebase/installations-compat",QP="@firebase/messaging",XP="@firebase/messaging-compat",JP="@firebase/performance",ZP="@firebase/performance-compat",e5="@firebase/remote-config",t5="@firebase/remote-config-compat",n5="@firebase/storage",r5="@firebase/storage-compat",s5="@firebase/firestore",i5="@firebase/ai",o5="@firebase/firestore-compat",a5="firebase",l5="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="[DEFAULT]",c5={[Bg]:"fire-core",[LP]:"fire-core-compat",[VP]:"fire-analytics",[OP]:"fire-analytics-compat",[UP]:"fire-app-check",[FP]:"fire-app-check-compat",[BP]:"fire-auth",[zP]:"fire-auth-compat",[$P]:"fire-rtdb",[WP]:"fire-data-connect",[qP]:"fire-rtdb-compat",[HP]:"fire-fn",[GP]:"fire-fn-compat",[KP]:"fire-iid",[YP]:"fire-iid-compat",[QP]:"fire-fcm",[XP]:"fire-fcm-compat",[JP]:"fire-perf",[ZP]:"fire-perf-compat",[e5]:"fire-rc",[t5]:"fire-rc-compat",[n5]:"fire-gcs",[r5]:"fire-gcs-compat",[s5]:"fire-fst",[o5]:"fire-fst-compat",[i5]:"fire-vertex","fire-js":"fire-js",[a5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh=new Map,u5=new Map,$g=new Map;function R1(t,e){try{t.container.addComponent(e)}catch(n){fi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ts(t){const e=t.name;if($g.has(e))return fi.debug(`There were multiple attempts to register component ${e}.`),!1;$g.set(e,t);for(const n of Yh.values())R1(n,t);for(const n of u5.values())R1(n,t);return!0}function wo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oo=new ba("app","Firebase",d5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=l5;function M2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:zg,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw oo.create("bad-app-name",{appName:String(s)});if(n||(n=C2()),!n)throw oo.create("no-options");const o=Yh.get(s);if(o){if(hi(n,o.options)&&hi(r,o.config))return o;throw oo.create("duplicate-app",{appName:s})}const l=new wP(s);for(const d of $g.values())l.addComponent(d);const u=new h5(n,r,l);return Yh.set(s,u),u}function kf(t=zg){const e=Yh.get(t);if(!e&&t===zg&&C2())return M2();if(!e)throw oo.create("no-app",{appName:t});return e}function Zn(t,e,n){let r=c5[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fi.warn(l.join(" "));return}ts(new Dr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5="firebase-heartbeat-database",p5=1,fu="firebase-heartbeat-store";let Jm=null;function L2(){return Jm||(Jm=D2(f5,p5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fu)}catch(n){console.warn(n)}}}}).catch(t=>{throw oo.create("idb-open",{originalErrorMessage:t.message})})),Jm}async function m5(t){try{const n=(await L2()).transaction(fu),r=await n.objectStore(fu).get(O2(t));return await n.done,r}catch(e){if(e instanceof Vr)fi.warn(e.message);else{const n=oo.create("idb-get",{originalErrorMessage:e?.message});fi.warn(n.message)}}}async function A1(t,e){try{const r=(await L2()).transaction(fu,"readwrite");await r.objectStore(fu).put(e,O2(t)),await r.done}catch(n){if(n instanceof Vr)fi.warn(n.message);else{const r=oo.create("idb-set",{originalErrorMessage:n?.message});fi.warn(r.message)}}}function O2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5=1024,y5=30;class v5{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new x5(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=N1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>y5){const s=b5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){fi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=N1(),{heartbeatsToSend:n,unsentEntries:r}=w5(this._heartbeatsCache.heartbeats),s=Kh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return fi.warn(e),""}}}function N1(){return new Date().toISOString().substring(0,10)}function w5(t,e=g5){const n=[];let r=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),k1(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),k1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class x5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return N2()?k2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await m5(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return A1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return A1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function k1(t){return Kh(JSON.stringify({version:2,heartbeats:t})).length}function b5(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(t){ts(new Dr("platform-logger",e=>new DP(e),"PRIVATE")),ts(new Dr("heartbeat",e=>new v5(e),"PRIVATE")),Zn(Bg,I1,t),Zn(Bg,I1,"esm2020"),Zn("fire-js","")}_5("");var E5="firebase",T5="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn(E5,T5,"app");const V2="@firebase/installations",J0="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=1e4,U2=`w:${J0}`,B2="FIS_v2",S5="https://firebaseinstallations.googleapis.com/v1",C5=3600*1e3,I5="installations",R5="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},fa=new ba(I5,R5,A5);function z2(t){return t instanceof Vr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2({projectId:t}){return`${S5}/projects/${t}/installations`}function W2(t){return{token:t.token,requestStatus:2,expiresIn:k5(t.expiresIn),creationTime:Date.now()}}async function q2(t,e){const r=(await e.json()).error;return fa.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function H2({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function N5(t,{refreshToken:e}){const n=H2(t);return n.append("Authorization",P5(e)),n}async function G2(t){const e=await t();return e.status>=500&&e.status<600?t():e}function k5(t){return Number(t.replace("s","000"))}function P5(t){return`${B2} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j5({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=$2(t),s=H2(t),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={fid:n,authVersion:B2,appId:t.appId,sdkVersion:U2},u={method:"POST",headers:s,body:JSON.stringify(l)},d=await G2(()=>fetch(r,u));if(d.ok){const p=await d.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:W2(p.authToken)}}else throw await q2("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D5(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5=/^[cdef][\w-]{21}$/,Wg="";function L5(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=O5(t);return M5.test(n)?n:Wg}catch{return Wg}}function O5(t){return D5(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=new Map;function Q2(t,e){const n=Pf(t);X2(n,e),V5(n,e)}function X2(t,e){const n=Y2.get(t);if(n)for(const r of n)r(e)}function V5(t,e){const n=F5();n&&n.postMessage({key:t,fid:e}),U5()}let ra=null;function F5(){return!ra&&"BroadcastChannel"in self&&(ra=new BroadcastChannel("[Firebase] FID Change"),ra.onmessage=t=>{X2(t.data.key,t.data.fid)}),ra}function U5(){Y2.size===0&&ra&&(ra.close(),ra=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5="firebase-installations-database",z5=1,pa="firebase-installations-store";let Zm=null;function Z0(){return Zm||(Zm=D2(B5,z5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(pa)}}})),Zm}async function Qh(t,e){const n=Pf(t),s=(await Z0()).transaction(pa,"readwrite"),o=s.objectStore(pa),l=await o.get(n);return await o.put(e,n),await s.done,(!l||l.fid!==e.fid)&&Q2(t,e.fid),e}async function J2(t){const e=Pf(t),r=(await Z0()).transaction(pa,"readwrite");await r.objectStore(pa).delete(e),await r.done}async function jf(t,e){const n=Pf(t),s=(await Z0()).transaction(pa,"readwrite"),o=s.objectStore(pa),l=await o.get(n),u=e(l);return u===void 0?await o.delete(n):await o.put(u,n),await s.done,u&&(!l||l.fid!==u.fid)&&Q2(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ey(t){let e;const n=await jf(t.appConfig,r=>{const s=$5(r),o=W5(t,s);return e=o.registrationPromise,o.installationEntry});return n.fid===Wg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function $5(t){const e=t||{fid:L5(),registrationStatus:0};return Z2(e)}function W5(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(fa.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=q5(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:H5(t)}:{installationEntry:e}}async function q5(t,e){try{const n=await j5(t,e);return Qh(t.appConfig,n)}catch(n){throw z2(n)&&n.customData.serverCode===409?await J2(t.appConfig):await Qh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function H5(t){let e=await P1(t.appConfig);for(;e.registrationStatus===1;)await K2(100),e=await P1(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await ey(t);return r||n}return e}function P1(t){return jf(t,e=>{if(!e)throw fa.create("installation-not-found");return Z2(e)})}function Z2(t){return G5(t)?{fid:t.fid,registrationStatus:0}:t}function G5(t){return t.registrationStatus===1&&t.registrationTime+F2<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K5({appConfig:t,heartbeatServiceProvider:e},n){const r=Y5(t,n),s=N5(t,n),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={installation:{sdkVersion:U2,appId:t.appId}},u={method:"POST",headers:s,body:JSON.stringify(l)},d=await G2(()=>fetch(r,u));if(d.ok){const p=await d.json();return W2(p)}else throw await q2("Generate Auth Token",d)}function Y5(t,{fid:e}){return`${$2(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ty(t,e=!1){let n;const r=await jf(t.appConfig,o=>{if(!eT(o))throw fa.create("not-registered");const l=o.authToken;if(!e&&J5(l))return o;if(l.requestStatus===1)return n=Q5(t,e),o;{if(!navigator.onLine)throw fa.create("app-offline");const u=e4(o);return n=X5(t,u),u}});return n?await n:r.authToken}async function Q5(t,e){let n=await j1(t.appConfig);for(;n.authToken.requestStatus===1;)await K2(100),n=await j1(t.appConfig);const r=n.authToken;return r.requestStatus===0?ty(t,e):r}function j1(t){return jf(t,e=>{if(!eT(e))throw fa.create("not-registered");const n=e.authToken;return t4(n)?{...e,authToken:{requestStatus:0}}:e})}async function X5(t,e){try{const n=await K5(t,e),r={...e,authToken:n};return await Qh(t.appConfig,r),n}catch(n){if(z2(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await J2(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Qh(t.appConfig,r)}throw n}}function eT(t){return t!==void 0&&t.registrationStatus===2}function J5(t){return t.requestStatus===2&&!Z5(t)}function Z5(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+C5}function e4(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function t4(t){return t.requestStatus===1&&t.requestTime+F2<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n4(t){const e=t,{installationEntry:n,registrationPromise:r}=await ey(e);return r?r.catch(console.error):ty(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r4(t,e=!1){const n=t;return await s4(n),(await ty(n,e)).token}async function s4(t){const{registrationPromise:e}=await ey(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(t){if(!t||!t.options)throw eg("App Configuration");if(!t.name)throw eg("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw eg(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function eg(t){return fa.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="installations",o4="installations-internal",a4=t=>{const e=t.getProvider("app").getImmediate(),n=i4(e),r=wo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},l4=t=>{const e=t.getProvider("app").getImmediate(),n=wo(e,tT).getImmediate();return{getId:()=>n4(n),getToken:s=>r4(n,s)}};function c4(){ts(new Dr(tT,a4,"PUBLIC")),ts(new Dr(o4,l4,"PRIVATE"))}c4();Zn(V2,J0);Zn(V2,J0,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh="analytics",u4="firebase_id",d4="origin",h4=60*1e3,f4="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ny="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn=new Nf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},gr=new ba("analytics","Analytics",p4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(t){if(!t.startsWith(ny)){const e=gr.create("invalid-gtag-resource",{gtagURL:t});return Fn.warn(e.message),""}return t}function nT(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function g4(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function y4(t,e){const n=g4("firebase-js-sdk-policy",{createScriptURL:m4}),r=document.createElement("script"),s=`${ny}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function v4(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function w4(t,e,n,r,s,o){const l=r[s];try{if(l)await e[l];else{const d=(await nT(n)).find(p=>p.measurementId===s);d&&await e[d.appId]}}catch(u){Fn.error(u)}t("config",s,o)}async function x4(t,e,n,r,s){try{let o=[];if(s&&s.send_to){let l=s.send_to;Array.isArray(l)||(l=[l]);const u=await nT(n);for(const d of l){const p=u.find(v=>v.measurementId===d),g=p&&e[p.appId];if(g)o.push(g);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",r,s||{})}catch(o){Fn.error(o)}}function b4(t,e,n,r){async function s(o,...l){try{if(o==="event"){const[u,d]=l;await x4(t,e,n,u,d)}else if(o==="config"){const[u,d]=l;await w4(t,e,n,r,u,d)}else if(o==="consent"){const[u,d]=l;t("consent",u,d)}else if(o==="get"){const[u,d,p]=l;t("get",u,d,p)}else if(o==="set"){const[u]=l;t("set",u)}else t(o,...l)}catch(u){Fn.error(u)}}return s}function _4(t,e,n,r,s){let o=function(...l){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=b4(o,t,e,n),{gtagCore:o,wrappedGtag:window[s]}}function E4(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(ny)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=30,S4=1e3;class C4{constructor(e={},n=S4){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const rT=new C4;function I4(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function R4(t){const{appId:e,apiKey:n}=t,r={method:"GET",headers:I4(n)},s=f4.replace("{app-id}",e),o=await fetch(s,r);if(o.status!==200&&o.status!==304){let l="";try{const u=await o.json();u.error?.message&&(l=u.error.message)}catch{}throw gr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function A4(t,e=rT,n){const{appId:r,apiKey:s,measurementId:o}=t.options;if(!r)throw gr.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw gr.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new P4;return setTimeout(async()=>{u.abort()},h4),sT({appId:r,apiKey:s,measurementId:o},l,u,e)}async function sT(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=rT){const{appId:o,measurementId:l}=t;try{await N4(r,e)}catch(u){if(l)return Fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:o,measurementId:l};throw u}try{const u=await R4(t);return s.deleteThrottleMetadata(o),u}catch(u){const d=u;if(!k4(d)){if(s.deleteThrottleMetadata(o),l)return Fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:o,measurementId:l};throw u}const p=Number(d?.customData?.httpStatus)===503?E1(n,s.intervalMillis,T4):E1(n,s.intervalMillis),g={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return s.setThrottleMetadata(o,g),Fn.debug(`Calling attemptFetch again in ${p} millis`),sT(t,g,r,s)}}function N4(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(o),r(gr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function k4(t){if(!(t instanceof Vr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class P4{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function j4(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const o=await e,l={...r,send_to:o};t("event",n,l)}}async function D4(t,e,n,r){if(r&&r.global){const s={};for(const o of Object.keys(n))s[`user_properties.${o}`]=n[o];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M4(){if(N2())try{await k2()}catch(t){return Fn.warn(gr.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Fn.warn(gr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function L4(t,e,n,r,s,o,l){const u=A4(t);u.then(w=>{n[w.measurementId]=w.appId,t.options.measurementId&&w.measurementId!==t.options.measurementId&&Fn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>Fn.error(w)),e.push(u);const d=M4().then(w=>{if(w)return r.getId()}),[p,g]=await Promise.all([u,d]);E4(o)||y4(o,p.measurementId),s("js",new Date);const v=l?.config??{};return v[d4]="firebase",v.update=!0,g!=null&&(v[u4]=g),s("config",p.measurementId,v),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e){this.app=e}_delete(){return delete ml[this.app.options.appId],Promise.resolve()}}let ml={},D1=[];const M1={};let tg="dataLayer",V4="gtag",L1,ry,O1=!1;function F4(){const t=[];if(A2()&&t.push("This is a browser extension environment."),sP()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=gr.create("invalid-analytics-context",{errorInfo:e});Fn.warn(n.message)}}function U4(t,e,n){F4();const r=t.options.appId;if(!r)throw gr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw gr.create("no-api-key");if(ml[r]!=null)throw gr.create("already-exists",{id:r});if(!O1){v4(tg);const{wrappedGtag:o,gtagCore:l}=_4(ml,D1,M1,tg,V4);ry=o,L1=l,O1=!0}return ml[r]=L4(t,D1,M1,e,L1,tg,n),new O4(t)}function B4(t=kf()){t=at(t);const e=wo(t,Xh);return e.isInitialized()?e.getImmediate():z4(t)}function z4(t,e={}){const n=wo(t,Xh);if(n.isInitialized()){const s=n.getImmediate();if(hi(e,n.getOptions()))return s;throw gr.create("already-initialized")}return n.initialize({options:e})}function $4(t,e,n){t=at(t),D4(ry,ml[t.app.options.appId],e,n).catch(r=>Fn.error(r))}function W4(t,e,n,r){t=at(t),j4(ry,ml[t.app.options.appId],e,n,r).catch(s=>Fn.error(s))}const V1="@firebase/analytics",F1="0.10.19";function q4(){ts(new Dr(Xh,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return U4(r,s,n)},"PUBLIC")),ts(new Dr("analytics-internal",t,"PRIVATE")),Zn(V1,F1),Zn(V1,F1,"esm2020");function t(e){try{const n=e.getProvider(Xh).getImmediate();return{logEvent:(r,s,o)=>W4(n,r,s,o),setUserProperties:(r,s)=>$4(n,r,s)}}catch(n){throw gr.create("interop-component-reg-failed",{reason:n})}}}q4();function iT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const H4=iT,oT=new ba("auth","Firebase",iT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh=new Nf("@firebase/auth");function G4(t,...e){Jh.logLevel<=Be.WARN&&Jh.warn(`Auth (${_a}): ${t}`,...e)}function Nh(t,...e){Jh.logLevel<=Be.ERROR&&Jh.error(`Auth (${_a}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(t,...e){throw iy(t,...e)}function es(t,...e){return iy(t,...e)}function sy(t,e,n){const r={...H4(),[e]:n};return new ba("auth","Firebase",r).create(e,{appName:t.name})}function ui(t){return sy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function K4(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Mr(t,"argument-error"),sy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function iy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return oT.create(t,...e)}function Se(t,e,...n){if(!t)throw iy(e,...n)}function ai(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nh(e),new Error(e)}function pi(t,e){t||ai(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(){return typeof self<"u"&&self.location?.href||""}function Y4(){return U1()==="http:"||U1()==="https:"}function U1(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Y4()||A2()||"connection"in navigator)?navigator.onLine:!0}function X4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n){this.shortDelay=e,this.longDelay=n,pi(n>e,"Short delay should be less than long delay!"),this.isMobile=Jk()||tP()}get(){return Q4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t,e){pi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ai("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ai("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ai("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ej=new Vu(3e4,6e4);function xo(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function bo(t,e,n,r,s={}){return lT(t,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=Ou({key:t.config.apiKey,...l}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:d,...o};return eP()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&vo(t.emulatorConfig.host)&&(p.credentials="include"),aT.fetch()(await cT(t,t.config.apiHost,n,u),p)})}async function lT(t,e,n){t._canInitEmulator=!1;const r={...J4,...e};try{const s=new nj(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw hh(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[d,p]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw hh(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw hh(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw hh(t,"user-disabled",l);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw sy(t,g,p);Mr(t,g)}}catch(s){if(s instanceof Vr)throw s;Mr(t,"network-request-failed",{message:String(s)})}}async function Fu(t,e,n,r,s={}){const o=await bo(t,e,n,r,s);return"mfaPendingCredential"in o&&Mr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function cT(t,e,n,r){const s=`${e}${n}?${r}`,o=t,l=o.config.emulator?oy(t.config,s):`${t.config.apiScheme}://${s}`;return Z4.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function tj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(es(this.auth,"network-request-failed")),ej.get())})}}function hh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=es(t,e,r);return s.customData._tokenResponse=n,s}function B1(t){return t!==void 0&&t.enterprise!==void 0}class rj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function sj(t,e){return bo(t,"GET","/v2/recaptchaConfig",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ij(t,e){return bo(t,"POST","/v1/accounts:delete",e)}async function Zh(t,e){return bo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oj(t,e=!1){const n=at(t),r=await n.getIdToken(e),s=ay(r);Se(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:r,authTime:Xc(ng(s.auth_time)),issuedAtTime:Xc(ng(s.iat)),expirationTime:Xc(ng(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function ng(t){return Number(t)*1e3}function ay(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Nh("JWT malformed, contained fewer than 3 sections"),null;try{const s=E2(n);return s?JSON.parse(s):(Nh("Failed to decode base64 JWT payload"),null)}catch(s){return Nh("Caught error parsing JWT payload as JSON",s?.toString()),null}}function z1(t){const e=ay(t);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Vr&&aj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function aj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xc(this.lastLoginAt),this.creationTime=Xc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ef(t){const e=t.auth,n=await t.getIdToken(),r=await pu(t,Zh(e,{idToken:n}));Se(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=s.providerUserInfo?.length?uT(s.providerUserInfo):[],l=uj(t.providerData,o),u=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!l?.length,p=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Hg(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,g)}async function cj(t){const e=at(t);await ef(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uj(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function uT(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dj(t,e){const n=await lT(t,{},async()=>{const r=Ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await cT(t,s,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:r};return t.emulatorConfig&&vo(t.emulatorConfig.host)&&(d.credentials="include"),aT.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hj(t,e){return bo(t,"POST","/v2/accounts:revokeToken",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):z1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const n=z1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await dj(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,l=new gl;return r&&(Se(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Se(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Se(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gl,this.toJSON())}_performRefresh(){return ai("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t,e){Se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Zr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new lj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Hg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await pu(this,this.stsTokenManager.getToken(this.auth,e));return Se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oj(this,e)}reload(){return cj(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ef(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(ui(this.auth));const e=await this.getIdToken();return await pu(this,ij(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,u=n.tenantId??void 0,d=n._redirectEventId??void 0,p=n.createdAt??void 0,g=n.lastLoginAt??void 0,{uid:v,emailVerified:w,isAnonymous:T,providerData:A,stsTokenManager:N}=n;Se(v&&N,e,"internal-error");const C=gl.fromJSON(this.name,N);Se(typeof v=="string",e,"internal-error"),Ki(r,e.name),Ki(s,e.name),Se(typeof w=="boolean",e,"internal-error"),Se(typeof T=="boolean",e,"internal-error"),Ki(o,e.name),Ki(l,e.name),Ki(u,e.name),Ki(d,e.name),Ki(p,e.name),Ki(g,e.name);const D=new Zr({uid:v,auth:e,email:s,emailVerified:w,displayName:r,isAnonymous:T,photoURL:l,phoneNumber:o,tenantId:u,stsTokenManager:C,createdAt:p,lastLoginAt:g});return A&&Array.isArray(A)&&(D.providerData=A.map(j=>({...j}))),d&&(D._redirectEventId=d),D}static async _fromIdTokenResponse(e,n,r=!1){const s=new gl;s.updateFromServerResponse(n);const o=new Zr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ef(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Se(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?uT(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,u=new gl;u.updateFromIdToken(r);const d=new Zr({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Hg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=new Map;function li(t){pi(t instanceof Function,"Expected a class definition");let e=$1.get(t);return e?(pi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}dT.type="NONE";const W1=dT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(t,e,n){return`firebase:${t}:${e}:${n}`}class yl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=kh(this.userKey,s.apiKey,o),this.fullPersistenceKey=kh("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Zh(this.auth,{idToken:e}).catch(()=>{});return n?Zr._fromGetAccountInfoResponse(this.auth,n,e):null}return Zr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new yl(li(W1),e,r);const s=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||li(W1);const l=kh(r,e.config.apiKey,e.name);let u=null;for(const p of n)try{const g=await p._get(l);if(g){let v;if(typeof g=="string"){const w=await Zh(e,{idToken:g}).catch(()=>{});if(!w)break;v=await Zr._fromGetAccountInfoResponse(e,w,g)}else v=Zr._fromJSON(e,g);p!==o&&(u=v),o=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new yl(o,e,r):(o=d[0],u&&await o._set(l,u.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new yl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yT(e))return"Blackberry";if(vT(e))return"Webos";if(fT(e))return"Safari";if((e.includes("chrome/")||pT(e))&&!e.includes("edge/"))return"Chrome";if(gT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function hT(t=An()){return/firefox\//i.test(t)}function fT(t=An()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pT(t=An()){return/crios\//i.test(t)}function mT(t=An()){return/iemobile/i.test(t)}function gT(t=An()){return/android/i.test(t)}function yT(t=An()){return/blackberry/i.test(t)}function vT(t=An()){return/webos/i.test(t)}function ly(t=An()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fj(t=An()){return ly(t)&&!!window.navigator?.standalone}function pj(){return nP()&&document.documentMode===10}function wT(t=An()){return ly(t)||gT(t)||vT(t)||yT(t)||/windows phone/i.test(t)||mT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t,e=[]){let n;switch(t){case"Browser":n=q1(An());break;case"Worker":n=`${q1(An())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${_a}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,u)=>{try{const d=e(o);l(d)}catch(d){u(d)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gj(t,e={}){return bo(t,"GET","/v2/passwordPolicy",xo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=6;class vj{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??yj,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new H1(this),this.idTokenSubscription=new H1(this),this.beforeStateQueue=new mj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=li(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await yl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Zh(this,{idToken:e}),r=await Zr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Qn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&u?.user&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ef(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=X4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(ui(this));const n=e?at(e):null;return n&&Se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(ui(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(ui(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gj(this),n=new vj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ba("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await hj(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&li(e)||this._popupRedirectResolver;Se(n,this,"argument-error"),this.redirectPersistenceManager=await yl.create(this,[li(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&G4(`Error while retrieving App Check token: ${e.error}`),e?.token}}function _o(t){return at(t)}class H1{constructor(e){this.auth=e,this.observer=null,this.addObserver=cP(n=>this.observer=n)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Df={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xj(t){Df=t}function bT(t){return Df.loadJS(t)}function bj(){return Df.recaptchaEnterpriseScript}function _j(){return Df.gapiScript}function Ej(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Tj{constructor(){this.enterprise=new Sj}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Sj{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Cj="recaptcha-enterprise",_T="NO_RECAPTCHA";class Ij{constructor(e){this.type=Cj,this.auth=_o(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{sj(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const p=new rj(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{u(d)})})}function s(o,l,u){const d=window.grecaptcha;B1(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(_T)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Tj().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(u=>{if(!n&&B1(window.grecaptcha))s(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=bj();d.length!==0&&(d+=u),bT(d).then(()=>{s(u,o,l)}).catch(p=>{l(p)})}}).catch(u=>{l(u)})})}}async function G1(t,e,n,r=!1,s=!1){const o=new Ij(t);let l;if(s)l=_T;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const u={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,p=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Gg(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await G1(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await G1(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(t,e){const n=wo(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(hi(o,e??{}))return s;Mr(s,"already-initialized")}return n.initialize({options:e})}function Aj(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(li);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Nj(t,e,n){const r=_o(t);Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=ET(e),{host:l,port:u}=kj(e),d=u===null?"":`:${u}`,p={url:`${o}//${l}${d}/`},g=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Se(hi(p,r.config.emulator)&&hi(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,vo(l)?(Y0(`${o}//${l}${d}`),Q0("Auth",!0)):Pj()}function ET(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kj(t){const e=ET(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:K1(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:K1(l)}}}function K1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Pj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ai("not implemented")}_getIdTokenResponse(e){return ai("not implemented")}_linkToIdToken(e,n){return ai("not implemented")}_getReauthenticationResolver(e){return ai("not implemented")}}async function jj(t,e){return bo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dj(t,e){return Fu(t,"POST","/v1/accounts:signInWithPassword",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mj(t,e){return Fu(t,"POST","/v1/accounts:signInWithEmailLink",xo(t,e))}async function Lj(t,e){return Fu(t,"POST","/v1/accounts:signInWithEmailLink",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu extends cy{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new mu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new mu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gg(e,n,"signInWithPassword",Dj);case"emailLink":return Mj(e,{email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gg(e,r,"signUpPassword",jj);case"emailLink":return Lj(e,{idToken:n,email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vl(t,e){return Fu(t,"POST","/v1/accounts:signInWithIdp",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj="http://localhost";class ma extends cy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ma(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Mr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...o}=n;if(!r||!s)return null;const l=new ma(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return vl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,vl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vl(e,n)}buildRequest(){const e={requestUri:Oj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ou(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Fj(t){const e=$c(Wc(t)).link,n=e?$c(Wc(e)).deep_link_id:null,r=$c(Wc(t)).deep_link_id;return(r?$c(Wc(r)).link:null)||r||n||e||t}class uy{constructor(e){const n=$c(Wc(e)),r=n.apiKey??null,s=n.oobCode??null,o=Vj(n.mode??null);Se(r&&s&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Fj(e);try{return new uy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(){this.providerId=Dl.PROVIDER_ID}static credential(e,n){return mu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=uy.parseLink(n);return Se(r,"argument-error"),mu._fromEmailAndCode(e,r.code,r.tenantId)}}Dl.PROVIDER_ID="password";Dl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Dl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends dy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Uu{constructor(){super("facebook.com")}static credential(e){return ma._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends Uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ma._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return oi.credential(n,r)}catch{return null}}}oi.GOOGLE_SIGN_IN_METHOD="google.com";oi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends Uu{constructor(){super("github.com")}static credential(e){return ma._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eo.credential(e.oauthAccessToken)}catch{return null}}}eo.GITHUB_SIGN_IN_METHOD="github.com";eo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends Uu{constructor(){super("twitter.com")}static credential(e,n){return ma._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return to.credential(n,r)}catch{return null}}}to.TWITTER_SIGN_IN_METHOD="twitter.com";to.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uj(t,e){return Fu(t,"POST","/v1/accounts:signUp",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await Zr._fromIdTokenResponse(e,r,s),l=Y1(r);return new ga({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Y1(r);return new ga({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Y1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends Vr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,tf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new tf(e,n,r,s)}}function TT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?tf._fromErrorAndOperation(t,o,e,r):o})}async function Bj(t,e,n=!1){const r=await pu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ga._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zj(t,e,n=!1){const{auth:r}=t;if(Qn(r.app))return Promise.reject(ui(r));const s="reauthenticate";try{const o=await pu(t,TT(r,s,e,t),n);Se(o.idToken,r,"internal-error");const l=ay(o.idToken);Se(l,r,"internal-error");const{sub:u}=l;return Se(t.uid===u,r,"user-mismatch"),ga._forOperation(t,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&Mr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ST(t,e,n=!1){if(Qn(t.app))return Promise.reject(ui(t));const r="signIn",s=await TT(t,r,e),o=await ga._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function $j(t,e){return ST(_o(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CT(t){const e=_o(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IT(t,e,n){if(Qn(t.app))return Promise.reject(ui(t));const r=_o(t),l=await Gg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Uj).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&CT(t),d}),u=await ga._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(u.user),u}function RT(t,e,n){return Qn(t.app)?Promise.reject(ui(t)):$j(at(t),Dl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&CT(t),r})}function Wj(t,e,n,r){return at(t).onIdTokenChanged(e,n,r)}function qj(t,e,n){return at(t).beforeAuthStateChanged(e,n)}function Ea(t,e,n,r){return at(t).onAuthStateChanged(e,n,r)}function Hj(t){return at(t).signOut()}const nf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(nf,"1"),this.storage.removeItem(nf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=1e3,Kj=10;class NT extends AT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);pj()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Kj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Gj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NT.type="LOCAL";const Yj=NT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT extends AT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kT.type="SESSION";const PT=kT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Mf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async p=>p(n.origin,o)),d=await Qj(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((u,d)=>{const p=hy("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(v){const w=v;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(w.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(){return window}function Jj(t){ks().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(){return typeof ks().WorkerGlobalScope<"u"&&typeof ks().importScripts=="function"}async function Zj(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eD(){return navigator?.serviceWorker?.controller||null}function tD(){return jT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="firebaseLocalStorageDb",nD=1,rf="firebaseLocalStorage",MT="fbase_key";class Bu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Lf(t,e){return t.transaction([rf],e?"readwrite":"readonly").objectStore(rf)}function rD(){const t=indexedDB.deleteDatabase(DT);return new Bu(t).toPromise()}function Kg(){const t=indexedDB.open(DT,nD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(rf,{keyPath:MT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(rf)?e(r):(r.close(),await rD(),e(await Kg()))})})}async function Q1(t,e,n){const r=Lf(t,!0).put({[MT]:e,value:n});return new Bu(r).toPromise()}async function sD(t,e){const n=Lf(t,!1).get(e),r=await new Bu(n).toPromise();return r===void 0?null:r.value}function X1(t,e){const n=Lf(t,!0).delete(e);return new Bu(n).toPromise()}const iD=800,oD=3;class LT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>oD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mf._getInstance(tD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Zj(),!this.activeServiceWorker)return;this.sender=new Xj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kg();return await Q1(e,nf,"1"),await X1(e,nf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Q1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>sD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>X1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Lf(s,!1).getAll();return new Bu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LT.type="LOCAL";const aD=LT;new Vu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(t,e){return e?li(e):(Se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy extends cy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lD(t){return ST(t.auth,new fy(t),t.bypassAuthState)}function cD(t){const{auth:e,user:n}=t;return Se(n,e,"internal-error"),zj(n,new fy(t),t.bypassAuthState)}async function uD(t){const{auth:e,user:n}=t;return Se(n,e,"internal-error"),Bj(n,new fy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lD;case"linkViaPopup":case"linkViaRedirect":return uD;case"reauthViaPopup":case"reauthViaRedirect":return cD;default:Mr(this.auth,"internal-error")}}resolve(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=new Vu(2e3,1e4);async function FT(t,e,n){if(Qn(t.app))return Promise.reject(es(t,"operation-not-supported-in-this-environment"));const r=_o(t);K4(t,e,dy);const s=OT(r,n);return new sa(r,"signInViaPopup",e,s).executeNotNull()}class sa extends VT{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,sa.currentPopupAction&&sa.currentPopupAction.cancel(),sa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){pi(this.filter.length===1,"Popup operations only handle one event");const e=hy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(es(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(es(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sa.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(es(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dD.get())};e()}}sa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD="pendingRedirect",Ph=new Map;class fD extends VT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ph.get(this.auth._key());if(!e){try{const r=await pD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ph.set(this.auth._key(),e)}return this.bypassAuthState||Ph.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pD(t,e){const n=yD(e),r=gD(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function mD(t,e){Ph.set(t._key(),e)}function gD(t){return li(t._redirectPersistence)}function yD(t){return kh(hD,t.config.apiKey,t.name)}async function vD(t,e,n=!1){if(Qn(t.app))return Promise.reject(ui(t));const r=_o(t),s=OT(r,e),l=await new fD(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=600*1e3;class xD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!UT(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(es(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wD&&this.cachedEventUids.clear(),this.cachedEventUids.has(J1(e))}saveEventToCache(e){this.cachedEventUids.add(J1(e)),this.lastProcessedEventTime=Date.now()}}function J1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function UT({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function bD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _D(t,e={}){return bo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TD=/^https?/;async function SD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _D(t);for(const n of e)try{if(CD(n))return}catch{}Mr(t,"unauthorized-domain")}function CD(t){const e=qg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!TD.test(n))return!1;if(ED.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=new Vu(3e4,6e4);function Z1(){const t=ks().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function RD(t){return new Promise((e,n)=>{function r(){Z1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Z1(),n(es(t,"network-request-failed"))},timeout:ID.get()})}if(ks().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ks().gapi?.load)r();else{const s=Ej("iframefcb");return ks()[s]=()=>{gapi.load?r():n(es(t,"network-request-failed"))},bT(`${_j()}?onload=${s}`).catch(o=>n(o))}}).catch(e=>{throw jh=null,e})}let jh=null;function AD(t){return jh=jh||RD(t),jh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=new Vu(5e3,15e3),kD="__/auth/iframe",PD="emulator/auth/iframe",jD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MD(t){const e=t.config;Se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?oy(e,PD):`https://${t.config.authDomain}/${kD}`,r={apiKey:e.apiKey,appName:t.name,v:_a},s=DD.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ou(r).slice(1)}`}async function LD(t){const e=await AD(t),n=ks().gapi;return Se(n,t,"internal-error"),e.open({where:document.body,url:MD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jD,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=es(t,"network-request-failed"),u=ks().setTimeout(()=>{o(l)},ND.get());function d(){ks().clearTimeout(u),s(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VD=500,FD=600,UD="_blank",BD="http://localhost";class eb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zD(t,e,n,r=VD,s=FD){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d={...OD,width:r.toString(),height:s.toString(),top:o,left:l},p=An().toLowerCase();n&&(u=pT(p)?UD:n),hT(p)&&(e=e||BD,d.scrollbars="yes");const g=Object.entries(d).reduce((w,[T,A])=>`${w}${T}=${A},`,"");if(fj(p)&&u!=="_self")return $D(e||"",u),new eb(null);const v=window.open(e||"",u,g);Se(v,t,"popup-blocked");try{v.focus()}catch{}return new eb(v)}function $D(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD="__/auth/handler",qD="emulator/auth/handler",HD=encodeURIComponent("fac");async function tb(t,e,n,r,s,o){Se(t.config.authDomain,t,"auth-domain-config-required"),Se(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:_a,eventId:s};if(e instanceof dy){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",lP(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof Uu){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const u=l;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const d=await t._getAppCheckToken(),p=d?`#${HD}=${encodeURIComponent(d)}`:"";return`${GD(t)}?${Ou(u).slice(1)}${p}`}function GD({config:t}){return t.emulator?oy(t,qD):`https://${t.authDomain}/${WD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="webStorageSupport";class KD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PT,this._completeRedirectFn=vD,this._overrideRedirectResult=mD}async _openPopup(e,n,r,s){pi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await tb(e,n,r,qg(),s);return zD(e,o,hy())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await tb(e,n,r,qg(),s);return Jj(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(pi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await LD(e),r=new xD(e);return n.register("authEvent",s=>(Se(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(rg,{type:rg},s=>{const o=s?.[0]?.[rg];o!==void 0&&n(!!o),Mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=SD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return wT()||fT()||ly()}}const YD=KD;var nb="@firebase/auth",rb="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JD(t){ts(new Dr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Se(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xT(t)},p=new wj(r,s,o,d);return Aj(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ts(new Dr("auth-internal",e=>{const n=_o(e.getProvider("auth").getImmediate());return(r=>new QD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(nb,rb,XD(t)),Zn(nb,rb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=300,e6=I2("authIdTokenMaxAge")||ZD;let sb=null;const t6=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>e6)return;const s=n?.token;sb!==s&&(sb=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function n6(t=kf()){const e=wo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Rj(t,{popupRedirectResolver:YD,persistence:[aD,Yj,PT]}),r=I2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=t6(o.toString());qj(n,l,()=>l(n.currentUser)),Wj(n,u=>l(u))}}const s=T2("auth");return s&&Nj(n,`http://${s}`),n}function r6(){return document.getElementsByTagName("head")?.[0]??document}xj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=es("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",r6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JD("Browser");var ib=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ao,BT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function P(){}P.prototype=R.prototype,I.F=R.prototype,I.prototype=new P,I.prototype.constructor=I,I.D=function(M,O,q){for(var L=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)L[ke-2]=arguments[ke];return R.prototype[O].apply(M,L)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,R,P){P||(P=0);const M=Array(16);if(typeof R=="string")for(var O=0;O<16;++O)M[O]=R.charCodeAt(P++)|R.charCodeAt(P++)<<8|R.charCodeAt(P++)<<16|R.charCodeAt(P++)<<24;else for(O=0;O<16;++O)M[O]=R[P++]|R[P++]<<8|R[P++]<<16|R[P++]<<24;R=I.g[0],P=I.g[1],O=I.g[2];let q=I.g[3],L;L=R+(q^P&(O^q))+M[0]+3614090360&4294967295,R=P+(L<<7&4294967295|L>>>25),L=q+(O^R&(P^O))+M[1]+3905402710&4294967295,q=R+(L<<12&4294967295|L>>>20),L=O+(P^q&(R^P))+M[2]+606105819&4294967295,O=q+(L<<17&4294967295|L>>>15),L=P+(R^O&(q^R))+M[3]+3250441966&4294967295,P=O+(L<<22&4294967295|L>>>10),L=R+(q^P&(O^q))+M[4]+4118548399&4294967295,R=P+(L<<7&4294967295|L>>>25),L=q+(O^R&(P^O))+M[5]+1200080426&4294967295,q=R+(L<<12&4294967295|L>>>20),L=O+(P^q&(R^P))+M[6]+2821735955&4294967295,O=q+(L<<17&4294967295|L>>>15),L=P+(R^O&(q^R))+M[7]+4249261313&4294967295,P=O+(L<<22&4294967295|L>>>10),L=R+(q^P&(O^q))+M[8]+1770035416&4294967295,R=P+(L<<7&4294967295|L>>>25),L=q+(O^R&(P^O))+M[9]+2336552879&4294967295,q=R+(L<<12&4294967295|L>>>20),L=O+(P^q&(R^P))+M[10]+4294925233&4294967295,O=q+(L<<17&4294967295|L>>>15),L=P+(R^O&(q^R))+M[11]+2304563134&4294967295,P=O+(L<<22&4294967295|L>>>10),L=R+(q^P&(O^q))+M[12]+1804603682&4294967295,R=P+(L<<7&4294967295|L>>>25),L=q+(O^R&(P^O))+M[13]+4254626195&4294967295,q=R+(L<<12&4294967295|L>>>20),L=O+(P^q&(R^P))+M[14]+2792965006&4294967295,O=q+(L<<17&4294967295|L>>>15),L=P+(R^O&(q^R))+M[15]+1236535329&4294967295,P=O+(L<<22&4294967295|L>>>10),L=R+(O^q&(P^O))+M[1]+4129170786&4294967295,R=P+(L<<5&4294967295|L>>>27),L=q+(P^O&(R^P))+M[6]+3225465664&4294967295,q=R+(L<<9&4294967295|L>>>23),L=O+(R^P&(q^R))+M[11]+643717713&4294967295,O=q+(L<<14&4294967295|L>>>18),L=P+(q^R&(O^q))+M[0]+3921069994&4294967295,P=O+(L<<20&4294967295|L>>>12),L=R+(O^q&(P^O))+M[5]+3593408605&4294967295,R=P+(L<<5&4294967295|L>>>27),L=q+(P^O&(R^P))+M[10]+38016083&4294967295,q=R+(L<<9&4294967295|L>>>23),L=O+(R^P&(q^R))+M[15]+3634488961&4294967295,O=q+(L<<14&4294967295|L>>>18),L=P+(q^R&(O^q))+M[4]+3889429448&4294967295,P=O+(L<<20&4294967295|L>>>12),L=R+(O^q&(P^O))+M[9]+568446438&4294967295,R=P+(L<<5&4294967295|L>>>27),L=q+(P^O&(R^P))+M[14]+3275163606&4294967295,q=R+(L<<9&4294967295|L>>>23),L=O+(R^P&(q^R))+M[3]+4107603335&4294967295,O=q+(L<<14&4294967295|L>>>18),L=P+(q^R&(O^q))+M[8]+1163531501&4294967295,P=O+(L<<20&4294967295|L>>>12),L=R+(O^q&(P^O))+M[13]+2850285829&4294967295,R=P+(L<<5&4294967295|L>>>27),L=q+(P^O&(R^P))+M[2]+4243563512&4294967295,q=R+(L<<9&4294967295|L>>>23),L=O+(R^P&(q^R))+M[7]+1735328473&4294967295,O=q+(L<<14&4294967295|L>>>18),L=P+(q^R&(O^q))+M[12]+2368359562&4294967295,P=O+(L<<20&4294967295|L>>>12),L=R+(P^O^q)+M[5]+4294588738&4294967295,R=P+(L<<4&4294967295|L>>>28),L=q+(R^P^O)+M[8]+2272392833&4294967295,q=R+(L<<11&4294967295|L>>>21),L=O+(q^R^P)+M[11]+1839030562&4294967295,O=q+(L<<16&4294967295|L>>>16),L=P+(O^q^R)+M[14]+4259657740&4294967295,P=O+(L<<23&4294967295|L>>>9),L=R+(P^O^q)+M[1]+2763975236&4294967295,R=P+(L<<4&4294967295|L>>>28),L=q+(R^P^O)+M[4]+1272893353&4294967295,q=R+(L<<11&4294967295|L>>>21),L=O+(q^R^P)+M[7]+4139469664&4294967295,O=q+(L<<16&4294967295|L>>>16),L=P+(O^q^R)+M[10]+3200236656&4294967295,P=O+(L<<23&4294967295|L>>>9),L=R+(P^O^q)+M[13]+681279174&4294967295,R=P+(L<<4&4294967295|L>>>28),L=q+(R^P^O)+M[0]+3936430074&4294967295,q=R+(L<<11&4294967295|L>>>21),L=O+(q^R^P)+M[3]+3572445317&4294967295,O=q+(L<<16&4294967295|L>>>16),L=P+(O^q^R)+M[6]+76029189&4294967295,P=O+(L<<23&4294967295|L>>>9),L=R+(P^O^q)+M[9]+3654602809&4294967295,R=P+(L<<4&4294967295|L>>>28),L=q+(R^P^O)+M[12]+3873151461&4294967295,q=R+(L<<11&4294967295|L>>>21),L=O+(q^R^P)+M[15]+530742520&4294967295,O=q+(L<<16&4294967295|L>>>16),L=P+(O^q^R)+M[2]+3299628645&4294967295,P=O+(L<<23&4294967295|L>>>9),L=R+(O^(P|~q))+M[0]+4096336452&4294967295,R=P+(L<<6&4294967295|L>>>26),L=q+(P^(R|~O))+M[7]+1126891415&4294967295,q=R+(L<<10&4294967295|L>>>22),L=O+(R^(q|~P))+M[14]+2878612391&4294967295,O=q+(L<<15&4294967295|L>>>17),L=P+(q^(O|~R))+M[5]+4237533241&4294967295,P=O+(L<<21&4294967295|L>>>11),L=R+(O^(P|~q))+M[12]+1700485571&4294967295,R=P+(L<<6&4294967295|L>>>26),L=q+(P^(R|~O))+M[3]+2399980690&4294967295,q=R+(L<<10&4294967295|L>>>22),L=O+(R^(q|~P))+M[10]+4293915773&4294967295,O=q+(L<<15&4294967295|L>>>17),L=P+(q^(O|~R))+M[1]+2240044497&4294967295,P=O+(L<<21&4294967295|L>>>11),L=R+(O^(P|~q))+M[8]+1873313359&4294967295,R=P+(L<<6&4294967295|L>>>26),L=q+(P^(R|~O))+M[15]+4264355552&4294967295,q=R+(L<<10&4294967295|L>>>22),L=O+(R^(q|~P))+M[6]+2734768916&4294967295,O=q+(L<<15&4294967295|L>>>17),L=P+(q^(O|~R))+M[13]+1309151649&4294967295,P=O+(L<<21&4294967295|L>>>11),L=R+(O^(P|~q))+M[4]+4149444226&4294967295,R=P+(L<<6&4294967295|L>>>26),L=q+(P^(R|~O))+M[11]+3174756917&4294967295,q=R+(L<<10&4294967295|L>>>22),L=O+(R^(q|~P))+M[2]+718787259&4294967295,O=q+(L<<15&4294967295|L>>>17),L=P+(q^(O|~R))+M[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(O+(L<<21&4294967295|L>>>11))&4294967295,I.g[2]=I.g[2]+O&4294967295,I.g[3]=I.g[3]+q&4294967295}r.prototype.v=function(I,R){R===void 0&&(R=I.length);const P=R-this.blockSize,M=this.C;let O=this.h,q=0;for(;q<R;){if(O==0)for(;q<=P;)s(this,I,q),q+=this.blockSize;if(typeof I=="string"){for(;q<R;)if(M[O++]=I.charCodeAt(q++),O==this.blockSize){s(this,M),O=0;break}}else for(;q<R;)if(M[O++]=I[q++],O==this.blockSize){s(this,M),O=0;break}}this.h=O,this.o+=R},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;R=this.o*8;for(var P=I.length-8;P<I.length;++P)I[P]=R&255,R/=256;for(this.v(I),I=Array(16),R=0,P=0;P<4;++P)for(let M=0;M<32;M+=8)I[R++]=this.g[P]>>>M&255;return I};function o(I,R){var P=u;return Object.prototype.hasOwnProperty.call(P,I)?P[I]:P[I]=R(I)}function l(I,R){this.h=R;const P=[];let M=!0;for(let O=I.length-1;O>=0;O--){const q=I[O]|0;M&&q==R||(P[O]=q,M=!1)}this.g=P}var u={};function d(I){return-128<=I&&I<128?o(I,function(R){return new l([R|0],R<0?-1:0)}):new l([I|0],I<0?-1:0)}function p(I){if(isNaN(I)||!isFinite(I))return v;if(I<0)return C(p(-I));const R=[];let P=1;for(let M=0;I>=P;M++)R[M]=I/P|0,P*=4294967296;return new l(R,0)}function g(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return C(g(I.substring(1),R));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=p(Math.pow(R,8));let M=v;for(let q=0;q<I.length;q+=8){var O=Math.min(8,I.length-q);const L=parseInt(I.substring(q,q+O),R);O<8?(O=p(Math.pow(R,O)),M=M.j(O).add(p(L))):(M=M.j(P),M=M.add(p(L)))}return M}var v=d(0),w=d(1),T=d(16777216);t=l.prototype,t.m=function(){if(N(this))return-C(this).m();let I=0,R=1;for(let P=0;P<this.g.length;P++){const M=this.i(P);I+=(M>=0?M:4294967296+M)*R,R*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(A(this))return"0";if(N(this))return"-"+C(this).toString(I);const R=p(Math.pow(I,6));var P=this;let M="";for(;;){const O=W(P,R).g;P=D(P,O.j(R));let q=((P.g.length>0?P.g[0]:P.h)>>>0).toString(I);if(P=O,A(P))return q+M;for(;q.length<6;)q="0"+q;M=q+M}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function A(I){if(I.h!=0)return!1;for(let R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function N(I){return I.h==-1}t.l=function(I){return I=D(this,I),N(I)?-1:A(I)?0:1};function C(I){const R=I.g.length,P=[];for(let M=0;M<R;M++)P[M]=~I.g[M];return new l(P,~I.h).add(w)}t.abs=function(){return N(this)?C(this):this},t.add=function(I){const R=Math.max(this.g.length,I.g.length),P=[];let M=0;for(let O=0;O<=R;O++){let q=M+(this.i(O)&65535)+(I.i(O)&65535),L=(q>>>16)+(this.i(O)>>>16)+(I.i(O)>>>16);M=L>>>16,q&=65535,L&=65535,P[O]=L<<16|q}return new l(P,P[P.length-1]&-2147483648?-1:0)};function D(I,R){return I.add(C(R))}t.j=function(I){if(A(this)||A(I))return v;if(N(this))return N(I)?C(this).j(C(I)):C(C(this).j(I));if(N(I))return C(this.j(C(I)));if(this.l(T)<0&&I.l(T)<0)return p(this.m()*I.m());const R=this.g.length+I.g.length,P=[];for(var M=0;M<2*R;M++)P[M]=0;for(M=0;M<this.g.length;M++)for(let O=0;O<I.g.length;O++){const q=this.i(M)>>>16,L=this.i(M)&65535,ke=I.i(O)>>>16,Xe=I.i(O)&65535;P[2*M+2*O]+=L*Xe,j(P,2*M+2*O),P[2*M+2*O+1]+=q*Xe,j(P,2*M+2*O+1),P[2*M+2*O+1]+=L*ke,j(P,2*M+2*O+1),P[2*M+2*O+2]+=q*ke,j(P,2*M+2*O+2)}for(I=0;I<R;I++)P[I]=P[2*I+1]<<16|P[2*I];for(I=R;I<2*R;I++)P[I]=0;return new l(P,0)};function j(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function F(I,R){this.g=I,this.h=R}function W(I,R){if(A(R))throw Error("division by zero");if(A(I))return new F(v,v);if(N(I))return R=W(C(I),R),new F(C(R.g),C(R.h));if(N(R))return R=W(I,C(R)),new F(C(R.g),R.h);if(I.g.length>30){if(N(I)||N(R))throw Error("slowDivide_ only works with positive integers.");for(var P=w,M=R;M.l(I)<=0;)P=K(P),M=K(M);var O=B(P,1),q=B(M,1);for(M=B(M,2),P=B(P,2);!A(M);){var L=q.add(M);L.l(I)<=0&&(O=O.add(P),q=L),M=B(M,1),P=B(P,1)}return R=D(I,O.j(R)),new F(O,R)}for(O=v;I.l(R)>=0;){for(P=Math.max(1,Math.floor(I.m()/R.m())),M=Math.ceil(Math.log(P)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),q=p(P),L=q.j(R);N(L)||L.l(I)>0;)P-=M,q=p(P),L=q.j(R);A(q)&&(q=w),O=O.add(q),I=D(I,L)}return new F(O,I)}t.B=function(I){return W(this,I).h},t.and=function(I){const R=Math.max(this.g.length,I.g.length),P=[];for(let M=0;M<R;M++)P[M]=this.i(M)&I.i(M);return new l(P,this.h&I.h)},t.or=function(I){const R=Math.max(this.g.length,I.g.length),P=[];for(let M=0;M<R;M++)P[M]=this.i(M)|I.i(M);return new l(P,this.h|I.h)},t.xor=function(I){const R=Math.max(this.g.length,I.g.length),P=[];for(let M=0;M<R;M++)P[M]=this.i(M)^I.i(M);return new l(P,this.h^I.h)};function K(I){const R=I.g.length+1,P=[];for(let M=0;M<R;M++)P[M]=I.i(M)<<1|I.i(M-1)>>>31;return new l(P,I.h)}function B(I,R){const P=R>>5;R%=32;const M=I.g.length-P,O=[];for(let q=0;q<M;q++)O[q]=R>0?I.i(q+P)>>>R|I.i(q+P+1)<<32-R:I.i(q+P);return new l(O,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,BT=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=g,ao=l}).apply(typeof ib<"u"?ib:typeof self<"u"?self:typeof window<"u"?window:{});var fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zT,qc,$T,Dh,Yg,WT,qT,HT;(function(){var t,e=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof fh=="object"&&fh];for(var _=0;_<f.length;++_){var E=f[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function s(f,_){if(_)e:{var E=r;f=f.split(".");for(var k=0;k<f.length-1;k++){var G=f[k];if(!(G in E))break e;E=E[G]}f=f[f.length-1],k=E[f],_=_(k),_!=k&&_!=null&&e(E,f,{configurable:!0,writable:!0,value:_})}}s("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(f){return f||function(_){var E=[],k;for(k in _)Object.prototype.hasOwnProperty.call(_,k)&&E.push([k,_[k]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function d(f,_,E){return f.call.apply(f.bind,arguments)}function p(f,_,E){return p=d,p.apply(null,arguments)}function g(f,_){var E=Array.prototype.slice.call(arguments,1);return function(){var k=E.slice();return k.push.apply(k,arguments),f.apply(this,k)}}function v(f,_){function E(){}E.prototype=_.prototype,f.Z=_.prototype,f.prototype=new E,f.prototype.constructor=f,f.Ob=function(k,G,X){for(var ae=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)ae[Me-2]=arguments[Me];return _.prototype[G].apply(k,ae)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function T(f){const _=f.length;if(_>0){const E=Array(_);for(let k=0;k<_;k++)E[k]=f[k];return E}return[]}function A(f,_){for(let k=1;k<arguments.length;k++){const G=arguments[k];var E=typeof G;if(E=E!="object"?E:G?Array.isArray(G)?"array":E:"null",E=="array"||E=="object"&&typeof G.length=="number"){E=f.length||0;const X=G.length||0;f.length=E+X;for(let ae=0;ae<X;ae++)f[E+ae]=G[ae]}else f.push(G)}}class N{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function C(f){l.setTimeout(()=>{throw f},0)}function D(){var f=I;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class j{constructor(){this.h=this.g=null}add(_,E){const k=F.get();k.set(_,E),this.h?this.h.next=k:this.g=k,this.h=k}}var F=new N(()=>new W,f=>f.reset());class W{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let K,B=!1,I=new j,R=()=>{const f=Promise.resolve(void 0);K=()=>{f.then(P)}};function P(){for(var f;f=D();){try{f.h.call(f.g)}catch(E){C(E)}var _=F;_.j(f),_.h<100&&(_.h++,f.next=_.g,_.g=f)}B=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const E=()=>{};l.addEventListener("test",E,_),l.removeEventListener("test",E,_)}catch{}return f})();function L(f){return/^[\s\xa0]*$/.test(f)}function ke(f,_){O.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,_)}v(ke,O),ke.prototype.init=function(f,_){const E=this.type=f.type,k=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget,_||(E=="mouseover"?_=f.fromElement:E=="mouseout"&&(_=f.toElement)),this.relatedTarget=_,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Xe="closure_listenable_"+(Math.random()*1e6|0),ht=0;function ge(f,_,E,k,G){this.listener=f,this.proxy=null,this.src=_,this.type=E,this.capture=!!k,this.ha=G,this.key=++ht,this.da=this.fa=!1}function se(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function le(f,_,E){for(const k in f)_.call(E,f[k],k,f)}function Z(f,_){for(const E in f)_.call(void 0,f[E],E,f)}function U(f){const _={};for(const E in f)_[E]=f[E];return _}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ve(f,_){let E,k;for(let G=1;G<arguments.length;G++){k=arguments[G];for(E in k)f[E]=k[E];for(let X=0;X<J.length;X++)E=J[X],Object.prototype.hasOwnProperty.call(k,E)&&(f[E]=k[E])}}function be(f){this.src=f,this.g={},this.h=0}be.prototype.add=function(f,_,E,k,G){const X=f.toString();f=this.g[X],f||(f=this.g[X]=[],this.h++);const ae=Te(f,_,k,G);return ae>-1?(_=f[ae],E||(_.fa=!1)):(_=new ge(_,this.src,X,!!k,G),_.fa=E,f.push(_)),_};function Pe(f,_){const E=_.type;if(E in f.g){var k=f.g[E],G=Array.prototype.indexOf.call(k,_,void 0),X;(X=G>=0)&&Array.prototype.splice.call(k,G,1),X&&(se(_),f.g[E].length==0&&(delete f.g[E],f.h--))}}function Te(f,_,E,k){for(let G=0;G<f.length;++G){const X=f[G];if(!X.da&&X.listener==_&&X.capture==!!E&&X.ha==k)return G}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),je={};function Oe(f,_,E,k,G){if(Array.isArray(_)){for(let X=0;X<_.length;X++)Oe(f,_[X],E,k,G);return null}return E=_i(E),f&&f[Xe]?f.J(_,E,u(k)?!!k.capture:!1,G):Ie(f,_,E,!1,k,G)}function Ie(f,_,E,k,G,X){if(!_)throw Error("Invalid event type");const ae=u(G)?!!G.capture:!!G;let Me=nr(f);if(Me||(f[Ue]=Me=new be(f)),E=Me.add(_,E,k,ae,X),E.proxy)return E;if(k=vr(),E.proxy=k,k.src=f,k.listener=E,f.addEventListener)q||(G=ae),G===void 0&&(G=!1),f.addEventListener(_.toString(),k,G);else if(f.attachEvent)f.attachEvent(gn(_.toString()),k);else if(f.addListener&&f.removeListener)f.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return E}function vr(){function f(E){return _.call(f.src,f.listener,E)}const _=Fr;return f}function mn(f,_,E,k,G){if(Array.isArray(_))for(var X=0;X<_.length;X++)mn(f,_[X],E,k,G);else k=u(k)?!!k.capture:!!k,E=_i(E),f&&f[Xe]?(f=f.i,X=String(_).toString(),X in f.g&&(_=f.g[X],E=Te(_,E,k,G),E>-1&&(se(_[E]),Array.prototype.splice.call(_,E,1),_.length==0&&(delete f.g[X],f.h--)))):f&&(f=nr(f))&&(_=f.g[_.toString()],f=-1,_&&(f=Te(_,E,k,G)),(E=f>-1?_[f]:null)&&kn(E))}function kn(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[Xe])Pe(_.i,f);else{var E=f.type,k=f.proxy;_.removeEventListener?_.removeEventListener(E,k,f.capture):_.detachEvent?_.detachEvent(gn(E),k):_.addListener&&_.removeListener&&_.removeListener(k),(E=nr(_))?(Pe(E,f),E.h==0&&(E.src=null,_[Ue]=null)):se(f)}}}function gn(f){return f in je?je[f]:je[f]="on"+f}function Fr(f,_){if(f.da)f=!0;else{_=new ke(_,this);const E=f.listener,k=f.ha||f.src;f.fa&&kn(f),f=E.call(k,_)}return f}function nr(f){return f=f[Ue],f instanceof be?f:null}var as="__closure_events_fn_"+(Math.random()*1e9>>>0);function _i(f){return typeof f=="function"?f:(f[as]||(f[as]=function(_){return f.handleEvent(_)}),f[as])}function ft(){M.call(this),this.i=new be(this),this.M=this,this.G=null}v(ft,M),ft.prototype[Xe]=!0,ft.prototype.removeEventListener=function(f,_,E,k){mn(this,f,_,E,k)};function Je(f,_){var E,k=f.G;if(k)for(E=[];k;k=k.G)E.push(k);if(f=f.M,k=_.type||_,typeof _=="string")_=new O(_,f);else if(_ instanceof O)_.target=_.target||f;else{var G=_;_=new O(k,f),ve(_,G)}G=!0;let X,ae;if(E)for(ae=E.length-1;ae>=0;ae--)X=_.g=E[ae],G=yn(X,k,!0,_)&&G;if(X=_.g=f,G=yn(X,k,!0,_)&&G,G=yn(X,k,!1,_)&&G,E)for(ae=0;ae<E.length;ae++)X=_.g=E[ae],G=yn(X,k,!1,_)&&G}ft.prototype.N=function(){if(ft.Z.N.call(this),this.i){var f=this.i;for(const _ in f.g){const E=f.g[_];for(let k=0;k<E.length;k++)se(E[k]);delete f.g[_],f.h--}}this.G=null},ft.prototype.J=function(f,_,E,k){return this.i.add(String(f),_,!1,E,k)},ft.prototype.K=function(f,_,E,k){return this.i.add(String(f),_,!0,E,k)};function yn(f,_,E,k){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();let G=!0;for(let X=0;X<_.length;++X){const ae=_[X];if(ae&&!ae.da&&ae.capture==E){const Me=ae.listener,Rt=ae.ha||ae.src;ae.fa&&Pe(f.i,ae),G=Me.call(Rt,k)!==!1&&G}}return G&&!k.defaultPrevented}function ls(f,_){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=p(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:l.setTimeout(f,_||0)}function Ei(f){f.g=ls(()=>{f.g=null,f.i&&(f.i=!1,Ei(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class Co extends M{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ei(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cs(f){M.call(this),this.h=f,this.g={}}v(cs,M);var Io=[];function rr(f){le(f.g,function(_,E){this.g.hasOwnProperty(E)&&kn(_)},f),f.g={}}cs.prototype.N=function(){cs.Z.N.call(this),rr(this)},cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pn=l.JSON.stringify,us=l.JSON.parse,ds=class{stringify(f){return l.JSON.stringify(f,void 0)}parse(f){return l.JSON.parse(f,void 0)}};function tn(){}function Ro(){}var hs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ti(){O.call(this,"d")}v(Ti,O);function Ws(){O.call(this,"c")}v(Ws,O);var Bn={},Si=null;function Ur(){return Si=Si||new ft}Bn.Ia="serverreachability";function Ci(f){O.call(this,Bn.Ia,f)}v(Ci,O);function Br(f){const _=Ur();Je(_,new Ci(_))}Bn.STAT_EVENT="statevent";function zr(f,_){O.call(this,Bn.STAT_EVENT,f),this.stat=_}v(zr,O);function Ve(f){const _=Ur();Je(_,new zr(_,f))}Bn.Ja="timingevent";function Ut(f,_){O.call(this,Bn.Ja,f),this.size=_}v(Ut,O);function bt(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){f()},_)}function nn(){this.g=!0}nn.prototype.ua=function(){this.g=!1};function rn(f,_,E,k,G,X){f.info(function(){if(f.g)if(X){var ae="",Me=X.split("&");for(let Ze=0;Ze<Me.length;Ze++){var Rt=Me[Ze].split("=");if(Rt.length>1){const Pt=Rt[0];Rt=Rt[1];const cr=Pt.split("_");ae=cr.length>=2&&cr[1]=="type"?ae+(Pt+"="+Rt+"&"):ae+(Pt+"=redacted&")}}}else ae=null;else ae=X;return"XMLHTTP REQ ("+k+") [attempt "+G+"]: "+_+`
`+E+`
`+ae})}function Ht(f,_,E,k,G,X,ae){f.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+G+"]: "+_+`
`+E+`
`+X+" "+ae})}function It(f,_,E,k){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+lt(f,E)+(k?" "+k:"")})}function $r(f,_){f.info(function(){return"TIMEOUT: "+_})}nn.prototype.info=function(){};function lt(f,_){if(!f.g)return _;if(!_)return null;try{const X=JSON.parse(_);if(X){for(f=0;f<X.length;f++)if(Array.isArray(X[f])){var E=X[f];if(!(E.length<2)){var k=E[1];if(Array.isArray(k)&&!(k.length<1)){var G=k[0];if(G!="noop"&&G!="stop"&&G!="close")for(let ae=1;ae<k.length;ae++)k[ae]=""}}}}return Pn(X)}catch{return _}}var sn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Bt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zn;function jn(){}v(jn,tn),jn.prototype.g=function(){return new XMLHttpRequest},zn=new jn;function vn(f){return encodeURIComponent(String(f))}function Dn(f){var _=1;f=f.split(":");const E=[];for(;_>0&&f.length;)E.push(f.shift()),_--;return f.length&&E.push(f.join(":")),E}function Gt(f,_,E,k){this.j=f,this.i=_,this.l=E,this.S=k||1,this.V=new cs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ii}function Ii(){this.i=null,this.g="",this.h=!1}var sd={},Kl={};function Wr(f,_,E){f.M=1,f.A=Hs(wr(_)),f.u=E,f.R=!0,Yl(f,null)}function Yl(f,_){f.F=Date.now(),Ao(f),f.B=wr(f.A);var E=f.B,k=f.S;Array.isArray(k)||(k=[String(k)]),ic(E.i,"t",k),f.C=0,E=f.j.L,f.h=new Ii,f.g=pd(f.j,E?_:null,!f.u),f.P>0&&(f.O=new Co(p(f.Y,f,f.g),f.P)),_=f.V,E=f.g,k=f.ba;var G="readystatechange";Array.isArray(G)||(G&&(Io[0]=G.toString()),G=Io);for(let X=0;X<G.length;X++){const ae=Oe(E,G[X],k||_.handleEvent,!1,_.h||_);if(!ae)break;_.g[ae.key]=ae}_=f.J?U(f.J):{},f.u?(f.v||(f.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,_)):(f.v="GET",f.g.ea(f.B,f.v,null,_)),Br(),rn(f.i,f.v,f.B,f.l,f.S,f.u)}Gt.prototype.ba=function(f){f=f.target;const _=this.O;_&&ws(f)==3?_.j():this.Y(f)},Gt.prototype.Y=function(f){try{if(f==this.g)e:{const Me=ws(this.g),Rt=this.g.ya(),Ze=this.g.ca();if(!(Me<3)&&(Me!=3||this.g&&(this.h.h||this.g.la()||hd(this.g)))){this.K||Me!=4||Rt==7||(Rt==8||Ze<=0?Br(3):Br(2)),Ca(this);var _=this.g.ca();this.X=_;var E=id(this);if(this.o=_==200,Ht(this.i,this.v,this.B,this.l,this.S,Me,_),this.o){if(this.U&&!this.L){t:{if(this.g){var k,G=this.g;if((k=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(k)){var X=k;break t}}X=null}if(f=X)It(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ct(this,f);else{this.o=!1,this.m=3,Ve(12),qs(this),No(this);break e}}if(this.R){f=!0;let Pt;for(;!this.K&&this.C<E.length;)if(Pt=ad(this,E),Pt==Kl){Me==4&&(this.m=4,Ve(14),f=!1),It(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==sd){this.m=4,Ve(15),It(this.i,this.l,E,"[Invalid Chunk]"),f=!1;break}else It(this.i,this.l,Pt,null),ct(this,Pt);if(od(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||E.length!=0||this.h.h||(this.m=1,Ve(16),f=!1),this.o=this.o&&f,!f)It(this.i,this.l,E,"[Invalid Chunked Response]"),qs(this),No(this);else if(E.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Fo(ae),ae.P=!0,Ve(11))}}else It(this.i,this.l,E,null),ct(this,E);Me==4&&qs(this),this.o&&!this.K&&(Me==4?La(this.j,this):(this.o=!1,Ao(this)))}else ac(this.g),_==400&&E.indexOf("Unknown SID")>0?(this.m=3,Ve(12)):(this.m=0,Ve(13)),qs(this),No(this)}}}catch{}finally{}};function id(f){if(!od(f))return f.g.la();const _=hd(f.g);if(_==="")return"";let E="";const k=_.length,G=ws(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return qs(f),No(f),"";f.h.i=new l.TextDecoder}for(let X=0;X<k;X++)f.h.h=!0,E+=f.h.i.decode(_[X],{stream:!(G&&X==k-1)});return _.length=0,f.h.g+=E,f.C=0,f.h.g}function od(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function ad(f,_){var E=f.C,k=_.indexOf(`
`,E);return k==-1?Kl:(E=Number(_.substring(E,k)),isNaN(E)?sd:(k+=1,k+E>_.length?Kl:(_=_.slice(k,k+E),f.C=k+E,_)))}Gt.prototype.cancel=function(){this.K=!0,qs(this)};function Ao(f){f.T=Date.now()+f.H,Ql(f,f.H)}function Ql(f,_){if(f.D!=null)throw Error("WatchDog timer not null");f.D=bt(p(f.aa,f),_)}function Ca(f){f.D&&(l.clearTimeout(f.D),f.D=null)}Gt.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?($r(this.i,this.B),this.M!=2&&(Br(),Ve(17)),qs(this),this.m=2,No(this)):Ql(this,this.T-f)};function No(f){f.j.I==0||f.K||La(f.j,f)}function qs(f){Ca(f);var _=f.O;_&&typeof _.dispose=="function"&&_.dispose(),f.O=null,rr(f.V),f.g&&(_=f.g,f.g=null,_.abort(),_.dispose())}function ct(f,_){try{var E=f.j;if(E.I!=0&&(E.g==f||Jl(E.h,f))){if(!f.L&&Jl(E.h,f)&&E.I==3){try{var k=E.Ba.g.parse(_)}catch{k=null}if(Array.isArray(k)&&k.length==3){var G=k;if(G[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<f.F)Ma(E),ar(E);else break e;_s(E),Ve(18)}}else E.xa=G[1],0<E.xa-E.K&&G[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=bt(p(E.Va,E),6e3));ko(E.h)<=1&&E.ta&&(E.ta=void 0)}else lr(E,11)}else if((f.L||E.g==f)&&Ma(E),!L(_))for(G=E.Ba.g.parse(_),_=0;_<G.length;_++){let Ze=G[_];const Pt=Ze[0];if(!(Pt<=E.K))if(E.K=Pt,Ze=Ze[1],E.I==2)if(Ze[0]=="c"){E.M=Ze[1],E.ba=Ze[2];const cr=Ze[3];cr!=null&&(E.ka=cr,E.j.info("VER="+E.ka));const Xs=Ze[4];Xs!=null&&(E.za=Xs,E.j.info("SVER="+E.za));const Es=Ze[5];Es!=null&&typeof Es=="number"&&Es>0&&(k=1.5*Es,E.O=k,E.j.info("backChannelRequestTimeoutMs_="+k)),k=E;const Ts=f.g;if(Ts){const Fa=Ts.g?Ts.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fa){var X=k.h;X.g||Fa.indexOf("spdy")==-1&&Fa.indexOf("quic")==-1&&Fa.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Ra(X,X.h),X.h=null))}if(k.G){const uc=Ts.g?Ts.g.getResponseHeader("X-HTTP-Session-Id"):null;uc&&(k.wa=uc,Ye(k.J,k.G,uc))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-f.F,E.j.info("Handshake RTT: "+E.T+"ms")),k=E;var ae=f;if(k.na=cc(k,k.L?k.ba:null,k.W),ae.L){Po(k.h,ae);var Me=ae,Rt=k.O;Rt&&(Me.H=Rt),Me.D&&(Ca(Me),Ao(Me)),k.g=ae}else wn(k);E.i.length>0&&Qs(E)}else Ze[0]!="stop"&&Ze[0]!="close"||lr(E,7);else E.I==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?lr(E,7):ja(E):Ze[0]!="noop"&&E.l&&E.l.qa(Ze),E.A=0)}}Br(4)}catch{}}var vp=class{constructor(f,_){this.g=f,this.map=_}};function Ia(f){this.l=f||10,l.PerformanceNavigationTiming?(f=l.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xl(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ko(f){return f.h?1:f.g?f.g.size:0}function Jl(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function Ra(f,_){f.g?f.g.add(_):f.h=_}function Po(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}Ia.prototype.cancel=function(){if(this.i=sr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function sr(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const E of f.g.values())_=_.concat(E.G);return _}return T(f.i)}var ld=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ir(f,_){if(f){f=f.split("&");for(let E=0;E<f.length;E++){const k=f[E].indexOf("=");let G,X=null;k>=0?(G=f[E].substring(0,k),X=f[E].substring(k+1)):G=f[E],_(G,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function fs(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;f instanceof fs?(this.l=f.l,jo(this,f.j),this.o=f.o,this.g=f.g,ps(this,f.u),this.h=f.h,Ri(this,oc(f.i)),this.m=f.m):f&&(_=String(f).match(ld))?(this.l=!1,jo(this,_[1]||"",!0),this.o=Do(_[2]||""),this.g=Do(_[3]||"",!0),ps(this,_[4]),this.h=Do(_[5]||"",!0),Ri(this,_[6]||"",!0),this.m=Do(_[7]||"")):(this.l=!1,this.i=new We(null,this.l))}fs.prototype.toString=function(){const f=[];var _=this.j;_&&f.push(Mo(_,ec,!0),":");var E=this.g;return(E||_=="file")&&(f.push("//"),(_=this.o)&&f.push(Mo(_,ec,!0),"@"),f.push(vn(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&f.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&f.push("/"),f.push(Mo(E,E.charAt(0)=="/"?Lo:tc,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",Mo(E,nc)),f.join("")},fs.prototype.resolve=function(f){const _=wr(this);let E=!!f.j;E?jo(_,f.j):E=!!f.o,E?_.o=f.o:E=!!f.g,E?_.g=f.g:E=f.u!=null;var k=f.h;if(E)ps(_,f.u);else if(E=!!f.h){if(k.charAt(0)!="/")if(this.g&&!this.h)k="/"+k;else{var G=_.h.lastIndexOf("/");G!=-1&&(k=_.h.slice(0,G+1)+k)}if(G=k,G==".."||G==".")k="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){k=G.lastIndexOf("/",0)==0,G=G.split("/");const X=[];for(let ae=0;ae<G.length;){const Me=G[ae++];Me=="."?k&&ae==G.length&&X.push(""):Me==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),k&&ae==G.length&&X.push("")):(X.push(Me),k=!0)}k=X.join("/")}else k=G}return E?_.h=k:E=f.i.toString()!=="",E?Ri(_,oc(f.i)):E=!!f.m,E&&(_.m=f.m),_};function wr(f){return new fs(f)}function jo(f,_,E){f.j=E?Do(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function ps(f,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);f.u=_}else f.u=null}function Ri(f,_,E){_ instanceof We?(f.i=_,Na(f.i,f.l)):(E||(_=Mo(_,wp)),f.i=new We(_,f.l))}function Ye(f,_,E){f.i.set(_,E)}function Hs(f){return Ye(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function Do(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Mo(f,_,E){return typeof f=="string"?(f=encodeURI(f).replace(_,Zl),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Zl(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var ec=/[#\/\?@]/g,tc=/[#\?:]/g,Lo=/[#\?]/g,wp=/[#\?@]/g,nc=/#/g;function We(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function ms(f){f.g||(f.g=new Map,f.h=0,f.i&&ir(f.i,function(_,E){f.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}t=We.prototype,t.add=function(f,_){ms(this),this.i=null,f=gs(this,f);let E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(_),this.h+=1,this};function rc(f,_){ms(f),_=gs(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function Aa(f,_){return ms(f),_=gs(f,_),f.g.has(_)}t.forEach=function(f,_){ms(this),this.g.forEach(function(E,k){E.forEach(function(G){f.call(_,G,k,this)},this)},this)};function sc(f,_){ms(f);let E=[];if(typeof _=="string")Aa(f,_)&&(E=E.concat(f.g.get(gs(f,_))));else for(f=Array.from(f.g.values()),_=0;_<f.length;_++)E=E.concat(f[_]);return E}t.set=function(f,_){return ms(this),this.i=null,f=gs(this,f),Aa(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},t.get=function(f,_){return f?(f=sc(this,f),f.length>0?String(f[0]):_):_};function ic(f,_,E){rc(f,_),E.length>0&&(f.i=null,f.g.set(gs(f,_),T(E)),f.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(let k=0;k<_.length;k++){var E=_[k];const G=vn(E);E=sc(this,E);for(let X=0;X<E.length;X++){let ae=G;E[X]!==""&&(ae+="="+vn(E[X])),f.push(ae)}}return this.i=f.join("&")};function oc(f){const _=new We;return _.i=f.i,f.g&&(_.g=new Map(f.g),_.h=f.h),_}function gs(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function Na(f,_){_&&!f.j&&(ms(f),f.i=null,f.g.forEach(function(E,k){const G=k.toLowerCase();k!=G&&(rc(this,k),ic(this,G,E))},f)),f.j=_}function ys(f,_){const E=new nn;if(l.Image){const k=new Image;k.onload=g(on,E,"TestLoadImage: loaded",!0,_,k),k.onerror=g(on,E,"TestLoadImage: error",!1,_,k),k.onabort=g(on,E,"TestLoadImage: abort",!1,_,k),k.ontimeout=g(on,E,"TestLoadImage: timeout",!1,_,k),l.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=f}else _(!1)}function vs(f,_){const E=new nn,k=new AbortController,G=setTimeout(()=>{k.abort(),on(E,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:k.signal}).then(X=>{clearTimeout(G),X.ok?on(E,"TestPingServer: ok",!0,_):on(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(G),on(E,"TestPingServer: error",!1,_)})}function on(f,_,E,k,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),k(E)}catch{}}function Oo(){this.g=new ds}function Gs(f){this.i=f.Sb||null,this.h=f.ab||!1}v(Gs,tn),Gs.prototype.g=function(){return new or(this.i,this.h)};function or(f,_){ft.call(this),this.H=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(or,ft),t=or.prototype,t.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=_,this.readyState=1,qr(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(_.body=f),(this.H||l).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ai(this)),this.readyState=0},t.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,qr(this)),this.g&&(this.readyState=3,qr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;cd(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function cd(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}t.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?Ai(this):qr(this),this.readyState==3&&cd(this)}},t.Oa=function(f){this.g&&(this.response=this.responseText=f,Ai(this))},t.Na=function(f){this.g&&(this.response=f,Ai(this))},t.ga=function(){this.g&&Ai(this)};function Ai(f){f.readyState=4,f.l=null,f.j=null,f.B=null,qr(f)}t.setRequestHeader=function(f,_){this.A.append(f,_)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,f.push(E[0]+": "+E[1]),E=_.next();return f.join(`\r
`)};function qr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(or.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ud(f){let _="";return le(f,function(E,k){_+=k,_+=":",_+=E,_+=`\r
`}),_}function ka(f,_,E){e:{for(k in E){var k=!1;break e}k=!0}k||(E=ud(E),typeof f=="string"?E!=null&&vn(E):Ye(f,_,E))}function nt(f){ft.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(nt,ft);var dd=/^https?$/i,xp=["POST","PUT"];t=nt.prototype,t.Fa=function(f){this.H=f},t.ea=function(f,_,E,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zn.g(),this.g.onreadystatechange=w(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(X){Ni(this,X);return}if(f=E||"",E=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var G in k)E.set(G,k[G]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const X of k.keys())E.set(X,k.get(X));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(E.keys()).find(X=>X.toLowerCase()=="content-type"),G=l.FormData&&f instanceof l.FormData,!(Array.prototype.indexOf.call(xp,_,void 0)>=0)||k||G||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ae]of E)this.g.setRequestHeader(X,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(X){Ni(this,X)}};function Ni(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.o=5,ki(f),Ys(f)}function ki(f){f.A||(f.A=!0,Je(f,"complete"),Je(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Je(this,"complete"),Je(this,"abort"),Ys(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ys(this,!0)),nt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ks(this):this.Xa())},t.Xa=function(){Ks(this)};function Ks(f){if(f.h&&typeof o<"u"){if(f.v&&ws(f)==4)setTimeout(f.Ca.bind(f),0);else if(Je(f,"readystatechange"),ws(f)==4){f.h=!1;try{const X=f.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var k;if(k=X===0){let ae=String(f.D).match(ld)[1]||null;!ae&&l.self&&l.self.location&&(ae=l.self.location.protocol.slice(0,-1)),k=!dd.test(ae?ae.toLowerCase():"")}E=k}if(E)Je(f,"complete"),Je(f,"success");else{f.o=6;try{var G=ws(f)>2?f.g.statusText:""}catch{G=""}f.l=G+" ["+f.ca()+"]",ki(f)}}finally{Ys(f)}}}}function Ys(f,_){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const E=f.g;f.g=null,_||Je(f,"ready");try{E.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ws(f){return f.g?f.g.readyState:0}t.ca=function(){try{return ws(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),us(_)}};function hd(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function ac(f){const _={};f=(f.g&&ws(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<f.length;k++){if(L(f[k]))continue;var E=Dn(f[k]);const G=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const X=_[G]||[];_[G]=X,X.push(E)}Z(_,function(k){return k.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xs(f,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||_}function Pa(f){this.za=0,this.i=[],this.j=new nn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xs("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xs("baseRetryDelayMs",5e3,f),this.Za=xs("retryDelaySeedMs",1e4,f),this.Ta=xs("forwardChannelMaxRetries",2,f),this.va=xs("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Ia(f&&f.concurrentRequestLimit),this.Ba=new Oo,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Pa.prototype,t.ka=8,t.I=1,t.connect=function(f,_,E,k){Ve(0),this.W=f,this.H=_||{},E&&k!==void 0&&(this.H.OSID=E,this.H.OAID=k),this.F=this.X,this.J=cc(this,null,this.W),Qs(this)};function ja(f){if(Da(f),f.I==3){var _=f.V++,E=wr(f.J);if(Ye(E,"SID",f.M),Ye(E,"RID",_),Ye(E,"TYPE","terminate"),bs(f,E),_=new Gt(f,f.j,_),_.M=2,_.A=Hs(wr(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(_.A.toString(),"")}catch{}!E&&l.Image&&(new Image().src=_.A,E=!0),E||(_.g=pd(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Ao(_)}Uo(f)}function ar(f){f.g&&(Fo(f),f.g.cancel(),f.g=null)}function Da(f){ar(f),f.v&&(l.clearTimeout(f.v),f.v=null),Ma(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&l.clearTimeout(f.m),f.m=null)}function Qs(f){if(!Xl(f.h)&&!f.m){f.m=!0;var _=f.Ea;K||R(),B||(K(),B=!0),I.add(_,f),f.D=0}}function fd(f,_){return ko(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=_.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=bt(p(f.Ea,f,_),Oa(f,f.D)),f.D++,!0)}t.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const G=new Gt(this,this.j,f);let X=this.o;if(this.U&&(X?(X=U(X),ve(X,this.U)):X=this.U),this.u!==null||this.R||(G.J=X,X=null),this.S)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var k=this.i[E];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(_+=k,_>4096){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=lc(this,G,_),E=wr(this.J),Ye(E,"RID",f),Ye(E,"CVER",22),this.G&&Ye(E,"X-HTTP-Session-Id",this.G),bs(this,E),X&&(this.R?_="headers="+vn(ud(X))+"&"+_:this.u&&ka(E,this.u,X)),Ra(this.h,G),this.Ra&&Ye(E,"TYPE","init"),this.S?(Ye(E,"$req",_),Ye(E,"SID","null"),G.U=!0,Wr(G,E,null)):Wr(G,E,_),this.I=2}}else this.I==3&&(f?Vo(this,f):this.i.length==0||Xl(this.h)||Vo(this))};function Vo(f,_){var E;_?E=_.l:E=f.V++;const k=wr(f.J);Ye(k,"SID",f.M),Ye(k,"RID",E),Ye(k,"AID",f.K),bs(f,k),f.u&&f.o&&ka(k,f.u,f.o),E=new Gt(f,f.j,E,f.D+1),f.u===null&&(E.J=f.o),_&&(f.i=_.G.concat(f.i)),_=lc(f,E,1e3),E.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),Ra(f.h,E),Wr(E,k,_)}function bs(f,_){f.H&&le(f.H,function(E,k){Ye(_,k,E)}),f.l&&le({},function(E,k){Ye(_,k,E)})}function lc(f,_,E){E=Math.min(f.i.length,E);const k=f.l?p(f.l.Ka,f.l,f):null;e:{var G=f.i;let Me=-1;for(;;){const Rt=["count="+E];Me==-1?E>0?(Me=G[0].g,Rt.push("ofs="+Me)):Me=0:Rt.push("ofs="+Me);let Ze=!0;for(let Pt=0;Pt<E;Pt++){var X=G[Pt].g;const cr=G[Pt].map;if(X-=Me,X<0)Me=Math.max(0,G[Pt].g-100),Ze=!1;else try{X="req"+X+"_"||"";try{var ae=cr instanceof Map?cr:Object.entries(cr);for(const[Xs,Es]of ae){let Ts=Es;u(Es)&&(Ts=Pn(Es)),Rt.push(X+Xs+"="+encodeURIComponent(Ts))}}catch(Xs){throw Rt.push(X+"type="+encodeURIComponent("_badmap")),Xs}}catch{k&&k(cr)}}if(Ze){ae=Rt.join("&");break e}}ae=void 0}return f=f.i.splice(0,E),_.G=f,ae}function wn(f){if(!f.g&&!f.v){f.Y=1;var _=f.Da;K||R(),B||(K(),B=!0),I.add(_,f),f.A=0}}function _s(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=bt(p(f.Da,f),Oa(f,f.A)),f.A++,!0)}t.Da=function(){if(this.v=null,Pi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=bt(p(this.Wa,this),f)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ve(10),ar(this),Pi(this))};function Fo(f){f.B!=null&&(l.clearTimeout(f.B),f.B=null)}function Pi(f){f.g=new Gt(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var _=wr(f.na);Ye(_,"RID","rpc"),Ye(_,"SID",f.M),Ye(_,"AID",f.K),Ye(_,"CI",f.F?"0":"1"),!f.F&&f.ia&&Ye(_,"TO",f.ia),Ye(_,"TYPE","xmlhttp"),bs(f,_),f.u&&f.o&&ka(_,f.u,f.o),f.O&&(f.g.H=f.O);var E=f.g;f=f.ba,E.M=1,E.A=Hs(wr(_)),E.u=null,E.R=!0,Yl(E,f)}t.Va=function(){this.C!=null&&(this.C=null,ar(this),_s(this),Ve(19))};function Ma(f){f.C!=null&&(l.clearTimeout(f.C),f.C=null)}function La(f,_){var E=null;if(f.g==_){Ma(f),Fo(f),f.g=null;var k=2}else if(Jl(f.h,_))E=_.G,Po(f.h,_),k=1;else return;if(f.I!=0){if(_.o)if(k==1){E=_.u?_.u.length:0,_=Date.now()-_.F;var G=f.D;k=Ur(),Je(k,new Ut(k,E)),Qs(f)}else wn(f);else if(G=_.m,G==3||G==0&&_.X>0||!(k==1&&fd(f,_)||k==2&&_s(f)))switch(E&&E.length>0&&(_=f.h,_.i=_.i.concat(E)),G){case 1:lr(f,5);break;case 4:lr(f,10);break;case 3:lr(f,6);break;default:lr(f,2)}}}function Oa(f,_){let E=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(E*=2),E*_}function lr(f,_){if(f.j.info("Error code "+_),_==2){var E=p(f.bb,f),k=f.Ua;const G=!k;k=new fs(k||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||jo(k,"https"),Hs(k),G?ys(k.toString(),E):vs(k.toString(),E)}else Ve(2);f.I=0,f.l&&f.l.pa(_),Uo(f),Da(f)}t.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Ve(2)):(this.j.info("Failed to ping google.com"),Ve(1))};function Uo(f){if(f.I=0,f.ja=[],f.l){const _=sr(f.h);(_.length!=0||f.i.length!=0)&&(A(f.ja,_),A(f.ja,f.i),f.h.i.length=0,T(f.i),f.i.length=0),f.l.oa()}}function cc(f,_,E){var k=E instanceof fs?wr(E):new fs(E);if(k.g!="")_&&(k.g=_+"."+k.g),ps(k,k.u);else{var G=l.location;k=G.protocol,_=_?_+"."+G.hostname:G.hostname,G=+G.port;const X=new fs(null);k&&jo(X,k),_&&(X.g=_),G&&ps(X,G),E&&(X.h=E),k=X}return E=f.G,_=f.wa,E&&_&&Ye(k,E,_),Ye(k,"VER",f.ka),bs(f,k),k}function pd(f,_,E){if(_&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Aa&&!f.ma?new nt(new Gs({ab:E})):new nt(f.ma),_.Fa(f.L),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function md(){}t=md.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Va(){}Va.prototype.g=function(f,_){return new an(f,_)};function an(f,_){ft.call(this),this.g=new Pa(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(f?f["X-WebChannel-Client-Profile"]=_.sa:f={"X-WebChannel-Client-Profile":_.sa}),this.g.U=f,(f=_&&_.Qb)&&!L(f)&&(this.g.u=f),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!L(_)&&(this.g.G=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new ji(this)}v(an,ft),an.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){ja(this.g)},an.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var E={};E.__data__=f,f=E}else this.v&&(E={},E.__data__=Pn(f),f=E);_.i.push(new vp(_.Ya++,f)),_.I==3&&Qs(_)},an.prototype.N=function(){this.g.l=null,delete this.j,ja(this.g),delete this.g,an.Z.N.call(this)};function gd(f){Ti.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(const E in _){f=E;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}v(gd,Ti);function yd(){Ws.call(this),this.status=1}v(yd,Ws);function ji(f){this.g=f}v(ji,md),ji.prototype.ra=function(){Je(this.g,"a")},ji.prototype.qa=function(f){Je(this.g,new gd(f))},ji.prototype.pa=function(f){Je(this.g,new yd)},ji.prototype.oa=function(){Je(this.g,"b")},Va.prototype.createWebChannel=Va.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,HT=function(){return new Va},qT=function(){return Ur()},WT=Bn,Yg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},sn.NO_ERROR=0,sn.TIMEOUT=8,sn.HTTP_ERROR=6,Dh=sn,Bt.COMPLETE="complete",$T=Bt,Ro.EventType=hs,hs.OPEN="a",hs.CLOSE="b",hs.ERROR="c",hs.MESSAGE="d",ft.prototype.listen=ft.prototype.J,qc=Ro,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,zT=nt}).apply(typeof fh<"u"?fh:typeof self<"u"?self:typeof window<"u"?window:{});const ob="@firebase/firestore",ab="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sn.UNAUTHENTICATED=new Sn(null),Sn.GOOGLE_CREDENTIALS=new Sn("google-credentials-uid"),Sn.FIRST_PARTY=new Sn("first-party-uid"),Sn.MOCK_USER=new Sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ml="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new Nf("@firebase/firestore");function al(){return ya.logLevel}function de(t,...e){if(ya.logLevel<=Be.DEBUG){const n=e.map(py);ya.debug(`Firestore (${Ml}): ${t}`,...n)}}function mi(t,...e){if(ya.logLevel<=Be.ERROR){const n=e.map(py);ya.error(`Firestore (${Ml}): ${t}`,...n)}}function _l(t,...e){if(ya.logLevel<=Be.WARN){const n=e.map(py);ya.warn(`Firestore (${Ml}): ${t}`,...n)}}function py(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,GT(t,r,n)}function GT(t,e,n){let r=`FIRESTORE (${Ml}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw mi(r),new Error(r)}function Qe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||GT(e,s,r)}function Ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Vr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class s6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Sn.UNAUTHENTICATED)))}shutdown(){}}class i6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class o6{constructor(e){this.t=e,this.currentUser=Sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qe(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let o=new Ps;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ps,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ps)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string",31837,{l:r}),new KT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new Sn(e)}}class a6{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class l6{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new a6(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class lb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Qe(this.o===void 0,3512);const r=o=>{o.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,de("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new lb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new lb(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=u6(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function ze(t,e){return t<e?-1:t>e?1:0}function Qg(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),o=e.charAt(r);if(s!==o)return sg(s)===sg(o)?ze(s,o):sg(s)?1:-1}return ze(t.length,e.length)}const d6=55296,h6=57343;function sg(t){const e=t.charCodeAt(0);return e>=d6&&e<=h6}function El(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="__name__";class As{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ce(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ce(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return As.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof As?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=As.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return ze(e.length,n.length)}static compareSegments(e,n){const r=As.isNumericId(e),s=As.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?As.extractNumericId(e).compare(As.extractNumericId(n)):Qg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ao.fromString(e.substring(4,e.length-2))}}class ot extends As{construct(e,n,r){return new ot(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new ot(n)}static emptyPath(){return new ot([])}}const f6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends As{construct(e,n,r){return new hn(e,n,r)}static isValidIdentifier(e){return f6.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cb}static keyField(){return new hn([cb])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new ce(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new ce(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ce(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(o(),s++)}if(o(),l)throw new ce(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(n)}static emptyPath(){return new hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(ot.fromString(e))}static fromName(e){return new ye(ot.fromString(e).popFirst(5))}static empty(){return new ye(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(t,e,n){if(!n)throw new ce(ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function p6(t,e,n,r){if(e===!0&&r===!0)throw new ce(ee.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ub(t){if(!ye.isDocumentKey(t))throw new ce(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function db(t){if(ye.isDocumentKey(t))throw new ce(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function QT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Of(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ce(12329,{type:typeof t})}function Un(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ce(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Of(t);throw new ce(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function m6(t,e){if(e<=0)throw new ce(ee.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t,e){const n={typeString:t};return e&&(n.value=e),n}function zu(t,e){if(!QT(t))throw new ce(ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const l=t[r];if(s&&typeof l!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new ce(ee.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=-62135596800,fb=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*fb);return new tt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<hb)throw new ce(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fb}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zu(e,tt._jsonSchema))return new tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-hb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:Ot("string",tt._jsonSchemaVersion),seconds:Ot("number"),nanoseconds:Ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new tt(0,0))}static max(){return new De(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=-1;function g6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=De.fromTimestamp(r===1e9?new tt(n+1,0):new tt(n,r));return new co(s,ye.empty(),e)}function y6(t){return new co(t.readTime,t.key,gu)}class co{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new co(De.min(),ye.empty(),gu)}static max(){return new co(De.max(),ye.empty(),gu)}}function v6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(t.documentKey,e.documentKey),n!==0?n:ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class x6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(t){if(t.code!==ee.FAILED_PRECONDITION||t.message!==w6)throw t;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new te(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof te?n:te.resolve(n)}catch(n){return te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):te.reject(n)}static resolve(e){return new te(((n,r)=>{n(e)}))}static reject(e){return new te(((n,r)=>{r(e)}))}static waitFor(e){return new te(((n,r)=>{let s=0,o=0,l=!1;e.forEach((u=>{++s,u.next((()=>{++o,l&&o===s&&n()}),(d=>r(d)))})),l=!0,o===s&&n()}))}static or(e){let n=te.resolve(!1);for(const r of e)n=n.next((s=>s?te.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,o)=>{r.push(n.call(this,s,o))})),this.waitFor(r)}static mapArray(e,n){return new te(((r,s)=>{const o=e.length,l=new Array(o);let u=0;for(let d=0;d<o;d++){const p=d;n(e[p]).next((g=>{l[p]=g,++u,u===o&&r(l)}),(g=>s(g)))}}))}static doWhile(e,n){return new te(((r,s)=>{const o=()=>{e()===!0?n().next((()=>{o()}),s):r()};o()}))}}function b6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ol(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=-1;function Ff(t){return t==null}function sf(t){return t===0&&1/t==-1/0}function _6(t){return typeof t=="number"&&Number.isInteger(t)&&!sf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="";function E6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pb(e)),e=T6(t.get(n),e);return pb(e)}function T6(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case XT:n+="";break;default:n+=o}}return n}function pb(t){return t+XT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Eo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function S6(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function JT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){this.comparator=e,this.root=n||dn.EMPTY}insert(e,n){return new xt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ph(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ph(this.root,e,this.comparator,!1)}getReverseIterator(){return new ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ph(this.root,e,this.comparator,!0)}}class ph{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??dn.RED,this.left=s??dn.EMPTY,this.right=o??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new dn(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return dn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new dn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gb(this.data.getIterator())}getIteratorFrom(e){return new gb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new qt(this.comparator);return n.data=e,n}}class gb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new pr([])}unionWith(e){let n=new qt(hn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new pr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return El(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ZT("Invalid base64 string: "+o):o}})(e);return new pn(n)}static fromUint8Array(e){const n=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new pn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pn.EMPTY_BYTE_STRING=new pn("");const C6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uo(t){if(Qe(!!t,39018),typeof t=="string"){let e=0;const n=C6.exec(t);if(Qe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:kt(t.seconds),nanos:kt(t.nanos)}}function kt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ho(t){return typeof t=="string"?pn.fromBase64String(t):pn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="server_timestamp",tS="__type__",nS="__previous_value__",rS="__local_write_time__";function yy(t){return(t?.mapValue?.fields||{})[tS]?.stringValue===eS}function Uf(t){const e=t.mapValue.fields[nS];return yy(e)?Uf(e):e}function yu(t){const e=uo(t.mapValue.fields[rS].timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e,n,r,s,o,l,u,d,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=g}}const of="(default)";class vu{constructor(e,n){this.projectId=e,this.database=n||of}static empty(){return new vu("","")}get isDefaultDatabase(){return this.database===of}isEqual(e){return e instanceof vu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="__type__",R6="__max__",mh={mapValue:{}},iS="__vector__",af="value";function fo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yy(t)?4:N6(t)?9007199254740991:A6(t)?10:11:Ce(28295,{value:t})}function Fs(t,e){if(t===e)return!0;const n=fo(t);if(n!==fo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yu(t).isEqual(yu(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=uo(s.timestampValue),u=uo(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,o){return ho(s.bytesValue).isEqual(ho(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,o){return kt(s.geoPointValue.latitude)===kt(o.geoPointValue.latitude)&&kt(s.geoPointValue.longitude)===kt(o.geoPointValue.longitude)})(t,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return kt(s.integerValue)===kt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=kt(s.doubleValue),u=kt(o.doubleValue);return l===u?sf(l)===sf(u):isNaN(l)&&isNaN(u)}return!1})(t,e);case 9:return El(t.arrayValue.values||[],e.arrayValue.values||[],Fs);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(mb(l)!==mb(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!Fs(l[d],u[d])))return!1;return!0})(t,e);default:return Ce(52216,{left:t})}}function wu(t,e){return(t.values||[]).find((n=>Fs(n,e)))!==void 0}function Tl(t,e){if(t===e)return 0;const n=fo(t),r=fo(e);if(n!==r)return ze(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ze(t.booleanValue,e.booleanValue);case 2:return(function(o,l){const u=kt(o.integerValue||o.doubleValue),d=kt(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(t,e);case 3:return yb(t.timestampValue,e.timestampValue);case 4:return yb(yu(t),yu(e));case 5:return Qg(t.stringValue,e.stringValue);case 6:return(function(o,l){const u=ho(o),d=ho(l);return u.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(o,l){const u=o.split("/"),d=l.split("/");for(let p=0;p<u.length&&p<d.length;p++){const g=ze(u[p],d[p]);if(g!==0)return g}return ze(u.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,l){const u=ze(kt(o.latitude),kt(l.latitude));return u!==0?u:ze(kt(o.longitude),kt(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return vb(t.arrayValue,e.arrayValue);case 10:return(function(o,l){const u=o.fields||{},d=l.fields||{},p=u[af]?.arrayValue,g=d[af]?.arrayValue,v=ze(p?.values?.length||0,g?.values?.length||0);return v!==0?v:vb(p,g)})(t.mapValue,e.mapValue);case 11:return(function(o,l){if(o===mh.mapValue&&l===mh.mapValue)return 0;if(o===mh.mapValue)return 1;if(l===mh.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),p=l.fields||{},g=Object.keys(p);d.sort(),g.sort();for(let v=0;v<d.length&&v<g.length;++v){const w=Qg(d[v],g[v]);if(w!==0)return w;const T=Tl(u[d[v]],p[g[v]]);if(T!==0)return T}return ze(d.length,g.length)})(t.mapValue,e.mapValue);default:throw Ce(23264,{he:n})}}function yb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ze(t,e);const n=uo(t),r=uo(e),s=ze(n.seconds,r.seconds);return s!==0?s:ze(n.nanos,r.nanos)}function vb(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=Tl(n[s],r[s]);if(o)return o}return ze(n.length,r.length)}function Sl(t){return Xg(t)}function Xg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=uo(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return ho(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ye.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=Xg(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${Xg(n.fields[l])}`;return s+"}"})(t.mapValue):Ce(61005,{value:t})}function Mh(t){switch(fo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uf(t);return e?16+Mh(e):16;case 5:return 2*t.stringValue.length;case 6:return ho(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+Mh(o)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Eo(r.fields,((o,l)=>{s+=o.length+Mh(l)})),s})(t.mapValue);default:throw Ce(13486,{value:t})}}function wb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Jg(t){return!!t&&"integerValue"in t}function vy(t){return!!t&&"arrayValue"in t}function xb(t){return!!t&&"nullValue"in t}function bb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lh(t){return!!t&&"mapValue"in t}function A6(t){return(t?.mapValue?.fields||{})[sS]?.stringValue===iS}function Jc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Eo(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Jc(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jc(t.arrayValue.values[n]);return e}return{...t}}function N6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===R6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.value=e}static empty(){return new Xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Lh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jc(n)}setAll(e){let n=hn.emptyPath(),r={},s=[];e.forEach(((l,u)=>{if(!n.isImmediateParentOf(u)){const d=this.getFieldsMap(n);this.applyChanges(d,r,s),r={},s=[],n=u.popLast()}l?r[u.lastSegment()]=Jc(l):s.push(u.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());Lh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Lh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Eo(n,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new Xn(Jc(this.value))}}function oS(t){const e=[];return Eo(t.fields,((n,r)=>{const s=new hn([n]);if(Lh(r)){const o=oS(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new pr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n,r,s,o,l,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new In(e,0,De.min(),De.min(),De.min(),Xn.empty(),0)}static newFoundDocument(e,n,r,s){return new In(e,1,n,De.min(),r,s,0)}static newNoDocument(e,n){return new In(e,2,n,De.min(),De.min(),Xn.empty(),0)}static newUnknownDocument(e,n){return new In(e,3,n,De.min(),De.min(),Xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,n){this.position=e,this.inclusive=n}}function _b(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?r=ye.comparator(ye.fromName(l.referenceValue),n.key):r=Tl(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Eb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n="asc"){this.field=e,this.dir=n}}function k6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{}class Lt extends aS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new j6(e,n,r):n==="array-contains"?new L6(e,r):n==="in"?new O6(e,r):n==="not-in"?new V6(e,r):n==="array-contains-any"?new F6(e,r):new Lt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new D6(e,r):new M6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Tl(n,this.value)):n!==null&&fo(this.value)===fo(n)&&this.matchesComparison(Tl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ns extends aS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ns(e,n)}matches(e){return lS(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lS(t){return t.op==="and"}function cS(t){return P6(t)&&lS(t)}function P6(t){for(const e of t.filters)if(e instanceof ns)return!1;return!0}function Zg(t){if(t instanceof Lt)return t.field.canonicalString()+t.op.toString()+Sl(t.value);if(cS(t))return t.filters.map((e=>Zg(e))).join(",");{const e=t.filters.map((n=>Zg(n))).join(",");return`${t.op}(${e})`}}function uS(t,e){return t instanceof Lt?(function(r,s){return s instanceof Lt&&r.op===s.op&&r.field.isEqual(s.field)&&Fs(r.value,s.value)})(t,e):t instanceof ns?(function(r,s){return s instanceof ns&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,l,u)=>o&&uS(l,s.filters[u])),!0):!1})(t,e):void Ce(19439)}function dS(t){return t instanceof Lt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Sl(n.value)}`})(t):t instanceof ns?(function(n){return n.op.toString()+" {"+n.getFilters().map(dS).join(" ,")+"}"})(t):"Filter"}class j6 extends Lt{constructor(e,n,r){super(e,n,r),this.key=ye.fromName(r.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class D6 extends Lt{constructor(e,n){super(e,"in",n),this.keys=hS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class M6 extends Lt{constructor(e,n){super(e,"not-in",n),this.keys=hS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function hS(t,e){return(e.arrayValue?.values||[]).map((n=>ye.fromName(n.referenceValue)))}class L6 extends Lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vy(n)&&wu(n.arrayValue,this.value)}}class O6 extends Lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wu(this.value.arrayValue,n)}}class V6 extends Lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!wu(this.value.arrayValue,n)}}class F6 extends Lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vy(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>wu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e,n=null,r=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.Te=null}}function Tb(t,e=null,n=[],r=[],s=null,o=null,l=null){return new U6(t,e,n,r,s,o,l)}function wy(t){const e=Ne(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Zg(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Ff(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Sl(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Sl(r))).join(",")),e.Te=n}return e.Te}function xy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!k6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Eb(t.startAt,e.startAt)&&Eb(t.endAt,e.endAt)}function e0(t){return ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n=null,r=[],s=[],o=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function B6(t,e,n,r,s,o,l,u){return new Vl(t,e,n,r,s,o,l,u)}function Bf(t){return new Vl(t)}function Sb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function fS(t){return t.collectionGroup!==null}function Zc(t){const e=Ne(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new qt(hn.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((p=>{p.isInequality()&&(u=u.add(p.field))}))})),u})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new xu(o,r))})),n.has(hn.keyField().canonicalString())||e.Ie.push(new xu(hn.keyField(),r))}return e.Ie}function js(t){const e=Ne(t);return e.Ee||(e.Ee=pS(e,Zc(t))),e.Ee}function z6(t){const e=Ne(t);return e.de||(e.de=pS(e,t.explicitOrderBy)),e.de}function pS(t,e){if(t.limitType==="F")return Tb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new xu(s.field,o)}));const n=t.endAt?new lf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new lf(t.startAt.position,t.startAt.inclusive):null;return Tb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function t0(t,e){const n=t.filters.concat([e]);return new Vl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function cf(t,e,n){return new Vl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zf(t,e){return xy(js(t),js(e))&&t.limitType===e.limitType}function mS(t){return`${wy(js(t))}|lt:${t.limitType}`}function ll(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>dS(s))).join(", ")}]`),Ff(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Sl(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Sl(s))).join(",")),`Target(${r})`})(js(t))}; limitType=${t.limitType})`}function $f(t,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ye.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,s){for(const o of Zc(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(l,u,d){const p=_b(l,u,d);return l.inclusive?p<=0:p<0})(r.startAt,Zc(r),s)||r.endAt&&!(function(l,u,d){const p=_b(l,u,d);return l.inclusive?p>=0:p>0})(r.endAt,Zc(r),s))})(t,e)}function $6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function gS(t){return(e,n)=>{let r=!1;for(const s of Zc(t)){const o=W6(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function W6(t,e,n){const r=t.field.isKeyField()?ye.comparator(e.key,n.key):(function(o,l,u){const d=l.data.field(o),p=u.data.field(o);return d!==null&&p!==null?Tl(d,p):Ce(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ce(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Eo(this.inner,((n,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return JT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6=new xt(ye.comparator);function gi(){return q6}const yS=new xt(ye.comparator);function Hc(...t){let e=yS;for(const n of t)e=e.insert(n.key,n);return e}function vS(t){let e=yS;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ia(){return eu()}function wS(){return eu()}function eu(){return new Ta((t=>t.toString()),((t,e)=>t.isEqual(e)))}const H6=new xt(ye.comparator),G6=new qt(ye.comparator);function $e(...t){let e=G6;for(const n of t)e=e.add(n);return e}const K6=new qt(ze);function Y6(){return K6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sf(e)?"-0":e}}function xS(t){return{integerValue:""+t}}function bS(t,e){return _6(e)?xS(e):by(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(){this._=void 0}}function Q6(t,e,n){return t instanceof bu?(function(s,o){const l={fields:{[tS]:{stringValue:eS},[rS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&yy(o)&&(o=Uf(o)),o&&(l.fields[nS]=o),{mapValue:l}})(n,e):t instanceof Cl?ES(t,e):t instanceof _u?TS(t,e):(function(s,o){const l=_S(s,o),u=Cb(l)+Cb(s.Ae);return Jg(l)&&Jg(s.Ae)?xS(u):by(s.serializer,u)})(t,e)}function X6(t,e,n){return t instanceof Cl?ES(t,e):t instanceof _u?TS(t,e):n}function _S(t,e){return t instanceof Eu?(function(r){return Jg(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class bu extends Wf{}class Cl extends Wf{constructor(e){super(),this.elements=e}}function ES(t,e){const n=SS(e);for(const r of t.elements)n.some((s=>Fs(s,r)))||n.push(r);return{arrayValue:{values:n}}}class _u extends Wf{constructor(e){super(),this.elements=e}}function TS(t,e){let n=SS(e);for(const r of t.elements)n=n.filter((s=>!Fs(s,r)));return{arrayValue:{values:n}}}class Eu extends Wf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Cb(t){return kt(t.integerValue||t.doubleValue)}function SS(t){return vy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,n){this.field=e,this.transform=n}}function J6(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Cl&&s instanceof Cl||r instanceof _u&&s instanceof _u?El(r.elements,s.elements,Fs):r instanceof Eu&&s instanceof Eu?Fs(r.Ae,s.Ae):r instanceof bu&&s instanceof bu})(t.transform,e.transform)}class Z6{constructor(e,n){this.version=e,this.transformResults=n}}class Pr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Pr}static exists(e){return new Pr(void 0,e)}static updateTime(e){return new Pr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class qf{}function CS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ey(t.key,Pr.none()):new $u(t.key,t.data,Pr.none());{const n=t.data,r=Xn.empty();let s=new qt(hn.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new To(t.key,r,new pr(s.toArray()),Pr.none())}}function e3(t,e,n){t instanceof $u?(function(s,o,l){const u=s.value.clone(),d=Rb(s.fieldTransforms,o,l.transformResults);u.setAll(d),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(t,e,n):t instanceof To?(function(s,o,l){if(!Oh(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=Rb(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(IS(s)),d.setAll(u),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,n):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function tu(t,e,n,r){return t instanceof $u?(function(o,l,u,d){if(!Oh(o.precondition,l))return u;const p=o.value.clone(),g=Ab(o.fieldTransforms,d,l);return p.setAll(g),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(t,e,n,r):t instanceof To?(function(o,l,u,d){if(!Oh(o.precondition,l))return u;const p=Ab(o.fieldTransforms,d,l),g=l.data;return g.setAll(IS(o)),g.setAll(p),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(t,e,n,r):(function(o,l,u){return Oh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(t,e,n)}function t3(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=_S(r.transform,s||null);o!=null&&(n===null&&(n=Xn.empty()),n.set(r.field,o))}return n||null}function Ib(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&El(r,s,((o,l)=>J6(o,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $u extends qf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class To extends qf{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function IS(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Rb(t,e,n){const r=new Map;Qe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,u=e.data.field(o.field);r.set(o.field,X6(l,u,n[s]))}return r}function Ab(t,e,n){const r=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);r.set(s.field,Q6(o,l,e))}return r}class Ey extends qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n3 extends qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&e3(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=tu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=tu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=wS();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=n.has(s.key)?null:u;const d=CS(l,u);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(De.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),$e())}isEqual(e){return this.batchId===e.batchId&&El(this.mutations,e.mutations,((n,r)=>Ib(n,r)))&&El(this.baseMutations,e.baseMutations,((n,r)=>Ib(n,r)))}}class Ty{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Qe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return H6})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new Ty(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,He;function a3(t){switch(t){case ee.OK:return Ce(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ce(15467,{code:t})}}function RS(t){if(t===void 0)return mi("GRPC error has no .code"),ee.UNKNOWN;switch(t){case Dt.OK:return ee.OK;case Dt.CANCELLED:return ee.CANCELLED;case Dt.UNKNOWN:return ee.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return ee.INTERNAL;case Dt.UNAVAILABLE:return ee.UNAVAILABLE;case Dt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Dt.NOT_FOUND:return ee.NOT_FOUND;case Dt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Dt.ABORTED:return ee.ABORTED;case Dt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Dt.DATA_LOSS:return ee.DATA_LOSS;default:return Ce(39323,{code:t})}}(He=Dt||(Dt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3=new ao([4294967295,4294967295],0);function Nb(t){const e=l3().encode(t),n=new BT;return n.update(e),new Uint8Array(n.digest())}function kb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ao([n,r],0),new ao([s,o],0)]}class Sy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gc(`Invalid padding: ${n}`);if(r<0)throw new Gc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ao.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ao.fromNumber(r)));return s.compare(c3)===1&&(s=new ao([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Nb(e),[r,s]=kb(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);if(!this.we(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Sy(o,s,n);return r.forEach((u=>l.insert(u))),l}insert(e){if(this.ge===0)return;const n=Nb(e),[r,s]=kb(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Wu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Hf(De.min(),s,new xt(ze),gi(),$e())}}class Wu{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Wu(r,n,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class AS{constructor(e,n){this.targetId=e,this.Ce=n}}class NS{constructor(e,n,r=pn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Pb{constructor(){this.ve=0,this.Fe=jb(),this.Me=pn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$e(),n=$e(),r=$e();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ce(38017,{changeType:o})}})),new Wu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=jb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class u3{constructor(e){this.Ge=e,this.ze=new Map,this.je=gi(),this.Je=gh(),this.He=gh(),this.Ye=new xt(ze)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(e0(o))if(r===0){const l=new ye(o.path);this.et(n,l,In.newNoDocument(l,De.min()))}else Qe(r===1,20013,{expectedCount:r});else{const l=this._t(n);if(l!==r){const u=this.ut(e),d=u?this.ct(u,e,l):1;if(d!==0){this.it(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let l,u;try{l=ho(r).toUint8Array()}catch(d){if(d instanceof ZT)return _l("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new Sy(l,s,o)}catch(d){return _l(d instanceof Gc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((o=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((o,l)=>{const u=this.ot(l);if(u){if(o.current&&e0(u.target)){const d=new ye(u.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,In.newNoDocument(d,e))}o.Be&&(n.set(l,o.ke()),o.qe())}}));let r=$e();this.He.forEach(((o,l)=>{let u=!0;l.forEachWhile((d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const s=new Hf(e,n,this.Ye,this.je,r);return this.je=gi(),this.Je=gh(),this.He=gh(),this.Ye=new xt(ze),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Pb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qt(ze),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qt(ze),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Pb),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function gh(){return new xt(ye.comparator)}function jb(){return new xt(ye.comparator)}const d3={asc:"ASCENDING",desc:"DESCENDING"},h3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},f3={and:"AND",or:"OR"};class p3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function n0(t,e){return t.useProto3Json||Ff(e)?e:{value:e}}function uf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function m3(t,e){return uf(t,e.toTimestamp())}function Ds(t){return Qe(!!t,49232),De.fromTimestamp((function(n){const r=uo(n);return new tt(r.seconds,r.nanos)})(t))}function Cy(t,e){return r0(t,e).canonicalString()}function r0(t,e){const n=(function(s){return new ot(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function PS(t){const e=ot.fromString(t);return Qe(VS(e),10190,{key:e.toString()}),e}function s0(t,e){return Cy(t.databaseId,e.path)}function ig(t,e){const n=PS(e);if(n.get(1)!==t.databaseId.projectId)throw new ce(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ce(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ye(DS(n))}function jS(t,e){return Cy(t.databaseId,e)}function g3(t){const e=PS(t);return e.length===4?ot.emptyPath():DS(e)}function i0(t){return new ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function DS(t){return Qe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Db(t,e,n){return{name:s0(t,e),fields:n.value.mapValue.fields}}function y3(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ce(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(p,g){return p.useProto3Json?(Qe(g===void 0||typeof g=="string",58123),pn.fromBase64String(g||"")):(Qe(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),pn.fromUint8Array(g||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(p){const g=p.code===void 0?ee.UNKNOWN:RS(p.code);return new ce(g,p.message||"")})(l);n=new NS(r,s,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ig(t,r.document.name),o=Ds(r.document.updateTime),l=r.document.createTime?Ds(r.document.createTime):De.min(),u=new Xn({mapValue:{fields:r.document.fields}}),d=In.newFoundDocument(s,o,l,u),p=r.targetIds||[],g=r.removedTargetIds||[];n=new Vh(p,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ig(t,r.document),o=r.readTime?Ds(r.readTime):De.min(),l=In.newNoDocument(s,o),u=r.removedTargetIds||[];n=new Vh([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ig(t,r.document),o=r.removedTargetIds||[];n=new Vh([],o,s,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new o3(s,o),u=r.targetId;n=new AS(u,l)}}return n}function v3(t,e){let n;if(e instanceof $u)n={update:Db(t,e.key,e.value)};else if(e instanceof Ey)n={delete:s0(t,e.key)};else if(e instanceof To)n={update:Db(t,e.key,e.data),updateMask:I3(e.fieldMask)};else{if(!(e instanceof n3))return Ce(16599,{Vt:e.type});n={verify:s0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const u=l.transform;if(u instanceof bu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Cl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof _u)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Eu)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw Ce(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:m3(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ce(27497)})(t,e.precondition)),n}function w3(t,e){return t&&t.length>0?(Qe(e!==void 0,14353),t.map((n=>(function(s,o){let l=s.updateTime?Ds(s.updateTime):Ds(o);return l.isEqual(De.min())&&(l=Ds(o)),new Z6(l,s.transformResults||[])})(n,e)))):[]}function x3(t,e){return{documents:[jS(t,e.path)]}}function MS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=jS(t,s);const o=(function(p){if(p.length!==0)return OS(ns.create(p,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const l=(function(p){if(p.length!==0)return p.map((g=>(function(w){return{field:no(w.field),direction:T3(w.dir)}})(g)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const u=n0(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:s}}function b3(t,e,n,r){const{ft:s,parent:o}=MS(t,e),l={},u=[];let d=0;return n.forEach((p=>{const g="aggregate_"+d++;l[g]=p.alias,p.aggregateType==="count"?u.push({alias:g,count:{}}):p.aggregateType==="avg"?u.push({alias:g,avg:{field:no(p.fieldPath)}}):p.aggregateType==="sum"&&u.push({alias:g,sum:{field:no(p.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:u,structuredQuery:s.structuredQuery},parent:s.parent},gt:l,parent:o}}function _3(t){let e=g3(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Qe(r===1,65062);const g=n.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=(function(v){const w=LS(v);return w instanceof ns&&cS(w)?w.getFilters():[w]})(n.where));let l=[];n.orderBy&&(l=(function(v){return v.map((w=>(function(A){return new xu(cl(A.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(w)))})(n.orderBy));let u=null;n.limit&&(u=(function(v){let w;return w=typeof v=="object"?v.value:v,Ff(w)?null:w})(n.limit));let d=null;n.startAt&&(d=(function(v){const w=!!v.before,T=v.values||[];return new lf(T,w)})(n.startAt));let p=null;return n.endAt&&(p=(function(v){const w=!v.before,T=v.values||[];return new lf(T,w)})(n.endAt)),B6(e,s,l,o,u,"F",d,p)}function E3(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function LS(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=cl(n.unaryFilter.field);return Lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=cl(n.unaryFilter.field);return Lt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=cl(n.unaryFilter.field);return Lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=cl(n.unaryFilter.field);return Lt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Lt.create(cl(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ns.create(n.compositeFilter.filters.map((r=>LS(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(n.compositeFilter.op))})(t):Ce(30097,{filter:t})}function T3(t){return d3[t]}function S3(t){return h3[t]}function C3(t){return f3[t]}function no(t){return{fieldPath:t.canonicalString()}}function cl(t){return hn.fromServerFormat(t.fieldPath)}function OS(t){return t instanceof Lt?(function(n){if(n.op==="=="){if(bb(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NAN"}};if(xb(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bb(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NAN"}};if(xb(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:no(n.field),op:S3(n.op),value:n.value}}})(t):t instanceof ns?(function(n){const r=n.getFilters().map((s=>OS(s)));return r.length===1?r[0]:{compositeFilter:{op:C3(n.op),filters:r}}})(t):Ce(54877,{filter:t})}function I3(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function VS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n,r,s,o=De.min(),l=De.min(),u=pn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new so(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new so(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new so(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new so(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e){this.yt=e}}function A3(t){const e=_3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?cf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(){this.Cn=new k3}addToCollectionParentIndex(e,n){return this.Cn.add(n),te.resolve()}getCollectionParents(e,n){return te.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return te.resolve()}deleteFieldIndex(e,n){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,n){return te.resolve()}getDocumentsMatchingTarget(e,n){return te.resolve(null)}getIndexType(e,n){return te.resolve(0)}getFieldIndexes(e,n){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,n){return te.resolve(co.min())}getMinOffsetFromCollectionGroup(e,n){return te.resolve(co.min())}updateCollectionGroup(e,n,r){return te.resolve()}updateIndexEntries(e,n){return te.resolve()}}class k3{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new qt(ot.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new qt(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FS=41943040;class Yn{static withCacheSize(e){return new Yn(e,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn.DEFAULT_COLLECTION_PERCENTILE=10,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yn.DEFAULT=new Yn(FS,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yn.DISABLED=new Yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Il(0)}static cr(){return new Il(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="LruGarbageCollector",P3=1048576;function Ob([t,e],[n,r]){const s=ze(t,n);return s===0?ze(e,r):s}class j3{constructor(e){this.Ir=e,this.buffer=new qt(Ob),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Ob(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class D3{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(Lb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ol(n)?de(Lb,"Ignoring IndexedDB error during garbage collection: ",n):await Ll(n)}await this.Vr(3e5)}))}}class M3{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return te.resolve(Vf.ce);const r=new j3(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(Mb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mb):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,o,l,u,d,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s)))).next((v=>(r=v,u=Date.now(),this.removeTargets(e,r,n)))).next((v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((v=>(p=Date.now(),al()<=Be.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${v} documents in `+(p-d)+`ms
Total Duration: ${p-g}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v}))))}}function L3(t,e){return new M3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(){this.changes=new Ta((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?te.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&tu(r.mutation,s,pr.empty(),tt.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,$e()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=$e()){const s=ia();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((o=>{let l=Hc();return o.forEach(((u,d)=>{l=l.insert(u,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const r=ia();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,$e())))}populateOverlays(e,n,r){const s=[];return r.forEach((o=>{n.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,u)=>{n.set(l,u)}))}))}computeViews(e,n,r,s){let o=gi();const l=eu(),u=(function(){return eu()})();return n.forEach(((d,p)=>{const g=r.get(p.key);s.has(p.key)&&(g===void 0||g.mutation instanceof To)?o=o.insert(p.key,p):g!==void 0?(l.set(p.key,g.mutation.getFieldMask()),tu(g.mutation,p,g.mutation.getFieldMask(),tt.now())):l.set(p.key,pr.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((p,g)=>l.set(p,g))),n.forEach(((p,g)=>u.set(p,new V3(g,l.get(p)??null)))),u)))}recalculateAndSaveOverlays(e,n){const r=eu();let s=new xt(((l,u)=>l-u)),o=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const u of l)u.keys().forEach((d=>{const p=n.get(d);if(p===null)return;let g=r.get(d)||pr.empty();g=u.applyToLocalView(p,g),r.set(d,g);const v=(s.get(u.batchId)||$e()).add(d);s=s.insert(u.batchId,v)}))})).next((()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),p=d.key,g=d.value,v=wS();g.forEach((w=>{if(!o.has(w)){const T=CS(n.get(w),r.get(w));T!==null&&v.set(w,T),o=o.add(w)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,v))}return te.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(l){return ye.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):te.resolve(ia());let u=gu,d=o;return l.next((p=>te.forEach(p,((g,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),o.get(g)?te.resolve():this.remoteDocumentCache.getEntry(e,g).next((w=>{d=d.insert(g,w)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,d,p,$e()))).next((g=>({batchId:u,changes:vS(g)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next((r=>{let s=Hc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let l=Hc();return this.indexManager.getCollectionParents(e,o).next((u=>te.forEach(u,(d=>{const p=(function(v,w){return new Vl(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next((g=>{g.forEach(((v,w)=>{l=l.insert(v,w)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s)))).next((l=>{o.forEach(((d,p)=>{const g=p.getKey();l.get(g)===null&&(l=l.insert(g,In.newInvalidDocument(g)))}));let u=Hc();return l.forEach(((d,p)=>{const g=o.get(d);g!==void 0&&tu(g.mutation,p,pr.empty(),tt.now()),$f(n,p)&&(u=u.insert(d,p))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return te.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Ds(s.createTime)}})(n)),te.resolve()}getNamedQuery(e,n){return te.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:A3(s.bundledQuery),readTime:Ds(s.readTime)}})(n)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(){this.overlays=new xt(ye.comparator),this.qr=new Map}getOverlay(e,n){return te.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ia();return te.forEach(n,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,o)=>{this.St(e,n,o)})),te.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),te.resolve()}getOverlaysForCollection(e,n,r){const s=ia(),o=n.length+1,l=new ye(n.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return te.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new xt(((p,g)=>p-g));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let g=o.get(p.largestBatchId);g===null&&(g=ia(),o=o.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const u=ia(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((p,g)=>u.set(p,g))),!(u.size()>=s)););return te.resolve(u)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new s3(n,r));let o=this.qr.get(n);o===void 0&&(o=$e(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(){this.sessionToken=pn.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(){this.Qr=new qt(Jt.$r),this.Ur=new qt(Jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Jt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Jt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new ye(new ot([])),r=new Jt(n,e),s=new Jt(n,e+1),o=[];return this.Ur.forEachInRange([r,s],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ye(new ot([])),r=new Jt(n,e),s=new Jt(n,e+1);let o=$e();return this.Ur.forEachInRange([r,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const n=new Jt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Jt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ye.comparator(e.key,n.key)||ze(e.Yr,n.Yr)}static Kr(e,n){return ze(e.Yr,n.Yr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qt(Jt.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new r3(o,n,r,s);this.mutationQueue.push(l);for(const u of s)this.Zr=this.Zr.add(new Jt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return te.resolve(l)}lookupMutationBatch(e,n){return te.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),o=s<0?0:s;return te.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?gy:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Jt(n,0),s=new Jt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],(l=>{const u=this.Xr(l.Yr);o.push(u)})),te.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qt(ze);return n.forEach((s=>{const o=new Jt(s,0),l=new Jt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(u=>{r=r.add(u.Yr)}))})),te.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;ye.isDocumentKey(o)||(o=o.child(""));const l=new Jt(new ye(o),0);let u=new qt(ze);return this.Zr.forEachWhile((d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(u=u.add(d.Yr)),!0)}),l),te.resolve(this.ti(u))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Qe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return te.forEach(n.mutations,(s=>{const o=new Jt(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Jt(n,0),s=this.Zr.firstAfterOrEqual(r);return te.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e){this.ri=e,this.docs=(function(){return new xt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,l=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return te.resolve(r?r.document.mutableCopy():In.newInvalidDocument(n))}getEntries(e,n){let r=gi();return n.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():In.newInvalidDocument(s))})),te.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=gi();const l=n.path,u=new ye(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:p,value:{document:g}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||v6(y6(g),r)<=0||(s.has(g.key)||$f(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return te.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Ce(9500)}ii(e,n){return te.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new q3(this)}getSize(e){return te.resolve(this.size)}}class q3 extends O3{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),te.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e){this.persistence=e,this.si=new Ta((n=>wy(n)),xy),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new Iy,this.targetCount=0,this.ai=Il.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),te.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Il(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,te.resolve()}updateTargetData(e,n){return this.Pr(n),te.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.si.forEach(((l,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),te.waitFor(o).next((()=>s))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return te.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),te.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),te.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),te.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return te.resolve(r)}containsKey(e,n){return te.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,n){this.ui={},this.overlays={},this.ci=new Vf(0),this.li=!1,this.li=!0,this.hi=new z3,this.referenceDelegate=e(this),this.Pi=new H3(this),this.indexManager=new N3,this.remoteDocumentCache=(function(s){return new W3(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new R3(n),this.Ii=new U3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new B3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new $3(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){de("MemoryPersistence","Starting transaction:",e);const s=new G3(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,n){return te.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class G3 extends x6{constructor(e){super(),this.currentSequenceNumber=e}}class Ry{constructor(e){this.persistence=e,this.Ri=new Iy,this.Vi=null}static mi(e){return new Ry(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),te.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),te.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(r=>{const s=ye.fromPath(r);return this.gi(e,s).next((o=>{o||n.removeEntry(s,De.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return te.or([()=>te.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class df{constructor(e,n){this.persistence=e,this.pi=new Ta((r=>E6(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=L3(this,n)}static mi(e,n){return new df(e,n)}Ei(){}di(e){return te.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return te.forEach(this.pi,((r,s)=>this.br(e,r,s).next((o=>o?te.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,n).next((u=>{u||(r++,o.removeEntry(l,De.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),te.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),te.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Mh(e.data.value)),n}br(e,n,r){return te.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return te.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=$e(),s=$e();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Ay(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return rP()?8:b6(An())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ys(e,n).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,n,s,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new K3;return this.Ss(e,n,l).next((u=>{if(o.result=u,this.Vs)return this.bs(e,n,l,u.size)}))})).next((()=>o.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(al()<=Be.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",ll(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(al()<=Be.DEBUG&&de("QueryEngine","Query:",ll(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(al()<=Be.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",ll(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,js(n))):te.resolve())}ys(e,n){if(Sb(n))return te.resolve(null);let r=js(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=cf(n,null,"F"),r=js(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=$e(...o);return this.ps.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,r).next((d=>{const p=this.Ds(n,u);return this.Cs(n,p,l,d.readTime)?this.ys(e,cf(n,null,"F")):this.vs(e,p,n,d)}))))})))))}ws(e,n,r,s){return Sb(n)||s.isEqual(De.min())?te.resolve(null):this.ps.getDocuments(e,r).next((o=>{const l=this.Ds(n,o);return this.Cs(n,l,r,s)?te.resolve(null):(al()<=Be.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ll(n)),this.vs(e,l,n,g6(s,gu)).next((u=>u)))}))}Ds(e,n){let r=new qt(gS(e));return n.forEach(((s,o)=>{$f(e,o)&&(r=r.add(o))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return al()<=Be.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",ll(n)),this.ps.getDocumentsMatchingQuery(e,n,co.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((o=>(n.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="LocalStore",Q3=3e8;class X3{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new xt(ze),this.xs=new Ta((o=>wy(o)),xy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new F3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function J3(t,e,n,r){return new X3(t,e,n,r)}async function BS(t,e){const n=Ne(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],u=[];let d=$e();for(const p of s){l.push(p.batchId);for(const g of p.mutations)d=d.add(g.key)}for(const p of o){u.push(p.batchId);for(const g of p.mutations)d=d.add(g.key)}return n.localDocuments.getDocuments(r,d).next((p=>({Ls:p,removedBatchIds:l,addedBatchIds:u})))}))}))}function Z3(t,e){const n=Ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,p,g){const v=p.batch,w=v.keys();let T=te.resolve();return w.forEach((A=>{T=T.next((()=>g.getEntry(d,A))).next((N=>{const C=p.docVersions.get(A);Qe(C!==null,48541),N.version.compareTo(C)<0&&(v.applyToRemoteDocument(N,p),N.isValidDocument()&&(N.setReadTime(p.commitVersion),g.addEntry(N)))}))})),T.next((()=>u.mutationQueue.removeMutationBatch(d,v)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=$e();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(d=d.add(u.batch.mutations[p].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function zS(t){const e=Ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function eM(t,e){const n=Ne(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const u=[];e.targetChanges.forEach(((g,v)=>{const w=s.get(v);if(!w)return;u.push(n.Pi.removeMatchingKeys(o,g.removedDocuments,v).next((()=>n.Pi.addMatchingKeys(o,g.addedDocuments,v))));let T=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?T=T.withResumeToken(pn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):g.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(g.resumeToken,r)),s=s.insert(v,T),(function(N,C,D){return N.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=Q3?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0})(w,T,g)&&u.push(n.Pi.updateTargetData(o,T))}));let d=gi(),p=$e();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))})),u.push(tM(o,l,e.documentUpdates).next((g=>{d=g.ks,p=g.qs}))),!r.isEqual(De.min())){const g=n.Pi.getLastRemoteSnapshotVersion(o).next((v=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));u.push(g)}return te.waitFor(u).next((()=>l.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,d,p))).next((()=>d))})).then((o=>(n.Ms=s,o)))}function tM(t,e,n){let r=$e(),s=$e();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let l=gi();return n.forEach(((u,d)=>{const p=o.get(u);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(De.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):de(Ny,"Ignoring outdated watch update for ",u,". Current version:",p.version," Watch version:",d.version)})),{ks:l,qs:s}}))}function nM(t,e){const n=Ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=gy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function rM(t,e){const n=Ne(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((o=>o?(s=o,te.resolve(s)):n.Pi.allocateTargetId(r).next((l=>(s=new so(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function o0(t,e,n){const r=Ne(t),s=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Ol(l))throw l;de(Ny,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Vb(t,e,n){const r=Ne(t);let s=De.min(),o=$e();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,p,g){const v=Ne(d),w=v.xs.get(g);return w!==void 0?te.resolve(v.Ms.get(w)):v.Pi.getTargetData(p,g)})(r,l,js(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,u.targetId).next((d=>{o=d}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,n?s:De.min(),n?o:$e()))).next((u=>(sM(r,$6(e),u),{documents:u,Qs:o})))))}function sM(t,e,n){let r=t.Os.get(e)||De.min();n.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.Os.set(e,r)}class Fb{constructor(){this.activeTargetIds=Y6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iM{constructor(){this.Mo=new Fb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Fb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="ConnectivityMonitor";class Bb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(Ub,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(Ub,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh=null;function a0(){return yh===null?yh=(function(){return 268435456+Math.round(2147483648*Math.random())})():yh++,"0x"+yh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="RestConnection",aM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===of?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,o){const l=a0(),u=this.zo(e,n.toUriEncodedString());de(og,`Sending RPC '${e}' ${l}:`,u,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:p}=new URL(u),g=vo(p);return this.Jo(e,u,d,r,g).then((v=>(de(og,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw _l(og,`RPC '${e}' ${l} failed with error: `,v,"url: ",u,"request:",r),v}))}Ho(e,n,r,s,o,l){return this.Go(e,n,r,s,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ml})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,o)=>e[o]=s)),r&&r.headers.forEach(((s,o)=>e[o]=s))}zo(e,n){const r=aM[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="WebChannelConnection";class uM extends lM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const l=a0();return new Promise(((u,d)=>{const p=new zT;p.setWithCredentials(!0),p.listenOnce($T.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Dh.NO_ERROR:const v=p.getResponseJson();de(Tn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),u(v);break;case Dh.TIMEOUT:de(Tn,`RPC '${e}' ${l} timed out`),d(new ce(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Dh.HTTP_ERROR:const w=p.getStatus();if(de(Tn,`RPC '${e}' ${l} failed with status:`,w,"response text:",p.getResponseText()),w>0){let T=p.getResponseJson();Array.isArray(T)&&(T=T[0]);const A=T?.error;if(A&&A.status&&A.message){const N=(function(D){const j=D.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(j)>=0?j:ee.UNKNOWN})(A.status);d(new ce(N,A.message))}else d(new ce(ee.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ce(ee.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{de(Tn,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(s);de(Tn,`RPC '${e}' ${l} sending request:`,s),p.send(n,"POST",g,r,15)}))}T_(e,n,r){const s=a0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=HT(),u=qT(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const g=o.join("");de(Tn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const v=l.createWebChannel(g,d);this.I_(v);let w=!1,T=!1;const A=new cM({Yo:C=>{T?de(Tn,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(w||(de(Tn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),w=!0),de(Tn,`RPC '${e}' stream ${s} sending:`,C),v.send(C))},Zo:()=>v.close()}),N=(C,D,j)=>{C.listen(D,(F=>{try{j(F)}catch(W){setTimeout((()=>{throw W}),0)}}))};return N(v,qc.EventType.OPEN,(()=>{T||(de(Tn,`RPC '${e}' stream ${s} transport opened.`),A.o_())})),N(v,qc.EventType.CLOSE,(()=>{T||(T=!0,de(Tn,`RPC '${e}' stream ${s} transport closed`),A.a_(),this.E_(v))})),N(v,qc.EventType.ERROR,(C=>{T||(T=!0,_l(Tn,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),A.a_(new ce(ee.UNAVAILABLE,"The operation could not be completed")))})),N(v,qc.EventType.MESSAGE,(C=>{if(!T){const D=C.data[0];Qe(!!D,16349);const j=D,F=j?.error||j[0]?.error;if(F){de(Tn,`RPC '${e}' stream ${s} received error:`,F);const W=F.status;let K=(function(R){const P=Dt[R];if(P!==void 0)return RS(P)})(W),B=F.message;K===void 0&&(K=ee.INTERNAL,B="Unknown error status: "+W+" with message "+F.message),T=!0,A.a_(new ce(K,B)),v.close()}else de(Tn,`RPC '${e}' stream ${s} received:`,D),A.u_(D)}})),N(u,WT.STAT_EVENT,(C=>{C.stat===Yg.PROXY?de(Tn,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===Yg.NOPROXY&&de(Tn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function ag(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(t){return new p3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,n,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&de("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="PersistentStream";class WS{constructor(e,n,r,s,o,l,u,d){this.Mi=e,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $S(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(mi(n.toString()),mi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new ce(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(zb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(de(zb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class dM extends WS{constructor(e,n,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=y3(this.serializer,e),r=(function(o){if(!("targetChange"in o))return De.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?De.min():l.readTime?Ds(l.readTime):De.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=i0(this.serializer),n.addTarget=(function(o,l){let u;const d=l.target;if(u=e0(d)?{documents:x3(o,d)}:{query:MS(o,d).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=kS(o,l.resumeToken);const p=n0(o,l.expectedCount);p!==null&&(u.expectedCount=p)}else if(l.snapshotVersion.compareTo(De.min())>0){u.readTime=uf(o,l.snapshotVersion.toTimestamp());const p=n0(o,l.expectedCount);p!==null&&(u.expectedCount=p)}return u})(this.serializer,e);const r=E3(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=i0(this.serializer),n.removeTarget=e,this.q_(n)}}class hM extends WS{constructor(e,n,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=w3(e.writeResults,e.commitTime),r=Ds(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=i0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>v3(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{}class pM extends fM{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ce(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,r0(n,r),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(ee.UNKNOWN,o.toString())}))}Ho(e,n,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Ho(e,r0(n,r),s,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ce(ee.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class mM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mi(n),this.aa=!1):de("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="RemoteStore";class gM{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{Sa(this)&&(de(va,"Restarting streams for network reachability change."),await(async function(d){const p=Ne(d);p.Ea.add(4),await qu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Kf(p)})(this))}))})),this.Ra=new mM(r,s)}}async function Kf(t){if(Sa(t))for(const e of t.da)await e(!0)}async function qu(t){for(const e of t.da)await e(!1)}function qS(t,e){const n=Ne(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Dy(n)?jy(n):Fl(n).O_()&&Py(n,e))}function ky(t,e){const n=Ne(t),r=Fl(n);n.Ia.delete(e),r.O_()&&HS(n,e),n.Ia.size===0&&(r.O_()?r.L_():Sa(n)&&n.Ra.set("Unknown"))}function Py(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fl(t).Y_(e)}function HS(t,e){t.Va.Ue(e),Fl(t).Z_(e)}function jy(t){t.Va=new u3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Fl(t).start(),t.Ra.ua()}function Dy(t){return Sa(t)&&!Fl(t).x_()&&t.Ia.size>0}function Sa(t){return Ne(t).Ea.size===0}function GS(t){t.Va=void 0}async function yM(t){t.Ra.set("Online")}async function vM(t){t.Ia.forEach(((e,n)=>{Py(t,e)}))}async function wM(t,e){GS(t),Dy(t)?(t.Ra.ha(e),jy(t)):t.Ra.set("Unknown")}async function xM(t,e,n){if(t.Ra.set("Online"),e instanceof NS&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const u of o.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.Ia.delete(u),s.Va.removeTarget(u))})(t,e)}catch(r){de(va,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hf(t,r)}else if(e instanceof Vh?t.Va.Ze(e):e instanceof AS?t.Va.st(e):t.Va.tt(e),!n.isEqual(De.min()))try{const r=await zS(t.localStore);n.compareTo(r)>=0&&await(function(o,l){const u=o.Va.Tt(l);return u.targetChanges.forEach(((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Ia.get(p);g&&o.Ia.set(p,g.withResumeToken(d.resumeToken,l))}})),u.targetMismatches.forEach(((d,p)=>{const g=o.Ia.get(d);if(!g)return;o.Ia.set(d,g.withResumeToken(pn.EMPTY_BYTE_STRING,g.snapshotVersion)),HS(o,d);const v=new so(g.target,d,p,g.sequenceNumber);Py(o,v)})),o.remoteSyncer.applyRemoteEvent(u)})(t,n)}catch(r){de(va,"Failed to raise snapshot:",r),await hf(t,r)}}async function hf(t,e,n){if(!Ol(e))throw e;t.Ea.add(1),await qu(t),t.Ra.set("Offline"),n||(n=()=>zS(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{de(va,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Kf(t)}))}function KS(t,e){return e().catch((n=>hf(t,n,e)))}async function Yf(t){const e=Ne(t),n=po(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gy;for(;bM(e);)try{const s=await nM(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,_M(e,s)}catch(s){await hf(e,s)}YS(e)&&QS(e)}function bM(t){return Sa(t)&&t.Ta.length<10}function _M(t,e){t.Ta.push(e);const n=po(t);n.O_()&&n.X_&&n.ea(e.mutations)}function YS(t){return Sa(t)&&!po(t).x_()&&t.Ta.length>0}function QS(t){po(t).start()}async function EM(t){po(t).ra()}async function TM(t){const e=po(t);for(const n of t.Ta)e.ea(n.mutations)}async function SM(t,e,n){const r=t.Ta.shift(),s=Ty.from(r,e,n);await KS(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Yf(t)}async function CM(t,e){e&&po(t).X_&&await(async function(r,s){if((function(l){return a3(l)&&l!==ee.ABORTED})(s.code)){const o=r.Ta.shift();po(r).B_(),await KS(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Yf(r)}})(t,e),YS(t)&&QS(t)}async function $b(t,e){const n=Ne(t);n.asyncQueue.verifyOperationInProgress(),de(va,"RemoteStore received new credentials");const r=Sa(n);n.Ea.add(3),await qu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Kf(n)}async function IM(t,e){const n=Ne(t);e?(n.Ea.delete(2),await Kf(n)):e||(n.Ea.add(2),await qu(n),n.Ra.set("Unknown"))}function Fl(t){return t.ma||(t.ma=(function(n,r,s){const o=Ne(n);return o.sa(),new dM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Xo:yM.bind(null,t),t_:vM.bind(null,t),r_:wM.bind(null,t),H_:xM.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Dy(t)?jy(t):t.Ra.set("Unknown")):(await t.ma.stop(),GS(t))}))),t.ma}function po(t){return t.fa||(t.fa=(function(n,r,s){const o=Ne(n);return o.sa(),new hM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:EM.bind(null,t),r_:CM.bind(null,t),ta:TM.bind(null,t),na:SM.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Yf(t)):(await t.fa.stop(),t.Ta.length>0&&(de(va,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const l=Date.now()+r,u=new My(e,n,l,s,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ly(t,e){if(mi("AsyncQueue",`${e}: ${t}`),Ol(t))return new ce(ee.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{static emptySet(e){return new wl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ye.comparator(n.key,r.key):(n,r)=>ye.comparator(n.key,r.key),this.keyedMap=Hc(),this.sortedSet=new xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new wl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(){this.ga=new xt(ye.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Rl{constructor(e,n,r,s,o,l,u,d,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,s,o){const l=[];return n.forEach((u=>{l.push({type:0,doc:u})})),new Rl(e,n,wl.emptySet(n),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class AM{constructor(){this.queries=qb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Ne(n),o=s.queries;s.queries=qb(),o.forEach(((l,u)=>{for(const d of u.Sa)d.onError(r)}))})(this,new ce(ee.ABORTED,"Firestore shutting down"))}}function qb(){return new Ta((t=>mS(t)),zf)}async function Oy(t,e){const n=Ne(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.ba()&&e.Da()&&(r=2):(o=new RM,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const u=Ly(l,`Initialization of query '${ll(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Fy(n)}async function Vy(t,e){const n=Ne(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function NM(t,e){const n=Ne(t);let r=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const u of l.Sa)u.Fa(s)&&(r=!0);l.wa=s}}r&&Fy(n)}function kM(t,e,n){const r=Ne(t),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);r.queries.delete(e)}function Fy(t){t.Ca.forEach((e=>{e.next()}))}var l0,Hb;(Hb=l0||(l0={})).Ma="default",Hb.Cache="cache";class Uy{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Rl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==l0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.key=e}}class JS{constructor(e){this.key=e}}class PM{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=$e(),this.mutatedKeys=$e(),this.eu=gS(e),this.tu=new wl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Wb,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,v)=>{const w=s.get(g),T=$f(this.query,v)?v:null,A=!!w&&this.mutatedKeys.has(w.key),N=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let C=!1;w&&T?w.data.isEqual(T.data)?A!==N&&(r.track({type:3,doc:T}),C=!0):this.su(w,T)||(r.track({type:2,doc:T}),C=!0,(d&&this.eu(T,d)>0||p&&this.eu(T,p)<0)&&(u=!0)):!w&&T?(r.track({type:0,doc:T}),C=!0):w&&!T&&(r.track({type:1,doc:w}),C=!0,(d||p)&&(u=!0)),C&&(T?(l=l.add(T),o=N?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{tu:l,iu:r,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,v)=>(function(T,A){const N=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:C})}};return N(T)-N(A)})(g.type,v.type)||this.eu(g.doc,v.doc))),this.ou(r),s=s??!1;const u=n&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,p=d!==this.Za;return this.Za=d,l.length!==0||p?{snapshot:new Rl(this.query,e.tu,o,l,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Wb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=$e(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new JS(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new XS(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=$e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Rl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const By="SyncEngine";class jM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class DM{constructor(e){this.key=e,this.hu=!1}}class MM{constructor(e,n,r,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Ta((u=>mS(u)),zf),this.Iu=new Map,this.Eu=new Set,this.du=new xt(ye.comparator),this.Au=new Map,this.Ru=new Iy,this.Vu={},this.mu=new Map,this.fu=Il.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function LM(t,e,n=!0){const r=sC(t);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await ZS(r,e,n,!0),s}async function OM(t,e){const n=sC(t);await ZS(n,e,!0,!1)}async function ZS(t,e,n,r){const s=await rM(t.localStore,js(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let u;return r&&(u=await VM(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&qS(t.remoteStore,s),u}async function VM(t,e,n,r,s){t.pu=(v,w,T)=>(async function(N,C,D,j){let F=C.view.ru(D);F.Cs&&(F=await Vb(N.localStore,C.query,!1).then((({documents:I})=>C.view.ru(I,F))));const W=j&&j.targetChanges.get(C.targetId),K=j&&j.targetMismatches.get(C.targetId)!=null,B=C.view.applyChanges(F,N.isPrimaryClient,W,K);return Kb(N,C.targetId,B.au),B.snapshot})(t,v,w,T);const o=await Vb(t.localStore,e,!0),l=new PM(e,o.Qs),u=l.ru(o.documents),d=Wu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),p=l.applyChanges(u,t.isPrimaryClient,d);Kb(t,n,p.au);const g=new jM(e,n,l);return t.Tu.set(e,g),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function FM(t,e,n){const r=Ne(t),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter((l=>!zf(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await o0(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ky(r.remoteStore,s.targetId),c0(r,s.targetId)})).catch(Ll)):(c0(r,s.targetId),await o0(r.localStore,s.targetId,!0))}async function UM(t,e){const n=Ne(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ky(n.remoteStore,r.targetId))}async function BM(t,e,n){const r=KM(t);try{const s=await(function(l,u){const d=Ne(l),p=tt.now(),g=u.reduce(((T,A)=>T.add(A.key)),$e());let v,w;return d.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let A=gi(),N=$e();return d.Ns.getEntries(T,g).next((C=>{A=C,A.forEach(((D,j)=>{j.isValidDocument()||(N=N.add(D))}))})).next((()=>d.localDocuments.getOverlayedDocuments(T,A))).next((C=>{v=C;const D=[];for(const j of u){const F=t3(j,v.get(j.key).overlayedDocument);F!=null&&D.push(new To(j.key,F,oS(F.value.mapValue),Pr.exists(!0)))}return d.mutationQueue.addMutationBatch(T,p,D,u)})).next((C=>{w=C;const D=C.applyToLocalDocumentSet(v,N);return d.documentOverlayCache.saveOverlays(T,C.batchId,D)}))})).then((()=>({batchId:w.batchId,changes:vS(v)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,u,d){let p=l.Vu[l.currentUser.toKey()];p||(p=new xt(ze)),p=p.insert(u,d),l.Vu[l.currentUser.toKey()]=p})(r,s.batchId,n),await Hu(r,s.changes),await Yf(r.remoteStore)}catch(s){const o=Ly(s,"Failed to persist write");n.reject(o)}}async function eC(t,e){const n=Ne(t);try{const r=await eM(n.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=n.Au.get(o);l&&(Qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Qe(l.hu,14607):s.removedDocuments.size>0&&(Qe(l.hu,42227),l.hu=!1))})),await Hu(n,r,e)}catch(r){await Ll(r)}}function Gb(t,e,n){const r=Ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((o,l)=>{const u=l.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(l,u){const d=Ne(l);d.onlineState=u;let p=!1;d.queries.forEach(((g,v)=>{for(const w of v.Sa)w.va(u)&&(p=!0)})),p&&Fy(d)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zM(t,e,n){const r=Ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),o=s&&s.key;if(o){let l=new xt(ye.comparator);l=l.insert(o,In.newNoDocument(o,De.min()));const u=$e().add(o),d=new Hf(De.min(),new Map,new xt(ze),l,u);await eC(r,d),r.du=r.du.remove(o),r.Au.delete(e),zy(r)}else await o0(r.localStore,e,!1).then((()=>c0(r,e,n))).catch(Ll)}async function $M(t,e){const n=Ne(t),r=e.batch.batchId;try{const s=await Z3(n.localStore,e);nC(n,r,null),tC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hu(n,s)}catch(s){await Ll(s)}}async function WM(t,e,n){const r=Ne(t);try{const s=await(function(l,u){const d=Ne(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let g;return d.mutationQueue.lookupMutationBatch(p,u).next((v=>(Qe(v!==null,37113),g=v.keys(),d.mutationQueue.removeMutationBatch(p,v)))).next((()=>d.mutationQueue.performConsistencyCheck(p))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(p,g,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g))).next((()=>d.localDocuments.getDocuments(p,g)))}))})(r.localStore,e);nC(r,e,n),tC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Hu(r,s)}catch(s){await Ll(s)}}function tC(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function nC(t,e,n){const r=Ne(t);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function c0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||rC(t,r)}))}function rC(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(ky(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),zy(t))}function Kb(t,e,n){for(const r of n)r instanceof XS?(t.Ru.addReference(r.key,e),qM(t,r)):r instanceof JS?(de(By,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||rC(t,r.key)):Ce(19791,{wu:r})}function qM(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(de(By,"New document in limbo: "+n),t.Eu.add(r),zy(t))}function zy(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ye(ot.fromString(e)),r=t.fu.next();t.Au.set(r,new DM(n)),t.du=t.du.insert(n,r),qS(t.remoteStore,new so(js(Bf(n.path)),r,"TargetPurposeLimboResolution",Vf.ce))}}async function Hu(t,e,n){const r=Ne(t),s=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,d)=>{l.push(r.pu(d,e,n).then((p=>{if((p||n)&&r.isPrimaryClient){const g=p?!p.fromCache:n?.targetChanges.get(d.targetId)?.current;r.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(p){s.push(p);const g=Ay.As(d.targetId,p);o.push(g)}})))})),await Promise.all(l),r.Pu.H_(s),await(async function(d,p){const g=Ne(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>te.forEach(p,(w=>te.forEach(w.Es,(T=>g.persistence.referenceDelegate.addReference(v,w.targetId,T))).next((()=>te.forEach(w.ds,(T=>g.persistence.referenceDelegate.removeReference(v,w.targetId,T)))))))))}catch(v){if(!Ol(v))throw v;de(Ny,"Failed to update sequence numbers: "+v)}for(const v of p){const w=v.targetId;if(!v.fromCache){const T=g.Ms.get(w),A=T.snapshotVersion,N=T.withLastLimboFreeSnapshotVersion(A);g.Ms=g.Ms.insert(w,N)}}})(r.localStore,o))}async function HM(t,e){const n=Ne(t);if(!n.currentUser.isEqual(e)){de(By,"User change. New user:",e.toKey());const r=await BS(n.localStore,e);n.currentUser=e,(function(o,l){o.mu.forEach((u=>{u.forEach((d=>{d.reject(new ce(ee.CANCELLED,l))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hu(n,r.Ls)}}function GM(t,e){const n=Ne(t),r=n.Au.get(e);if(r&&r.hu)return $e().add(r.key);{let s=$e();const o=n.Iu.get(e);if(!o)return s;for(const l of o){const u=n.Tu.get(l);s=s.unionWith(u.view.nu)}return s}}function sC(t){const e=Ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zM.bind(null,e),e.Pu.H_=NM.bind(null,e.eventManager),e.Pu.yu=kM.bind(null,e.eventManager),e}function KM(t){const e=Ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$M.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WM.bind(null,e),e}class ff{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return J3(this.persistence,new Y3,e.initialUser,this.serializer)}Cu(e){return new US(Ry.mi,this.serializer)}Du(e){return new iM}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ff.provider={build:()=>new ff};class YM extends ff{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Qe(this.persistence.referenceDelegate instanceof df,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new D3(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Yn.withCacheSize(this.cacheSizeBytes):Yn.DEFAULT;return new US((r=>df.mi(r,n)),this.serializer)}}class u0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Gb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HM.bind(null,this.syncEngine),await IM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new AM})()}createDatastore(e){const n=Gf(e.databaseInfo.databaseId),r=(function(o){return new uM(o)})(e.databaseInfo);return(function(o,l,u,d){return new pM(o,l,u,d)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,o,l,u){return new gM(r,s,o,l,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>Gb(this.syncEngine,n,0)),(function(){return Bb.v()?new Bb:new oM})())}createSyncEngine(e,n){return(function(s,o,l,u,d,p,g){const v=new MM(s,o,l,u,d,p);return g&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ne(n);de(va,"RemoteStore shutting down."),r.Ea.add(5),await qu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}u0.provider={build:()=>new u0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="FirestoreClient";class QM{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Sn.UNAUTHENTICATED,this.clientId=my.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{de(mo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(de(mo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ly(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function lg(t,e){t.asyncQueue.verifyOperationInProgress(),de(mo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await BS(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Yb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await XM(t);de(mo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>$b(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>$b(e.remoteStore,s))),t._onlineComponents=e}async function XM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){de(mo,"Using user provided OfflineComponentProvider");try{await lg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ee.FAILED_PRECONDITION||s.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;_l("Error using user provided cache. Falling back to memory cache: "+n),await lg(t,new ff)}}else de(mo,"Using default OfflineComponentProvider"),await lg(t,new YM(void 0));return t._offlineComponents}async function Wy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(de(mo,"Using user provided OnlineComponentProvider"),await Yb(t,t._uninitializedComponentsProvider._online)):(de(mo,"Using default OnlineComponentProvider"),await Yb(t,new u0))),t._onlineComponents}function JM(t){return Wy(t).then((e=>e.syncEngine))}function ZM(t){return Wy(t).then((e=>e.datastore))}async function pf(t){const e=await Wy(t),n=e.eventManager;return n.onListen=LM.bind(null,e.syncEngine),n.onUnlisten=FM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=OM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=UM.bind(null,e.syncEngine),n}function eL(t,e,n={}){const r=new Ps;return t.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,d,p){const g=new $y({next:w=>{g.Nu(),l.enqueueAndForget((()=>Vy(o,v)));const T=w.docs.has(u);!T&&w.fromCache?p.reject(new ce(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&w.fromCache&&d&&d.source==="server"?p.reject(new ce(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),v=new Uy(Bf(u.path),g,{includeMetadataChanges:!0,qa:!0});return Oy(o,v)})(await pf(t),t.asyncQueue,e,n,r))),r.promise}function tL(t,e,n={}){const r=new Ps;return t.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,d,p){const g=new $y({next:w=>{g.Nu(),l.enqueueAndForget((()=>Vy(o,v))),w.fromCache&&d.source==="server"?p.reject(new ce(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),v=new Uy(u,g,{includeMetadataChanges:!0,qa:!0});return Oy(o,v)})(await pf(t),t.asyncQueue,e,n,r))),r.promise}function nL(t,e,n){const r=new Ps;return t.asyncQueue.enqueueAndForget((async()=>{try{const s=await ZM(t);r.resolve((async function(l,u,d){const p=Ne(l),{request:g,gt:v,parent:w}=b3(p.serializer,z6(u),d);p.connection.$o||delete g.parent;const T=(await p.Ho("RunAggregationQuery",p.serializer.databaseId,w,g,1)).filter((N=>!!N.result));Qe(T.length===1,64727);const A=T[0].result?.aggregateFields;return Object.keys(A).reduce(((N,C)=>(N[v[C]]=A[C],N)),{})})(s,e,n))}catch(s){r.reject(s)}})),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="firestore.googleapis.com",Xb=!0;class Jb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oC,this.ssl=Xb}else this.host=e.host,this.ssl=e.ssl??Xb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=FS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<P3)throw new ce(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}p6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iC(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ce(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ce(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ce(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new s6;switch(r.type){case"firstParty":return new l6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Qb.get(n);r&&(de("ComponentProvider","Removing Datastore"),Qb.delete(n),r.terminate())})(this),Promise.resolve()}}function rL(t,e,n,r={}){t=Un(t,Qf);const s=vo(e),o=t._getSettings(),l={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;s&&(Y0(`https://${u}`),Q0("Firestore",!0)),o.host!==oC&&o.host!==u&&_l("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:u,ssl:s,emulatorOptions:r};if(!hi(d,l)&&(t._setSettings(d),r.mockUserToken)){let p,g;if(typeof r.mockUserToken=="string")p=r.mockUserToken,g=Sn.MOCK_USER;else{p=R2(r.mockUserToken,t._app?.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new ce(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Sn(v)}t._authCredentials=new i6(new KT(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xi(this.firestore,e,this._query)}}class Tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tt(this.firestore,e,this._key)}toJSON(){return{type:Tt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(zu(n,Tt._jsonSchema))return new Tt(e,r||null,new ye(ot.fromString(n.referencePath)))}}Tt._jsonSchemaVersion="firestore/documentReference/1.0",Tt._jsonSchema={type:Ot("string",Tt._jsonSchemaVersion),referencePath:Ot("string")};class lo extends xi{constructor(e,n,r){super(e,n,Bf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new ye(e))}withConverter(e){return new lo(this.firestore,e,this._path)}}function rt(t,e,...n){if(t=at(t),YT("collection","path",e),t instanceof Qf){const r=ot.fromString(e,...n);return db(r),new lo(t,null,r)}{if(!(t instanceof Tt||t instanceof lo))throw new ce(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ot.fromString(e,...n));return db(r),new lo(t.firestore,null,r)}}function st(t,e,...n){if(t=at(t),arguments.length===1&&(e=my.newId()),YT("doc","path",e),t instanceof Qf){const r=ot.fromString(e,...n);return ub(r),new Tt(t,null,new ye(r))}{if(!(t instanceof Tt||t instanceof lo))throw new ce(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ot.fromString(e,...n));return ub(r),new Tt(t.firestore,t instanceof lo?t.converter:null,new ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="AsyncQueue";class e_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $S(this,"async_queue_retry"),this._c=()=>{const r=ag();r&&de(Zb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ag();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ag();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ps;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ol(e))throw e;de(Zb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,mi("INTERNAL UNHANDLED ERROR: ",t_(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=My.createAndSchedule(this,e,n,r,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Ce(47125,{Pc:t_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function t_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1})(t,["next","error","complete"])}class Us extends Qf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new e_,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new e_(e),this._firestoreClient=void 0,await e}}}function sL(t,e){const n=typeof t=="object"?t:kf(),r=typeof t=="string"?t:of,s=wo(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=S2("firestore");o&&rL(s,...o)}return s}function Gu(t){if(t._terminated)throw new ce(ee.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||iL(t),t._firestoreClient}function iL(t){const e=t._freezeSettings(),n=(function(s,o,l,u){return new I6(s,o,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,iC(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new QM(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class aL{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nr(pn.fromBase64String(e))}catch(n){throw new ce(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Nr(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Nr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zu(e,Nr._jsonSchema))return Nr.fromBase64String(e.bytes)}}Nr._jsonSchemaVersion="firestore/bytes/1.0",Nr._jsonSchema={type:Ot("string",Nr._jsonSchemaVersion),bytes:Ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ms._jsonSchemaVersion}}static fromJSON(e){if(zu(e,Ms._jsonSchema))return new Ms(e.latitude,e.longitude)}}Ms._jsonSchemaVersion="firestore/geoPoint/1.0",Ms._jsonSchema={type:Ot("string",Ms._jsonSchemaVersion),latitude:Ot("number"),longitude:Ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ls._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zu(e,Ls._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ls(e.vectorValues);throw new ce(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ls._jsonSchemaVersion="firestore/vectorValue/1.0",Ls._jsonSchema={type:Ot("string",Ls._jsonSchemaVersion),vectorValues:Ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=/^__.*__$/;class cL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new To(e,this.data,this.fieldMask,n,this.fieldTransforms):new $u(e,this.data,n,this.fieldTransforms)}}class aC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new To(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function lC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:t})}}class Jf{constructor(e,n,r,s,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Jf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return mf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(lC(this.Ac)&&lL.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class uL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gf(e)}Cc(e,n,r,s=!1){return new Jf({Ac:e,methodName:n,Dc:r,path:hn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zf(t){const e=t._freezeSettings(),n=Gf(t._databaseId);return new uL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cC(t,e,n,r,s,o={}){const l=t.Cc(o.merge||o.mergeFields?2:0,e,n,s);Ky("Data must be an object, but it was:",l,r);const u=uC(r,l);let d,p;if(o.merge)d=new pr(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const w=d0(e,v,n);if(!l.contains(w))throw new ce(ee.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);hC(g,w)||g.push(w)}d=new pr(g),p=l.fieldTransforms.filter((v=>d.covers(v.field)))}else d=null,p=l.fieldTransforms;return new cL(new Xn(u),d,p)}class ep extends Ul{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ep}}function dL(t,e,n){return new Jf({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class qy extends Ul{_toFieldTransform(e){return new _y(e.path,new bu)}isEqual(e){return e instanceof qy}}class Hy extends Ul{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=dL(this,e,!0),r=this.vc.map((o=>Bl(o,n))),s=new Cl(r);return new _y(e.path,s)}isEqual(e){return e instanceof Hy&&hi(this.vc,e.vc)}}class Gy extends Ul{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Eu(e.serializer,bS(e.serializer,this.Fc));return new _y(e.path,n)}isEqual(e){return e instanceof Gy&&this.Fc===e.Fc}}function hL(t,e,n,r){const s=t.Cc(1,e,n);Ky("Data must be an object, but it was:",s,r);const o=[],l=Xn.empty();Eo(r,((d,p)=>{const g=Yy(e,d,n);p=at(p);const v=s.yc(g);if(p instanceof ep)o.push(g);else{const w=Bl(p,v);w!=null&&(o.push(g),l.set(g,w))}}));const u=new pr(o);return new aC(l,u,s.fieldTransforms)}function fL(t,e,n,r,s,o){const l=t.Cc(1,e,n),u=[d0(e,r,n)],d=[s];if(o.length%2!=0)throw new ce(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)u.push(d0(e,o[w])),d.push(o[w+1]);const p=[],g=Xn.empty();for(let w=u.length-1;w>=0;--w)if(!hC(p,u[w])){const T=u[w];let A=d[w];A=at(A);const N=l.yc(T);if(A instanceof ep)p.push(T);else{const C=Bl(A,N);C!=null&&(p.push(T),g.set(T,C))}}const v=new pr(p);return new aC(g,v,l.fieldTransforms)}function pL(t,e,n,r=!1){return Bl(n,t.Cc(r?4:3,e))}function Bl(t,e){if(dC(t=at(t)))return Ky("Unsupported field value:",e,t),uC(t,e);if(t instanceof Ul)return(function(r,s){if(!lC(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const o=[];let l=0;for(const u of r){let d=Bl(u,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(t,e)}return(function(r,s){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return bS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=tt.fromDate(r);return{timestampValue:uf(s.serializer,o)}}if(r instanceof tt){const o=new tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:uf(s.serializer,o)}}if(r instanceof Ms)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nr)return{bytesValue:kS(s.serializer,r._byteString)};if(r instanceof Tt){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Cy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ls)return(function(l,u){return{mapValue:{fields:{[sS]:{stringValue:iS},[af]:{arrayValue:{values:l.toArray().map((p=>{if(typeof p!="number")throw u.Sc("VectorValues must only contain numeric values.");return by(u.serializer,p)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${Of(r)}`)})(t,e)}function uC(t,e){const n={};return JT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eo(t,((r,s)=>{const o=Bl(s,e.mc(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function dC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tt||t instanceof Ms||t instanceof Nr||t instanceof Tt||t instanceof Ul||t instanceof Ls)}function Ky(t,e,n){if(!dC(n)||!QT(n)){const r=Of(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function d0(t,e,n){if((e=at(e))instanceof Xf)return e._internalPath;if(typeof e=="string")return Yy(t,e);throw mf("Field path arguments must be of type string or ",t,!1,void 0,n)}const mL=new RegExp("[~\\*/\\[\\]]");function Yy(t,e,n){if(e.search(mL)>=0)throw mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xf(...e.split("."))._internalPath}catch{throw mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function mf(t,e,n,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new ce(ee.INVALID_ARGUMENT,u+t+d)}function hC(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(tp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gL extends fC{data(){return super.data()}}function tp(t,e){return typeof e=="string"?Yy(t,e):e instanceof Xf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ce(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qy{}class Xy extends Qy{}function Ft(t,e,...n){let r=[];e instanceof Qy&&r.push(e),r=r.concat(n),(function(o){const l=o.filter((d=>d instanceof Jy)).length,u=o.filter((d=>d instanceof np)).length;if(l>1||l>0&&u>0)throw new ce(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class np extends Xy{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new np(e,n,r)}_apply(e){const n=this._parse(e);return gC(e._query,n),new xi(e.firestore,e.converter,t0(e._query,n))}_parse(e){const n=Zf(e.firestore);return(function(o,l,u,d,p,g,v){let w;if(p.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ce(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){s_(v,g);const A=[];for(const N of v)A.push(r_(d,o,N));w={arrayValue:{values:A}}}else w=r_(d,o,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||s_(v,g),w=pL(u,l,v,g==="in"||g==="not-in");return Lt.create(p,g,w)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Vt(t,e,n){const r=e,s=tp("where",t);return np._create(s,r,n)}class Jy extends Qy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Jy(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ns.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,o){let l=s;const u=o.getFlattenedFilters();for(const d of u)gC(l,d),l=t0(l,d)})(e._query,n),new xi(e.firestore,e.converter,t0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zy extends Xy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Zy(e,n)}_apply(e){const n=(function(s,o,l){if(s.startAt!==null)throw new ce(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ce(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xu(o,l)})(e._query,this._field,this._direction);return new xi(e.firestore,e.converter,(function(s,o){const l=s.explicitOrderBy.concat([o]);return new Vl(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function bi(t,e="asc"){const n=e,r=tp("orderBy",t);return Zy._create(r,n)}class ev extends Xy{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new ev(e,n,r)}_apply(e){return new xi(e.firestore,e.converter,cf(e._query,this._limit,this._limitType))}}function mC(t){return m6("limit",t),ev._create("limit",t,"F")}function r_(t,e,n){if(typeof(n=at(n))=="string"){if(n==="")throw new ce(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fS(e)&&n.indexOf("/")!==-1)throw new ce(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ot.fromString(n));if(!ye.isDocumentKey(r))throw new ce(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wb(t,new ye(r))}if(n instanceof Tt)return wb(t,n._key);throw new ce(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Of(n)}.`)}function s_(t,e){if(!Array.isArray(t)||t.length===0)throw new ce(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gC(t,e){const n=(function(s,o){for(const l of s)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ce(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class yL{convertValue(e,n="none"){switch(fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ho(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Eo(e,((s,o)=>{r[s]=this.convertValue(o,n)})),r}convertVectorValue(e){const n=e.fields?.[af].arrayValue?.values?.map((r=>kt(r.doubleValue)));return new Ls(n)}convertGeoPoint(e){return new Ms(kt(e.latitude),kt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Uf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(yu(e));default:return null}}convertTimestamp(e){const n=uo(e);return new tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ot.fromString(e);Qe(VS(r),9688,{name:e});const s=new vu(r.get(1),r.get(3)),o=new ye(r.popFirst(5));return s.isEqual(n)||mi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function vL(){return new oL("count")}class Kc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class la extends fC{constructor(e,n,r,s,o,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(tp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=la._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}la._jsonSchemaVersion="firestore/documentSnapshot/1.0",la._jsonSchema={type:Ot("string",la._jsonSchemaVersion),bundleSource:Ot("string","DocumentSnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class Fh extends la{data(e={}){return super.data(e)}}class ca{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Kc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Fh(this._firestore,this._userDataWriter,r.key,r,new Kc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const d=new Fh(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Kc(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new Fh(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Kc(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,g=-1;return u.type!==0&&(p=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),g=l.indexOf(u.doc.key)),{type:wL(u.type),doc:d,oldIndex:p,newIndex:g}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ca._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=my.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(t){t=Un(t,Tt);const e=Un(t.firestore,Us);return eL(Gu(e),t._key).then((n=>vC(e,t,n)))}ca._jsonSchemaVersion="firestore/querySnapshot/1.0",ca._jsonSchema={type:Ot("string",ca._jsonSchemaVersion),bundleSource:Ot("string","QuerySnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class rp extends yL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}function Nn(t){t=Un(t,xi);const e=Un(t.firestore,Us),n=Gu(e),r=new rp(e);return pC(t._query),tL(n,t._query).then((s=>new ca(e,r,t,s)))}function sp(t,e,n){t=Un(t,Tt);const r=Un(t.firestore,Us),s=yC(t.converter,e,n);return op(r,[cC(Zf(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Pr.none())])}function Bs(t,e,n,...r){t=Un(t,Tt);const s=Un(t.firestore,Us),o=Zf(s);let l;return l=typeof(e=at(e))=="string"||e instanceof Xf?fL(o,"updateDoc",t._key,e,n,r):hL(o,"updateDoc",t._key,e),op(s,[l.toMutation(t._key,Pr.exists(!0))])}function ip(t){return op(Un(t.firestore,Us),[new Ey(t._key,Pr.none())])}function $s(t,e){const n=Un(t.firestore,Us),r=st(t),s=yC(t.converter,e);return op(n,[cC(Zf(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Pr.exists(!1))]).then((()=>r))}function tv(t,...e){t=at(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||n_(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(n_(e[r])){const d=e[r];e[r]=d.next?.bind(d),e[r+1]=d.error?.bind(d),e[r+2]=d.complete?.bind(d)}let o,l,u;if(t instanceof Tt)l=Un(t.firestore,Us),u=Bf(t._key.path),o={next:d=>{e[r]&&e[r](vC(l,t,d))},error:e[r+1],complete:e[r+2]};else{const d=Un(t,xi);l=Un(d.firestore,Us),u=d._query;const p=new rp(l);o={next:g=>{e[r]&&e[r](new ca(l,p,d,g))},error:e[r+1],complete:e[r+2]},pC(t._query)}return(function(p,g,v,w){const T=new $y(w),A=new Uy(g,T,v);return p.asyncQueue.enqueueAndForget((async()=>Oy(await pf(p),A))),()=>{T.Nu(),p.asyncQueue.enqueueAndForget((async()=>Vy(await pf(p),A)))}})(Gu(l),u,s,o)}function op(t,e){return(function(r,s){const o=new Ps;return r.asyncQueue.enqueueAndForget((async()=>BM(await JM(r),s,o))),o.promise})(Gu(t),e)}function vC(t,e,n){const r=n.docs.get(e._key),s=new rp(t);return new la(t,s,e._key,r,new Kc(n.hasPendingWrites,n.fromCache),e.converter)}function i_(t){return xL(t,{count:vL()})}function xL(t,e){const n=Un(t.firestore,Us),r=Gu(n),s=S6(e,((o,l)=>new i3(l,o.aggregateType,o._internalFieldPath)));return nL(r,t._query,s).then((o=>(function(u,d,p){const g=new rp(u);return new aL(d,g,p)})(n,t,o)))}function fn(){return new qy("serverTimestamp")}function bL(...t){return new Hy("arrayUnion",t)}function h0(t){return new Gy("increment",t)}(function(e,n=!0){(function(s){Ml=s})(_a),ts(new Dr("firestore",((r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),u=new Us(new o6(r.getProvider("auth-internal")),new c6(l,r.getProvider("app-check-internal")),(function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ce(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vu(p.options.projectId,g)})(l,s),l);return o={useFetchStreams:n,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Zn(ob,ab,e),Zn(ob,ab,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="firebasestorage.googleapis.com",xC="storageBucket",_L=120*1e3,EL=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct extends Vr{constructor(e,n,r=0){super(cg(e),`Firebase Storage: ${n} (${cg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ct.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var St;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(St||(St={}));function cg(t){return"storage/"+t}function nv(){const t="An unknown error occurred, please check the error payload for server response.";return new Ct(St.UNKNOWN,t)}function TL(t){return new Ct(St.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function SL(t){return new Ct(St.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function CL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ct(St.UNAUTHENTICATED,t)}function IL(){return new Ct(St.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function RL(t){return new Ct(St.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function AL(){return new Ct(St.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function NL(){return new Ct(St.CANCELED,"User canceled the upload/download.")}function kL(t){return new Ct(St.INVALID_URL,"Invalid URL '"+t+"'.")}function PL(t){return new Ct(St.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function jL(){return new Ct(St.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+xC+"' property when initializing the app?")}function DL(){return new Ct(St.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ML(){return new Ct(St.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function LL(t){return new Ct(St.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function f0(t){return new Ct(St.INVALID_ARGUMENT,t)}function bC(){return new Ct(St.APP_DELETED,"The Firebase app was deleted.")}function OL(t){return new Ct(St.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nu(t,e){return new Ct(St.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Oc(t){throw new Ct(St.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=mr.makeFromUrl(e,n)}catch{return new mr(e,"")}if(r.path==="")return r;throw PL(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(W){W.path.charAt(W.path.length-1)==="/"&&(W.path_=W.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+s+l,"i"),d={bucket:1,path:3};function p(W){W.path_=decodeURIComponent(W.path)}const g="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",T=new RegExp(`^https?://${v}/${g}/b/${s}/o${w}`,"i"),A={bucket:1,path:3},N=n===wC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",D=new RegExp(`^https?://${N}/${s}/${C}`,"i"),F=[{regex:u,indices:d,postModify:o},{regex:T,indices:A,postModify:p},{regex:D,indices:{bucket:1,path:2},postModify:p}];for(let W=0;W<F.length;W++){const K=F[W],B=K.regex.exec(e);if(B){const I=B[K.indices.bucket];let R=B[K.indices.path];R||(R=""),r=new mr(I,R),K.postModify(r);break}}if(r==null)throw kL(e);return r}}class VL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(t,e,n){let r=1,s=null,o=null,l=!1,u=0;function d(){return u===2}let p=!1;function g(...C){p||(p=!0,e.apply(null,C))}function v(C){s=setTimeout(()=>{s=null,t(T,d())},C)}function w(){o&&clearTimeout(o)}function T(C,...D){if(p){w();return}if(C){w(),g.call(null,C,...D);return}if(d()||l){w(),g.call(null,C,...D);return}r<64&&(r*=2);let F;u===1?(u=2,F=0):F=(r+Math.random())*1e3,v(F)}let A=!1;function N(C){A||(A=!0,w(),!p&&(s!==null?(C||(u=2),clearTimeout(s),v(0)):C||(u=1)))}return v(0),o=setTimeout(()=>{l=!0,N(!0)},n),N}function UL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(t){return t!==void 0}function zL(t){return typeof t=="object"&&!Array.isArray(t)}function rv(t){return typeof t=="string"||t instanceof String}function o_(t){return sv()&&t instanceof Blob}function sv(){return typeof Blob<"u"}function a_(t,e,n,r){if(r<e)throw f0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw f0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function _C(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ua;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ua||(ua={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e,n,r,s,o,l,u,d,p,g,v,w=!0,T=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=d,this.timeout_=p,this.progressCallback_=g,this.connectionFactory_=v,this.retry=w,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,N)=>{this.resolve_=A,this.reject_=N,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new vh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=u=>{const d=u.loaded,p=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,p)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const u=o.getErrorCode()===ua.NO_ERROR,d=o.getStatus();if(!u||$L(d,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===ua.ABORT;r(!1,new vh(!1,null,g));return}const p=this.successCodes_.indexOf(d)!==-1;r(!0,new vh(p,o))})},n=(r,s)=>{const o=this.resolve_,l=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());BL(d)?o(d):o()}catch(d){l(d)}else if(u!==null){const d=nv();d.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,d)):l(d)}else if(s.canceled){const d=this.appDelete_?bC():NL();l(d)}else{const d=AL();l(d)}};this.canceled_?n(!1,new vh(!1,null,!0)):this.backoffId_=FL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&UL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function qL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function HL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function GL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function KL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function YL(t,e,n,r,s,o,l=!0,u=!1){const d=_C(t.urlParams),p=t.url+d,g=Object.assign({},t.headers);return GL(g,e),qL(g,n),HL(g,o),KL(g,r),new WL(p,t.method,g,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,l,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function XL(...t){const e=QL();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(sv())return new Blob(t);throw new Ct(St.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function JL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(t){if(typeof atob>"u")throw LL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ug{constructor(e,n){this.data=e,this.contentType=n||null}}function eO(t,e){switch(t){case Ns.RAW:return new ug(EC(e));case Ns.BASE64:case Ns.BASE64URL:return new ug(TC(t,e));case Ns.DATA_URL:return new ug(nO(e),rO(e))}throw nv()}function EC(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=t.charCodeAt(++n);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function tO(t){let e;try{e=decodeURIComponent(t)}catch{throw nu(Ns.DATA_URL,"Malformed data URL.")}return EC(e)}function TC(t,e){switch(t){case Ns.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw nu(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ns.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw nu(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ZL(e)}catch(s){throw s.message.includes("polyfill")?s:nu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class SC{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw nu(Ns.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=sO(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function nO(t){const e=new SC(t);return e.base64?TC(Ns.BASE64,e.rest):tO(e.rest)}function rO(t){return new SC(t).contentType}function sO(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n){let r=0,s="";o_(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(o_(this.data_)){const r=this.data_,s=JL(r,e,n);return s===null?null:new ro(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ro(r,!0)}}static getBlob(...e){if(sv()){const n=e.map(r=>r instanceof ro?r.data_:r);return new ro(XL.apply(null,n))}else{const n=e.map(l=>rv(l)?eO(Ns.RAW,l).data:l.data_);let r=0;n.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let o=0;return n.forEach(l=>{for(let u=0;u<l.length;u++)s[o++]=l[u]}),new ro(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(t){let e;try{e=JSON.parse(t)}catch{return null}return zL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function oO(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function IC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(t,e){return e}class On{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||aO}}let wh=null;function lO(t){return!rv(t)||t.length<2?t:IC(t)}function RC(){if(wh)return wh;const t=[];t.push(new On("bucket")),t.push(new On("generation")),t.push(new On("metageneration")),t.push(new On("name","fullPath",!0));function e(o,l){return lO(l)}const n=new On("name");n.xform=e,t.push(n);function r(o,l){return l!==void 0?Number(l):l}const s=new On("size");return s.xform=r,t.push(s),t.push(new On("timeCreated")),t.push(new On("updated")),t.push(new On("md5Hash",null,!0)),t.push(new On("cacheControl",null,!0)),t.push(new On("contentDisposition",null,!0)),t.push(new On("contentEncoding",null,!0)),t.push(new On("contentLanguage",null,!0)),t.push(new On("contentType",null,!0)),t.push(new On("metadata","customMetadata",!0)),wh=t,wh}function cO(t,e){function n(){const r=t.bucket,s=t.fullPath,o=new mr(r,s);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function uO(t,e,n){const r={};r.type="file";const s=n.length;for(let o=0;o<s;o++){const l=n[o];r[l.local]=l.xform(r,e[l.server])}return cO(r,t),r}function AC(t,e,n){const r=CC(e);return r===null?null:uO(t,r,n)}function dO(t,e,n,r){const s=CC(e);if(s===null||!rv(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(p=>{const g=t.bucket,v=t.fullPath,w="/b/"+l(g)+"/o/"+l(v),T=iv(w,n,r),A=_C({alt:"media",token:p});return T+A})[0]}function hO(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class NC{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(t){if(!t)throw nv()}function fO(t,e){function n(r,s){const o=AC(t,s,e);return kC(o!==null),o}return n}function pO(t,e){function n(r,s){const o=AC(t,s,e);return kC(o!==null),dO(o,s,t.host,t._protocol)}return n}function PC(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=IL():s=CL():n.getStatus()===402?s=SL(t.bucket):n.getStatus()===403?s=RL(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function mO(t){const e=PC(t);function n(r,s){let o=e(r,s);return r.getStatus()===404&&(o=TL(t.path)),o.serverResponse=s.serverResponse,o}return n}function gO(t,e,n){const r=e.fullServerUrl(),s=iv(r,t.host,t._protocol),o="GET",l=t.maxOperationRetryTime,u=new NC(s,o,pO(t,n),l);return u.errorHandler=mO(e),u}function yO(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function vO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=yO(null,e)),r}function wO(t,e,n,r,s){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function u(){let F="";for(let W=0;W<2;W++)F=F+Math.random().toString().slice(2);return F}const d=u();l["Content-Type"]="multipart/related; boundary="+d;const p=vO(e,r,s),g=hO(p,n),v="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+d+`\r
Content-Type: `+p.contentType+`\r
\r
`,w=`\r
--`+d+"--",T=ro.getBlob(v,r,w);if(T===null)throw DL();const A={name:p.fullPath},N=iv(o,t.host,t._protocol),C="POST",D=t.maxUploadRetryTime,j=new NC(N,C,fO(t,n),D);return j.urlParams=A,j.headers=l,j.body=T.uploadData(),j.errorHandler=PC(e),j}class xO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ua.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ua.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ua.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,o){if(this.sent_)throw Oc("cannot .send() more than once");if(vo(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Oc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Oc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Oc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Oc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class bO extends xO{initXhr(){this.xhr_.responseType="text"}}function jC(){return new bO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n){this._service=e,n instanceof mr?this._location=n:this._location=mr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new wa(e,n)}get root(){const e=new mr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return IC(this._location.path)}get storage(){return this._service}get parent(){const e=iO(this._location.path);if(e===null)return null;const n=new mr(this._location.bucket,e);return new wa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw OL(e)}}function _O(t,e,n){t._throwIfRoot("uploadBytes");const r=wO(t.storage,t._location,RC(),new ro(e,!0),n);return t.storage.makeRequestWithTokens(r,jC).then(s=>({metadata:s,ref:t}))}function EO(t){t._throwIfRoot("getDownloadURL");const e=gO(t.storage,t._location,RC());return t.storage.makeRequestWithTokens(e,jC).then(n=>{if(n===null)throw ML();return n})}function TO(t,e){const n=oO(t._location.path,e),r=new mr(t._location.bucket,n);return new wa(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t){return/^[A-Za-z]+:\/\//.test(t)}function CO(t,e){return new wa(t,e)}function DC(t,e){if(t instanceof ov){const n=t;if(n._bucket==null)throw jL();const r=new wa(n,n._bucket);return e!=null?DC(r,e):r}else return e!==void 0?TO(t,e):t}function IO(t,e){if(e&&SO(e)){if(t instanceof ov)return CO(t,e);throw f0("To use ref(service, url), the first argument must be a Storage instance.")}else return DC(t,e)}function l_(t,e){const n=e?.[xC];return n==null?null:mr.makeFromBucketSpec(n,t)}function RO(t,e,n,r={}){t.host=`${e}:${n}`;const s=vo(e);s&&(Y0(`https://${t.host}/b`),Q0("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:R2(o,t.app.options.projectId))}class ov{constructor(e,n,r,s,o,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=wC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_L,this._maxUploadRetryTime=EL,this._requests=new Set,s!=null?this._bucket=mr.makeFromBucketSpec(s,this._host):this._bucket=l_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=mr.makeFromBucketSpec(this._url,e):this._bucket=l_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){a_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){a_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wa(this,e)}_makeRequest(e,n,r,s,o=!0){if(this._deleted)return new VL(bC());{const l=YL(e,this._appId,r,s,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const c_="@firebase/storage",u_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="storage";function AO(t,e,n){return t=at(t),_O(t,e,n)}function NO(t){return t=at(t),EO(t)}function kO(t,e){return t=at(t),IO(t,e)}function PO(t=kf(),e){t=at(t);const r=wo(t,MC).getImmediate({identifier:e}),s=S2("storage");return s&&jO(r,...s),r}function jO(t,e,n,r={}){RO(t,e,n,r)}function DO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new ov(n,r,s,e,_a)}function MO(){ts(new Dr(MC,DO,"PUBLIC").setMultipleInstances(!0)),Zn(c_,u_,""),Zn(c_,u_,"esm2020")}MO();const LO={apiKey:"AIzaSyBwN_5jlQ3edG8WRIOWnBCUKnjyfnXtEPo",authDomain:"collabx-a055c.firebaseapp.com",projectId:"collabx-a055c",storageBucket:"collabx-a055c.firebasestorage.app",messagingSenderId:"348756055784",appId:"1:348756055784:web:803b0214061b74dff01b5d",measurementId:"G-NKNYLWZV4L"},ap=M2(LO);B4(ap);const Le=n6(ap),xe=sL(ap),OO=PO(ap),LC=new oi,av=x.createContext({});function lv(t){const e=x.useRef(null);return e.current===null&&(e.current=t()),e.current}const cv=typeof window<"u",OC=cv?x.useLayoutEffect:x.useEffect,lp=x.createContext(null);function uv(t,e){t.indexOf(e)===-1&&t.push(e)}function dv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const yi=(t,e,n)=>n>e?e:n<t?t:n;let hv=()=>{};const vi={},VC=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function FC(t){return typeof t=="object"&&t!==null}const UC=t=>/^0[^.\s]+$/u.test(t);function fv(t){let e;return()=>(e===void 0&&(e=t()),e)}const jr=t=>t,VO=(t,e)=>n=>e(t(n)),Ku=(...t)=>t.reduce(VO),Tu=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class pv{constructor(){this.subscriptions=[]}add(e){return uv(this.subscriptions,e),()=>dv(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Os=t=>t*1e3,kr=t=>t/1e3;function BC(t,e){return e?t*(1e3/e):0}const zC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,FO=1e-7,UO=12;function BO(t,e,n,r,s){let o,l,u=0;do l=e+(n-e)/2,o=zC(l,r,s)-t,o>0?n=l:e=l;while(Math.abs(o)>FO&&++u<UO);return l}function Yu(t,e,n,r){if(t===e&&n===r)return jr;const s=o=>BO(o,0,1,t,n);return o=>o===0||o===1?o:zC(s(o),e,r)}const $C=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,WC=t=>e=>1-t(1-e),qC=Yu(.33,1.53,.69,.99),mv=WC(qC),HC=$C(mv),GC=t=>(t*=2)<1?.5*mv(t):.5*(2-Math.pow(2,-10*(t-1))),gv=t=>1-Math.sin(Math.acos(t)),KC=WC(gv),YC=$C(gv),zO=Yu(.42,0,1,1),$O=Yu(0,0,.58,1),QC=Yu(.42,0,.58,1),WO=t=>Array.isArray(t)&&typeof t[0]!="number",XC=t=>Array.isArray(t)&&typeof t[0]=="number",qO={linear:jr,easeIn:zO,easeInOut:QC,easeOut:$O,circIn:gv,circInOut:YC,circOut:KC,backIn:mv,backInOut:HC,backOut:qC,anticipate:GC},HO=t=>typeof t=="string",d_=t=>{if(XC(t)){hv(t.length===4);const[e,n,r,s]=t;return Yu(e,n,r,s)}else if(HO(t))return qO[t];return t},xh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function GO(t,e){let n=new Set,r=new Set,s=!1,o=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(g){l.has(g)&&(p.schedule(g),t()),g(u)}const p={schedule:(g,v=!1,w=!1)=>{const A=w&&s?n:r;return v&&l.add(g),A.has(g)||A.add(g),g},cancel:g=>{r.delete(g),l.delete(g)},process:g=>{if(u=g,s){o=!0;return}s=!0,[n,r]=[r,n],n.forEach(d),n.clear(),s=!1,o&&(o=!1,p.process(g))}};return p}const KO=40;function JC(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=xh.reduce((F,W)=>(F[W]=GO(o),F),{}),{setup:u,read:d,resolveKeyframes:p,preUpdate:g,update:v,preRender:w,render:T,postRender:A}=l,N=()=>{const F=vi.useManualTiming?s.timestamp:performance.now();n=!1,vi.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(F-s.timestamp,KO),1)),s.timestamp=F,s.isProcessing=!0,u.process(s),d.process(s),p.process(s),g.process(s),v.process(s),w.process(s),T.process(s),A.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(N))},C=()=>{n=!0,r=!0,s.isProcessing||t(N)};return{schedule:xh.reduce((F,W)=>{const K=l[W];return F[W]=(B,I=!1,R=!1)=>(n||C(),K.schedule(B,I,R)),F},{}),cancel:F=>{for(let W=0;W<xh.length;W++)l[xh[W]].cancel(F)},state:s,steps:l}}const{schedule:mt,cancel:go,state:un,steps:dg}=JC(typeof requestAnimationFrame<"u"?requestAnimationFrame:jr,!0);let Uh;function YO(){Uh=void 0}const Jn={now:()=>(Uh===void 0&&Jn.set(un.isProcessing||vi.useManualTiming?un.timestamp:performance.now()),Uh),set:t=>{Uh=t,queueMicrotask(YO)}},ZC=t=>e=>typeof e=="string"&&e.startsWith(t),yv=ZC("--"),QO=ZC("var(--"),vv=t=>QO(t)?XO.test(t.split("/*")[0].trim()):!1,XO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,zl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Su={...zl,transform:t=>yi(0,1,t)},bh={...zl,default:1},ru=t=>Math.round(t*1e5)/1e5,wv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function JO(t){return t==null}const ZO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,xv=(t,e)=>n=>!!(typeof n=="string"&&ZO.test(n)&&n.startsWith(t)||e&&!JO(n)&&Object.prototype.hasOwnProperty.call(n,e)),eI=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,l,u]=r.match(wv);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},eV=t=>yi(0,255,t),hg={...zl,transform:t=>Math.round(eV(t))},oa={test:xv("rgb","red"),parse:eI("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+hg.transform(t)+", "+hg.transform(e)+", "+hg.transform(n)+", "+ru(Su.transform(r))+")"};function tV(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const p0={test:xv("#"),parse:tV,transform:oa.transform},Qu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Xi=Qu("deg"),Vs=Qu("%"),Re=Qu("px"),nV=Qu("vh"),rV=Qu("vw"),h_={...Vs,parse:t=>Vs.parse(t)/100,transform:t=>Vs.transform(t*100)},ul={test:xv("hsl","hue"),parse:eI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Vs.transform(ru(e))+", "+Vs.transform(ru(n))+", "+ru(Su.transform(r))+")"},Mt={test:t=>oa.test(t)||p0.test(t)||ul.test(t),parse:t=>oa.test(t)?oa.parse(t):ul.test(t)?ul.parse(t):p0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?oa.transform(t):ul.transform(t),getAnimatableNone:t=>{const e=Mt.parse(t);return e.alpha=0,Mt.transform(e)}},sV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function iV(t){return isNaN(t)&&typeof t=="string"&&(t.match(wv)?.length||0)+(t.match(sV)?.length||0)>0}const tI="number",nI="color",oV="var",aV="var(",f_="${}",lV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Cu(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const u=e.replace(lV,d=>(Mt.test(d)?(r.color.push(o),s.push(nI),n.push(Mt.parse(d))):d.startsWith(aV)?(r.var.push(o),s.push(oV),n.push(d)):(r.number.push(o),s.push(tI),n.push(parseFloat(d))),++o,f_)).split(f_);return{values:n,split:u,indexes:r,types:s}}function rI(t){return Cu(t).values}function sI(t){const{split:e,types:n}=Cu(t),r=e.length;return s=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],s[l]!==void 0){const u=n[l];u===tI?o+=ru(s[l]):u===nI?o+=Mt.transform(s[l]):o+=s[l]}return o}}const cV=t=>typeof t=="number"?0:Mt.test(t)?Mt.getAnimatableNone(t):t;function uV(t){const e=rI(t);return sI(t)(e.map(cV))}const yo={test:iV,parse:rI,createTransformer:sI,getAnimatableNone:uV};function fg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function dV({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,l=0;if(!e)s=o=l=n;else{const u=n<.5?n*(1+e):n+e-n*e,d=2*n-u;s=fg(d,u,t+1/3),o=fg(d,u,t),l=fg(d,u,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function gf(t,e){return n=>n>0?e:t}const wt=(t,e,n)=>t+(e-t)*n,pg=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},hV=[p0,oa,ul],fV=t=>hV.find(e=>e.test(t));function p_(t){const e=fV(t);if(!e)return!1;let n=e.parse(t);return e===ul&&(n=dV(n)),n}const m_=(t,e)=>{const n=p_(t),r=p_(e);if(!n||!r)return gf(t,e);const s={...n};return o=>(s.red=pg(n.red,r.red,o),s.green=pg(n.green,r.green,o),s.blue=pg(n.blue,r.blue,o),s.alpha=wt(n.alpha,r.alpha,o),oa.transform(s))},m0=new Set(["none","hidden"]);function pV(t,e){return m0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function mV(t,e){return n=>wt(t,e,n)}function bv(t){return typeof t=="number"?mV:typeof t=="string"?vv(t)?gf:Mt.test(t)?m_:vV:Array.isArray(t)?iI:typeof t=="object"?Mt.test(t)?m_:gV:gf}function iI(t,e){const n=[...t],r=n.length,s=t.map((o,l)=>bv(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)n[l]=s[l](o);return n}}function gV(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=bv(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function yV(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=t.indexes[o][r[o]],u=t.values[l]??0;n[s]=u,r[o]++}return n}const vV=(t,e)=>{const n=yo.createTransformer(e),r=Cu(t),s=Cu(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?m0.has(t)&&!s.values.length||m0.has(e)&&!r.values.length?pV(t,e):Ku(iI(yV(r,s),s.values),n):gf(t,e)};function oI(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?wt(t,e,n):bv(t)(t,e)}const wV=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>mt.update(e,n),stop:()=>go(e),now:()=>un.isProcessing?un.timestamp:Jn.now()}},aI=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=Math.round(t(o/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},yf=2e4;function _v(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<yf;)e+=n,r=t.next(e);return e>=yf?1/0:e}function xV(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(_v(r),yf);return{type:"keyframes",ease:o=>r.next(s*o).value/e,duration:kr(s)}}const bV=5;function lI(t,e,n){const r=Math.max(e-bV,0);return BC(n-t(r),e-r)}const Et={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},mg=.001;function _V({duration:t=Et.duration,bounce:e=Et.bounce,velocity:n=Et.velocity,mass:r=Et.mass}){let s,o,l=1-e;l=yi(Et.minDamping,Et.maxDamping,l),t=yi(Et.minDuration,Et.maxDuration,kr(t)),l<1?(s=p=>{const g=p*l,v=g*t,w=g-n,T=g0(p,l),A=Math.exp(-v);return mg-w/T*A},o=p=>{const v=p*l*t,w=v*n+n,T=Math.pow(l,2)*Math.pow(p,2)*t,A=Math.exp(-v),N=g0(Math.pow(p,2),l);return(-s(p)+mg>0?-1:1)*((w-T)*A)/N}):(s=p=>{const g=Math.exp(-p*t),v=(p-n)*t+1;return-mg+g*v},o=p=>{const g=Math.exp(-p*t),v=(n-p)*(t*t);return g*v});const u=5/t,d=TV(s,o,u);if(t=Os(t),isNaN(d))return{stiffness:Et.stiffness,damping:Et.damping,duration:t};{const p=Math.pow(d,2)*r;return{stiffness:p,damping:l*2*Math.sqrt(r*p),duration:t}}}const EV=12;function TV(t,e,n){let r=n;for(let s=1;s<EV;s++)r=r-t(r)/e(r);return r}function g0(t,e){return t*Math.sqrt(1-e*e)}const SV=["duration","bounce"],CV=["stiffness","damping","mass"];function g_(t,e){return e.some(n=>t[n]!==void 0)}function IV(t){let e={velocity:Et.velocity,stiffness:Et.stiffness,damping:Et.damping,mass:Et.mass,isResolvedFromDuration:!1,...t};if(!g_(t,CV)&&g_(t,SV))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*yi(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Et.mass,stiffness:s,damping:o}}else{const n=_V(t);e={...e,...n,mass:Et.mass},e.isResolvedFromDuration=!0}return e}function vf(t=Et.visualDuration,e=Et.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],u={done:!1,value:o},{stiffness:d,damping:p,mass:g,duration:v,velocity:w,isResolvedFromDuration:T}=IV({...n,velocity:-kr(n.velocity||0)}),A=w||0,N=p/(2*Math.sqrt(d*g)),C=l-o,D=kr(Math.sqrt(d/g)),j=Math.abs(C)<5;r||(r=j?Et.restSpeed.granular:Et.restSpeed.default),s||(s=j?Et.restDelta.granular:Et.restDelta.default);let F;if(N<1){const K=g0(D,N);F=B=>{const I=Math.exp(-N*D*B);return l-I*((A+N*D*C)/K*Math.sin(K*B)+C*Math.cos(K*B))}}else if(N===1)F=K=>l-Math.exp(-D*K)*(C+(A+D*C)*K);else{const K=D*Math.sqrt(N*N-1);F=B=>{const I=Math.exp(-N*D*B),R=Math.min(K*B,300);return l-I*((A+N*D*C)*Math.sinh(R)+K*C*Math.cosh(R))/K}}const W={calculatedDuration:T&&v||null,next:K=>{const B=F(K);if(T)u.done=K>=v;else{let I=K===0?A:0;N<1&&(I=K===0?Os(A):lI(F,K,B));const R=Math.abs(I)<=r,P=Math.abs(l-B)<=s;u.done=R&&P}return u.value=u.done?l:B,u},toString:()=>{const K=Math.min(_v(W),yf),B=aI(I=>W.next(K*I).value,K,30);return K+"ms "+B},toTransition:()=>{}};return W}vf.applyToOptions=t=>{const e=xV(t,100,vf);return t.ease=e.ease,t.duration=Os(e.duration),t.type="keyframes",t};function y0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:d,restDelta:p=.5,restSpeed:g}){const v=t[0],w={done:!1,value:v},T=R=>u!==void 0&&R<u||d!==void 0&&R>d,A=R=>u===void 0?d:d===void 0||Math.abs(u-R)<Math.abs(d-R)?u:d;let N=n*e;const C=v+N,D=l===void 0?C:l(C);D!==C&&(N=D-v);const j=R=>-N*Math.exp(-R/r),F=R=>D+j(R),W=R=>{const P=j(R),M=F(R);w.done=Math.abs(P)<=p,w.value=w.done?D:M};let K,B;const I=R=>{T(w.value)&&(K=R,B=vf({keyframes:[w.value,A(w.value)],velocity:lI(F,R,w.value),damping:s,stiffness:o,restDelta:p,restSpeed:g}))};return I(0),{calculatedDuration:null,next:R=>{let P=!1;return!B&&K===void 0&&(P=!0,W(R),I(R)),K!==void 0&&R>=K?B.next(R-K):(!P&&W(R),w)}}}function RV(t,e,n){const r=[],s=n||vi.mix||oI,o=t.length-1;for(let l=0;l<o;l++){let u=s(t[l],t[l+1]);if(e){const d=Array.isArray(e)?e[l]||jr:e;u=Ku(d,u)}r.push(u)}return r}function AV(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(hv(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=RV(e,r,s),d=u.length,p=g=>{if(l&&g<t[0])return e[0];let v=0;if(d>1)for(;v<t.length-2&&!(g<t[v+1]);v++);const w=Tu(t[v],t[v+1],g);return u[v](w)};return n?g=>p(yi(t[0],t[o-1],g)):p}function NV(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Tu(0,e,r);t.push(wt(n,1,s))}}function kV(t){const e=[0];return NV(e,t.length-1),e}function PV(t,e){return t.map(n=>n*e)}function jV(t,e){return t.map(()=>e||QC).splice(0,t.length-1)}function su({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=WO(r)?r.map(d_):d_(r),o={done:!1,value:e[0]},l=PV(n&&n.length===e.length?n:kV(e),t),u=AV(l,e,{ease:Array.isArray(s)?s:jV(e,s)});return{calculatedDuration:t,next:d=>(o.value=u(d),o.done=d>=t,o)}}const DV=t=>t!==null;function Ev(t,{repeat:e,repeatType:n="loop"},r,s=1){const o=t.filter(DV),u=s<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!u||r===void 0?o[u]:r}const MV={decay:y0,inertia:y0,tween:su,keyframes:su,spring:vf};function cI(t){typeof t.type=="string"&&(t.type=MV[t.type])}class Tv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const LV=t=>t/100;class Sv extends Tv{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Jn.now()&&this.tick(Jn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;cI(e);const{type:n=su,repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=e;let{keyframes:u}=e;const d=n||su;d!==su&&typeof u[0]!="number"&&(this.mixKeyframes=Ku(LV,oI(u[0],u[1])),u=[0,100]);const p=d({...e,keyframes:u});o==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...u].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=_v(p));const{calculatedDuration:g}=p;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=p}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:p=0,keyframes:g,repeat:v,repeatType:w,repeatDelay:T,type:A,onUpdate:N,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const D=this.currentTime-p*(this.playbackSpeed>=0?1:-1),j=this.playbackSpeed>=0?D<0:D>s;this.currentTime=Math.max(D,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let F=this.currentTime,W=r;if(v){const R=Math.min(this.currentTime,s)/u;let P=Math.floor(R),M=R%1;!M&&R>=1&&(M=1),M===1&&P--,P=Math.min(P,v+1),!!(P%2)&&(w==="reverse"?(M=1-M,T&&(M-=T/u)):w==="mirror"&&(W=l)),F=yi(0,1,M)*u}const K=j?{done:!1,value:g[0]}:W.next(F);o&&(K.value=o(K.value));let{done:B}=K;!j&&d!==null&&(B=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&B);return I&&A!==y0&&(K.value=Ev(g,this.options,C,this.speed)),N&&N(K.value),I&&this.finish(),K}then(e,n){return this.finished.then(e,n)}get duration(){return kr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+kr(e)}get time(){return kr(this.currentTime)}set time(e){e=Os(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Jn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=kr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=wV,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Jn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function OV(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const aa=t=>t*180/Math.PI,v0=t=>{const e=aa(Math.atan2(t[1],t[0]));return w0(e)},VV={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:v0,rotateZ:v0,skewX:t=>aa(Math.atan(t[1])),skewY:t=>aa(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},w0=t=>(t=t%360,t<0&&(t+=360),t),y_=v0,v_=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),w_=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),FV={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:v_,scaleY:w_,scale:t=>(v_(t)+w_(t))/2,rotateX:t=>w0(aa(Math.atan2(t[6],t[5]))),rotateY:t=>w0(aa(Math.atan2(-t[2],t[0]))),rotateZ:y_,rotate:y_,skewX:t=>aa(Math.atan(t[4])),skewY:t=>aa(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function x0(t){return t.includes("scale")?1:0}function b0(t,e){if(!t||t==="none")return x0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=FV,s=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=VV,s=u}if(!s)return x0(e);const o=r[e],l=s[1].split(",").map(BV);return typeof o=="function"?o(l):l[o]}const UV=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return b0(n,e)};function BV(t){return parseFloat(t.trim())}const $l=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wl=new Set($l),x_=t=>t===zl||t===Re,zV=new Set(["x","y","z"]),$V=$l.filter(t=>!zV.has(t));function WV(t){const e=[];return $V.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const da={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>b0(e,"x"),y:(t,{transform:e})=>b0(e,"y")};da.translateX=da.x;da.translateY=da.y;const ha=new Set;let _0=!1,E0=!1,T0=!1;function uI(){if(E0){const t=Array.from(ha).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=WV(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,l])=>{r.getValue(o)?.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}E0=!1,_0=!1,ha.forEach(t=>t.complete(T0)),ha.clear()}function dI(){ha.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(E0=!0)})}function qV(){T0=!0,dI(),uI(),T0=!1}class Cv{constructor(e,n,r,s,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(ha.add(this),_0||(_0=!0,mt.read(dI),mt.resolveKeyframes(uI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const o=s?.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const u=r.readValue(n,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),s&&o===void 0&&s.set(e[0])}OV(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ha.delete(this)}cancel(){this.state==="scheduled"&&(ha.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const HV=t=>t.startsWith("--");function GV(t,e,n){HV(e)?t.style.setProperty(e,n):t.style[e]=n}const KV=fv(()=>window.ScrollTimeline!==void 0),YV={};function QV(t,e){const n=fv(t);return()=>YV[e]??n()}const hI=QV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Yc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,b_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yc([0,.65,.55,1]),circOut:Yc([.55,0,1,.45]),backIn:Yc([.31,.01,.66,-.59]),backOut:Yc([.33,1.53,.69,.99])};function fI(t,e){if(t)return typeof t=="function"?hI()?aI(t,e):"ease-out":XC(t)?Yc(t):Array.isArray(t)?t.map(n=>fI(n,e)||b_.easeOut):b_[t]}function XV(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:u="easeOut",times:d}={},p=void 0){const g={[e]:n};d&&(g.offset=d);const v=fI(u,s);Array.isArray(v)&&(g.easing=v);const w={delay:r,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return p&&(w.pseudoElement=p),t.animate(g,w)}function pI(t){return typeof t=="function"&&"applyToOptions"in t}function JV({type:t,...e}){return pI(t)&&hI()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class ZV extends Tv{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:u,onComplete:d}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,hv(typeof e.type!="string");const p=JV(e);this.animation=XV(n,r,s,p,o),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const g=Ev(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(g):GV(n,r,g),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return kr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+kr(e)}get time(){return kr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Os(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&KV()?(this.animation.timeline=e,jr):n(this)}}const mI={anticipate:GC,backInOut:HC,circInOut:YC};function eF(t){return t in mI}function tF(t){typeof t.ease=="string"&&eF(t.ease)&&(t.ease=mI[t.ease])}const __=10;class nF extends ZV{constructor(e){tF(e),cI(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:o,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const u=new Sv({...l,autoplay:!1}),d=Os(this.finishedTime??this.time);n.setWithVelocity(u.sample(d-__).value,u.sample(d).value,__),u.stop()}}const E_=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(yo.test(t)||t==="0")&&!t.startsWith("url("));function rF(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function sF(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=E_(s,e),u=E_(o,e);return!l||!u?!1:rF(t)||(n==="spring"||pI(n))&&r}function S0(t){t.duration=0,t.type="keyframes"}const iF=new Set(["opacity","clipPath","filter","transform"]),oF=fv(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function aF(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:o,type:l}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:p}=e.owner.getProps();return oF()&&n&&iF.has(n)&&(n!=="transform"||!p)&&!d&&!r&&s!=="mirror"&&o!==0&&l!=="inertia"}const lF=40;class cF extends Tv{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",keyframes:u,name:d,motionValue:p,element:g,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Jn.now();const w={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:l,name:d,motionValue:p,element:g,...v},T=g?.KeyframeResolver||Cv;this.keyframeResolver=new T(u,(A,N,C)=>this.onKeyframesResolved(A,N,w,!C),d,p,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:o,type:l,velocity:u,delay:d,isHandoff:p,onUpdate:g}=r;this.resolvedAt=Jn.now(),sF(e,o,l,u)||((vi.instantAnimations||!d)&&g?.(Ev(e,r,n)),e[0]=e[e.length-1],S0(r),r.repeat=0);const w={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>lF?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},T=!p&&aF(w)?new nF({...w,element:w.motionValue.owner.current}):new Sv(w);T.finished.then(()=>this.notifyFinished()).catch(jr),this.pendingTimeline&&(this.stopTimeline=T.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=T}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),qV()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const uF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function dF(t){const e=uF.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function gI(t,e,n=1){const[r,s]=dF(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return VC(l)?parseFloat(l):l}return vv(s)?gI(s,e,n+1):s}function Iv(t,e){return t?.[e]??t?.default??t}const yI=new Set(["width","height","top","left","right","bottom",...$l]),hF={test:t=>t==="auto",parse:t=>t},vI=t=>e=>e.test(t),wI=[zl,Re,Vs,Xi,rV,nV,hF],T_=t=>wI.find(vI(t));function fF(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||UC(t):!0}const pF=new Set(["brightness","contrast","saturate","opacity"]);function mF(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(wv)||[];if(!r)return t;const s=n.replace(r,"");let o=pF.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const gF=/\b([a-z-]*)\(.*?\)/gu,C0={...yo,getAnimatableNone:t=>{const e=t.match(gF);return e?e.map(mF).join(" "):t}},S_={...zl,transform:Math.round},yF={rotate:Xi,rotateX:Xi,rotateY:Xi,rotateZ:Xi,scale:bh,scaleX:bh,scaleY:bh,scaleZ:bh,skew:Xi,skewX:Xi,skewY:Xi,distance:Re,translateX:Re,translateY:Re,translateZ:Re,x:Re,y:Re,z:Re,perspective:Re,transformPerspective:Re,opacity:Su,originX:h_,originY:h_,originZ:Re},Rv={borderWidth:Re,borderTopWidth:Re,borderRightWidth:Re,borderBottomWidth:Re,borderLeftWidth:Re,borderRadius:Re,radius:Re,borderTopLeftRadius:Re,borderTopRightRadius:Re,borderBottomRightRadius:Re,borderBottomLeftRadius:Re,width:Re,maxWidth:Re,height:Re,maxHeight:Re,top:Re,right:Re,bottom:Re,left:Re,padding:Re,paddingTop:Re,paddingRight:Re,paddingBottom:Re,paddingLeft:Re,margin:Re,marginTop:Re,marginRight:Re,marginBottom:Re,marginLeft:Re,backgroundPositionX:Re,backgroundPositionY:Re,...yF,zIndex:S_,fillOpacity:Su,strokeOpacity:Su,numOctaves:S_},vF={...Rv,color:Mt,backgroundColor:Mt,outlineColor:Mt,fill:Mt,stroke:Mt,borderColor:Mt,borderTopColor:Mt,borderRightColor:Mt,borderBottomColor:Mt,borderLeftColor:Mt,filter:C0,WebkitFilter:C0},xI=t=>vF[t];function bI(t,e){let n=xI(t);return n!==C0&&(n=yo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const wF=new Set(["auto","none","0"]);function xF(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!wF.has(o)&&Cu(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=bI(n,s)}class bF extends Cv{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let p=e[d];if(typeof p=="string"&&(p=p.trim(),vv(p))){const g=gI(p,n.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!yI.has(r)||e.length!==2)return;const[s,o]=e,l=T_(s),u=T_(o);if(l!==u)if(x_(l)&&x_(u))for(let d=0;d<e.length;d++){const p=e[d];typeof p=="string"&&(e[d]=parseFloat(p))}else da[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||fF(e[s]))&&r.push(s);r.length&&xF(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=da[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=da[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,d])=>{e.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function _F(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=n?.[t]??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const _I=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function EI(t){return FC(t)&&"offsetHeight"in t}const C_=30,EF=t=>!isNaN(parseFloat(t));class TF{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const s=Jn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Jn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=EF(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new pv);const r=this.events[e].add(n);return e==="change"?()=>{r(),mt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Jn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>C_)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,C_);return BC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Al(t,e){return new TF(t,e)}const{schedule:Av}=JC(queueMicrotask,!1),Jr={x:!1,y:!1};function TI(){return Jr.x||Jr.y}function SF(t){return t==="x"||t==="y"?Jr[t]?null:(Jr[t]=!0,()=>{Jr[t]=!1}):Jr.x||Jr.y?null:(Jr.x=Jr.y=!0,()=>{Jr.x=Jr.y=!1})}function SI(t,e){const n=_F(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function I_(t){return!(t.pointerType==="touch"||TI())}function CF(t,e,n={}){const[r,s,o]=SI(t,n),l=u=>{if(!I_(u))return;const{target:d}=u,p=e(d,u);if(typeof p!="function"||!d)return;const g=v=>{I_(v)&&(p(v),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return r.forEach(u=>{u.addEventListener("pointerenter",l,s)}),o}const CI=(t,e)=>e?t===e?!0:CI(t,e.parentElement):!1,Nv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,IF=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function RF(t){return IF.has(t.tagName)||t.tabIndex!==-1}const Bh=new WeakSet;function R_(t){return e=>{e.key==="Enter"&&t(e)}}function gg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const AF=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=R_(()=>{if(Bh.has(n))return;gg(n,"down");const s=R_(()=>{gg(n,"up")}),o=()=>gg(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function A_(t){return Nv(t)&&!TI()}function NF(t,e,n={}){const[r,s,o]=SI(t,n),l=u=>{const d=u.currentTarget;if(!A_(u))return;Bh.add(d);const p=e(d,u),g=(T,A)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",w),Bh.has(d)&&Bh.delete(d),A_(T)&&typeof p=="function"&&p(T,{success:A})},v=T=>{g(T,d===window||d===document||n.useGlobalTarget||CI(d,T.target))},w=T=>{g(T,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",w,s)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",l,s),EI(u)&&(u.addEventListener("focus",p=>AF(p,s)),!RF(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}function II(t){return FC(t)&&"ownerSVGElement"in t}function kF(t){return II(t)&&t.tagName==="svg"}const Rn=t=>!!(t&&t.getVelocity),PF=[...wI,Mt,yo],jF=t=>PF.find(vI(t)),kv=x.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function N_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function DF(...t){return e=>{let n=!1;const r=t.map(s=>{const o=N_(s,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():N_(t[s],null)}}}}function MF(...t){return x.useCallback(DF(...t),t)}class LF extends x.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=EI(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function OF({children:t,isPresent:e,anchorX:n,root:r}){const s=x.useId(),o=x.useRef(null),l=x.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=x.useContext(kv),d=MF(o,t?.ref);return x.useInsertionEffect(()=>{const{width:p,height:g,top:v,left:w,right:T}=l.current;if(e||!o.current||!p||!g)return;const A=n==="left"?`left: ${w}`:`right: ${T}`;o.current.dataset.motionPopId=s;const N=document.createElement("style");u&&(N.nonce=u);const C=r??document.head;return C.appendChild(N),N.sheet&&N.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${g}px !important;
            ${A}px !important;
            top: ${v}px !important;
          }
        `),()=>{C.contains(N)&&C.removeChild(N)}},[e]),h.jsx(LF,{isPresent:e,childRef:o,sizeRef:l,children:x.cloneElement(t,{ref:d})})}const VF=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:l,anchorX:u,root:d})=>{const p=lv(FF),g=x.useId();let v=!0,w=x.useMemo(()=>(v=!1,{id:g,initial:e,isPresent:n,custom:s,onExitComplete:T=>{p.set(T,!0);for(const A of p.values())if(!A)return;r&&r()},register:T=>(p.set(T,!1),()=>p.delete(T))}),[n,p,r]);return o&&v&&(w={...w}),x.useMemo(()=>{p.forEach((T,A)=>p.set(A,!1))},[n]),x.useEffect(()=>{!n&&!p.size&&r&&r()},[n]),l==="popLayout"&&(t=h.jsx(OF,{isPresent:n,anchorX:u,root:d,children:t})),h.jsx(lp.Provider,{value:w,children:t})};function FF(){return new Map}function RI(t=!0){const e=x.useContext(lp);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,o=x.useId();x.useEffect(()=>{if(t)return s(o)},[t]);const l=x.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,l]:[!0]}const _h=t=>t.key||"";function k_(t){const e=[];return x.Children.forEach(t,n=>{x.isValidElement(n)&&e.push(n)}),e}const rs=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:u="left",root:d})=>{const[p,g]=RI(l),v=x.useMemo(()=>k_(t),[t]),w=l&&!p?[]:v.map(_h),T=x.useRef(!0),A=x.useRef(v),N=lv(()=>new Map),[C,D]=x.useState(v),[j,F]=x.useState(v);OC(()=>{T.current=!1,A.current=v;for(let B=0;B<j.length;B++){const I=_h(j[B]);w.includes(I)?N.delete(I):N.get(I)!==!0&&N.set(I,!1)}},[j,w.length,w.join("-")]);const W=[];if(v!==C){let B=[...v];for(let I=0;I<j.length;I++){const R=j[I],P=_h(R);w.includes(P)||(B.splice(I,0,R),W.push(R))}return o==="wait"&&W.length&&(B=W),F(k_(B)),D(v),null}const{forceRender:K}=x.useContext(av);return h.jsx(h.Fragment,{children:j.map(B=>{const I=_h(B),R=l&&!p?!1:v===j||w.includes(I),P=()=>{if(N.has(I))N.set(I,!0);else return;let M=!0;N.forEach(O=>{O||(M=!1)}),M&&(K?.(),F(A.current),l&&g?.(),r&&r())};return h.jsx(VF,{isPresent:R,initial:!T.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:d,onExitComplete:R?void 0:P,anchorX:u,children:B},I)})})},AI=x.createContext({strict:!1}),P_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Nl={};for(const t in P_)Nl[t]={isEnabled:e=>P_[t].some(n=>!!e[n])};function UF(t){for(const e in t)Nl[e]={...Nl[e],...t[e]}}const BF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function wf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||BF.has(t)}let NI=t=>!wf(t);function zF(t){typeof t=="function"&&(NI=e=>e.startsWith("on")?!wf(e):t(e))}try{zF(require("@emotion/is-prop-valid").default)}catch{}function $F(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(NI(s)||n===!0&&wf(s)||!e&&!wf(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const cp=x.createContext({});function up(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Iu(t){return typeof t=="string"||Array.isArray(t)}const Pv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],jv=["initial",...Pv];function dp(t){return up(t.animate)||jv.some(e=>Iu(t[e]))}function kI(t){return!!(dp(t)||t.variants)}function WF(t,e){if(dp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Iu(n)?n:void 0,animate:Iu(r)?r:void 0}}return t.inherit!==!1?e:{}}function qF(t){const{initial:e,animate:n}=WF(t,x.useContext(cp));return x.useMemo(()=>({initial:e,animate:n}),[j_(e),j_(n)])}function j_(t){return Array.isArray(t)?t.join(" "):t}const Ru={};function HF(t){for(const e in t)Ru[e]=t[e],yv(e)&&(Ru[e].isCSSVariable=!0)}function PI(t,{layout:e,layoutId:n}){return Wl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ru[t]||t==="opacity")}const GF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},KF=$l.length;function YF(t,e,n){let r="",s=!0;for(let o=0;o<KF;o++){const l=$l[o],u=t[l];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(l.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||n){const p=_I(u,Rv[l]);if(!d){s=!1;const g=GF[l]||l;r+=`${g}(${p}) `}n&&(e[l]=p)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Dv(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let l=!1,u=!1;for(const d in e){const p=e[d];if(Wl.has(d)){l=!0;continue}else if(yv(d)){s[d]=p;continue}else{const g=_I(p,Rv[d]);d.startsWith("origin")?(u=!0,o[d]=g):r[d]=g}}if(e.transform||(l||n?r.transform=YF(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:d="50%",originY:p="50%",originZ:g=0}=o;r.transformOrigin=`${d} ${p} ${g}`}}const Mv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function jI(t,e,n){for(const r in e)!Rn(e[r])&&!PI(r,n)&&(t[r]=e[r])}function QF({transformTemplate:t},e){return x.useMemo(()=>{const n=Mv();return Dv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function XF(t,e){const n=t.style||{},r={};return jI(r,n,t),Object.assign(r,QF(t,e)),r}function JF(t,e){const n={},r=XF(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const ZF={offset:"stroke-dashoffset",array:"stroke-dasharray"},e9={offset:"strokeDashoffset",array:"strokeDasharray"};function t9(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?ZF:e9;t[o.offset]=Re.transform(-r);const l=Re.transform(e),u=Re.transform(n);t[o.array]=`${l} ${u}`}function DI(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...u},d,p,g){if(Dv(t,u,p),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:w}=t;v.transform&&(w.transform=v.transform,delete v.transform),(w.transform||v.transformOrigin)&&(w.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),w.transform&&(w.transformBox=g?.transformBox??"fill-box",delete v.transformBox),e!==void 0&&(v.x=e),n!==void 0&&(v.y=n),r!==void 0&&(v.scale=r),s!==void 0&&t9(v,s,o,l,!1)}const MI=()=>({...Mv(),attrs:{}}),LI=t=>typeof t=="string"&&t.toLowerCase()==="svg";function n9(t,e,n,r){const s=x.useMemo(()=>{const o=MI();return DI(o,e,LI(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};jI(o,t.style,t),s.style={...o,...s.style}}return s}const r9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Lv(t){return typeof t!="string"||t.includes("-")?!1:!!(r9.indexOf(t)>-1||/[A-Z]/u.test(t))}function s9(t,e,n,{latestValues:r},s,o=!1){const u=(Lv(t)?n9:JF)(e,r,s,t),d=$F(e,typeof t=="string",o),p=t!==x.Fragment?{...d,...u,ref:n}:{},{children:g}=e,v=x.useMemo(()=>Rn(g)?g.get():g,[g]);return x.createElement(t,{...p,children:v})}function D_(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Ov(t,e,n,r){if(typeof e=="function"){const[s,o]=D_(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=D_(r);e=e(n!==void 0?n:t.custom,s,o)}return e}function zh(t){return Rn(t)?t.get():t}function i9({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:o9(n,r,s,t),renderState:e()}}function o9(t,e,n,r){const s={},o=r(t,{});for(const w in o)s[w]=zh(o[w]);let{initial:l,animate:u}=t;const d=dp(t),p=kI(t);e&&p&&!d&&t.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let g=n?n.initial===!1:!1;g=g||l===!1;const v=g?u:l;if(v&&typeof v!="boolean"&&!up(v)){const w=Array.isArray(v)?v:[v];for(let T=0;T<w.length;T++){const A=Ov(t,w[T]);if(A){const{transitionEnd:N,transition:C,...D}=A;for(const j in D){let F=D[j];if(Array.isArray(F)){const W=g?F.length-1:0;F=F[W]}F!==null&&(s[j]=F)}for(const j in N)s[j]=N[j]}}}return s}const OI=t=>(e,n)=>{const r=x.useContext(cp),s=x.useContext(lp),o=()=>i9(t,e,r,s);return n?o():lv(o)};function Vv(t,e,n){const{style:r}=t,s={};for(const o in r)(Rn(r[o])||e.style&&Rn(e.style[o])||PI(o,t)||n?.getValue(o)?.liveStyle!==void 0)&&(s[o]=r[o]);return s}const a9=OI({scrapeMotionValuesFromProps:Vv,createRenderState:Mv});function VI(t,e,n){const r=Vv(t,e,n);for(const s in t)if(Rn(t[s])||Rn(e[s])){const o=$l.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}const l9=OI({scrapeMotionValuesFromProps:VI,createRenderState:MI}),c9=Symbol.for("motionComponentSymbol");function dl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function u9(t,e,n){return x.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):dl(n)&&(n.current=r))},[e])}const Fv=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),d9="framerAppearId",FI="data-"+Fv(d9),UI=x.createContext({});function h9(t,e,n,r,s){const{visualElement:o}=x.useContext(cp),l=x.useContext(AI),u=x.useContext(lp),d=x.useContext(kv).reducedMotion,p=x.useRef(null);r=r||l.renderer,!p.current&&r&&(p.current=r(t,{visualState:e,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const g=p.current,v=x.useContext(UI);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&f9(p.current,n,s,v);const w=x.useRef(!1);x.useInsertionEffect(()=>{g&&w.current&&g.update(n,u)});const T=n[FI],A=x.useRef(!!T&&!window.MotionHandoffIsComplete?.(T)&&window.MotionHasOptimisedAnimation?.(T));return OC(()=>{g&&(w.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),A.current&&g.animationState&&g.animationState.animateChanges())}),x.useEffect(()=>{g&&(!A.current&&g.animationState&&g.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(T)}),A.current=!1),g.enteringChildren=void 0)}),g}function f9(t,e,n,r){const{layoutId:s,layout:o,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:p,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:BI(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||u&&dl(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:d,layoutRoot:p})}function BI(t){if(t)return t.options.allowProjection!==!1?t.projection:BI(t.parent)}function yg(t,{forwardMotionProps:e=!1}={},n,r){n&&UF(n);const s=Lv(t)?l9:a9;function o(u,d){let p;const g={...x.useContext(kv),...u,layoutId:p9(u)},{isStatic:v}=g,w=qF(u),T=s(u,v);if(!v&&cv){m9();const A=g9(g);p=A.MeasureLayout,w.visualElement=h9(t,T,g,r,A.ProjectionNode)}return h.jsxs(cp.Provider,{value:w,children:[p&&w.visualElement?h.jsx(p,{visualElement:w.visualElement,...g}):null,s9(t,u,u9(T,w.visualElement,d),T,v,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=x.forwardRef(o);return l[c9]=t,l}function p9({layoutId:t}){const e=x.useContext(av).id;return e&&t!==void 0?e+"-"+t:t}function m9(t,e){x.useContext(AI).strict}function g9(t){const{drag:e,layout:n}=Nl;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function y9(t,e){if(typeof Proxy>"u")return yg;const n=new Map,r=(o,l)=>yg(o,l,t,e),s=(o,l)=>r(o,l);return new Proxy(s,{get:(o,l)=>l==="create"?r:(n.has(l)||n.set(l,yg(l,void 0,t,e)),n.get(l))})}function zI({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function v9({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function w9(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function vg(t){return t===void 0||t===1}function I0({scale:t,scaleX:e,scaleY:n}){return!vg(t)||!vg(e)||!vg(n)}function ta(t){return I0(t)||$I(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function $I(t){return M_(t.x)||M_(t.y)}function M_(t){return t&&t!=="0%"}function xf(t,e,n){const r=t-n,s=e*r;return n+s}function L_(t,e,n,r,s){return s!==void 0&&(t=xf(t,s,r)),xf(t,n,r)+e}function R0(t,e=0,n=1,r,s){t.min=L_(t.min,e,n,r,s),t.max=L_(t.max,e,n,r,s)}function WI(t,{x:e,y:n}){R0(t.x,e.translate,e.scale,e.originPoint),R0(t.y,n.translate,n.scale,n.originPoint)}const O_=.999999999999,V_=1.0000000000001;function x9(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,l;for(let u=0;u<s;u++){o=n[u],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&fl(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,WI(t,l)),r&&ta(o.latestValues)&&fl(t,o.latestValues))}e.x<V_&&e.x>O_&&(e.x=1),e.y<V_&&e.y>O_&&(e.y=1)}function hl(t,e){t.min=t.min+e,t.max=t.max+e}function F_(t,e,n,r,s=.5){const o=wt(t.min,t.max,s);R0(t,e,n,o,r)}function fl(t,e){F_(t.x,e.x,e.scaleX,e.scale,e.originX),F_(t.y,e.y,e.scaleY,e.scale,e.originY)}function qI(t,e){return zI(w9(t.getBoundingClientRect(),e))}function b9(t,e,n){const r=qI(t,n),{scroll:s}=e;return s&&(hl(r.x,s.offset.x),hl(r.y,s.offset.y)),r}const U_=()=>({translate:0,scale:1,origin:0,originPoint:0}),pl=()=>({x:U_(),y:U_()}),B_=()=>({min:0,max:0}),Nt=()=>({x:B_(),y:B_()}),A0={current:null},HI={current:!1};function _9(){if(HI.current=!0,!!cv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>A0.current=t.matches;t.addEventListener("change",e),e()}else A0.current=!1}const E9=new WeakMap;function T9(t,e,n){for(const r in e){const s=e[r],o=n[r];if(Rn(s))t.addValue(r,s);else if(Rn(o))t.addValue(r,Al(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=t.getStaticValue(r);t.addValue(r,Al(l!==void 0?l:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const z_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class S9{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Cv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=Jn.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,mt.render(this.render,!1,!0))};const{latestValues:d,renderState:p}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=dp(n),this.isVariantNode=kI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(n,{},this);for(const w in v){const T=v[w];d[w]!==void 0&&Rn(T)&&T.set(d[w])}}mount(e){this.current=e,E9.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),HI.current||_9(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:A0.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),go(this.notifyUpdate),go(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Wl.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&mt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Nl){const n=Nl[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<z_.length;r++){const s=z_[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=T9(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Al(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(VC(r)||UC(r))?r=parseFloat(r):!jF(r)&&yo.test(n)&&(r=bI(e,n)),this.setBaseTarget(e,Rn(r)?r.get():r)),Rn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Ov(this.props,n,this.presenceContext?.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Rn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new pv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Av.render(this.render)}}class GI extends S9{constructor(){super(...arguments),this.KeyframeResolver=bF}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Rn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function KI(t,{style:e,vars:n},r,s){const o=t.style;let l;for(l in e)o[l]=e[l];s?.applyProjectionStyles(o,r);for(l in n)o.setProperty(l,n[l])}function C9(t){return window.getComputedStyle(t)}class I9 extends GI{constructor(){super(...arguments),this.type="html",this.renderInstance=KI}readValueFromInstance(e,n){if(Wl.has(n))return this.projection?.isProjecting?x0(n):UV(e,n);{const r=C9(e),s=(yv(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return qI(e,n)}build(e,n,r){Dv(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Vv(e,n,r)}}const YI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function R9(t,e,n,r){KI(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(YI.has(s)?s:Fv(s),e.attrs[s])}class A9 extends GI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Nt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Wl.has(n)){const r=xI(n);return r&&r.default||0}return n=YI.has(n)?n:Fv(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return VI(e,n,r)}build(e,n,r){DI(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){R9(e,n,r,s)}mount(e){this.isSVGTag=LI(e.tagName),super.mount(e)}}const N9=(t,e)=>Lv(t)?new A9(e):new I9(e,{allowProjection:t!==x.Fragment});function xl(t,e,n){const r=t.getProps();return Ov(r,e,n!==void 0?n:r.custom,t)}const N0=t=>Array.isArray(t);function k9(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Al(n))}function P9(t){return N0(t)?t[t.length-1]||0:t}function j9(t,e){const n=xl(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const l in o){const u=P9(o[l]);k9(t,l,u)}}function D9(t){return!!(Rn(t)&&t.add)}function k0(t,e){const n=t.getValue("willChange");if(D9(n))return n.add(e);if(!n&&vi.WillChange){const r=new vi.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function QI(t){return t.props[FI]}const M9=t=>t!==null;function L9(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(M9),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[o]}const O9={type:"spring",stiffness:500,damping:25,restSpeed:10},V9=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),F9={type:"keyframes",duration:.8},U9={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},B9=(t,{keyframes:e})=>e.length>2?F9:Wl.has(t)?t.startsWith("scale")?V9(e[1]):O9:U9;function z9({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:u,from:d,elapsed:p,...g}){return!!Object.keys(g).length}const Uv=(t,e,n,r={},s,o)=>l=>{const u=Iv(r,t)||{},d=u.delay||r.delay||0;let{elapsed:p=0}=r;p=p-Os(d);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-p,onUpdate:w=>{e.set(w),u.onUpdate&&u.onUpdate(w)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:o?void 0:s};z9(u)||Object.assign(g,B9(t,g)),g.duration&&(g.duration=Os(g.duration)),g.repeatDelay&&(g.repeatDelay=Os(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(S0(g),g.delay===0&&(v=!0)),(vi.instantAnimations||vi.skipAnimations)&&(v=!0,S0(g),g.delay=0),g.allowFlatten=!u.type&&!u.ease,v&&!o&&e.get()!==void 0){const w=L9(g.keyframes,u);if(w!==void 0){mt.update(()=>{g.onUpdate(w),g.onComplete()});return}}return u.isSync?new Sv(g):new cF(g)};function $9({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function XI(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:l,...u}=e;r&&(o=r);const d=[],p=s&&t.animationState&&t.animationState.getState()[s];for(const g in u){const v=t.getValue(g,t.latestValues[g]??null),w=u[g];if(w===void 0||p&&$9(p,g))continue;const T={delay:n,...Iv(o||{},g)},A=v.get();if(A!==void 0&&!v.isAnimating&&!Array.isArray(w)&&w===A&&!T.velocity)continue;let N=!1;if(window.MotionHandoffAnimation){const D=QI(t);if(D){const j=window.MotionHandoffAnimation(D,g,mt);j!==null&&(T.startTime=j,N=!0)}}k0(t,g),v.start(Uv(g,v,w,t.shouldReduceMotion&&yI.has(g)?{type:!1}:T,t,N));const C=v.animation;C&&d.push(C)}return l&&Promise.all(d).then(()=>{mt.update(()=>{l&&j9(t,l)})}),d}function JI(t,e,n,r=0,s=1){const o=Array.from(t).sort((p,g)=>p.sortNodePosition(g)).indexOf(e),l=t.size,u=(l-1)*r;return typeof n=="function"?n(o,l):s===1?o*r:u-o*r}function P0(t,e,n={}){const r=xl(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(XI(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:v}=s;return W9(t,e,d,p,g,v,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[d,p]=u==="beforeChildren"?[o,l]:[l,o];return d().then(()=>p())}else return Promise.all([o(),l(n.delay)])}function W9(t,e,n=0,r=0,s=0,o=1,l){const u=[];for(const d of t.variantChildren)d.notify("AnimationStart",e),u.push(P0(d,e,{...l,delay:n+(typeof r=="function"?0:r)+JI(t.variantChildren,d,r,s,o)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(u)}function q9(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>P0(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=P0(t,e,n);else{const s=typeof e=="function"?xl(t,e,n.custom):e;r=Promise.all(XI(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function ZI(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const H9=jv.length;function eR(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?eR(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<H9;n++){const r=jv[n],s=t.props[r];(Iu(s)||s===!1)&&(e[r]=s)}return e}const G9=[...Pv].reverse(),K9=Pv.length;function Y9(t){return e=>Promise.all(e.map(({animation:n,options:r})=>q9(t,n,r)))}function Q9(t){let e=Y9(t),n=$_(),r=!0;const s=d=>(p,g)=>{const v=xl(t,g,d==="exit"?t.presenceContext?.custom:void 0);if(v){const{transition:w,transitionEnd:T,...A}=v;p={...p,...A,...T}}return p};function o(d){e=d(t)}function l(d){const{props:p}=t,g=eR(t.parent)||{},v=[],w=new Set;let T={},A=1/0;for(let C=0;C<K9;C++){const D=G9[C],j=n[D],F=p[D]!==void 0?p[D]:g[D],W=Iu(F),K=D===d?j.isActive:null;K===!1&&(A=C);let B=F===g[D]&&F!==p[D]&&W;if(B&&r&&t.manuallyAnimateOnMount&&(B=!1),j.protectedKeys={...T},!j.isActive&&K===null||!F&&!j.prevProp||up(F)||typeof F=="boolean")continue;const I=X9(j.prevProp,F);let R=I||D===d&&j.isActive&&!B&&W||C>A&&W,P=!1;const M=Array.isArray(F)?F:[F];let O=M.reduce(s(D),{});K===!1&&(O={});const{prevResolvedValues:q={}}=j,L={...q,...O},ke=ge=>{R=!0,w.has(ge)&&(P=!0,w.delete(ge)),j.needsAnimating[ge]=!0;const se=t.getValue(ge);se&&(se.liveStyle=!1)};for(const ge in L){const se=O[ge],le=q[ge];if(T.hasOwnProperty(ge))continue;let Z=!1;N0(se)&&N0(le)?Z=!ZI(se,le):Z=se!==le,Z?se!=null?ke(ge):w.add(ge):se!==void 0&&w.has(ge)?ke(ge):j.protectedKeys[ge]=!0}j.prevProp=F,j.prevResolvedValues=O,j.isActive&&(T={...T,...O}),r&&t.blockInitialAnimation&&(R=!1);const Xe=B&&I;R&&(!Xe||P)&&v.push(...M.map(ge=>{const se={type:D};if(typeof ge=="string"&&r&&!Xe&&t.manuallyAnimateOnMount&&t.parent){const{parent:le}=t,Z=xl(le,ge);if(le.enteringChildren&&Z){const{delayChildren:U}=Z.transition||{};se.delay=JI(le.enteringChildren,t,U)}}return{animation:ge,options:se}}))}if(w.size){const C={};if(typeof p.initial!="boolean"){const D=xl(t,Array.isArray(p.initial)?p.initial[0]:p.initial);D&&D.transition&&(C.transition=D.transition)}w.forEach(D=>{const j=t.getBaseTarget(D),F=t.getValue(D);F&&(F.liveStyle=!0),C[D]=j??null}),v.push({animation:C})}let N=!!v.length;return r&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(N=!1),r=!1,N?e(v):Promise.resolve()}function u(d,p){if(n[d].isActive===p)return Promise.resolve();t.variantChildren?.forEach(v=>v.animationState?.setActive(d,p)),n[d].isActive=p;const g=l(d);for(const v in n)n[v].protectedKeys={};return g}return{animateChanges:l,setActive:u,setAnimateFunction:o,getState:()=>n,reset:()=>{n=$_()}}}function X9(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!ZI(e,t):!1}function Zo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function $_(){return{animate:Zo(!0),whileInView:Zo(),whileHover:Zo(),whileTap:Zo(),whileDrag:Zo(),whileFocus:Zo(),exit:Zo()}}class So{constructor(e){this.isMounted=!1,this.node=e}update(){}}class J9 extends So{constructor(e){super(e),e.animationState||(e.animationState=Q9(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();up(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Z9=0;class e7 extends So{constructor(){super(...arguments),this.id=Z9++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const t7={animation:{Feature:J9},exit:{Feature:e7}};function Au(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Xu(t){return{point:{x:t.pageX,y:t.pageY}}}const n7=t=>e=>Nv(e)&&t(e,Xu(e));function iu(t,e,n,r){return Au(t,e,n7(n),r)}const tR=1e-4,r7=1-tR,s7=1+tR,nR=.01,i7=0-nR,o7=0+nR;function Vn(t){return t.max-t.min}function a7(t,e,n){return Math.abs(t-e)<=n}function W_(t,e,n,r=.5){t.origin=r,t.originPoint=wt(e.min,e.max,t.origin),t.scale=Vn(n)/Vn(e),t.translate=wt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=r7&&t.scale<=s7||isNaN(t.scale))&&(t.scale=1),(t.translate>=i7&&t.translate<=o7||isNaN(t.translate))&&(t.translate=0)}function ou(t,e,n,r){W_(t.x,e.x,n.x,r?r.originX:void 0),W_(t.y,e.y,n.y,r?r.originY:void 0)}function q_(t,e,n){t.min=n.min+e.min,t.max=t.min+Vn(e)}function l7(t,e,n){q_(t.x,e.x,n.x),q_(t.y,e.y,n.y)}function H_(t,e,n){t.min=e.min-n.min,t.max=t.min+Vn(e)}function au(t,e,n){H_(t.x,e.x,n.x),H_(t.y,e.y,n.y)}function Ir(t){return[t("x"),t("y")]}const rR=({current:t})=>t?t.ownerDocument.defaultView:null,G_=(t,e)=>Math.abs(t-e);function c7(t,e){const n=G_(t.x,e.x),r=G_(t.y,e.y);return Math.sqrt(n**2+r**2)}class sR{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=xg(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,A=c7(w.offset,{x:0,y:0})>=this.distanceThreshold;if(!T&&!A)return;const{point:N}=w,{timestamp:C}=un;this.history.push({...N,timestamp:C});const{onStart:D,onMove:j}=this.handlers;T||(D&&D(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,w)},this.handlePointerMove=(w,T)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=wg(T,this.transformPagePoint),mt.update(this.updatePoint,!0)},this.handlePointerUp=(w,T)=>{this.end();const{onEnd:A,onSessionEnd:N,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=xg(w.type==="pointercancel"?this.lastMoveEventInfo:wg(T,this.transformPagePoint),this.history);this.startEvent&&A&&A(w,D),N&&N(w,D)},!Nv(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=s||window;const u=Xu(e),d=wg(u,this.transformPagePoint),{point:p}=d,{timestamp:g}=un;this.history=[{...p,timestamp:g}];const{onSessionStart:v}=n;v&&v(e,xg(d,this.history)),this.removeListeners=Ku(iu(this.contextWindow,"pointermove",this.handlePointerMove),iu(this.contextWindow,"pointerup",this.handlePointerUp),iu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),go(this.updatePoint)}}function wg(t,e){return e?{point:e(t.point)}:t}function K_(t,e){return{x:t.x-e.x,y:t.y-e.y}}function xg({point:t},e){return{point:t,delta:K_(t,iR(e)),offset:K_(t,u7(e)),velocity:d7(e,.1)}}function u7(t){return t[0]}function iR(t){return t[t.length-1]}function d7(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=iR(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Os(e)));)n--;if(!r)return{x:0,y:0};const o=kr(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function h7(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?wt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?wt(n,t,r.max):Math.min(t,n)),t}function Y_(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function f7(t,{top:e,left:n,bottom:r,right:s}){return{x:Y_(t.x,n,s),y:Y_(t.y,e,r)}}function Q_(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function p7(t,e){return{x:Q_(t.x,e.x),y:Q_(t.y,e.y)}}function m7(t,e){let n=.5;const r=Vn(t),s=Vn(e);return s>r?n=Tu(e.min,e.max-r,t.min):r>s&&(n=Tu(t.min,t.max-s,e.min)),yi(0,1,n)}function g7(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const j0=.35;function y7(t=j0){return t===!1?t=0:t===!0&&(t=j0),{x:X_(t,"left","right"),y:X_(t,"top","bottom")}}function X_(t,e,n){return{min:J_(t,e),max:J_(t,n)}}function J_(t,e){return typeof t=="number"?t:t[e]||0}const v7=new WeakMap;class w7{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Nt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=v=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Xu(v).point)},l=(v,w)=>{const{drag:T,dragPropagation:A,onDragStart:N}=this.getProps();if(T&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=SF(T),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ir(D=>{let j=this.getAxisMotionValue(D).get()||0;if(Vs.test(j)){const{projection:F}=this.visualElement;if(F&&F.layout){const W=F.layout.layoutBox[D];W&&(j=Vn(W)*(parseFloat(j)/100))}}this.originPoint[D]=j}),N&&mt.postRender(()=>N(v,w)),k0(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},u=(v,w)=>{this.latestPointerEvent=v,this.latestPanInfo=w;const{dragPropagation:T,dragDirectionLock:A,onDirectionLock:N,onDrag:C}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:D}=w;if(A&&this.currentDirection===null){this.currentDirection=x7(D),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",w.point,D),this.updateAxis("y",w.point,D),this.visualElement.render(),C&&C(v,w)},d=(v,w)=>{this.latestPointerEvent=v,this.latestPanInfo=w,this.stop(v,w),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>Ir(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new sR(e,{onSessionStart:o,onStart:l,onMove:u,onSessionEnd:d,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:rR(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!r)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&mt.postRender(()=>u(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Eh(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=h7(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&dl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=f7(r.layoutBox,e):this.constraints=!1,this.elastic=y7(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ir(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=g7(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!dl(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=b9(r,s.root,this.visualElement.getTransformPagePoint());let l=p7(s.layout.layoutBox,o);if(n){const u=n(v9(l));this.hasMutatedConstraints=!!u,u&&(l=zI(u))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},p=Ir(g=>{if(!Eh(g,n,this.currentDirection))return;let v=d&&d[g]||{};l&&(v={min:0,max:0});const w=s?200:1e6,T=s?40:1e7,A={type:"inertia",velocity:r?e[g]:0,bounceStiffness:w,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(g,A)});return Promise.all(p).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return k0(this.visualElement,e),r.start(Uv(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ir(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ir(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ir(n=>{const{drag:r}=this.getProps();if(!Eh(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[n];o.set(e[n]-wt(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!dl(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ir(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();s[l]=m7({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ir(l=>{if(!Eh(l,e,null))return;const u=this.getAxisMotionValue(l),{min:d,max:p}=this.constraints[l];u.set(wt(d,p,s[l]))})}addListeners(){if(!this.visualElement.current)return;v7.set(this.visualElement,this);const e=this.visualElement.current,n=iu(e,"pointerdown",d=>{const{drag:p,dragListener:g=!0}=this.getProps();p&&g&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();dl(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),mt.read(r);const l=Au(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:p})=>{this.isDragging&&p&&(Ir(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=d[g].translate,v.set(v.get()+d[g].translate))}),this.visualElement.render())}));return()=>{l(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=j0,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function Eh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function x7(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class b7 extends So{constructor(e){super(e),this.removeGroupControls=jr,this.removeListeners=jr,this.controls=new w7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||jr}unmount(){this.removeGroupControls(),this.removeListeners()}}const Z_=t=>(e,n)=>{t&&mt.postRender(()=>t(e,n))};class _7 extends So{constructor(){super(...arguments),this.removePointerDownListener=jr}onPointerDown(e){this.session=new sR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:rR(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Z_(e),onStart:Z_(n),onMove:r,onEnd:(o,l)=>{delete this.session,s&&mt.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=iu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const $h={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function eE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Vc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Re.test(t))t=parseFloat(t);else return t;const n=eE(t,e.target.x),r=eE(t,e.target.y);return`${n}% ${r}%`}},E7={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=yo.parse(t);if(s.length>5)return r;const o=yo.createTransformer(t),l=typeof s[0]!="number"?1:0,u=n.x.scale*e.x,d=n.y.scale*e.y;s[0+l]/=u,s[1+l]/=d;const p=wt(u,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=p),typeof s[3+l]=="number"&&(s[3+l]/=p),o(s)}};let bg=!1;class T7 extends x.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;HF(S7),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),bg&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),$h.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,{projection:l}=r;return l&&(l.isPresent=o,bg=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||mt.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Av.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;bg=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function oR(t){const[e,n]=RI(),r=x.useContext(av);return h.jsx(T7,{...t,layoutGroup:r,switchLayoutGroup:x.useContext(UI),isPresent:e,safeToRemove:n})}const S7={borderRadius:{...Vc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vc,borderTopRightRadius:Vc,borderBottomLeftRadius:Vc,borderBottomRightRadius:Vc,boxShadow:E7};function C7(t,e,n){const r=Rn(t)?t:Al(t);return r.start(Uv("",r,e,n)),r.animation}const I7=(t,e)=>t.depth-e.depth;class R7{constructor(){this.children=[],this.isDirty=!1}add(e){uv(this.children,e),this.isDirty=!0}remove(e){dv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(I7),this.isDirty=!1,this.children.forEach(e)}}function A7(t,e){const n=Jn.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(go(r),t(o-e))};return mt.setup(r,!0),()=>go(r)}const aR=["TopLeft","TopRight","BottomLeft","BottomRight"],N7=aR.length,tE=t=>typeof t=="string"?parseFloat(t):t,nE=t=>typeof t=="number"||Re.test(t);function k7(t,e,n,r,s,o){s?(t.opacity=wt(0,n.opacity??1,P7(r)),t.opacityExit=wt(e.opacity??1,0,j7(r))):o&&(t.opacity=wt(e.opacity??1,n.opacity??1,r));for(let l=0;l<N7;l++){const u=`border${aR[l]}Radius`;let d=rE(e,u),p=rE(n,u);if(d===void 0&&p===void 0)continue;d||(d=0),p||(p=0),d===0||p===0||nE(d)===nE(p)?(t[u]=Math.max(wt(tE(d),tE(p),r),0),(Vs.test(p)||Vs.test(d))&&(t[u]+="%")):t[u]=p}(e.rotate||n.rotate)&&(t.rotate=wt(e.rotate||0,n.rotate||0,r))}function rE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const P7=lR(0,.5,KC),j7=lR(.5,.95,jr);function lR(t,e,n){return r=>r<t?0:r>e?1:n(Tu(t,e,r))}function sE(t,e){t.min=e.min,t.max=e.max}function Cr(t,e){sE(t.x,e.x),sE(t.y,e.y)}function iE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function oE(t,e,n,r,s){return t-=e,t=xf(t,1/n,r),s!==void 0&&(t=xf(t,1/s,r)),t}function D7(t,e=0,n=1,r=.5,s,o=t,l=t){if(Vs.test(e)&&(e=parseFloat(e),e=wt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=wt(o.min,o.max,r);t===o&&(u-=e),t.min=oE(t.min,e,n,u,s),t.max=oE(t.max,e,n,u,s)}function aE(t,e,[n,r,s],o,l){D7(t,e[n],e[r],e[s],e.scale,o,l)}const M7=["x","scaleX","originX"],L7=["y","scaleY","originY"];function lE(t,e,n,r){aE(t.x,e,M7,n?n.x:void 0,r?r.x:void 0),aE(t.y,e,L7,n?n.y:void 0,r?r.y:void 0)}function cE(t){return t.translate===0&&t.scale===1}function cR(t){return cE(t.x)&&cE(t.y)}function uE(t,e){return t.min===e.min&&t.max===e.max}function O7(t,e){return uE(t.x,e.x)&&uE(t.y,e.y)}function dE(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function uR(t,e){return dE(t.x,e.x)&&dE(t.y,e.y)}function hE(t){return Vn(t.x)/Vn(t.y)}function fE(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class V7{constructor(){this.members=[]}add(e){uv(this.members,e),e.scheduleRender()}remove(e){if(dv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function F7(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,l=n?.z||0;if((s||o||l)&&(r=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:p,rotate:g,rotateX:v,rotateY:w,skewX:T,skewY:A}=n;p&&(r=`perspective(${p}px) ${r}`),g&&(r+=`rotate(${g}deg) `),v&&(r+=`rotateX(${v}deg) `),w&&(r+=`rotateY(${w}deg) `),T&&(r+=`skewX(${T}deg) `),A&&(r+=`skewY(${A}deg) `)}const u=t.x.scale*e.x,d=t.y.scale*e.y;return(u!==1||d!==1)&&(r+=`scale(${u}, ${d})`),r||"none"}const _g=["","X","Y","Z"],U7=1e3;let B7=0;function Eg(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function dR(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=QI(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",mt,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&dR(r)}function hR({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},u=e?.()){this.id=B7++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(W7),this.nodes.forEach(K7),this.nodes.forEach(Y7),this.nodes.forEach(q7)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new R7)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new pv),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=II(l)&&!kF(l),this.instance=l;const{layoutId:u,layout:d,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),t){let g,v=0;const w=()=>this.root.updateBlockedByResize=!1;mt.read(()=>{v=window.innerWidth}),t(l,()=>{const T=window.innerWidth;T!==v&&(v=T,this.root.updateBlockedByResize=!0,g&&g(),g=A7(w,250),$h.hasAnimatedSinceResize&&($h.hasAnimatedSinceResize=!1,this.nodes.forEach(gE)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&p&&(u||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeLayoutChanged:w,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||p.getDefaultTransition()||e8,{onLayoutAnimationStart:N,onLayoutAnimationComplete:C}=p.getProps(),D=!this.targetLayout||!uR(this.targetLayout,T),j=!v&&w;if(this.options.layoutRoot||this.resumeFrom||j||v&&(D||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const F={...Iv(A,"layout"),onPlay:N,onComplete:C};(p.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F),this.setAnimationOrigin(g,j)}else v||gE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),go(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Q7),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&dR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(pE);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(mE);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(G7),this.nodes.forEach(z7),this.nodes.forEach($7)):this.nodes.forEach(mE),this.clearAllSnapshots();const u=Jn.now();un.delta=yi(0,1e3/60,u-un.timestamp),un.timestamp=u,un.isProcessing=!0,dg.update.process(un),dg.preRender.process(un),dg.render.process(un),un.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Av.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(H7),this.sharedNodes.forEach(X7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,mt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){mt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Vn(this.snapshot.measuredBox.x)&&!Vn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Nt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!cR(this.projectionDelta),d=this.getTransformTemplate(),p=d?d(this.latestValues,""):void 0,g=p!==this.prevTransformTemplateValue;l&&this.instance&&(u||ta(this.latestValues)||g)&&(s(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),t8(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Nt();const u=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(n8))){const{scroll:p}=this.root;p&&(hl(u.x,p.offset.x),hl(u.y,p.offset.y))}return u}removeElementScroll(l){const u=Nt();if(Cr(u,l),this.scroll?.wasRoot)return u;for(let d=0;d<this.path.length;d++){const p=this.path[d],{scroll:g,options:v}=p;p!==this.root&&g&&v.layoutScroll&&(g.wasRoot&&Cr(u,l),hl(u.x,g.offset.x),hl(u.y,g.offset.y))}return u}applyTransform(l,u=!1){const d=Nt();Cr(d,l);for(let p=0;p<this.path.length;p++){const g=this.path[p];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&fl(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),ta(g.latestValues)&&fl(d,g.latestValues)}return ta(this.latestValues)&&fl(d,this.latestValues),d}removeTransform(l){const u=Nt();Cr(u,l);for(let d=0;d<this.path.length;d++){const p=this.path[d];if(!p.instance||!ta(p.latestValues))continue;I0(p.latestValues)&&p.updateSnapshot();const g=Nt(),v=p.measurePageBox();Cr(g,v),lE(u,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,g)}return ta(this.latestValues)&&lE(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==un.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=un.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nt(),this.relativeTargetOrigin=Nt(),au(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),Cr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Nt(),this.targetWithTransforms=Nt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),l7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Cr(this.target,this.layout.layoutBox),WI(this.target,this.targetDelta)):Cr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nt(),this.relativeTargetOrigin=Nt(),au(this.relativeTargetOrigin,this.target,w.target),Cr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||I0(this.parent.latestValues)||$I(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===un.timestamp&&(d=!1),d)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;Cr(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,w=this.treeScale.y;x9(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Nt());const{target:T}=l;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(iE(this.prevProjectionDelta.x,this.projectionDelta.x),iE(this.prevProjectionDelta.y,this.projectionDelta.y)),ou(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==w||!fE(this.projectionDelta.x,this.prevProjectionDelta.x)||!fE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=pl(),this.projectionDelta=pl(),this.projectionDeltaWithTransform=pl()}setAnimationOrigin(l,u=!1){const d=this.snapshot,p=d?d.latestValues:{},g={...this.latestValues},v=pl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const w=Nt(),T=d?d.source:void 0,A=this.layout?this.layout.source:void 0,N=T!==A,C=this.getStack(),D=!C||C.members.length<=1,j=!!(N&&!D&&this.options.crossfade===!0&&!this.path.some(Z7));this.animationProgress=0;let F;this.mixTargetDelta=W=>{const K=W/1e3;yE(v.x,l.x,K),yE(v.y,l.y,K),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(au(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),J7(this.relativeTarget,this.relativeTargetOrigin,w,K),F&&O7(this.relativeTarget,F)&&(this.isProjectionDirty=!1),F||(F=Nt()),Cr(F,this.relativeTarget)),N&&(this.animationValues=g,k7(g,p,this.latestValues,K,j,D)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(go(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=mt.update(()=>{$h.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Al(0)),this.currentAnimation=C7(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(U7),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:p,latestValues:g}=l;if(!(!u||!d||!p)){if(this!==l&&this.layout&&p&&fR(this.options.animationType,this.layout.layoutBox,p.layoutBox)){d=this.target||Nt();const v=Vn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const w=Vn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+w}Cr(u,d),fl(u,g),ou(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new V7),this.sharedNodes.get(l).add(u);const p=u.options.initialPromotionConfig;u.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const p=this.getStack();p&&p.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const p={};d.z&&Eg("z",l,p,this.animationValues);for(let g=0;g<_g.length;g++)Eg(`rotate${_g[g]}`,l,p,this.animationValues),Eg(`skew${_g[g]}`,l,p,this.animationValues);l.render();for(const g in p)l.setStaticValue(g,p[g]),this.animationValues&&(this.animationValues[g]=p[g]);l.scheduleRender()}applyProjectionStyles(l,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=zh(u?.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=zh(u?.pointerEvents)||""),this.hasProjected&&!ta(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=p.animationValues||p.latestValues;this.applyTransformsToTarget();let v=F7(this.projectionDeltaWithTransform,this.treeScale,g);d&&(v=d(g,v)),l.transform=v;const{x:w,y:T}=this.projectionDelta;l.transformOrigin=`${w.origin*100}% ${T.origin*100}% 0`,p.animationValues?l.opacity=p===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=p===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const A in Ru){if(g[A]===void 0)continue;const{correct:N,applyTo:C,isCSSVariable:D}=Ru[A],j=v==="none"?g[A]:N(g[A],p);if(C){const F=C.length;for(let W=0;W<F;W++)l[C[W]]=j}else D?this.options.visualElement.renderState.vars[A]=j:l[A]=j}this.options.layoutId&&(l.pointerEvents=p===this?zh(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(pE),this.root.sharedNodes.clear()}}}function z7(t){t.updateLayout()}function $7(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?Ir(g=>{const v=o?e.measuredBox[g]:e.layoutBox[g],w=Vn(v);v.min=n[g].min,v.max=v.min+w}):fR(s,e.layoutBox,n)&&Ir(g=>{const v=o?e.measuredBox[g]:e.layoutBox[g],w=Vn(n[g]);v.max=v.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+w)});const l=pl();ou(l,n,e.layoutBox);const u=pl();o?ou(u,t.applyTransform(r,!0),e.measuredBox):ou(u,n,e.layoutBox);const d=!cR(l);let p=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:w}=g;if(v&&w){const T=Nt();au(T,e.layoutBox,v.layoutBox);const A=Nt();au(A,n,w.layoutBox),uR(T,A)||(p=!0),g.options.layoutRoot&&(t.relativeTarget=A,t.relativeTargetOrigin=T,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function W7(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function q7(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function H7(t){t.clearSnapshot()}function pE(t){t.clearMeasurements()}function mE(t){t.isLayoutDirty=!1}function G7(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function gE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function K7(t){t.resolveTargetDelta()}function Y7(t){t.calcProjection()}function Q7(t){t.resetSkewAndRotation()}function X7(t){t.removeLeadSnapshot()}function yE(t,e,n){t.translate=wt(e.translate,0,n),t.scale=wt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function vE(t,e,n,r){t.min=wt(e.min,n.min,r),t.max=wt(e.max,n.max,r)}function J7(t,e,n,r){vE(t.x,e.x,n.x,r),vE(t.y,e.y,n.y,r)}function Z7(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const e8={duration:.45,ease:[.4,0,.1,1]},wE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),xE=wE("applewebkit/")&&!wE("chrome/")?Math.round:jr;function bE(t){t.min=xE(t.min),t.max=xE(t.max)}function t8(t){bE(t.x),bE(t.y)}function fR(t,e,n){return t==="position"||t==="preserve-aspect"&&!a7(hE(e),hE(n),.2)}function n8(t){return t!==t.root&&t.scroll?.wasRoot}const r8=hR({attachResizeListener:(t,e)=>Au(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Tg={current:void 0},pR=hR({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Tg.current){const t=new r8({});t.mount(window),t.setOptions({layoutScroll:!0}),Tg.current=t}return Tg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),s8={pan:{Feature:_7},drag:{Feature:b7,ProjectionNode:pR,MeasureLayout:oR}};function _E(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&mt.postRender(()=>o(e,Xu(e)))}class i8 extends So{mount(){const{current:e}=this.node;e&&(this.unmount=CF(e,(n,r)=>(_E(this.node,r,"Start"),s=>_E(this.node,s,"End"))))}unmount(){}}class o8 extends So{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ku(Au(this.node.current,"focus",()=>this.onFocus()),Au(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function EE(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&mt.postRender(()=>o(e,Xu(e)))}class a8 extends So{mount(){const{current:e}=this.node;e&&(this.unmount=NF(e,(n,r)=>(EE(this.node,r,"Start"),(s,{success:o})=>EE(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const D0=new WeakMap,Sg=new WeakMap,l8=t=>{const e=D0.get(t.target);e&&e(t)},c8=t=>{t.forEach(l8)};function u8({root:t,...e}){const n=t||document;Sg.has(n)||Sg.set(n,{});const r=Sg.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(c8,{root:t,...e})),r[s]}function d8(t,e,n){const r=u8(e);return D0.set(t,n),r.observe(t),()=>{D0.delete(t),r.unobserve(t)}}const h8={some:0,all:1};class f8 extends So{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:h8[s]},u=d=>{const{isIntersecting:p}=d;if(this.isInView===p||(this.isInView=p,o&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),w=p?g:v;w&&w(d)};return d8(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(p8(e,n))&&this.startObserver()}unmount(){}}function p8({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const m8={inView:{Feature:f8},tap:{Feature:a8},focus:{Feature:o8},hover:{Feature:i8}},g8={layout:{ProjectionNode:pR,MeasureLayout:oR}},y8={...t7,...m8,...s8,...g8},we=y9(y8,N9),Bv=({isOpen:t,onClose:e,initialView:n="login"})=>{const[r,s]=x.useState(n==="login"),[o,l]=x.useState(""),[u,d]=x.useState(""),[p,g]=x.useState(!1),[v,w]=x.useState(""),[T,A]=x.useState(""),N=async D=>{D.preventDefault(),g(!0),w(""),A("");try{r?(await RT(Le,o,u),e()):(await IT(Le,o,u),A("Account created successfully! You can now sign in."),s(!0))}catch(j){j instanceof Error?w(j.message):w("An unexpected error occurred")}finally{g(!1)}},C=async()=>{try{await FT(Le,LC),e()}catch(D){D instanceof Error?w(D.message):w("An unexpected error occurred")}};return h.jsx(rs,{children:t&&h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[h.jsx(we.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm"}),h.jsx(we.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden",children:h.jsxs("div",{className:"p-8",children:[h.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 text-center",children:r?"Welcome Back":"Join CollabX"}),h.jsxs("form",{onSubmit:N,className:"space-y-4",children:[h.jsxs("button",{type:"button",onClick:C,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 text-gray-700 px-6 py-3 rounded-xl font-medium hover:bg-gray-50 hover:border-gray-400 transition-all duration-200",children:[h.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[h.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),h.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),h.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),h.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google"]}),h.jsxs("div",{className:"relative flex items-center justify-center my-6",children:[h.jsx("div",{className:"border-t border-gray-200 w-full"}),h.jsx("span",{className:"bg-white px-3 text-sm text-gray-400 font-medium absolute",children:"OR"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),h.jsx("input",{type:"email",required:!0,value:o,onChange:D=>l(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"you@example.com"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),h.jsx("input",{type:"password",required:!0,value:u,onChange:D=>d(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"",minLength:6})]}),v&&h.jsx("p",{className:"text-red-500 text-sm text-center",children:v}),T&&h.jsx("p",{className:"text-green-500 text-sm text-center",children:T}),h.jsx("button",{type:"submit",disabled:p,className:"w-full py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 transition-colors",children:p?"Processing...":r?"Sign In":"Sign Up"})]}),h.jsx("div",{className:"mt-6 text-center",children:h.jsxs("p",{className:"text-gray-600",children:[r?"Don't have an account? ":"Already have an account? ",h.jsx("button",{onClick:()=>s(!r),className:"text-blue-600 font-medium hover:underline",children:r?"Sign Up":"Sign In"})]})})]})})]})})};function v8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"}))}const mR=x.forwardRef(v8);function w8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const x8=x.forwardRef(w8);function b8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const _8=x.forwardRef(b8);function E8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const T8=x.forwardRef(E8);function S8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"}))}const gR=x.forwardRef(S8);function C8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"}))}const I8=x.forwardRef(C8);function R8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"}))}const lu=x.forwardRef(R8);function A8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const yR=x.forwardRef(A8);function N8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const k8=x.forwardRef(N8);function P8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const j8=x.forwardRef(P8);function D8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const M8=x.forwardRef(D8);function L8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const O8=x.forwardRef(L8);function V8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const F8=x.forwardRef(V8);function U8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const B8=x.forwardRef(U8);function z8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const $8=x.forwardRef(z8);function W8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const q8=x.forwardRef(W8);function H8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.182 15.182a4.5 4.5 0 0 1-6.364 0M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Z"}))}const G8=x.forwardRef(H8);function K8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const Y8=x.forwardRef(K8);function Q8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const TE=x.forwardRef(Q8);function X8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"}))}const J8=x.forwardRef(X8);function Z8({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const eU=x.forwardRef(Z8);function tU({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Ju=x.forwardRef(tU);function nU({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 6.75V15m6-6v8.25m.503 3.498 4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 0 0-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0Z"}))}const Wh=x.forwardRef(nU);function rU({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const vR=x.forwardRef(rU);function sU({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13"}))}const iU=x.forwardRef(sU);function oU({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const aU=x.forwardRef(oU);function lU({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const wR=x.forwardRef(lU);function cU({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const uU=x.forwardRef(cU);function dU({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const hU=x.forwardRef(dU);function fU({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const xR=x.forwardRef(fU);function pU({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const mU=x.forwardRef(pU);function gU({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const bR=x.forwardRef(gU),_R=()=>{const[t,e]=x.useState(!1),[n,r]=x.useState(!1),[s,o]=x.useState(null),[l,u]=x.useState(""),d=Or();x.useEffect(()=>{const w=Ea(Le,T=>{o(T)});return()=>w()},[]);const p=async()=>{try{await Hj(Le)}catch(w){console.error("Error signing out:",w)}},g=[{name:"Home",path:"/",icon:eU},{name:"Projects",path:"/projects",icon:lu},{name:"Messages",path:"/messages",icon:j8},{name:"Students",path:"/students",icon:mU},{name:"Resources",path:"/resources",icon:gR},{name:"Roadmaps",path:"/roadmaps",icon:Wh}],v=w=>d.pathname===w;return h.jsxs(h.Fragment,{children:[h.jsx("nav",{className:"fixed top-0 left-0 w-full h-16 bg-white border-b border-gray-200 z-50 transition-all duration-300",children:h.jsxs("div",{className:"max-w-7xl mx-auto h-full px-4 sm:px-6 lg:px-8 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2 flex-1 max-w-md",children:[h.jsxs(Ar,{to:"/",className:"shrink-0 flex items-center gap-1",children:[h.jsx("div",{className:"w-8 h-8 bg-[#0066FF] rounded-md flex items-center justify-center font-black text-white text-lg",children:"C"}),h.jsx("span",{className:"text-xl font-black text-[#0066FF] tracking-tighter hidden sm:block",children:"CollabX"})]}),h.jsxs("div",{className:"relative flex-1 hidden md:block ml-4",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(Ju,{className:"h-4 w-4 text-gray-400"})}),h.jsx("input",{type:"text",placeholder:"Search",value:l,onChange:w=>u(w.target.value),className:"block w-full pl-9 pr-3 py-1.5 bg-[#edf3f8] border-transparent rounded-md text-sm transition-all focus:bg-white focus:ring-1 focus:ring-gray-300 focus:w-full border"})]})]}),h.jsxs("div",{className:"hidden lg:flex items-center h-full ml-auto",children:[g.map(w=>h.jsxs(Ar,{to:w.path,className:`flex flex-col items-center justify-center w-20 h-full border-b-2 transition-all group ${v(w.path)?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-900"}`,children:[h.jsx(w.icon,{className:`h-6 w-6 ${v(w.path)?"text-gray-900":"text-gray-500 group-hover:text-gray-900"}`}),h.jsx("span",{className:"text-[10px] mt-0.5 font-medium",children:w.name})]},w.name)),h.jsx("div",{className:"h-8 w-[1px] bg-gray-200 mx-2"}),h.jsxs(Ar,{to:"/messaging",className:"flex flex-col items-center justify-center w-20 h-full text-gray-500 hover:text-gray-900 transition-all relative",children:[h.jsx(k8,{className:"h-6 w-6"}),h.jsx("span",{className:"text-[10px] mt-0.5 font-medium",children:"Messaging"}),h.jsx("span",{className:"absolute top-2 right-6 w-4 h-4 bg-red-500 rounded-full text-[10px] text-white flex items-center justify-center font-bold",children:"2"})]}),h.jsxs(Ar,{to:"/notifications",className:"flex flex-col items-center justify-center w-20 h-full text-gray-500 hover:text-gray-900 transition-all relative",children:[h.jsx(T8,{className:"h-6 w-6"}),h.jsx("span",{className:"text-[10px] mt-0.5 font-medium",children:"Notifications"}),h.jsx("span",{className:"absolute top-2 right-5 w-4 h-4 bg-red-500 rounded-full text-[10px] text-white flex items-center justify-center font-bold",children:"5"})]}),s?h.jsxs("div",{className:"relative group ml-4",children:[h.jsxs("button",{className:"flex flex-col items-center justify-center w-16 h-full text-gray-500 hover:text-gray-900 transition-all",children:[h.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center text-xs font-bold text-[#0066FF]",children:s.displayName?.[0]||s.email?.[0]||"U"}),h.jsx("span",{className:"text-[10px] mt-0.5 font-medium flex items-center gap-0.5",children:"Me"})]}),h.jsxs("div",{className:"absolute right-0 top-16 w-64 bg-white border border-gray-200 rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all py-2 z-50",children:[h.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 mb-2",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-50 flex items-center justify-center text-lg font-bold text-[#0066FF]",children:s.displayName?.[0]||s.email?.[0]||"U"}),h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-sm font-bold text-gray-900",children:s.displayName||"Contributor"}),h.jsx("span",{className:"text-xs text-gray-500 line-clamp-1",children:s.email})]})]}),h.jsx(Ar,{to:"/profile",className:"mt-3 block w-full text-center py-1 border border-[#0066FF] text-[#0066FF] rounded-full text-sm font-bold hover:bg-blue-50 transition-all",children:"View Profile"})]}),h.jsx("button",{onClick:p,className:"w-full text-left px-4 py-2 text-sm text-gray-600 hover:bg-gray-100",children:"Sign Out"})]})]}):h.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[h.jsx("button",{onClick:()=>r(!0),className:"px-4 py-2 text-[#0066FF] font-bold text-sm hover:bg-blue-50 rounded-full transition-all",children:"Log in"}),h.jsx("button",{onClick:()=>r(!0),className:"px-4 py-2 border border-[#0066FF] text-[#0066FF] font-bold text-sm hover:bg-blue-50 rounded-full transition-all",children:"Join Now"})]})]}),h.jsx("button",{onClick:()=>e(!t),className:"lg:hidden p-2 text-gray-500 hover:bg-gray-100 rounded-full",children:t?h.jsx(bR,{className:"h-6 w-6"}):h.jsx(_8,{className:"h-6 w-6"})})]})}),h.jsx("div",{className:`fixed inset-0 bg-white z-40 transition-transform duration-300 lg:hidden pt-16 ${t?"translate-x-0":"translate-x-full"}`,children:h.jsxs("div",{className:"p-4 space-y-4",children:[g.map(w=>h.jsxs(Ar,{to:w.path,onClick:()=>e(!1),className:"flex items-center gap-4 px-4 py-3 rounded-lg hover:bg-gray-50 text-gray-900 font-medium border border-transparent hover:border-gray-100",children:[h.jsx(w.icon,{className:"h-6 w-6 text-gray-500"}),h.jsx("span",{children:w.name})]},w.name)),!s&&h.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 mt-4 border-t border-gray-100",children:[h.jsx("button",{onClick:()=>{r(!0),e(!1)},className:"px-4 py-3 border border-[#0066FF] text-[#0066FF] font-bold rounded-full",children:"Log in"}),h.jsx("button",{onClick:()=>{r(!0),e(!1)},className:"px-4 py-3 bg-[#0066FF] text-white font-bold rounded-full",children:"Sign Up"})]})]})}),h.jsx(Bv,{isOpen:n,onClose:()=>r(!1)})]})},yU=()=>{const t=e=>{const n=document.getElementById(e);n&&n.scrollIntoView({behavior:"smooth"})};return h.jsx("section",{className:"relative w-full pt-32 pb-20 overflow-hidden bg-white",children:h.jsxs("div",{className:"container-custom mx-auto flex flex-col items-center text-center",children:[h.jsx(we.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:h.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-blue-50 border border-blue-100 text-[#0066FF] text-xs font-bold tracking-wide uppercase",children:[h.jsx("span",{className:"w-2 h-2 rounded-full bg-[#0066FF]"}),"Beta is Live"]})}),h.jsxs(we.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"text-5xl md:text-7xl font-bold text-[#0f172a] tracking-tight mb-6 leading-tight max-w-4xl",children:["Build. Learn. ",h.jsx("br",{}),h.jsx("span",{className:"text-[#0066FF]",children:"Collaborate."})]}),h.jsx(we.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"text-lg md:text-xl text-gray-500 max-w-2xl mb-10 leading-relaxed",children:"The all-in-one platform for students to find exam resources, join ambitious projects, and connect with peers across colleges."}),h.jsx(we.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"w-full max-w-2xl relative mb-10",children:h.jsxs("div",{className:"relative flex items-center",children:[h.jsx("div",{className:"absolute left-4 text-gray-400",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})})}),h.jsx("input",{type:"text",placeholder:"Search for 'GATE Notes' or 'React Projects'...",className:"w-full pl-12 pr-32 py-4 rounded-2xl border border-gray-200 shadow-sm focus:ring-2 focus:ring-[#0066FF] focus:border-transparent outline-none text-gray-700 bg-white"}),h.jsx("button",{className:"absolute right-2 top-2 bottom-2 bg-[#0f172a] text-white px-6 rounded-xl text-sm font-medium hover:bg-gray-800 transition-colors",children:"Search"})]})}),h.jsxs(we.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"flex flex-col sm:flex-row gap-4 mb-20",children:[h.jsxs("button",{onClick:()=>t("roadmaps"),className:"btn-primary flex items-center gap-2 px-8 py-3.5 rounded-xl text-base shadow-lg shadow-blue-500/20",children:["Find Resources",h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})})]}),h.jsx("button",{onClick:()=>t("projects"),className:"btn-secondary px-8 py-3.5 rounded-xl text-base",children:"Join a Project"})]}),h.jsxs(we.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.6},className:"border-t border-gray-100 w-full pt-10",children:[h.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-8",children:"Trusted by students from"}),h.jsx("div",{className:"flex flex-wrap justify-center gap-8 md:gap-16 opacity-60 grayscale hover:grayscale-0 transition-all duration-500",children:["IIT Bombay","BITS Pilani","NIT Trichy","Delhi University"].map(e=>h.jsx("span",{className:"text-lg font-bold text-gray-400 hover:text-[#0066FF] transition-colors cursor-default",children:e},e))})]})]})})},vU=()=>{const t=er(),[e,n]=x.useState([]),[r,s]=x.useState(null),[o,l]=x.useState(!1),[u,d]=x.useState(!1),[p,g]=x.useState(""),[v,w]=x.useState({title:"",description:"",category:"General",link:""});x.useEffect(()=>{const j=Ea(Le,async F=>{if(s(F),F)try{const W=await Lr(st(xe,"users",F.uid));W.exists()&&l(W.data().role==="admin"||W.data().isAdmin===!0)}catch(W){console.error("Error checking admin status:",W),l(!1)}else l(!1)});return T(),()=>j()},[]);const T=async()=>{try{const j=rt(xe,"roadmaps"),F=Ft(j,bi("created_at","desc")),K=(await Nn(F)).docs.map(B=>({id:B.id,...B.data()}));n(K)}catch(j){console.error("Error fetching roadmaps:",j)}},A=async j=>{if(j.preventDefault(),!!r)try{await $s(rt(xe,"roadmaps"),{...v,is_official:!0,created_at:tt.now().toDate().toISOString()}),d(!1),w({title:"",description:"",category:"General",link:""}),T()}catch(F){console.error("Error adding roadmap:",F),alert("Failed to add roadmap.")}},N=async(j,F)=>{if(F.stopPropagation(),!!r&&window.confirm("Are you sure you want to delete this roadmap?"))try{await ip(st(xe,"roadmaps",j)),T()}catch(W){console.error("Error deleting roadmap:",W),alert("Failed to delete roadmap.")}},C=j=>{j.link&&(j.link.startsWith("http")||j.link.startsWith("https"))?window.open(j.link,"_blank"):(t(`/roadmap/${j.id}`),window.scrollTo(0,0))},D=e.filter(j=>j.title.toLowerCase().includes(p.toLowerCase())||j.description.toLowerCase().includes(p.toLowerCase()));return h.jsxs("section",{id:"roadmaps",className:"py-24 bg-gray-50",children:[h.jsxs("div",{className:"container-custom mx-auto",children:[h.jsxs("div",{className:"text-center mb-16",children:[h.jsx("h2",{className:"text-4xl font-bold text-[#0f172a] mb-4",children:"Find Learning Roadmaps"}),h.jsx("p",{className:"text-lg text-gray-500 max-w-2xl mx-auto",children:"Browse through our extensive library of free educational content, notes, and exam preparation materials."}),h.jsxs("div",{className:"max-w-2xl mx-auto mt-8 relative",children:[h.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})})}),h.jsx("input",{type:"text",placeholder:"Search roadmaps...",value:p,onChange:j=>g(j.target.value),className:"w-full pl-12 pr-4 py-4 rounded-xl border border-gray-200 shadow-sm focus:ring-2 focus:ring-[#0066FF] focus:border-transparent outline-none bg-white"})]}),o&&h.jsx("div",{className:"mt-8 flex justify-center",children:h.jsx("button",{onClick:()=>d(!0),className:"bg-[#0066FF] text-white px-6 py-2 rounded-lg shadow-lg shadow-blue-500/20 hover:bg-blue-700 transition-colors",children:"+ Add Roadmap"})})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:D.length===0?h.jsx("div",{className:"col-span-full text-center text-gray-500",children:"No roadmaps found."}):D.map((j,F)=>h.jsxs(we.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:F*.1},onClick:()=>C(j),className:"bg-white rounded-2xl p-8 border border-gray-100 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 cursor-pointer group relative",children:[o&&h.jsx("button",{onClick:W=>N(j.id,W),className:"absolute top-4 right-4 text-gray-400 hover:text-red-500 p-2",title:"Delete Roadmap",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})}),h.jsx("div",{className:"flex justify-between items-start mb-6",children:h.jsx("div",{className:"w-14 h-14 rounded-2xl bg-blue-50 flex items-center justify-center group-hover:scale-110 transition-transform",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-[#0066FF]",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})})}),h.jsx("h3",{className:"text-xl font-bold text-[#0f172a] mb-3 group-hover:text-[#0066FF] transition-colors",children:j.title}),h.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:j.description})]},j.id))})]}),u&&h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:h.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg p-6",children:[h.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Add New Roadmap"}),h.jsxs("form",{onSubmit:A,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),h.jsx("input",{type:"text",required:!0,value:v.title,onChange:j=>w({...v,title:j.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-[#0066FF] outline-none"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),h.jsx("textarea",{required:!0,value:v.description,onChange:j=>w({...v,description:j.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-[#0066FF] outline-none",rows:3})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Link (Optional)"}),h.jsx("input",{type:"text",placeholder:"https://...",value:v.link,onChange:j=>w({...v,link:j.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-[#0066FF] outline-none"})]}),h.jsxs("div",{className:"flex gap-4 pt-4",children:[h.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 px-4 py-2 rounded-lg border border-gray-200 font-medium hover:bg-gray-50",children:"Cancel"}),h.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 rounded-lg bg-[#0066FF] text-white font-medium hover:bg-blue-600",children:"Add Roadmap"})]})]})]})})]})},ER=async(t,e)=>{try{return(await $s(rt(xe,"projects"),{...e,ownerId:t,members:[t],pendingRequests:[],createdAt:fn(),updatedAt:fn()})).id}catch(n){throw console.error("Error adding project:",n),n}},wU=async(t,e)=>{try{const n=st(xe,"projects",t);await Bs(n,{...e,updatedAt:fn()})}catch(n){throw console.error("Error updating project:",n),n}},xU=async t=>{try{await ip(st(xe,"projects",t))}catch(e){throw console.error("Error deleting project:",e),e}},bU=async t=>{const e=Le.currentUser;if(!e)throw new Error("Must be logged in to join projects");try{const n=st(xe,"projects",t);await Bs(n,{pendingRequests:bL(e.uid)});const s=(await Lr(n)).data();s&&await $s(rt(xe,"notifications"),{recipientId:s.ownerId,senderId:e.uid,type:"project_request",projectId:t,projectName:s.title,read:!1,createdAt:fn()})}catch(n){throw console.error("Error requesting to join project:",n),n}},_U=async()=>{try{const t=Ft(rt(xe,"projects"),bi("createdAt","desc"));return(await Nn(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error fetching projects:",t),t}},EU=async t=>{try{const e=Ft(rt(xe,"projects"),Vt("members","array-contains",t),bi("createdAt","desc"));return(await Nn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Error fetching user projects:",e),[]}},TR=({isOpen:t,onClose:e,onSuccess:n})=>{const[r,s]=x.useState({title:"",description:"",githubUrl:"",liveUrl:"",tags:"",rolesNeeded:"",category:"Web Dev"}),[o,l]=x.useState(!1),[u,d]=x.useState(""),[p,g]=x.useState(!1),v=async w=>{if(w.preventDefault(),!!Le.currentUser){l(!0),d("");try{await ER(Le.currentUser.uid,{title:r.title,description:r.description,category:r.category,ownerName:Le.currentUser.displayName||"Anonymous",ownerAvatar:Le.currentUser.photoURL||"",githubUrl:r.githubUrl,liveUrl:r.liveUrl,techStack:r.tags.split(",").map(T=>T.trim()),rolesNeeded:r.rolesNeeded.split(",").map(T=>T.trim()),status:"Open",thumbnailUrl:`https://source.unsplash.com/random/800x600?tech,${r.category}`,updatedAt:null}),g(!0),n&&n(),setTimeout(()=>{e(),g(!1),s({title:"",description:"",githubUrl:"",liveUrl:"",tags:"",rolesNeeded:"",category:"Web Dev"})},2e3)}catch(T){console.error("Error submitting project:",T),d("Failed to submit project. Please try again.")}finally{l(!1)}}};return h.jsx(rs,{children:t&&h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[h.jsx(we.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm"}),h.jsx(we.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative bg-white rounded-2xl shadow-xl w-full max-w-lg overflow-hidden",children:h.jsxs("div",{className:"p-6 md:p-8",children:[h.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Share Your Project"}),h.jsx("p",{className:"text-gray-600 mb-6",children:"Showcase your work to the community."}),p?h.jsxs("div",{className:"text-center py-12",children:[h.jsx("div",{className:"text-5xl mb-4",children:""}),h.jsx("h3",{className:"text-2xl font-bold text-green-600 mb-2",children:"Project Submitted!"}),h.jsx("p",{className:"text-gray-600",children:"Your project has been added successfully."})]}):h.jsxs("form",{onSubmit:v,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Title"}),h.jsx("input",{type:"text",required:!0,value:r.title,onChange:w=>s({...r,title:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., AI Study Assistant"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),h.jsx("textarea",{required:!0,value:r.description,onChange:w=>s({...r,description:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"What does your project do?"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GitHub URL"}),h.jsx("input",{type:"url",required:!0,value:r.githubUrl,onChange:w=>s({...r,githubUrl:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://github.com/..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Live Demo URL"}),h.jsx("input",{type:"url",value:r.liveUrl,onChange:w=>s({...r,liveUrl:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://..."})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),h.jsxs("select",{value:r.category,onChange:w=>s({...r,category:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[h.jsx("option",{children:"AI/ML"}),h.jsx("option",{children:"Web Dev"}),h.jsx("option",{children:"Mobile"}),h.jsx("option",{children:"Blockchain"}),h.jsx("option",{children:"Design"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Roles Needed"}),h.jsx("input",{type:"text",value:r.rolesNeeded,onChange:w=>s({...r,rolesNeeded:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Frontend, Designer"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tech Stack (comma separated)"}),h.jsx("input",{type:"text",value:r.tags,onChange:w=>s({...r,tags:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"react, tailwind, firebase"})]}),u&&h.jsx("p",{className:"text-red-500 text-sm",children:u}),h.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[h.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Submitting...":"Submit Project"})]})]})]})})]})})},TU=()=>{const[t,e]=x.useState("All"),[n,r]=x.useState(""),[s,o]=x.useState([]),[l,u]=x.useState(!0),[d,p]=x.useState(null),[g,v]=x.useState(!1),[w,T]=x.useState(!1),[A,N]=x.useState(""),[C,D]=x.useState(!1);x.useEffect(()=>{j();const I=Ea(Le,R=>{p(R)});return()=>I()},[]);const j=async()=>{try{const I=rt(xe,"projects"),R=Ft(I,bi("created_at","desc")),M=(await Nn(R)).docs.map(O=>({id:O.id,...O.data()}));o(M)}catch(I){console.error("Error fetching projects:",I)}finally{u(!1)}},F=async I=>{if(I.preventDefault(),!!A)try{await $s(rt(xe,"newsletter_subscribers"),{email:A,created_at:tt.now()}),D(!0),N(""),setTimeout(()=>D(!1),3e3)}catch(R){console.error("Error subscribing:",R)}},W=()=>{d?T(!0):v(!0)},K=["All","AI/ML","Web Dev","Mobile","Blockchain","Design"],B=s.filter(I=>{const R=t==="All"||I.category===t,P=I.title.toLowerCase().includes(n.toLowerCase())||I.description.toLowerCase().includes(n.toLowerCase())||I.tags.some(M=>M.toLowerCase().includes(n.toLowerCase()));return R&&P});return h.jsxs("section",{id:"projects",className:"py-20 bg-gray-50 relative overflow-hidden",children:[h.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[h.jsx("div",{className:"absolute top-[10%] left-[-5%] w-[500px] h-[500px] bg-blue-100 rounded-full blur-3xl opacity-30"}),h.jsx("div",{className:"absolute bottom-[10%] right-[-5%] w-[500px] h-[500px] bg-purple-100 rounded-full blur-3xl opacity-30"})]}),h.jsxs("div",{className:"max-w-7xl mx-auto px-6 relative z-10",children:[h.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between mb-12 gap-6",children:[h.jsxs("div",{children:[h.jsx(we.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"flex items-center gap-2 mb-4",children:h.jsx("span",{className:"px-3 py-1 rounded-full bg-blue-100 text-[#0066FF] text-xs font-bold uppercase tracking-wider",children:"Showcase"})}),h.jsx(we.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.1},className:"text-4xl md:text-5xl font-bold text-[#0f172a] mb-4 tracking-tight",children:"Explore Projects"}),h.jsx(we.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2},className:"text-lg text-gray-600 max-w-2xl",children:"Discover innovative projects built by students from top universities."})]}),h.jsxs(we.div,{initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"flex flex-col sm:flex-row gap-4 w-full md:w-auto",children:[h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",placeholder:"Search projects...",value:n,onChange:I=>r(I.target.value),className:"w-full sm:w-64 pl-10 pr-4 py-3 rounded-xl bg-white border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#0066FF] shadow-sm"}),h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})})]}),h.jsxs("button",{onClick:W,className:"px-6 py-3 rounded-xl bg-[#0066FF] text-white font-bold shadow-lg shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Share Project"]})]})]}),h.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[h.jsxs("div",{className:"lg:w-3/4",children:[h.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:K.map(I=>h.jsx("button",{onClick:()=>e(I),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${t===I?"bg-[#0f172a] text-white shadow-lg":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:I},I))}),l?h.jsx("div",{className:"flex justify-center py-20",children:h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#0066FF]"})}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:B.map(I=>h.jsxs(we.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"group bg-white rounded-2xl overflow-hidden border border-gray-100 shadow-sm hover:shadow-xl transition-all duration-300 flex flex-col h-full",children:[h.jsxs("div",{className:"relative h-48 overflow-hidden",children:[h.jsx("img",{src:I.image_url,alt:I.title,className:"w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500"}),h.jsx("div",{className:"absolute top-4 left-4",children:h.jsx("span",{className:"px-3 py-1 rounded-full bg-white/90 backdrop-blur-sm text-xs font-bold text-[#0f172a] shadow-sm",children:I.category})})]}),h.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("img",{src:I.author_avatar,alt:I.author,className:"w-8 h-8 rounded-full border border-gray-100"}),h.jsx("span",{className:"text-sm font-medium text-gray-600",children:I.author}),h.jsxs("span",{className:"text-xs text-gray-400",children:[" ",new Date(I.created_at).toLocaleDateString()]})]}),h.jsx("h3",{className:"text-xl font-bold text-[#0f172a] mb-2 group-hover:text-[#0066FF] transition-colors",children:I.title}),h.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2 flex-1",children:I.description}),h.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:I.tags.map(R=>h.jsxs("span",{className:"px-2 py-1 rounded-md bg-gray-50 text-gray-500 text-xs font-medium border border-gray-100",children:["#",R]},R))}),h.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100 mt-auto",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-red-500 transition-colors text-sm",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})}),I.likes]}),h.jsxs("button",{className:"flex items-center gap-1.5 text-gray-500 hover:text-[#0066FF] transition-colors text-sm",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 8.25h9m-9 3.75h9m-9 3.75h9m-9 3.75h9m-9 3.75h9m-9 3.75h9"})}),I.comments]})]}),h.jsxs("a",{href:I.link||"#",className:"text-[#0066FF] font-bold text-sm hover:underline flex items-center gap-1",children:["View Details",h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-3 h-3",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 19.5l15-15m0 0H8.25m11.25 0v11.25"})})]})]})]})]},I.id))}),!l&&B.length===0&&h.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl border border-gray-100",children:[h.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-gray-400",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})})}),h.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"No projects found"}),h.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or category filter."})]})]}),h.jsxs("div",{className:"lg:w-1/4 space-y-8",children:[h.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm",children:[h.jsxs("h3",{className:"text-lg font-bold text-[#0f172a] mb-4 flex items-center gap-2",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-yellow-500",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})}),"Weekly Highlights"]}),h.jsx("div",{className:"space-y-4",children:[1,2,3].map(I=>h.jsxs("div",{className:"flex gap-3 group cursor-pointer",children:[h.jsx("div",{className:"w-12 h-12 rounded-lg bg-gray-200 overflow-hidden flex-shrink-0",children:h.jsx("img",{src:`https://source.unsplash.com/random/100x100?tech&sig=${I}`,alt:"Thumbnail",className:"w-full h-full object-cover"})}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-bold text-gray-900 group-hover:text-[#0066FF] transition-colors line-clamp-1",children:"AI-Powered Study Assistant"}),h.jsx("p",{className:"text-xs text-gray-500",children:"By Sarah Chen"})]})]},I))}),h.jsx("button",{className:"w-full mt-4 py-2 text-sm font-bold text-[#0066FF] border border-blue-100 rounded-xl hover:bg-blue-50 transition-colors",children:"View All Highlights"})]}),h.jsxs("div",{className:"bg-[#0f172a] rounded-2xl p-6 text-white relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#0066FF] rounded-full blur-3xl opacity-20 transform translate-x-1/2 -translate-y-1/2"}),h.jsx("h3",{className:"text-lg font-bold mb-2 relative z-10",children:"Join the Newsletter"}),h.jsx("p",{className:"text-gray-400 text-sm mb-4 relative z-10",children:"Get the latest projects and resources delivered to your inbox."}),h.jsxs("form",{onSubmit:F,className:"relative z-10",children:[h.jsx("input",{type:"email",placeholder:"Your email",value:A,onChange:I=>N(I.target.value),className:"w-full px-4 py-2.5 rounded-xl bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#0066FF] mb-3 text-sm",required:!0}),h.jsx("button",{type:"submit",disabled:C,className:"w-full py-2.5 rounded-xl bg-[#0066FF] text-white font-bold text-sm hover:bg-blue-600 transition-colors disabled:opacity-70 disabled:cursor-not-allowed",children:C?"Subscribed!":"Subscribe"})]})]})]})]})]}),h.jsx(Bv,{isOpen:g,onClose:()=>v(!1)}),h.jsx(TR,{isOpen:w,onClose:()=>T(!1),onSuccess:j})]})},SU=()=>{const t=er(),[e,n]=x.useState([]),[r,s]=x.useState(!0),[o,l]=x.useState(!1),[u,d]=x.useState(!1),[p,g]=x.useState({title:"",description:"",icon:"",color:"badge-blue",link:""});x.useEffect(()=>{v();const C=Ea(Le,async D=>{if(D)try{const j=await Lr(st(xe,"users",D.uid));j.exists()&&l(j.data().role==="admin"||j.data().isAdmin===!0)}catch(j){console.error("Error checking admin status:",j),l(!1)}else l(!1)});return()=>C()},[]);const v=async()=>{try{const C=rt(xe,"resources"),D=Ft(C),F=(await Nn(D)).docs.map(W=>({id:W.id,...W.data()}));F.length===0?n([{id:"cat",title:"CAT Resources",description:"Comprehensive study materials, mock tests, and guides for Common Admission Test preparation.",icon:"",color:"badge-blue"},{id:"upsc",title:"UPSC Resources",description:"Curated notes, current affairs, and syllabus breakdowns for Civil Services Examination.",icon:"",color:"badge-yellow"},{id:"gate",title:"GATE Resources",description:"Subject-wise notes, previous year questions, and technical resources for Graduate Aptitude Test in Engineering.",icon:"",color:"badge-green"}]):n(F)}catch(C){console.error("Error fetching resources:",C)}finally{s(!1)}},w=async C=>{if(C.preventDefault(),!(!p.title||!p.description))try{await $s(rt(xe,"resources"),p),d(!1),g({title:"",description:"",icon:"",color:"badge-blue",link:""}),v()}catch(D){console.error("Error adding resource:",D)}},T=async(C,D)=>{if(D.stopPropagation(),!!window.confirm("Are you sure you want to delete this resource?"))try{await ip(st(xe,"resources",C)),v()}catch(j){console.error("Error deleting resource:",j)}},A={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},N={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.5}}};return h.jsxs("section",{id:"resources",className:"section-padding relative z-10 min-h-[80vh] flex flex-col justify-center bg-gray-50",children:[h.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[h.jsx("div",{className:"absolute top-[10%] right-[-5%] w-[500px] h-[500px] bg-blue-100 rounded-full blur-3xl opacity-30"}),h.jsx("div",{className:"absolute bottom-[10%] left-[-5%] w-[500px] h-[500px] bg-purple-100 rounded-full blur-3xl opacity-30"})]}),h.jsxs("div",{className:"container-custom relative z-10",children:[h.jsxs(we.div,{className:"text-center mb-16",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[h.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-[#0f172a] mb-6 drop-shadow-sm",children:"Student Resources"}),h.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto font-light",children:"Curated study materials and exam preparation guides to help you excel in your academic journey."})]}),o&&h.jsx("div",{className:"mb-8 flex justify-center",children:h.jsx("button",{onClick:()=>d(!u),className:"bg-[#0066FF] text-white px-6 py-2 rounded-full font-medium hover:bg-blue-700 transition-colors shadow-lg shadow-blue-500/30",children:u?"Cancel":"+ Add Resource"})}),u&&h.jsx(we.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"max-w-md mx-auto mb-12 bg-white p-6 rounded-2xl shadow-xl border border-gray-100",children:h.jsxs("form",{onSubmit:w,className:"space-y-4",children:[h.jsx("input",{type:"text",placeholder:"Title",value:p.title,onChange:C=>g({...p,title:C.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0066FF] outline-none",required:!0}),h.jsx("textarea",{placeholder:"Description",value:p.description,onChange:C=>g({...p,description:C.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0066FF] outline-none",required:!0}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("input",{type:"text",placeholder:"Icon (emoji)",value:p.icon,onChange:C=>g({...p,icon:C.target.value}),className:"w-1/3 px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0066FF] outline-none"}),h.jsxs("select",{value:p.color,onChange:C=>g({...p,color:C.target.value}),className:"w-2/3 px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0066FF] outline-none",children:[h.jsx("option",{value:"badge-blue",children:"Blue"}),h.jsx("option",{value:"badge-yellow",children:"Yellow"}),h.jsx("option",{value:"badge-green",children:"Green"}),h.jsx("option",{value:"badge-purple",children:"Purple"}),h.jsx("option",{value:"badge-red",children:"Red"})]})]}),h.jsx("button",{type:"submit",className:"w-full bg-[#0066FF] text-white py-2 rounded-lg font-bold hover:bg-blue-700",children:"Save Resource"})]})}),r?h.jsx("div",{className:"flex justify-center py-20",children:h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#0066FF]"})}):h.jsx(we.div,{className:"grid grid-cols-1 md:grid-cols-3 gap-8",variants:A,initial:"hidden",whileInView:"visible",viewport:{once:!0},children:e.map(C=>h.jsxs(we.div,{className:"bg-white rounded-2xl p-8 cursor-pointer group border border-gray-100 shadow-sm hover:shadow-xl transition-all duration-300 relative",variants:N,whileHover:{scale:1.03},onClick:()=>t(`/resource/${C.id}`),children:[o&&h.jsx("button",{onClick:D=>T(C.id,D),className:"absolute top-4 right-4 text-gray-400 hover:text-red-500 p-2",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})}),h.jsx("div",{className:"mb-6 flex justify-center",children:h.jsx("div",{className:"w-20 h-20 bg-blue-50 rounded-full flex items-center justify-center text-4xl group-hover:scale-110 transition-transform duration-300",children:C.icon})}),h.jsx("h3",{className:"text-2xl font-bold text-[#0f172a] mb-4 text-center group-hover:text-[#0066FF] transition-colors",children:C.title}),h.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed text-center font-light flex-1",children:C.description}),h.jsx("div",{className:"mt-auto text-center",children:h.jsxs("span",{className:"text-[#0066FF] font-medium group-hover:underline underline-offset-4 flex items-center justify-center gap-2",children:["View Materials ",h.jsx("span",{children:""})]})})]},C.id))})]})]})},SR=async t=>{const e=Le.currentUser;if(!e)throw new Error("User not authenticated");const n=[e.uid,t].sort(),r=n.join("_"),s=st(xe,"conversations",r);return(await Lr(s)).exists()||await sp(s,{id:r,participants:n,createdAt:fn(),updatedAt:fn(),createdBy:e.uid,isTyping:{}}),r},CU=async(t,e,n="text",r)=>{const s=Le.currentUser;if(!s)throw new Error("User not authenticated");const o=rt(xe,"conversations",t,"messages"),l=st(xe,"conversations",t);await $s(o,{conversationId:t,senderId:s.uid,content:e,type:n,attachments:[],createdAt:fn(),read:!1}),await Bs(l,{lastMessage:{content:e,senderId:s.uid,createdAt:fn(),type:n,read:!1},updatedAt:fn()})},IU=t=>{const e=Le.currentUser;if(!e)return()=>{};const n=Ft(rt(xe,"conversations"),Vt("participants","array-contains",e.uid),bi("updatedAt","desc"));return tv(n,r=>{const s=r.docs.map(o=>({id:o.id,...o.data()}));t(s)})},RU=(t,e)=>{const n=Ft(rt(xe,"conversations",t,"messages"),bi("createdAt","asc"),mC(100));return tv(n,r=>{const s=r.docs.map(o=>({id:o.id,...o.data()}));e(s)})},AU=async(t,e)=>{const n=st(xe,"conversations",t,"messages",e);await Bs(n,{read:!0,readAt:fn()})},SE=20,CR=async(t,e)=>{const n=Le.currentUser;if(!n)throw new Error("User not authenticated");if(n.uid===t)throw new Error("Cannot connect with yourself");const r=new Date().toISOString().split("T")[0],s=st(xe,"userActivity",`${n.uid}_${r}`),o=await Lr(s);if(o.exists()&&o.data().connectionRequestsSent>=SE)throw new Error(`Daily limit of ${SE} requests reached.`);const l=st(xe,"blocks",`${t}_${n.uid}`);if((await Lr(l)).exists())throw new Error("This user has blocked you.");const d=rt(xe,"connections"),p=Ft(d,Vt("requesterId","==",n.uid),Vt("recipientId","==",t));if(!(await Nn(p)).empty)throw new Error("Connection request already exists.");await $s(d,{requesterId:n.uid,recipientId:t,status:"pending",note:e?e.substring(0,300):"",createdAt:fn(),updatedAt:fn()}),await sp(s,{userId:n.uid,date:r,connectionRequestsSent:h0(1)},{merge:!0})},NU=async t=>{const e=st(xe,"connections",t);await Bs(e,{status:"accepted",updatedAt:fn()})},kU=async t=>{const e=st(xe,"connections",t);await Bs(e,{status:"ignored",updatedAt:fn()})},PU=async t=>{const e=Le.currentUser;if(!e)return"none";const n=rt(xe,"connections"),r=Ft(n,Vt("requesterId","==",e.uid),Vt("recipientId","==",t)),s=await Nn(r);if(!s.empty)return s.docs[0].data().status==="accepted"?"connected":"pending";const o=Ft(n,Vt("requesterId","==",t),Vt("recipientId","==",e.uid)),l=await Nn(o);return l.empty?"none":l.docs[0].data().status==="accepted"?"connected":"received"},jU=async()=>{const t=Le.currentUser;if(!t)return[];const e=rt(xe,"connections"),n=Ft(e,Vt("recipientId","==",t.uid),Vt("status","==","pending"),bi("createdAt","desc"));return(await Nn(n)).docs.map(s=>({id:s.id,...s.data()}))},DU=async t=>{const e=rt(xe,"connections"),n=Ft(e,Vt("requesterId","==",t),Vt("status","==","accepted")),r=Ft(e,Vt("recipientId","==",t),Vt("status","==","accepted")),[s,o]=await Promise.all([i_(n),i_(r)]);return s.data().count+o.data().count},IR=({student:t,onClick:e})=>{const[n,r]=x.useState("none"),[s,o]=x.useState(!1),l=Le.currentUser,u=er(),d=async w=>{if(w.stopPropagation(),!!l)try{const T=await SR(t.uid);u(`/messages?conversationId=${T}`)}catch(T){console.error("Error starting conversation:",T)}};x.useEffect(()=>{(async()=>{if(l&&l.uid!==t.uid)try{const T=await PU(t.uid);r(T)}catch(T){console.error("Error fetching status:",T)}})()},[t.uid,l]);const p=async w=>{if(w.stopPropagation(),!!l){o(!0);try{await CR(t.uid),r("pending")}catch(T){const A=T;console.error("Error connecting:",A),alert(A.message)}finally{o(!1)}}},g=()=>{if(s)return"...";switch(n){case"pending":return"Pending";case"received":return"Accept";case"connected":return"Connected";default:return"Connect"}},v=n==="pending"||n==="connected"||t.uid===l?.uid;return h.jsxs(we.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-5},className:"bg-white rounded-xl overflow-hidden border border-gray-200 shadow-sm hover:shadow-md transition-all cursor-pointer flex flex-col items-center text-center",onClick:e,children:[h.jsx("div",{className:"w-full h-20 bg-gradient-to-r from-[#0066FF]/10 to-[#5865F2]/10 relative",children:h.jsx("div",{className:"absolute -bottom-10 left-1/2 -translate-x-1/2",children:h.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-white shadow-md overflow-hidden bg-white",children:h.jsx("img",{src:t.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t.name}`,alt:t.name,className:"w-full h-full object-cover"})})})}),h.jsxs("div",{className:"pt-12 pb-5 px-4 flex flex-col items-center flex-grow w-full",children:[h.jsx("h3",{className:"font-bold text-[#0f172a] text-lg line-clamp-1",children:t.name}),h.jsx("p",{className:"text-xs text-gray-500 line-clamp-2 h-8 mb-1 px-2",children:t.headline||t.role}),h.jsxs("div",{className:"flex items-center gap-1 text-gray-400 text-[10px] mb-3 uppercase tracking-wider font-bold",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-3 h-3",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.499 5.24 50.534 50.534 0 00-2.658.813m-15.482 0A50.717 50.717 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5zm0 0v-3.675A55.378 55.378 0 0112 8.443m-7.007 11.55A5.981 5.981 0 006.75 15.75v-1.5"})}),t.institution||"University"]}),h.jsxs("div",{className:"flex flex-wrap justify-center gap-1 mb-5 h-10 overflow-hidden items-start w-full",children:[t.skills?.slice(0,3).map((w,T)=>h.jsx("span",{className:"px-2 py-0.5 bg-gray-50 text-gray-400 text-[9px] font-bold rounded-md border border-gray-100 uppercase",children:w},T)),t.skills?.length>3&&h.jsxs("span",{className:"px-2 py-0.5 text-gray-400 text-[9px] font-bold",children:["+",t.skills.length-3]})]}),h.jsxs("div",{className:"flex gap-2 w-full mt-auto",children:[h.jsx("button",{onClick:p,disabled:v||s,className:`flex-1 py-1.5 rounded-full font-bold text-xs transition-colors border ${n==="connected"?"bg-gray-100 text-gray-500 border-transparent cursor-not-allowed":n==="pending"?"bg-gray-50 text-gray-400 border-gray-200 cursor-not-allowed":"border-[#0066FF] text-[#0066FF] hover:bg-[#0066FF] hover:text-white"}`,children:g()}),h.jsx("button",{onClick:d,className:"flex-1 py-1.5 rounded-full border border-gray-200 text-gray-600 font-bold text-xs hover:bg-gray-50 transition-colors",children:"Message"})]})]})]})},MU=()=>{const t=er(),[e,n]=x.useState([]);return x.useEffect(()=>{(async()=>{try{const s=rt(xe,"users"),o=Ft(s,mC(8)),u=(await Nn(o)).docs.map(d=>{const p=d.data();return{uid:d.id,...p,name:p.name||p.full_name||"Anonymous",avatar:p.avatar||p.avatar_url||"",institution:p.institution||p.university||"University",skills:p.skills||[]}});n(u)}catch(s){console.error("Error fetching profiles:",s)}})()},[]),h.jsx("section",{id:"community",className:"py-24 bg-white",children:h.jsxs("div",{className:"container-custom mx-auto",children:[h.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end mb-16 gap-6",children:[h.jsxs("div",{className:"max-w-2xl",children:[h.jsx("h2",{className:"text-4xl font-bold text-[#0f172a] mb-4",children:"Students"}),h.jsx("p",{className:"text-lg text-gray-500",children:"Connect with ambitious students from top universities who are building the next big thing."})]}),h.jsx("a",{href:"https://chat.whatsapp.com/L4AfqBc5pIh5o2D5BGt5rv",target:"_blank",rel:"noopener noreferrer",className:"btn-primary px-8 py-3 rounded-xl shadow-lg shadow-blue-500/20 whitespace-nowrap",children:"Join the Community"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.length===0?h.jsx("div",{className:"col-span-full text-center text-gray-500 py-12",children:"Join the community to be featured here!"}):e.map(r=>h.jsx(IR,{student:r,onClick:()=>t(`/profile/${r.uid}`)},r.uid))})]})})};var M0=function(t,e){return M0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},M0(t,e)};function LU(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");M0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Xt=function(){return Xt=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Xt.apply(this,arguments)};var Cg,CE;function OU(){if(CE)return Cg;CE=1;var t=!1,e,n,r,s,o,l,u,d,p,g,v,w,T,A,N;function C(){if(!t){t=!0;var j=navigator.userAgent,F=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(j),W=/(Mac OS X)|(Windows)|(Linux)/.exec(j);if(w=/\b(iPhone|iP[ao]d)/.exec(j),T=/\b(iP[ao]d)/.exec(j),g=/Android/i.exec(j),A=/FBAN\/\w+;/i.exec(j),N=/Mobile/i.exec(j),v=!!/Win64/.exec(j),F){e=F[1]?parseFloat(F[1]):F[5]?parseFloat(F[5]):NaN,e&&document&&document.documentMode&&(e=document.documentMode);var K=/(?:Trident\/(\d+.\d+))/.exec(j);l=K?parseFloat(K[1])+4:e,n=F[2]?parseFloat(F[2]):NaN,r=F[3]?parseFloat(F[3]):NaN,s=F[4]?parseFloat(F[4]):NaN,s?(F=/(?:Chrome\/(\d+\.\d+))/.exec(j),o=F&&F[1]?parseFloat(F[1]):NaN):o=NaN}else e=n=r=o=s=NaN;if(W){if(W[1]){var B=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(j);u=B?parseFloat(B[1].replace("_",".")):!0}else u=!1;d=!!W[2],p=!!W[3]}else u=d=p=!1}}var D={ie:function(){return C()||e},ieCompatibilityMode:function(){return C()||l>e},ie64:function(){return D.ie()&&v},firefox:function(){return C()||n},opera:function(){return C()||r},webkit:function(){return C()||s},safari:function(){return D.webkit()},chrome:function(){return C()||o},windows:function(){return C()||d},osx:function(){return C()||u},linux:function(){return C()||p},iphone:function(){return C()||w},mobile:function(){return C()||w||T||g||N},nativeApp:function(){return C()||A},android:function(){return C()||g},ipad:function(){return C()||T}};return Cg=D,Cg}var Ig,IE;function VU(){if(IE)return Ig;IE=1;var t=!!(typeof window<"u"&&window.document&&window.document.createElement),e={canUseDOM:t,canUseWorkers:typeof Worker<"u",canUseEventListeners:t&&!!(window.addEventListener||window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};return Ig=e,Ig}var Rg,RE;function FU(){if(RE)return Rg;RE=1;var t=VU(),e;t.canUseDOM&&(e=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function n(r,s){if(!t.canUseDOM||s&&!("addEventListener"in document))return!1;var o="on"+r,l=o in document;if(!l){var u=document.createElement("div");u.setAttribute(o,"return;"),l=typeof u[o]=="function"}return!l&&e&&r==="wheel"&&(l=document.implementation.hasFeature("Events.wheel","3.0")),l}return Rg=n,Rg}var Ag,AE;function UU(){if(AE)return Ag;AE=1;var t=OU(),e=FU(),n=10,r=40,s=800;function o(l){var u=0,d=0,p=0,g=0;return"detail"in l&&(d=l.detail),"wheelDelta"in l&&(d=-l.wheelDelta/120),"wheelDeltaY"in l&&(d=-l.wheelDeltaY/120),"wheelDeltaX"in l&&(u=-l.wheelDeltaX/120),"axis"in l&&l.axis===l.HORIZONTAL_AXIS&&(u=d,d=0),p=u*n,g=d*n,"deltaY"in l&&(g=l.deltaY),"deltaX"in l&&(p=l.deltaX),(p||g)&&l.deltaMode&&(l.deltaMode==1?(p*=r,g*=r):(p*=s,g*=s)),p&&!u&&(u=p<1?-1:1),g&&!d&&(d=g<1?-1:1),{spinX:u,spinY:d,pixelX:p,pixelY:g}}return o.getEventType=function(){return t.firefox()?"DOMMouseScroll":e("wheel")?"wheel":"mousewheel"},Ag=o,Ag}var Ng,NE;function BU(){return NE||(NE=1,Ng=UU()),Ng}var zU=BU();const $U=s2(zU);function WU(t,e,n,r,s,o){o===void 0&&(o=0);var l=kl(t,e,o),u=l.width,d=l.height,p=Math.min(u,n),g=Math.min(d,r);return p>g*s?{width:g*s,height:g}:{width:p,height:p/s}}function qU(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function Fc(t,e,n,r,s){s===void 0&&(s=0);var o=kl(e.width,e.height,s),l=o.width,u=o.height;return{x:kE(t.x,l,n.width,r),y:kE(t.y,u,n.height,r)}}function kE(t,e,n,r){var s=e*r/2-n/2;return hp(t,-s,s)}function PE(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function jE(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI}function HU(t,e,n,r,s,o,l){o===void 0&&(o=0),l===void 0&&(l=!0);var u=l?GU:KU,d=kl(e.width,e.height,o),p=kl(e.naturalWidth,e.naturalHeight,o),g={x:u(100,((d.width-n.width/s)/2-t.x/s)/d.width*100),y:u(100,((d.height-n.height/s)/2-t.y/s)/d.height*100),width:u(100,n.width/d.width*100/s),height:u(100,n.height/d.height*100/s)},v=Math.round(u(p.width,g.width*p.width/100)),w=Math.round(u(p.height,g.height*p.height/100)),T=p.width>=p.height*r,A=T?{width:Math.round(w*r),height:w}:{width:v,height:Math.round(v/r)},N=Xt(Xt({},A),{x:Math.round(u(p.width-A.width,g.x*p.width/100)),y:Math.round(u(p.height-A.height,g.y*p.height/100))});return{croppedAreaPercentages:g,croppedAreaPixels:N}}function GU(t,e){return Math.min(t,Math.max(0,e))}function KU(t,e){return e}function YU(t,e,n,r,s,o){var l=kl(e.width,e.height,n),u=hp(r.width/l.width*(100/t.width),s,o),d={x:u*l.width/2-r.width/2-l.width*u*(t.x/100),y:u*l.height/2-r.height/2-l.height*u*(t.y/100)};return{crop:d,zoom:u}}function QU(t,e,n){var r=qU(e);return n.height>n.width?n.height/(t.height*r):n.width/(t.width*r)}function XU(t,e,n,r,s,o){n===void 0&&(n=0);var l=kl(e.naturalWidth,e.naturalHeight,n),u=hp(QU(t,e,r),s,o),d=r.height>r.width?r.height/t.height:r.width/t.width,p={x:((l.width-t.width)/2-t.x)*d,y:((l.height-t.height)/2-t.y)*d};return{crop:p,zoom:u}}function DE(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function JU(t){return t*Math.PI/180}function kl(t,e,n){var r=JU(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}function hp(t,e,n){return Math.min(Math.max(t,e),n)}function Th(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(n){return typeof n=="string"&&n.length>0}).join(" ").trim()}var ZU=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,eB=1,tB=3,nB=1,rB=(function(t){LU(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.cropperRef=x.createRef(),n.imageRef=x.createRef(),n.videoRef=x.createRef(),n.containerPosition={x:0,y:0},n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc=typeof document<"u"?document:null,n.currentWindow=typeof window<"u"?window:null,n.resizeObserver=null,n.previousCropSize=null,n.isInitialized=!1,n.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},n.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!n.containerRef)){var r=!0;n.resizeObserver=new window.ResizeObserver(function(s){if(r){r=!1;return}n.computeSizes()}),n.resizeObserver.observe(n.containerRef)}},n.preventZoomSafari=function(r){return r.preventDefault()},n.cleanEvents=function(){n.currentDoc&&(n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturechange",n.onGestureChange),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd),n.currentDoc.removeEventListener("scroll",n.onScroll))},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var r=n.computeSizes();r&&(n.previousCropSize=r,n.emitCropData(),n.setInitialCrop(r),n.isInitialized=!0),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(r){if(n.props.initialCroppedAreaPercentages){var s=YU(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),o=s.crop,l=s.zoom;n.props.onCropChange(o),n.props.onZoomChange&&n.props.onZoomChange(l)}else if(n.props.initialCroppedAreaPixels){var u=XU(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),o=u.crop,l=u.zoom;n.props.onCropChange(o),n.props.onZoomChange&&n.props.onZoomChange(l)}},n.computeSizes=function(){var r,s,o,l,u,d,p=n.imageRef.current||n.videoRef.current;if(p&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect(),n.saveContainerPosition();var g=n.containerRect.width/n.containerRect.height,v=((r=n.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((s=n.videoRef.current)===null||s===void 0?void 0:s.videoWidth)||0,w=((o=n.imageRef.current)===null||o===void 0?void 0:o.naturalHeight)||((l=n.videoRef.current)===null||l===void 0?void 0:l.videoHeight)||0,T=p.offsetWidth<v||p.offsetHeight<w,A=v/w,N=void 0;if(T)switch(n.state.mediaObjectFit){default:case"contain":N=g>A?{width:n.containerRect.height*A,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/A};break;case"horizontal-cover":N={width:n.containerRect.width,height:n.containerRect.width/A};break;case"vertical-cover":N={width:n.containerRect.height*A,height:n.containerRect.height};break}else N={width:p.offsetWidth,height:p.offsetHeight};n.mediaSize=Xt(Xt({},N),{naturalWidth:v,naturalHeight:w}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var C=n.props.cropSize?n.props.cropSize:WU(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(((u=n.state.cropSize)===null||u===void 0?void 0:u.height)!==C.height||((d=n.state.cropSize)===null||d===void 0?void 0:d.width)!==C.width)&&n.props.onCropSizeChange&&n.props.onCropSizeChange(C),n.setState({cropSize:C},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(C),C}},n.saveContainerPosition=function(){if(n.containerRef){var r=n.containerRef.getBoundingClientRect();n.containerPosition={x:r.left,y:r.top}}},n.onMouseDown=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.saveContainerPosition(),n.onDragStart(e.getMousePoint(r)))},n.onMouseMove=function(r){return n.onDrag(e.getMousePoint(r))},n.onScroll=function(r){n.currentDoc&&(r.preventDefault(),n.saveContainerPosition())},n.onTouchStart=function(r){n.currentDoc&&(n.isTouching=!0,!(n.props.onTouchRequest&&!n.props.onTouchRequest(r))&&(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),n.saveContainerPosition(),r.touches.length===2?n.onPinchStart(r):r.touches.length===1&&n.onDragStart(e.getTouchPoint(r.touches[0]))))},n.onTouchMove=function(r){r.preventDefault(),r.touches.length===2?n.onPinchMove(r):r.touches.length===1&&n.onDrag(e.getTouchPoint(r.touches[0]))},n.onGestureStart=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureChange),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation)},n.onGestureChange=function(r){if(r.preventDefault(),!n.isTouching){var s=e.getMousePoint(r),o=n.gestureZoomStart-1+r.scale;if(n.setNewZoom(o,s,{shouldUpdatePosition:!0}),n.props.onRotationChange){var l=n.gestureRotationStart+r.rotation;n.props.onRotationChange(l)}}},n.onGestureEnd=function(r){n.cleanEvents()},n.onDragStart=function(r){var s,o,l=r.x,u=r.y;n.dragStartPosition={x:l,y:u},n.dragStartCrop=Xt({},n.props.crop),(o=(s=n.props).onInteractionStart)===null||o===void 0||o.call(s)},n.onDrag=function(r){var s=r.x,o=r.y;n.currentWindow&&(n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame(function(){if(n.state.cropSize&&!(s===void 0||o===void 0)){var l=s-n.dragStartPosition.x,u=o-n.dragStartPosition.y,d={x:n.dragStartCrop.x+l,y:n.dragStartCrop.y+u},p=n.props.restrictPosition?Fc(d,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):d;n.props.onCropChange(p)}}))},n.onDragStopped=function(){var r,s;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),(s=(r=n.props).onInteractionEnd)===null||s===void 0||s.call(r)},n.onWheel=function(r){if(n.currentWindow&&!(n.props.onWheelRequest&&!n.props.onWheelRequest(r))){r.preventDefault();var s=e.getMousePoint(r),o=$U(r).pixelY,l=n.props.zoom-o*n.props.zoomSpeed/200;n.setNewZoom(l,s,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},function(){var u,d;return(d=(u=n.props).onInteractionStart)===null||d===void 0?void 0:d.call(u)}),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout(function(){return n.setState({hasWheelJustStarted:!1},function(){var u,d;return(d=(u=n.props).onInteractionEnd)===null||d===void 0?void 0:d.call(u)})},250)}},n.getPointOnContainer=function(r,s){var o=r.x,l=r.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(o-s.x),y:n.containerRect.height/2-(l-s.y)}},n.getPointOnMedia=function(r){var s=r.x,o=r.y,l=n.props,u=l.crop,d=l.zoom;return{x:(s+u.x)/d,y:(o+u.y)/d}},n.setNewZoom=function(r,s,o){var l=o===void 0?{}:o,u=l.shouldUpdatePosition,d=u===void 0?!0:u;if(!(!n.state.cropSize||!n.props.onZoomChange)){var p=hp(r,n.props.minZoom,n.props.maxZoom);if(d){var g=n.getPointOnContainer(s,n.containerPosition),v=n.getPointOnMedia(g),w={x:v.x*p-g.x,y:v.y*p-g.y},T=n.props.restrictPosition?Fc(w,n.mediaSize,n.state.cropSize,p,n.props.rotation):w;n.props.onCropChange(T)}n.props.onZoomChange(p)}},n.getCropData=function(){if(!n.state.cropSize)return null;var r=n.props.restrictPosition?Fc(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;return HU(r,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition)},n.emitCropData=function(){var r=n.getCropData();if(r){var s=r.croppedAreaPercentages,o=r.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(s,o),n.props.onCropAreaChange&&n.props.onCropAreaChange(s,o)}},n.emitCropAreaChange=function(){var r=n.getCropData();if(r){var s=r.croppedAreaPercentages,o=r.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(s,o)}},n.recomputeCropPosition=function(){var r,s;if(n.state.cropSize){var o=n.props.crop;if(n.isInitialized&&(!((r=n.previousCropSize)===null||r===void 0)&&r.width)&&(!((s=n.previousCropSize)===null||s===void 0)&&s.height)){var l=Math.abs(n.previousCropSize.width-n.state.cropSize.width)>1e-6||Math.abs(n.previousCropSize.height-n.state.cropSize.height)>1e-6;if(l){var u=n.state.cropSize.width/n.previousCropSize.width,d=n.state.cropSize.height/n.previousCropSize.height;o={x:n.props.crop.x*u,y:n.props.crop.y*d}}}var p=n.props.restrictPosition?Fc(o,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):o;n.previousCropSize=n.state.cropSize,n.props.onCropChange(p),n.emitCropData()}},n.onKeyDown=function(r){var s,o,l=n.props,u=l.crop,d=l.onCropChange,p=l.keyboardStep,g=l.zoom,v=l.rotation,w=p;if(n.state.cropSize){r.shiftKey&&(w*=.2);var T=Xt({},u);switch(r.key){case"ArrowUp":T.y-=w,r.preventDefault();break;case"ArrowDown":T.y+=w,r.preventDefault();break;case"ArrowLeft":T.x-=w,r.preventDefault();break;case"ArrowRight":T.x+=w,r.preventDefault();break;default:return}n.props.restrictPosition&&(T=Fc(T,n.mediaSize,n.state.cropSize,g,v)),r.repeat||(o=(s=n.props).onInteractionStart)===null||o===void 0||o.call(s),d(T)}},n.onKeyUp=function(r){var s,o;switch(r.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":r.preventDefault();break;default:return}n.emitCropData(),(o=(s=n.props).onInteractionEnd)===null||o===void 0||o.call(s)},n}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=ZU,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var n,r;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(n=this.resizeObserver)===null||n===void 0||n.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((r=this.styleRef.parentNode)===null||r===void 0||r.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(n){var r,s,o,l,u,d,p,g,v;n.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):n.aspect!==this.props.aspect?this.computeSizes():n.objectFit!==this.props.objectFit?this.computeSizes():n.zoom!==this.props.zoom?this.recomputeCropPosition():((r=n.cropSize)===null||r===void 0?void 0:r.height)!==((s=this.props.cropSize)===null||s===void 0?void 0:s.height)||((o=n.cropSize)===null||o===void 0?void 0:o.width)!==((l=this.props.cropSize)===null||l===void 0?void 0:l.width)?this.computeSizes():(((u=n.crop)===null||u===void 0?void 0:u.x)!==((d=this.props.crop)===null||d===void 0?void 0:d.x)||((p=n.crop)===null||p===void 0?void 0:p.y)!==((g=this.props.crop)===null||g===void 0?void 0:g.y))&&this.emitCropAreaChange(),n.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),n.video!==this.props.video&&((v=this.videoRef.current)===null||v===void 0||v.load());var w=this.getObjectFit();w!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:w},this.computeSizes)},e.prototype.getAspect=function(){var n=this.props,r=n.cropSize,s=n.aspect;return r?r.width/r.height:s},e.prototype.getObjectFit=function(){var n,r,s,o;if(this.props.objectFit==="cover"){var l=this.imageRef.current||this.videoRef.current;if(l&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var u=this.containerRect.width/this.containerRect.height,d=((n=this.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((r=this.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,p=((s=this.imageRef.current)===null||s===void 0?void 0:s.naturalHeight)||((o=this.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,g=d/p;return g<u?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(n){var r=e.getTouchPoint(n.touches[0]),s=e.getTouchPoint(n.touches[1]);this.lastPinchDistance=PE(r,s),this.lastPinchRotation=jE(r,s),this.onDragStart(DE(r,s))},e.prototype.onPinchMove=function(n){var r=this;if(!(!this.currentDoc||!this.currentWindow)){var s=e.getTouchPoint(n.touches[0]),o=e.getTouchPoint(n.touches[1]),l=DE(s,o);this.onDrag(l),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var u=PE(s,o),d=r.props.zoom*(u/r.lastPinchDistance);r.setNewZoom(d,l,{shouldUpdatePosition:!1}),r.lastPinchDistance=u;var p=jE(s,o),g=r.props.rotation+(p-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(g),r.lastPinchRotation=p})}},e.prototype.render=function(){var n=this,r,s=this.props,o=s.image,l=s.video,u=s.mediaProps,d=s.cropperProps,p=s.transform,g=s.crop,v=g.x,w=g.y,T=s.rotation,A=s.zoom,N=s.cropShape,C=s.showGrid,D=s.roundCropAreaPixels,j=s.style,F=j.containerStyle,W=j.cropAreaStyle,K=j.mediaStyle,B=s.classes,I=B.containerClassName,R=B.cropAreaClassName,P=B.mediaClassName,M=(r=this.state.mediaObjectFit)!==null&&r!==void 0?r:this.getObjectFit();return x.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(q){return n.containerRef=q},"data-testid":"container",style:F,className:Th("reactEasyCrop_Container",I)},o?x.createElement("img",Xt({alt:"",className:Th("reactEasyCrop_Image",M==="contain"&&"reactEasyCrop_Contain",M==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",M==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",P)},u,{src:o,ref:this.imageRef,style:Xt(Xt({},K),{transform:p||"translate(".concat(v,"px, ").concat(w,"px) rotate(").concat(T,"deg) scale(").concat(A,")")}),onLoad:this.onMediaLoad})):l&&x.createElement("video",Xt({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Th("reactEasyCrop_Video",M==="contain"&&"reactEasyCrop_Contain",M==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",M==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",P)},u,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Xt(Xt({},K),{transform:p||"translate(".concat(v,"px, ").concat(w,"px) rotate(").concat(T,"deg) scale(").concat(A,")")}),controls:!1}),(Array.isArray(l)?l:[{src:l}]).map(function(O){return x.createElement("source",Xt({key:O.src},O))})),this.state.cropSize&&x.createElement("div",Xt({ref:this.cropperRef,style:Xt(Xt({},W),{width:D?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:D?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Th("reactEasyCrop_CropArea",N==="round"&&"reactEasyCrop_CropAreaRound",C&&"reactEasyCrop_CropAreaGrid",R)},d)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:tB,minZoom:eB,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:nB},e.getMousePoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e.getTouchPoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e})(x.Component);const sB=({userId:t,currentAvatar:e,onUploadComplete:n})=>{const[r,s]=x.useState(null),[o,l]=x.useState({x:0,y:0}),[u,d]=x.useState(1),[p,g]=x.useState(null),[v,w]=x.useState(!1),[T,A]=x.useState(!1),N=x.useCallback((W,K)=>{g(K)},[]),C=async W=>{if(W.target.files&&W.target.files.length>0){const K=W.target.files[0],B=new FileReader;B.addEventListener("load",()=>{s(B.result),A(!0)}),B.readAsDataURL(K)}},D=W=>new Promise((K,B)=>{const I=new Image;I.addEventListener("load",()=>K(I)),I.addEventListener("error",R=>B(R)),I.setAttribute("crossOrigin","anonymous"),I.src=W}),j=async(W,K)=>{const B=await D(W),I=document.createElement("canvas"),R=I.getContext("2d");if(!R)throw new Error("No 2d context");return I.width=K.width,I.height=K.height,R.drawImage(B,K.x,K.y,K.width,K.height,0,0,K.width,K.height),new Promise((P,M)=>{I.toBlob(O=>{if(!O){M(new Error("Canvas is empty"));return}P(O)},"image/jpeg")})},F=async()=>{if(!(!r||!p)){w(!0),console.log("Starting upload process...");try{console.log("Cropping image...");const W=await j(r,p);console.log("Image cropped successfully");const K=`avatars/${t}_${Date.now()}.jpg`,B=kO(OO,K);console.log("Uploading to Storage:",K);const I=await AO(B,W);console.log("Upload complete");const R=await NO(I.ref);console.log("Download URL obtained:",R),console.log("Updating Firestore..."),await Bs(st(xe,"users",t),{avatar:R}),console.log("Firestore updated"),n(R),A(!1),s(null)}catch(W){console.error("Detailed upload error:",W),alert("Failed to save image. Please check your internet connection or try again.")}finally{w(!1)}}};return h.jsxs("div",{className:"relative group",children:[h.jsxs("div",{className:"relative w-36 h-36 md:w-44 md:h-44 rounded-full border-4 border-white shadow-2xl overflow-hidden bg-white",children:[h.jsx("img",{src:e||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t}`,alt:"Avatar",className:"w-full h-full object-cover"}),h.jsxs("label",{className:"absolute inset-0 bg-black/20 md:bg-black/0 md:group-hover:bg-black/40 flex items-center justify-center transition-all cursor-pointer",children:[h.jsx("input",{type:"file",accept:"image/*",onChange:C,className:"hidden"}),h.jsx("div",{className:"md:opacity-0 md:group-hover:opacity-100 transition-opacity flex items-center justify-center",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-8 h-8 text-white",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15a2.25 2.25 0 002.25-2.25V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]})})]})]}),h.jsx("div",{className:"absolute bottom-2 right-2 p-3 bg-[#0066FF] text-white rounded-full shadow-lg border-2 border-white pointer-events-none md:pointer-events-auto",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-4 h-4",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15a2.25 2.25 0 002.25-2.25V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]})}),h.jsx(rs,{children:T&&r&&h.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",children:[h.jsx(we.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/70"}),h.jsxs(we.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative w-full max-w-lg bg-white rounded-3xl overflow-hidden shadow-2xl",children:[h.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[h.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Crop Profile Picture"}),h.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),h.jsx("div",{className:"relative h-96 bg-gray-900",children:h.jsx(rB,{image:r,crop:o,zoom:u,aspect:1,onCropChange:l,onCropComplete:N,onZoomChange:d})}),h.jsxs("div",{className:"p-6 space-y-6",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:"Zoom"}),h.jsx("input",{type:"range",value:u,min:1,max:3,step:.1,onChange:W=>d(Number(W.target.value)),className:"flex-grow accent-[#0066FF]"})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>A(!1),className:"flex-1 px-6 py-3 rounded-2xl border-2 border-gray-100 font-bold text-gray-500 hover:bg-gray-50 transition-all",children:"Cancel"}),h.jsx("button",{onClick:F,disabled:v,className:"flex-[2] px-6 py-3 rounded-2xl bg-[#0066FF] text-white font-bold shadow-xl shadow-blue-500/20 hover:bg-blue-700 transition-all disabled:opacity-50",children:v?"Processing...":"Save Picture"})]})]})]})]})})]})};function iB(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return x.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const fp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ql(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function zv(t){return"nodeType"in t}function tr(t){var e,n;return t?ql(t)?t:zv(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function $v(t){const{Document:e}=tr(t);return t instanceof e}function Zu(t){return ql(t)?!1:t instanceof tr(t).HTMLElement}function RR(t){return t instanceof tr(t).SVGElement}function Hl(t){return t?ql(t)?t.document:zv(t)?$v(t)?t:Zu(t)||RR(t)?t.ownerDocument:document:document:document}const zs=fp?x.useLayoutEffect:x.useEffect;function Wv(t){const e=x.useRef(t);return zs(()=>{e.current=t}),x.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function oB(){const t=x.useRef(null),e=x.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=x.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Nu(t,e){e===void 0&&(e=[t]);const n=x.useRef(t);return zs(()=>{n.current!==t&&(n.current=t)},e),n}function ed(t,e){const n=x.useRef();return x.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function bf(t){const e=Wv(t),n=x.useRef(null),r=x.useCallback(s=>{s!==n.current&&e?.(s,n.current),n.current=s},[]);return[n,r]}function L0(t){const e=x.useRef();return x.useEffect(()=>{e.current=t},[t]),e.current}let kg={};function td(t,e){return x.useMemo(()=>{if(e)return e;const n=kg[t]==null?0:kg[t]+1;return kg[t]=n,t+"-"+n},[t,e])}function AR(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((o,l)=>{const u=Object.entries(l);for(const[d,p]of u){const g=o[d];g!=null&&(o[d]=g+t*p)}return o},{...e})}}const bl=AR(1),ku=AR(-1);function aB(t){return"clientX"in t&&"clientY"in t}function qv(t){if(!t)return!1;const{KeyboardEvent:e}=tr(t.target);return e&&t instanceof e}function lB(t){if(!t)return!1;const{TouchEvent:e}=tr(t.target);return e&&t instanceof e}function O0(t){if(lB(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return aB(t)?{x:t.clientX,y:t.clientY}:null}const Pu=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Pu.Translate.toString(t),Pu.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),ME="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function cB(t){return t.matches(ME)?t:t.querySelector(ME)}const uB={display:"none"};function dB(t){let{id:e,value:n}=t;return Cn.createElement("div",{id:e,style:uB},n)}function hB(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Cn.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function fB(){const[t,e]=x.useState("");return{announce:x.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const NR=x.createContext(null);function pB(t){const e=x.useContext(NR);x.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function mB(){const[t]=x.useState(()=>new Set),e=x.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[x.useCallback(r=>{let{type:s,event:o}=r;t.forEach(l=>{var u;return(u=l[s])==null?void 0:u.call(l,o)})},[t]),e]}const gB={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},yB={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function vB(t){let{announcements:e=yB,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=gB}=t;const{announce:o,announcement:l}=fB(),u=td("DndLiveRegion"),[d,p]=x.useState(!1);if(x.useEffect(()=>{p(!0)},[]),pB(x.useMemo(()=>({onDragStart(v){let{active:w}=v;o(e.onDragStart({active:w}))},onDragMove(v){let{active:w,over:T}=v;e.onDragMove&&o(e.onDragMove({active:w,over:T}))},onDragOver(v){let{active:w,over:T}=v;o(e.onDragOver({active:w,over:T}))},onDragEnd(v){let{active:w,over:T}=v;o(e.onDragEnd({active:w,over:T}))},onDragCancel(v){let{active:w,over:T}=v;o(e.onDragCancel({active:w,over:T}))}}),[o,e])),!d)return null;const g=Cn.createElement(Cn.Fragment,null,Cn.createElement(dB,{id:r,value:s.draggable}),Cn.createElement(hB,{id:u,announcement:l}));return n?zc.createPortal(g,n):g}var Wt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Wt||(Wt={}));function _f(){}function LE(t,e){return x.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function wB(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return x.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const ss=Object.freeze({x:0,y:0});function kR(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function PR(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function xB(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function OE(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function jR(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function VE(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const bB=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=VE(e,e.left,e.top),o=[];for(const l of r){const{id:u}=l,d=n.get(u);if(d){const p=kR(VE(d),s);o.push({id:u,data:{droppableContainer:l,value:p}})}}return o.sort(PR)},_B=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=OE(e),o=[];for(const l of r){const{id:u}=l,d=n.get(u);if(d){const p=OE(d),g=s.reduce((w,T,A)=>w+kR(p[A],T),0),v=Number((g/4).toFixed(4));o.push({id:u,data:{droppableContainer:l,value:v}})}}return o.sort(PR)};function EB(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height),l=s-r,u=o-n;if(r<s&&n<o){const d=e.width*e.height,p=t.width*t.height,g=l*u,v=g/(d+p-g);return Number(v.toFixed(4))}return 0}const TB=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const o of r){const{id:l}=o,u=n.get(l);if(u){const d=EB(u,e);d>0&&s.push({id:l,data:{droppableContainer:o,value:d}})}}return s.sort(xB)};function SB(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function DR(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:ss}function CB(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s.reduce((l,u)=>({...l,top:l.top+t*u.y,bottom:l.bottom+t*u.y,left:l.left+t*u.x,right:l.right+t*u.x}),{...n})}}const IB=CB(1);function RB(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function AB(t,e,n){const r=RB(e);if(!r)return t;const{scaleX:s,scaleY:o,x:l,y:u}=r,d=t.left-l-(1-s)*parseFloat(n),p=t.top-u-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),g=s?t.width/s:t.width,v=o?t.height/o:t.height;return{width:g,height:v,top:p,right:d+g,bottom:p+v,left:d}}const NB={ignoreTransform:!1};function Gl(t,e){e===void 0&&(e=NB);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:p,transformOrigin:g}=tr(t).getComputedStyle(t);p&&(n=AB(n,p,g))}const{top:r,left:s,width:o,height:l,bottom:u,right:d}=n;return{top:r,left:s,width:o,height:l,bottom:u,right:d}}function FE(t){return Gl(t,{ignoreTransform:!0})}function kB(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function PB(t,e){return e===void 0&&(e=tr(t).getComputedStyle(t)),e.position==="fixed"}function jB(t,e){e===void 0&&(e=tr(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=e[s];return typeof o=="string"?n.test(o):!1})}function pp(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if($v(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Zu(s)||RR(s)||n.includes(s))return n;const o=tr(t).getComputedStyle(s);return s!==t&&jB(s,o)&&n.push(s),PB(s,o)?n:r(s.parentNode)}return t?r(t):n}function MR(t){const[e]=pp(t,1);return e??null}function Pg(t){return!fp||!t?null:ql(t)?t:zv(t)?$v(t)||t===Hl(t).scrollingElement?window:Zu(t)?t:null:null}function LR(t){return ql(t)?t.scrollX:t.scrollLeft}function OR(t){return ql(t)?t.scrollY:t.scrollTop}function V0(t){return{x:LR(t),y:OR(t)}}var Zt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Zt||(Zt={}));function VR(t){return!fp||!t?!1:t===document.scrollingElement}function FR(t){const e={x:0,y:0},n=VR(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,o=t.scrollLeft<=e.x,l=t.scrollTop>=r.y,u=t.scrollLeft>=r.x;return{isTop:s,isLeft:o,isBottom:l,isRight:u,maxScroll:r,minScroll:e}}const DB={x:.2,y:.2};function MB(t,e,n,r,s){let{top:o,left:l,right:u,bottom:d}=n;r===void 0&&(r=10),s===void 0&&(s=DB);const{isTop:p,isBottom:g,isLeft:v,isRight:w}=FR(t),T={x:0,y:0},A={x:0,y:0},N={height:e.height*s.y,width:e.width*s.x};return!p&&o<=e.top+N.height?(T.y=Zt.Backward,A.y=r*Math.abs((e.top+N.height-o)/N.height)):!g&&d>=e.bottom-N.height&&(T.y=Zt.Forward,A.y=r*Math.abs((e.bottom-N.height-d)/N.height)),!w&&u>=e.right-N.width?(T.x=Zt.Forward,A.x=r*Math.abs((e.right-N.width-u)/N.width)):!v&&l<=e.left+N.width&&(T.x=Zt.Backward,A.x=r*Math.abs((e.left+N.width-l)/N.width)),{direction:T,speed:A}}function LB(t){if(t===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function UR(t){return t.reduce((e,n)=>bl(e,V0(n)),ss)}function OB(t){return t.reduce((e,n)=>e+LR(n),0)}function VB(t){return t.reduce((e,n)=>e+OR(n),0)}function FB(t,e){if(e===void 0&&(e=Gl),!t)return;const{top:n,left:r,bottom:s,right:o}=e(t);MR(t)&&(s<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const UB=[["x",["left","right"],OB],["y",["top","bottom"],VB]];class Hv{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=pp(n),s=UR(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,l,u]of UB)for(const d of l)Object.defineProperty(this,d,{get:()=>{const p=u(r),g=s[o]-p;return this.rect[d]+g},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class cu{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function BB(t){const{EventTarget:e}=tr(t);return t instanceof e?t:Hl(t)}function jg(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Rr;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Rr||(Rr={}));function UE(t){t.preventDefault()}function zB(t){t.stopPropagation()}var qe;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(qe||(qe={}));const BR={start:[qe.Space,qe.Enter],cancel:[qe.Esc],end:[qe.Space,qe.Enter,qe.Tab]},$B=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case qe.Right:return{...n,x:n.x+25};case qe.Left:return{...n,x:n.x-25};case qe.Down:return{...n,y:n.y+25};case qe.Up:return{...n,y:n.y-25}}};class Gv{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new cu(Hl(n)),this.windowListeners=new cu(tr(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Rr.Resize,this.handleCancel),this.windowListeners.add(Rr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Rr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&FB(r),n(ss)}handleKeyDown(e){if(qv(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:o=BR,coordinateGetter:l=$B,scrollBehavior:u="smooth"}=s,{code:d}=e;if(o.end.includes(d)){this.handleEnd(e);return}if(o.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:p}=r.current,g=p?{x:p.left,y:p.top}:ss;this.referenceCoordinates||(this.referenceCoordinates=g);const v=l(e,{active:n,context:r.current,currentCoordinates:g});if(v){const w=ku(v,g),T={x:0,y:0},{scrollableAncestors:A}=r.current;for(const N of A){const C=e.code,{isTop:D,isRight:j,isLeft:F,isBottom:W,maxScroll:K,minScroll:B}=FR(N),I=LB(N),R={x:Math.min(C===qe.Right?I.right-I.width/2:I.right,Math.max(C===qe.Right?I.left:I.left+I.width/2,v.x)),y:Math.min(C===qe.Down?I.bottom-I.height/2:I.bottom,Math.max(C===qe.Down?I.top:I.top+I.height/2,v.y))},P=C===qe.Right&&!j||C===qe.Left&&!F,M=C===qe.Down&&!W||C===qe.Up&&!D;if(P&&R.x!==v.x){const O=N.scrollLeft+w.x,q=C===qe.Right&&O<=K.x||C===qe.Left&&O>=B.x;if(q&&!w.y){N.scrollTo({left:O,behavior:u});return}q?T.x=N.scrollLeft-O:T.x=C===qe.Right?N.scrollLeft-K.x:N.scrollLeft-B.x,T.x&&N.scrollBy({left:-T.x,behavior:u});break}else if(M&&R.y!==v.y){const O=N.scrollTop+w.y,q=C===qe.Down&&O<=K.y||C===qe.Up&&O>=B.y;if(q&&!w.x){N.scrollTo({top:O,behavior:u});return}q?T.y=N.scrollTop-O:T.y=C===qe.Down?N.scrollTop-K.y:N.scrollTop-B.y,T.y&&N.scrollBy({top:-T.y,behavior:u});break}}this.handleMove(e,bl(ku(v,this.referenceCoordinates),T))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Gv.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=BR,onActivation:s}=e,{active:o}=n;const{code:l}=t.nativeEvent;if(r.start.includes(l)){const u=o.activatorNode.current;return u&&t.target!==u?!1:(t.preventDefault(),s?.({event:t.nativeEvent}),!0)}return!1}}];function BE(t){return!!(t&&"distance"in t)}function zE(t){return!!(t&&"delay"in t)}class Kv{constructor(e,n,r){var s;r===void 0&&(r=BB(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:o}=e,{target:l}=o;this.props=e,this.events=n,this.document=Hl(l),this.documentListeners=new cu(this.document),this.listeners=new cu(r),this.windowListeners=new cu(tr(l)),this.initialCoordinates=(s=O0(o))!=null?s:ss,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Rr.Resize,this.handleCancel),this.windowListeners.add(Rr.DragStart,UE),this.windowListeners.add(Rr.VisibilityChange,this.handleCancel),this.windowListeners.add(Rr.ContextMenu,UE),this.documentListeners.add(Rr.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(zE(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(BE(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Rr.Click,zB,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Rr.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:o}=this,{onMove:l,options:{activationConstraint:u}}=o;if(!s)return;const d=(n=O0(e))!=null?n:ss,p=ku(s,d);if(!r&&u){if(BE(u)){if(u.tolerance!=null&&jg(p,u.tolerance))return this.handleCancel();if(jg(p,u.distance))return this.handleStart()}if(zE(u)&&jg(p,u.tolerance))return this.handleCancel();this.handlePending(u,p);return}e.cancelable&&e.preventDefault(),l(d)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===qe.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const WB={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Yv extends Kv{constructor(e){const{event:n}=e,r=Hl(n.target);super(e,WB,r)}}Yv.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const qB={move:{name:"mousemove"},end:{name:"mouseup"}};var F0;(function(t){t[t.RightClick=2]="RightClick"})(F0||(F0={}));class HB extends Kv{constructor(e){super(e,qB,Hl(e.event.target))}}HB.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===F0.RightClick?!1:(r?.({event:n}),!0)}}];const Dg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class GB extends Kv{constructor(e){super(e,Dg)}static setup(){return window.addEventListener(Dg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Dg.move.name,e)};function e(){}}}GB.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r?.({event:n}),!0)}}];var uu;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(uu||(uu={}));var Ef;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Ef||(Ef={}));function KB(t){let{acceleration:e,activator:n=uu.Pointer,canScroll:r,draggingRect:s,enabled:o,interval:l=5,order:u=Ef.TreeOrder,pointerCoordinates:d,scrollableAncestors:p,scrollableAncestorRects:g,delta:v,threshold:w}=t;const T=QB({delta:v,disabled:!o}),[A,N]=oB(),C=x.useRef({x:0,y:0}),D=x.useRef({x:0,y:0}),j=x.useMemo(()=>{switch(n){case uu.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case uu.DraggableRect:return s}},[n,s,d]),F=x.useRef(null),W=x.useCallback(()=>{const B=F.current;if(!B)return;const I=C.current.x*D.current.x,R=C.current.y*D.current.y;B.scrollBy(I,R)},[]),K=x.useMemo(()=>u===Ef.TreeOrder?[...p].reverse():p,[u,p]);x.useEffect(()=>{if(!o||!p.length||!j){N();return}for(const B of K){if(r?.(B)===!1)continue;const I=p.indexOf(B),R=g[I];if(!R)continue;const{direction:P,speed:M}=MB(B,R,j,e,w);for(const O of["x","y"])T[O][P[O]]||(M[O]=0,P[O]=0);if(M.x>0||M.y>0){N(),F.current=B,A(W,l),C.current=M,D.current=P;return}}C.current={x:0,y:0},D.current={x:0,y:0},N()},[e,W,r,N,o,l,JSON.stringify(j),JSON.stringify(T),A,p,K,g,JSON.stringify(w)])}const YB={x:{[Zt.Backward]:!1,[Zt.Forward]:!1},y:{[Zt.Backward]:!1,[Zt.Forward]:!1}};function QB(t){let{delta:e,disabled:n}=t;const r=L0(e);return ed(s=>{if(n||!r||!s)return YB;const o={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Zt.Backward]:s.x[Zt.Backward]||o.x===-1,[Zt.Forward]:s.x[Zt.Forward]||o.x===1},y:{[Zt.Backward]:s.y[Zt.Backward]||o.y===-1,[Zt.Forward]:s.y[Zt.Forward]||o.y===1}}},[n,e,r])}function XB(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return ed(s=>{var o;return e==null?null:(o=r??s)!=null?o:null},[r,e])}function JB(t,e){return x.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,o=s.activators.map(l=>({eventName:l.eventName,handler:e(l.handler,r)}));return[...n,...o]},[]),[t,e])}var ju;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ju||(ju={}));var U0;(function(t){t.Optimized="optimized"})(U0||(U0={}));const $E=new Map;function ZB(t,e){let{dragging:n,dependencies:r,config:s}=e;const[o,l]=x.useState(null),{frequency:u,measure:d,strategy:p}=s,g=x.useRef(t),v=C(),w=Nu(v),T=x.useCallback(function(D){D===void 0&&(D=[]),!w.current&&l(j=>j===null?D:j.concat(D.filter(F=>!j.includes(F))))},[w]),A=x.useRef(null),N=ed(D=>{if(v&&!n)return $E;if(!D||D===$E||g.current!==t||o!=null){const j=new Map;for(let F of t){if(!F)continue;if(o&&o.length>0&&!o.includes(F.id)&&F.rect.current){j.set(F.id,F.rect.current);continue}const W=F.node.current,K=W?new Hv(d(W),W):null;F.rect.current=K,K&&j.set(F.id,K)}return j}return D},[t,o,n,v,d]);return x.useEffect(()=>{g.current=t},[t]),x.useEffect(()=>{v||T()},[n,v]),x.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),x.useEffect(()=>{v||typeof u!="number"||A.current!==null||(A.current=setTimeout(()=>{T(),A.current=null},u))},[u,v,T,...r]),{droppableRects:N,measureDroppableContainers:T,measuringScheduled:o!=null};function C(){switch(p){case ju.Always:return!1;case ju.BeforeDragging:return n;default:return!n}}}function zR(t,e){return ed(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function ez(t,e){return zR(t,e)}function tz(t){let{callback:e,disabled:n}=t;const r=Wv(e),s=x.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return x.useEffect(()=>()=>s?.disconnect(),[s]),s}function mp(t){let{callback:e,disabled:n}=t;const r=Wv(e),s=x.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return x.useEffect(()=>()=>s?.disconnect(),[s]),s}function nz(t){return new Hv(Gl(t),t)}function WE(t,e,n){e===void 0&&(e=nz);const[r,s]=x.useState(null);function o(){s(d=>{if(!t)return null;if(t.isConnected===!1){var p;return(p=d??n)!=null?p:null}const g=e(t);return JSON.stringify(d)===JSON.stringify(g)?d:g})}const l=tz({callback(d){if(t)for(const p of d){const{type:g,target:v}=p;if(g==="childList"&&v instanceof HTMLElement&&v.contains(t)){o();break}}}}),u=mp({callback:o});return zs(()=>{o(),t?(u?.observe(t),l?.observe(document.body,{childList:!0,subtree:!0})):(u?.disconnect(),l?.disconnect())},[t]),r}function rz(t){const e=zR(t);return DR(t,e)}const qE=[];function sz(t){const e=x.useRef(t),n=ed(r=>t?r&&r!==qE&&t&&e.current&&t.parentNode===e.current.parentNode?r:pp(t):qE,[t]);return x.useEffect(()=>{e.current=t},[t]),n}function iz(t){const[e,n]=x.useState(null),r=x.useRef(t),s=x.useCallback(o=>{const l=Pg(o.target);l&&n(u=>u?(u.set(l,V0(l)),new Map(u)):null)},[]);return x.useEffect(()=>{const o=r.current;if(t!==o){l(o);const u=t.map(d=>{const p=Pg(d);return p?(p.addEventListener("scroll",s,{passive:!0}),[p,V0(p)]):null}).filter(d=>d!=null);n(u.length?new Map(u):null),r.current=t}return()=>{l(t),l(o)};function l(u){u.forEach(d=>{const p=Pg(d);p?.removeEventListener("scroll",s)})}},[s,t]),x.useMemo(()=>t.length?e?Array.from(e.values()).reduce((o,l)=>bl(o,l),ss):UR(t):ss,[t,e])}function HE(t,e){e===void 0&&(e=[]);const n=x.useRef(null);return x.useEffect(()=>{n.current=null},e),x.useEffect(()=>{const r=t!==ss;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?ku(t,n.current):ss}function oz(t){x.useEffect(()=>{if(!fp)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n?.()}},t.map(e=>{let{sensor:n}=e;return n}))}function az(t,e){return x.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:o}=r;return n[s]=l=>{o(l,e)},n},{}),[t,e])}function $R(t){return x.useMemo(()=>t?kB(t):null,[t])}const GE=[];function lz(t,e){e===void 0&&(e=Gl);const[n]=t,r=$R(n?tr(n):null),[s,o]=x.useState(GE);function l(){o(()=>t.length?t.map(d=>VR(d)?r:new Hv(e(d),d)):GE)}const u=mp({callback:l});return zs(()=>{u?.disconnect(),l(),t.forEach(d=>u?.observe(d))},[t]),s}function cz(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Zu(e)?e:t}function uz(t){let{measure:e}=t;const[n,r]=x.useState(null),s=x.useCallback(p=>{for(const{target:g}of p)if(Zu(g)){r(v=>{const w=e(g);return v?{...v,width:w.width,height:w.height}:w});break}},[e]),o=mp({callback:s}),l=x.useCallback(p=>{const g=cz(p);o?.disconnect(),g&&o?.observe(g),r(g?e(g):null)},[e,o]),[u,d]=bf(l);return x.useMemo(()=>({nodeRef:u,rect:n,setRef:d}),[n,u,d])}const dz=[{sensor:Yv,options:{}},{sensor:Gv,options:{}}],hz={current:{}},qh={draggable:{measure:FE},droppable:{measure:FE,strategy:ju.WhileDragging,frequency:U0.Optimized},dragOverlay:{measure:Gl}};class du extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const fz={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new du,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:_f},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:qh,measureDroppableContainers:_f,windowRect:null,measuringScheduled:!1},pz={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:_f,draggableNodes:new Map,over:null,measureDroppableContainers:_f},gp=x.createContext(pz),WR=x.createContext(fz);function mz(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new du}}}function gz(t,e){switch(e.type){case Wt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Wt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Wt.DragEnd:case Wt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Wt.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new du(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case Wt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,o=t.droppable.containers.get(n);if(!o||r!==o.key)return t;const l=new du(t.droppable.containers);return l.set(n,{...o,disabled:s}),{...t,droppable:{...t.droppable,containers:l}}}case Wt.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new du(t.droppable.containers);return o.delete(n),{...t,droppable:{...t.droppable,containers:o}}}default:return t}}function yz(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=x.useContext(gp),o=L0(r),l=L0(n?.id);return x.useEffect(()=>{if(!e&&!r&&o&&l!=null){if(!qv(o)||document.activeElement===o.target)return;const u=s.get(l);if(!u)return;const{activatorNode:d,node:p}=u;if(!d.current&&!p.current)return;requestAnimationFrame(()=>{for(const g of[d.current,p.current]){if(!g)continue;const v=cB(g);if(v){v.focus();break}}})}},[r,e,s,l,o]),null}function vz(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,o)=>o({transform:s,...r}),n):n}function wz(t){return x.useMemo(()=>({draggable:{...qh.draggable,...t?.draggable},droppable:{...qh.droppable,...t?.droppable},dragOverlay:{...qh.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function xz(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const o=x.useRef(!1),{x:l,y:u}=typeof s=="boolean"?{x:s,y:s}:s;zs(()=>{if(!l&&!u||!e){o.current=!1;return}if(o.current||!r)return;const p=e?.node.current;if(!p||p.isConnected===!1)return;const g=n(p),v=DR(g,r);if(l||(v.x=0),u||(v.y=0),o.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const w=MR(p);w&&w.scrollBy({top:v.y,left:v.x})}},[e,l,u,r,n])}const qR=x.createContext({...ss,scaleX:1,scaleY:1});var Ji;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ji||(Ji={}));const bz=x.memo(function(e){var n,r,s,o;let{id:l,accessibility:u,autoScroll:d=!0,children:p,sensors:g=dz,collisionDetection:v=TB,measuring:w,modifiers:T,...A}=e;const N=x.useReducer(gz,void 0,mz),[C,D]=N,[j,F]=mB(),[W,K]=x.useState(Ji.Uninitialized),B=W===Ji.Initialized,{draggable:{active:I,nodes:R,translate:P},droppable:{containers:M}}=C,O=I!=null?R.get(I):null,q=x.useRef({initial:null,translated:null}),L=x.useMemo(()=>{var Ve;return I!=null?{id:I,data:(Ve=O?.data)!=null?Ve:hz,rect:q}:null},[I,O]),ke=x.useRef(null),[Xe,ht]=x.useState(null),[ge,se]=x.useState(null),le=Nu(A,Object.values(A)),Z=td("DndDescribedBy",l),U=x.useMemo(()=>M.getEnabled(),[M]),J=wz(w),{droppableRects:ve,measureDroppableContainers:be,measuringScheduled:Pe}=ZB(U,{dragging:B,dependencies:[P.x,P.y],config:J.droppable}),Te=XB(R,I),Ue=x.useMemo(()=>ge?O0(ge):null,[ge]),je=zr(),Oe=ez(Te,J.draggable.measure);xz({activeNode:I!=null?R.get(I):null,config:je.layoutShiftCompensation,initialRect:Oe,measure:J.draggable.measure});const Ie=WE(Te,J.draggable.measure,Oe),vr=WE(Te?Te.parentElement:null),mn=x.useRef({activatorEvent:null,active:null,activeNode:Te,collisionRect:null,collisions:null,droppableRects:ve,draggableNodes:R,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),kn=M.getNodeFor((n=mn.current.over)==null?void 0:n.id),gn=uz({measure:J.dragOverlay.measure}),Fr=(r=gn.nodeRef.current)!=null?r:Te,nr=B?(s=gn.rect)!=null?s:Ie:null,as=!!(gn.nodeRef.current&&gn.rect),_i=rz(as?null:Ie),ft=$R(Fr?tr(Fr):null),Je=sz(B?kn??Te:null),yn=lz(Je),ls=vz(T,{transform:{x:P.x-_i.x,y:P.y-_i.y,scaleX:1,scaleY:1},activatorEvent:ge,active:L,activeNodeRect:Ie,containerNodeRect:vr,draggingNodeRect:nr,over:mn.current.over,overlayNodeRect:gn.rect,scrollableAncestors:Je,scrollableAncestorRects:yn,windowRect:ft}),Ei=Ue?bl(Ue,P):null,Co=iz(Je),cs=HE(Co),Io=HE(Co,[Ie]),rr=bl(ls,cs),Pn=nr?IB(nr,ls):null,us=L&&Pn?v({active:L,collisionRect:Pn,droppableRects:ve,droppableContainers:U,pointerCoordinates:Ei}):null,ds=jR(us,"id"),[tn,Ro]=x.useState(null),hs=as?ls:bl(ls,Io),Ti=SB(hs,(o=tn?.rect)!=null?o:null,Ie),Ws=x.useRef(null),Bn=x.useCallback((Ve,Ut)=>{let{sensor:bt,options:nn}=Ut;if(ke.current==null)return;const rn=R.get(ke.current);if(!rn)return;const Ht=Ve.nativeEvent,It=new bt({active:ke.current,activeNode:rn,event:Ht,options:nn,context:mn,onAbort(lt){if(!R.get(lt))return;const{onDragAbort:Bt}=le.current,zn={id:lt};Bt?.(zn),j({type:"onDragAbort",event:zn})},onPending(lt,sn,Bt,zn){if(!R.get(lt))return;const{onDragPending:vn}=le.current,Dn={id:lt,constraint:sn,initialCoordinates:Bt,offset:zn};vn?.(Dn),j({type:"onDragPending",event:Dn})},onStart(lt){const sn=ke.current;if(sn==null)return;const Bt=R.get(sn);if(!Bt)return;const{onDragStart:zn}=le.current,jn={activatorEvent:Ht,active:{id:sn,data:Bt.data,rect:q}};zc.unstable_batchedUpdates(()=>{zn?.(jn),K(Ji.Initializing),D({type:Wt.DragStart,initialCoordinates:lt,active:sn}),j({type:"onDragStart",event:jn}),ht(Ws.current),se(Ht)})},onMove(lt){D({type:Wt.DragMove,coordinates:lt})},onEnd:$r(Wt.DragEnd),onCancel:$r(Wt.DragCancel)});Ws.current=It;function $r(lt){return async function(){const{active:Bt,collisions:zn,over:jn,scrollAdjustedTranslate:vn}=mn.current;let Dn=null;if(Bt&&vn){const{cancelDrop:Gt}=le.current;Dn={activatorEvent:Ht,active:Bt,collisions:zn,delta:vn,over:jn},lt===Wt.DragEnd&&typeof Gt=="function"&&await Promise.resolve(Gt(Dn))&&(lt=Wt.DragCancel)}ke.current=null,zc.unstable_batchedUpdates(()=>{D({type:lt}),K(Ji.Uninitialized),Ro(null),ht(null),se(null),Ws.current=null;const Gt=lt===Wt.DragEnd?"onDragEnd":"onDragCancel";if(Dn){const Ii=le.current[Gt];Ii?.(Dn),j({type:Gt,event:Dn})}})}}},[R]),Si=x.useCallback((Ve,Ut)=>(bt,nn)=>{const rn=bt.nativeEvent,Ht=R.get(nn);if(ke.current!==null||!Ht||rn.dndKit||rn.defaultPrevented)return;const It={active:Ht};Ve(bt,Ut.options,It)===!0&&(rn.dndKit={capturedBy:Ut.sensor},ke.current=nn,Bn(bt,Ut))},[R,Bn]),Ur=JB(g,Si);oz(g),zs(()=>{Ie&&W===Ji.Initializing&&K(Ji.Initialized)},[Ie,W]),x.useEffect(()=>{const{onDragMove:Ve}=le.current,{active:Ut,activatorEvent:bt,collisions:nn,over:rn}=mn.current;if(!Ut||!bt)return;const Ht={active:Ut,activatorEvent:bt,collisions:nn,delta:{x:rr.x,y:rr.y},over:rn};zc.unstable_batchedUpdates(()=>{Ve?.(Ht),j({type:"onDragMove",event:Ht})})},[rr.x,rr.y]),x.useEffect(()=>{const{active:Ve,activatorEvent:Ut,collisions:bt,droppableContainers:nn,scrollAdjustedTranslate:rn}=mn.current;if(!Ve||ke.current==null||!Ut||!rn)return;const{onDragOver:Ht}=le.current,It=nn.get(ds),$r=It&&It.rect.current?{id:It.id,rect:It.rect.current,data:It.data,disabled:It.disabled}:null,lt={active:Ve,activatorEvent:Ut,collisions:bt,delta:{x:rn.x,y:rn.y},over:$r};zc.unstable_batchedUpdates(()=>{Ro($r),Ht?.(lt),j({type:"onDragOver",event:lt})})},[ds]),zs(()=>{mn.current={activatorEvent:ge,active:L,activeNode:Te,collisionRect:Pn,collisions:us,droppableRects:ve,draggableNodes:R,draggingNode:Fr,draggingNodeRect:nr,droppableContainers:M,over:tn,scrollableAncestors:Je,scrollAdjustedTranslate:rr},q.current={initial:nr,translated:Pn}},[L,Te,us,Pn,R,Fr,nr,ve,M,tn,Je,rr]),KB({...je,delta:P,draggingRect:Pn,pointerCoordinates:Ei,scrollableAncestors:Je,scrollableAncestorRects:yn});const Ci=x.useMemo(()=>({active:L,activeNode:Te,activeNodeRect:Ie,activatorEvent:ge,collisions:us,containerNodeRect:vr,dragOverlay:gn,draggableNodes:R,droppableContainers:M,droppableRects:ve,over:tn,measureDroppableContainers:be,scrollableAncestors:Je,scrollableAncestorRects:yn,measuringConfiguration:J,measuringScheduled:Pe,windowRect:ft}),[L,Te,Ie,ge,us,vr,gn,R,M,ve,tn,be,Je,yn,J,Pe,ft]),Br=x.useMemo(()=>({activatorEvent:ge,activators:Ur,active:L,activeNodeRect:Ie,ariaDescribedById:{draggable:Z},dispatch:D,draggableNodes:R,over:tn,measureDroppableContainers:be}),[ge,Ur,L,Ie,D,Z,R,tn,be]);return Cn.createElement(NR.Provider,{value:F},Cn.createElement(gp.Provider,{value:Br},Cn.createElement(WR.Provider,{value:Ci},Cn.createElement(qR.Provider,{value:Ti},p)),Cn.createElement(yz,{disabled:u?.restoreFocus===!1})),Cn.createElement(vB,{...u,hiddenTextDescribedById:Z}));function zr(){const Ve=Xe?.autoScrollEnabled===!1,Ut=typeof d=="object"?d.enabled===!1:d===!1,bt=B&&!Ve&&!Ut;return typeof d=="object"?{...d,enabled:bt}:{enabled:bt}}}),_z=x.createContext(null),KE="button",Ez="Draggable";function Tz(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const o=td(Ez),{activators:l,activatorEvent:u,active:d,activeNodeRect:p,ariaDescribedById:g,draggableNodes:v,over:w}=x.useContext(gp),{role:T=KE,roleDescription:A="draggable",tabIndex:N=0}=s??{},C=d?.id===e,D=x.useContext(C?qR:_z),[j,F]=bf(),[W,K]=bf(),B=az(l,e),I=Nu(n);zs(()=>(v.set(e,{id:e,key:o,node:j,activatorNode:W,data:I}),()=>{const P=v.get(e);P&&P.key===o&&v.delete(e)}),[v,e]);const R=x.useMemo(()=>({role:T,tabIndex:N,"aria-disabled":r,"aria-pressed":C&&T===KE?!0:void 0,"aria-roledescription":A,"aria-describedby":g.draggable}),[r,T,N,C,A,g.draggable]);return{active:d,activatorEvent:u,activeNodeRect:p,attributes:R,isDragging:C,listeners:r?void 0:B,node:j,over:w,setNodeRef:F,setActivatorNodeRef:K,transform:D}}function Sz(){return x.useContext(WR)}const Cz="Droppable",Iz={timeout:25};function Rz(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const o=td(Cz),{active:l,dispatch:u,over:d,measureDroppableContainers:p}=x.useContext(gp),g=x.useRef({disabled:n}),v=x.useRef(!1),w=x.useRef(null),T=x.useRef(null),{disabled:A,updateMeasurementsFor:N,timeout:C}={...Iz,...s},D=Nu(N??r),j=x.useCallback(()=>{if(!v.current){v.current=!0;return}T.current!=null&&clearTimeout(T.current),T.current=setTimeout(()=>{p(Array.isArray(D.current)?D.current:[D.current]),T.current=null},C)},[C]),F=mp({callback:j,disabled:A||!l}),W=x.useCallback((R,P)=>{F&&(P&&(F.unobserve(P),v.current=!1),R&&F.observe(R))},[F]),[K,B]=bf(W),I=Nu(e);return x.useEffect(()=>{!F||!K.current||(F.disconnect(),v.current=!1,F.observe(K.current))},[K,F]),x.useEffect(()=>(u({type:Wt.RegisterDroppable,element:{id:r,key:o,disabled:n,node:K,rect:w,data:I}}),()=>u({type:Wt.UnregisterDroppable,key:o,id:r})),[r]),x.useEffect(()=>{n!==g.current.disabled&&(u({type:Wt.SetDroppableDisabled,id:r,key:o,disabled:n}),g.current.disabled=n)},[r,o,n,u]),{active:l,rect:w,isOver:d?.id===r,node:K,over:d,setNodeRef:B}}function Qv(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function Az(t,e){return t.reduce((n,r,s)=>{const o=e.get(r);return o&&(n[s]=o),n},Array(t.length))}function Sh(t){return t!==null&&t>=0}function Nz(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function kz(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const HR=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const o=Qv(e,r,n),l=e[s],u=o[s];return!u||!l?null:{x:u.left-l.left,y:u.top-l.top,scaleX:u.width/l.width,scaleY:u.height/l.height}},Ch={scaleX:1,scaleY:1},Pz=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:o,overIndex:l}=t;const u=(e=o[n])!=null?e:r;if(!u)return null;if(s===n){const p=o[l];return p?{x:0,y:n<l?p.top+p.height-(u.top+u.height):p.top-u.top,...Ch}:null}const d=jz(o,s,n);return s>n&&s<=l?{x:0,y:-u.height-d,...Ch}:s<n&&s>=l?{x:0,y:u.height+d,...Ch}:{x:0,y:0,...Ch}};function jz(t,e,n){const r=t[e],s=t[e-1],o=t[e+1];return r?n<e?s?r.top-(s.top+s.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const GR="Sortable",KR=Cn.createContext({activeIndex:-1,containerId:GR,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:HR,disabled:{draggable:!1,droppable:!1}});function Dz(t){let{children:e,id:n,items:r,strategy:s=HR,disabled:o=!1}=t;const{active:l,dragOverlay:u,droppableRects:d,over:p,measureDroppableContainers:g}=Sz(),v=td(GR,n),w=u.rect!==null,T=x.useMemo(()=>r.map(B=>typeof B=="object"&&"id"in B?B.id:B),[r]),A=l!=null,N=l?T.indexOf(l.id):-1,C=p?T.indexOf(p.id):-1,D=x.useRef(T),j=!Nz(T,D.current),F=C!==-1&&N===-1||j,W=kz(o);zs(()=>{j&&A&&g(T)},[j,T,A,g]),x.useEffect(()=>{D.current=T},[T]);const K=x.useMemo(()=>({activeIndex:N,containerId:v,disabled:W,disableTransforms:F,items:T,overIndex:C,useDragOverlay:w,sortedRects:Az(T,d),strategy:s}),[N,v,W.draggable,W.droppable,F,T,C,d,w,s]);return Cn.createElement(KR.Provider,{value:K},e)}const Mz=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return Qv(n,r,s).indexOf(e)},Lz=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:o,newIndex:l,previousItems:u,previousContainerId:d,transition:p}=t;return!p||!r||u!==o&&s===l?!1:n?!0:l!==s&&e===d},Oz={duration:200,easing:"ease"},YR="transform",Vz=Pu.Transition.toString({property:YR,duration:0,easing:"linear"}),Fz={roleDescription:"sortable"};function Uz(t){let{disabled:e,index:n,node:r,rect:s}=t;const[o,l]=x.useState(null),u=x.useRef(n);return zs(()=>{if(!e&&n!==u.current&&r.current){const d=s.current;if(d){const p=Gl(r.current,{ignoreTransform:!0}),g={x:d.left-p.left,y:d.top-p.top,scaleX:d.width/p.width,scaleY:d.height/p.height};(g.x||g.y)&&l(g)}}n!==u.current&&(u.current=n)},[e,n,r,s]),x.useEffect(()=>{o&&l(null)},[o]),o}function Bz(t){let{animateLayoutChanges:e=Lz,attributes:n,disabled:r,data:s,getNewIndex:o=Mz,id:l,strategy:u,resizeObserverConfig:d,transition:p=Oz}=t;const{items:g,containerId:v,activeIndex:w,disabled:T,disableTransforms:A,sortedRects:N,overIndex:C,useDragOverlay:D,strategy:j}=x.useContext(KR),F=zz(r,T),W=g.indexOf(l),K=x.useMemo(()=>({sortable:{containerId:v,index:W,items:g},...s}),[v,s,W,g]),B=x.useMemo(()=>g.slice(g.indexOf(l)),[g,l]),{rect:I,node:R,isOver:P,setNodeRef:M}=Rz({id:l,data:K,disabled:F.droppable,resizeObserverConfig:{updateMeasurementsFor:B,...d}}),{active:O,activatorEvent:q,activeNodeRect:L,attributes:ke,setNodeRef:Xe,listeners:ht,isDragging:ge,over:se,setActivatorNodeRef:le,transform:Z}=Tz({id:l,data:K,attributes:{...Fz,...n},disabled:F.draggable}),U=iB(M,Xe),J=!!O,ve=J&&!A&&Sh(w)&&Sh(C),be=!D&&ge,Pe=be&&ve?Z:null,Ue=ve?Pe??(u??j)({rects:N,activeNodeRect:L,activeIndex:w,overIndex:C,index:W}):null,je=Sh(w)&&Sh(C)?o({id:l,items:g,activeIndex:w,overIndex:C}):W,Oe=O?.id,Ie=x.useRef({activeId:Oe,items:g,newIndex:je,containerId:v}),vr=g!==Ie.current.items,mn=e({active:O,containerId:v,isDragging:ge,isSorting:J,id:l,index:W,items:g,newIndex:Ie.current.newIndex,previousItems:Ie.current.items,previousContainerId:Ie.current.containerId,transition:p,wasDragging:Ie.current.activeId!=null}),kn=Uz({disabled:!mn,index:W,node:R,rect:I});return x.useEffect(()=>{J&&Ie.current.newIndex!==je&&(Ie.current.newIndex=je),v!==Ie.current.containerId&&(Ie.current.containerId=v),g!==Ie.current.items&&(Ie.current.items=g)},[J,je,v,g]),x.useEffect(()=>{if(Oe===Ie.current.activeId)return;if(Oe!=null&&Ie.current.activeId==null){Ie.current.activeId=Oe;return}const Fr=setTimeout(()=>{Ie.current.activeId=Oe},50);return()=>clearTimeout(Fr)},[Oe]),{active:O,activeIndex:w,attributes:ke,data:K,rect:I,index:W,newIndex:je,items:g,isOver:P,isSorting:J,isDragging:ge,listeners:ht,node:R,overIndex:C,over:se,setNodeRef:U,setActivatorNodeRef:le,setDroppableNodeRef:M,setDraggableNodeRef:Xe,transform:kn??Ue,transition:gn()};function gn(){if(kn||vr&&Ie.current.newIndex===W)return Vz;if(!(be&&!qv(q)||!p)&&(J||mn))return Pu.Transition.toString({...p,property:YR})}}function zz(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t?.draggable)!=null?n:e.draggable,droppable:(r=t?.droppable)!=null?r:e.droppable}}function Tf(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const $z=[qe.Down,qe.Right,qe.Up,qe.Left],Wz=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:o,over:l,scrollableAncestors:u}}=e;if($z.includes(t.code)){if(t.preventDefault(),!n||!r)return;const d=[];o.getEnabled().forEach(v=>{if(!v||v!=null&&v.disabled)return;const w=s.get(v.id);if(w)switch(t.code){case qe.Down:r.top<w.top&&d.push(v);break;case qe.Up:r.top>w.top&&d.push(v);break;case qe.Left:r.left>w.left&&d.push(v);break;case qe.Right:r.left<w.left&&d.push(v);break}});const p=_B({collisionRect:r,droppableRects:s,droppableContainers:d});let g=jR(p,"id");if(g===l?.id&&p.length>1&&(g=p[1].id),g!=null){const v=o.get(n.id),w=o.get(g),T=w?s.get(w.id):null,A=w?.node.current;if(A&&T&&v&&w){const C=pp(A).some((B,I)=>u[I]!==B),D=QR(v,w),j=qz(v,w),F=C||!D?{x:0,y:0}:{x:j?r.width-T.width:0,y:j?r.height-T.height:0},W={x:T.left,y:T.top};return F.x&&F.y?W:ku(W,F)}}}};function QR(t,e){return!Tf(t)||!Tf(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function qz(t,e){return!Tf(t)||!Tf(e)||!QR(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const Hz=({id:t,skill:e,isOwnProfile:n,onRemove:r})=>{const{attributes:s,listeners:o,setNodeRef:l,transform:u,transition:d,isDragging:p}=Bz({id:t}),g={transform:Pu.Transform.toString(u),transition:d,zIndex:p?50:"auto"};return h.jsxs("div",{ref:l,style:g,className:`flex items-center justify-between gap-3 px-4 py-2 bg-white rounded-xl border border-gray-100 shadow-sm group ${p?"shadow-lg ring-2 ring-blue-100":""}`,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[n&&h.jsx("button",{...s,...o,className:"cursor-grab active:cursor-grabbing text-gray-300 hover:text-gray-500",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})}),h.jsx("span",{className:"text-sm font-bold text-gray-700",children:e})]}),n&&h.jsx("button",{onClick:()=>r(e),className:"opacity-0 group-hover:opacity-100 transition-opacity text-gray-400 hover:text-red-500",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})},Gz=["React","TypeScript","Next.js","Node.js","Python","Java","UI/UX Design","Figma","Firebase","AWS","Docker","Kubernetes","Go","Rust","Tailwind CSS"],Kz=({skills:t,isOwnProfile:e,onUpdate:n})=>{const[r,s]=x.useState(""),[o,l]=x.useState(!1),u=wB(LE(Yv),LE(Gv,{coordinateGetter:Wz})),d=w=>{const{active:T,over:A}=w;if(A&&T.id!==A.id){const N=t.indexOf(T.id),C=t.indexOf(A.id);n(Qv(t,N,C))}},p=w=>{const T=w.trim();T&&!t.includes(T)&&n([...t,T]),s(""),l(!1)},g=w=>{n(t.filter(T=>T!==w))},v=Gz.filter(w=>w.toLowerCase().includes(r.toLowerCase())&&!t.includes(w));return h.jsxs("div",{className:"space-y-6",children:[h.jsx("h3",{className:"font-black text-xl text-[#0f172a] mb-6 uppercase tracking-widest text-center",children:"Tech Stack"}),e&&h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",value:r,onChange:w=>{s(w.target.value),l(!0)},onFocus:()=>l(!0),onKeyDown:w=>{w.key==="Enter"&&p(r)},className:"w-full px-5 py-3 rounded-2xl bg-gray-50 border border-gray-100 focus:border-[#0066FF] focus:ring-4 focus:ring-blue-50 outline-none transition-all font-medium text-sm",placeholder:"Add a skill (e.g. Docker)..."}),o&&r&&v.length>0&&h.jsx("div",{className:"absolute z-50 left-0 right-0 mt-2 bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:v.map(w=>h.jsx("button",{onClick:()=>p(w),className:"w-full text-left px-5 py-3 hover:bg-gray-50 text-sm font-medium text-gray-700 transition-colors",children:w},w))})]}),h.jsx(bz,{sensors:u,collisionDetection:bB,onDragEnd:d,children:h.jsx("div",{className:"grid grid-cols-1 gap-3",children:h.jsx(Dz,{items:t,strategy:Pz,children:t.map(w=>h.jsx(Hz,{id:w,skill:w,isOwnProfile:e,onRemove:g},w))})})}),t.length===0&&h.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-2xl border-2 border-dashed border-gray-100",children:h.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"No skills added yet."})})]})},Yz=({onActionComplete:t})=>{const[e,n]=x.useState([]),[r,s]=x.useState(!0),o=async()=>{s(!0);try{const d=await jU(),p=await Promise.all(d.map(async g=>{const v=await Lr(st(xe,"users",g.requesterId));if(v.exists()){const w=v.data();return{...g,requesterName:w.name,requesterAvatar:w.avatar}}return g}));n(p)}catch(d){console.error("Error loading incoming requests:",d)}finally{s(!1)}};x.useEffect(()=>{o()},[]);const l=async d=>{try{await NU(d),n(p=>p.filter(g=>g.id!==d)),t()}catch(p){console.error("Error accepting request:",p)}},u=async d=>{try{await kU(d),n(p=>p.filter(g=>g.id!==d)),t()}catch(p){console.error("Error ignoring request:",p)}};return r||e.length===0?null:h.jsxs(we.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-xl shadow-blue-900/5 border border-white/50 p-8 mb-8",children:[h.jsx("div",{className:"flex justify-between items-center mb-6",children:h.jsxs("h3",{className:"text-xl font-black text-[#0f172a] flex items-center gap-3",children:[h.jsx("span",{className:"w-1.5 h-6 bg-green-500 rounded-full"}),"Incoming Requests",h.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-600 text-[10px] rounded-md",children:e.length})]})}),h.jsx("div",{className:"space-y-4",children:e.map(d=>h.jsxs("div",{className:"p-4 rounded-2xl bg-gray-50/50 border border-gray-100 flex flex-col md:flex-row gap-4 items-center md:items-center",children:[h.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0",children:h.jsx("img",{src:d.requesterAvatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${d.requesterId}`,alt:"",className:"w-full h-full object-cover"})}),h.jsxs("div",{className:"flex-grow text-center md:text-left",children:[h.jsx("h4",{className:"font-bold text-gray-900",children:d.requesterName||"Anonymous Student"}),d.note&&h.jsxs("p",{className:"text-sm text-gray-500 italic mt-1 line-clamp-2",children:['"',d.note,'"']})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>u(d.id),className:"px-4 py-2 text-xs font-bold text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-all",children:"Ignore"}),h.jsx("button",{onClick:()=>l(d.id),className:"px-6 py-2 text-xs font-bold bg-[#0066FF] text-white rounded-xl shadow-lg shadow-blue-500/20 hover:bg-blue-700 transition-all",children:"Accept"})]})]},d.id))})]})},Xv=async t=>{try{const e=st(xe,"users",t),n=await Lr(e);return n.exists()?{uid:t,...n.data()}:null}catch(e){return console.error("Error fetching profile:",e),null}},Qz=async(t,e)=>{try{const n=st(xe,"users",t);await sp(n,{...e,lastActive:fn()},{merge:!0})}catch(n){throw console.error("Error updating profile:",n),n}},Xz=({isOpen:t,onClose:e,userId:n,onSuccess:r})=>{const[s,o]=x.useState({name:"",headline:"",bio:"",college:"",skills:[]}),[l,u]=x.useState(""),[d,p]=x.useState(!0),[g,v]=x.useState(!1);x.useEffect(()=>{t&&n&&w()},[t,n]);const w=async()=>{p(!0);const A=await Xv(n);A&&(o(A),u(A.skills.join(", "))),p(!1)},T=async A=>{A.preventDefault(),v(!0);try{const N={...s,skills:l.split(",").map(C=>C.trim()).filter(Boolean)};await Qz(n,N),r&&r(),e()}catch(N){console.error("Failed to update profile:",N)}finally{v(!1)}};return h.jsx(rs,{children:t&&h.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[h.jsx(we.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),h.jsxs(we.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},className:"relative bg-white w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden",children:[h.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[h.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Profile"}),h.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:h.jsx(bR,{className:"h-6 w-6 text-gray-500"})})]}),d?h.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading profile..."}):h.jsxs("form",{onSubmit:T,className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Full Name"}),h.jsx("input",{type:"text",value:s.name,onChange:A=>o({...s,name:A.target.value}),className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0066FF] focus:bg-white transition-all outline-none",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Headline"}),h.jsx("input",{type:"text",value:s.headline,onChange:A=>o({...s,headline:A.target.value}),className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0066FF] focus:bg-white transition-all outline-none",placeholder:"e.g. Full Stack Developer | Student at MIT"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"College / Institution"}),h.jsx("input",{type:"text",value:s.college,onChange:A=>o({...s,college:A.target.value}),className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0066FF] focus:bg-white transition-all outline-none",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Skills (comma separated)"}),h.jsx("input",{type:"text",value:l,onChange:A=>u(A.target.value),className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0066FF] focus:bg-white transition-all outline-none",placeholder:"React, Python, UI Design"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Bio"}),h.jsx("textarea",{value:s.bio,onChange:A=>o({...s,bio:A.target.value}),className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0066FF] focus:bg-white transition-all outline-none resize-none",rows:4,placeholder:"Tell us about yourself..."})]}),h.jsxs("div",{className:"pt-4 border-t border-gray-100 flex justify-end gap-3",children:[h.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 text-gray-500 font-bold hover:bg-gray-50 rounded-full transition-colors",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:g,className:"px-8 py-2 bg-[#0066FF] text-white font-bold rounded-full hover:bg-blue-600 shadow-lg shadow-blue-500/20 disabled:opacity-50 transition-all",children:g?"Saving...":"Save Profile"})]})]})]})]})})},YE=()=>{const t=er(),{userId:e}=f2(),[n,r]=x.useState(!0),[s,o]=x.useState(null),[l,u]=x.useState(!1),[d,p]=x.useState(!1),[g,v]=x.useState(0),[w,T]=x.useState("none"),[A,N]=x.useState(!1),[C,D]=x.useState([]),[j,F]=x.useState(!1),[W,K]=x.useState(null),[B,I]=x.useState(""),[R,P]=x.useState(!1),[M,O]=x.useState(!1),[q,L]=x.useState(""),ke=async()=>{try{const Z=Le.currentUser,U=e||Z?.uid;if(!U){t("/login");return}u(U===Z?.uid);const J=await Xv(U);if(J){if(o(J),Z&&U!==Z.uid){const Pe=rt(xe,"connections"),Te=Ft(Pe,Vt("requesterId","==",Z.uid),Vt("recipientId","==",U)),Ue=Ft(Pe,Vt("requesterId","==",U),Vt("recipientId","==",Z.uid)),[je,Oe]=await Promise.all([Nn(Te),Nn(Ue)]);if(je.empty){if(!Oe.empty){const Ie=Oe.docs[0].data().status;T(Ie==="accepted"?"connected":"received")}}else{const Ie=je.docs[0].data().status;T(Ie==="accepted"?"connected":"pending")}}}else e||t("/onboarding");const ve=await EU(U);D(ve);const be=await DU(U);v(be)}catch(Z){console.error("Error fetching user data:",Z)}finally{r(!1)}};x.useEffect(()=>{ke()},[t,e]);const Xe=async()=>{const Z=e||s?.uid;if(!(!Le.currentUser||!Z)){if(!M){O(!0);return}N(!0);try{await CR(Z,q),T("pending"),O(!1),L("")}catch(U){const J=U;console.error("Error sending connection request:",J),alert(J.message)}finally{N(!1)}}},ht=async Z=>{if(Z.preventDefault(),!Le.currentUser||!W)return;const U=B.split(",").map(J=>J.trim()).filter(Boolean);if(U.length===0){alert("Please add at least one technology to the Tech Stack.");return}P(!0);try{W.id?await wU(W.id,{...W,techStack:U}):await ER(Le.currentUser.uid,{title:W.title||"",description:W.description||"",techStack:U,rolesNeeded:[],category:"Development",ownerName:s?.name||"Anonymous",ownerAvatar:s?.avatar||"",githubUrl:W.githubUrl,liveUrl:W.liveUrl,status:"Open",thumbnailUrl:"",updatedAt:null}),ke(),F(!1),K(null)}catch(J){console.error("Error saving project:",J),alert("Failed to save project.")}finally{P(!1)}},ge=async Z=>{if(window.confirm("Are you sure you want to delete this project?"))try{await xU(Z),D(U=>U.filter(J=>J.id!==Z))}catch(U){console.error("Error deleting project:",U),alert("Failed to delete project.")}},se=async Z=>{if(!(!Le.currentUser||!s))try{const U=st(xe,"users",s.uid||Le.currentUser.uid);await Bs(U,{skills:Z}),o(J=>J?{...J,skills:Z}:null)}catch(U){console.error("Error updating skills:",U),alert("Failed to update skills.")}},le=async()=>{if(s?.uid)try{const Z=await SR(s.uid);t(`/messages?conversationId=${Z}`)}catch(Z){console.error("Error starting conversation:",Z)}};return n?h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#F8FAFC]",children:h.jsxs("div",{className:"flex flex-col items-center gap-4",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#0066FF]"}),h.jsx("p",{className:"text-gray-500 font-medium text-sm animate-pulse",children:"Loading..."})]})}):s?h.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] pb-20",children:[h.jsxs("div",{className:"relative h-44 md:h-80 w-full overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#0066FF] via-[#5865F2] to-[#7000FF] opacity-90"}),h.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-20"})]}),h.jsx("div",{className:"container-custom mx-auto px-4 -mt-24 md:-mt-40 relative z-10",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[h.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[l&&h.jsx(Yz,{onActionComplete:ke}),h.jsx(we.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl shadow-blue-900/5 border border-white/50 overflow-hidden",children:h.jsx("div",{className:"p-8 md:p-10",children:h.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center md:items-end text-center md:text-left",children:[h.jsxs("div",{className:"relative group",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-[#0066FF] to-[#00E0FF] rounded-full blur-md opacity-20"}),l?h.jsx(sB,{userId:Le.currentUser?.uid||"",currentAvatar:s.avatar,onUploadComplete:Z=>o(U=>U?{...U,avatar:Z}:null)}):h.jsx("div",{className:"relative w-36 h-36 md:w-44 md:h-44 rounded-full border-4 border-white shadow-2xl overflow-hidden bg-white",children:h.jsx("img",{src:s.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${s.name}`,alt:s.name,className:"w-full h-full object-cover"})})]}),h.jsxs("div",{className:"flex-grow",children:[h.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-3 mb-2",children:[h.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-[#0f172a] tracking-tight",children:s.name}),s.isAdmin&&h.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-[#0066FF] text-[10px] font-black uppercase rounded-md border border-blue-200",children:"Admin"})]}),h.jsx("p",{className:"text-blue-600 font-semibold text-xl mb-4",children:s.role}),h.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-y-3 gap-x-6 text-sm text-gray-500 font-medium",children:[h.jsx("span",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-50 rounded-lg border border-gray-100",children:s.college||s.institution||"Student"}),h.jsxs("div",{className:"flex items-center gap-2 text-[#0066FF] font-bold text-sm bg-blue-50 px-4 py-1.5 rounded-full",children:[h.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),g," connections"]})]})]}),h.jsx("div",{className:"flex gap-3 w-full md:w-auto mt-6 md:mt-0",children:l?h.jsx("button",{onClick:()=>p(!0),className:"flex-1 md:flex-none px-8 py-3 bg-[#0066FF] text-white rounded-2xl font-bold text-sm hover:bg-blue-700 transition-all shadow-xl shadow-blue-500/20",children:"Edit Profile"}):h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:Xe,disabled:w!=="none"||A,className:`flex-1 md:flex-none px-8 py-3 rounded-2xl font-bold text-sm transition-all shadow-xl ${w==="none"?"bg-[#0066FF] text-white hover:bg-blue-700 shadow-blue-500/20":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:A?"...":w==="pending"?"Pending":w==="connected"?"Connected":w==="received"?"Accept Request":"Connect"}),h.jsx("button",{onClick:le,className:"flex-1 md:flex-none px-6 py-3 border-2 border-gray-100 text-[#0f172a] rounded-2xl font-bold text-sm hover:bg-gray-50",children:"Message"})]})})]})})}),h.jsxs(we.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl shadow-blue-900/5 border border-white/50 p-8 md:p-10",children:[h.jsxs("h3",{className:"text-2xl font-black text-[#0f172a] mb-6 flex items-center gap-3",children:[h.jsx("span",{className:"w-1.5 h-8 bg-[#0066FF] rounded-full"}),"About"]}),h.jsx("p",{className:"text-gray-600 leading-relaxed text-lg whitespace-pre-wrap",children:s.bio||"Building Scalable Products that solve modern problems."})]}),h.jsxs(we.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl shadow-blue-900/5 border border-white/50 p-8 md:p-10",children:[h.jsxs("div",{className:"flex justify-between items-center mb-10",children:[h.jsxs("h3",{className:"text-2xl font-black text-[#0f172a] flex items-center gap-3",children:[h.jsx("span",{className:"w-1.5 h-8 bg-[#0066FF] rounded-full"}),"Featured Projects"]}),l&&h.jsx("button",{onClick:()=>{K({title:"",description:"",techStack:[],githubUrl:"",liveUrl:""}),I(""),F(!0)},className:"px-4 py-2 bg-blue-50 text-[#0066FF] text-sm font-bold rounded-xl hover:bg-blue-100 transition-all",children:"+ Add Project"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:C.length>0?C.map(Z=>h.jsxs("div",{className:"p-6 rounded-2xl border border-gray-100 hover:border-[#0066FF]/30 hover:bg-[#0066FF]/0.02 transition-all flex flex-col h-full relative group",children:[l&&h.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx("button",{onClick:U=>{U.stopPropagation(),K(Z),I(Z.techStack?.join(", ")||""),F(!0)},className:"p-2 bg-white rounded-lg shadow-sm border border-gray-100 text-gray-500 hover:text-blue-600",children:"Edit"}),h.jsx("button",{onClick:U=>{U.stopPropagation(),ge(Z.id)},className:"p-2 bg-white rounded-lg shadow-sm border border-gray-100 text-gray-500 hover:text-red-600",children:"Del"})]}),h.jsx("h4",{className:"font-bold text-xl text-[#0f172a] group-hover:text-[#0066FF] mb-1",children:Z.title}),h.jsx("p",{className:"text-gray-500 text-sm mb-6 line-clamp-3",children:Z.description}),h.jsx("div",{className:"mt-auto flex flex-wrap gap-2",children:Z.techStack?.map(U=>h.jsx("span",{className:"px-2 py-0.5 bg-gray-50 text-gray-600 rounded text-[10px] font-bold border border-gray-100 uppercase",children:U},U))})]},Z.id)):h.jsx("div",{className:"col-span-full py-12 text-center bg-gray-50 rounded-2xl border-2 border-dashed border-gray-100",children:h.jsx("p",{className:"text-gray-400 font-medium",children:"No projects added yet."})})})]})]}),h.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[h.jsxs(we.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-3xl shadow-xl shadow-blue-900/5 border border-white/50 p-8",children:[h.jsx("h3",{className:"font-black text-xl text-[#0f172a] mb-8 uppercase tracking-widest text-center",children:"Social Links"}),h.jsxs("div",{className:"space-y-4",children:[s.socials?.github&&h.jsx("a",{href:s.socials.github,target:"_blank",className:"flex items-center gap-4 p-4 rounded-2xl bg-gray-50",children:h.jsx("span",{className:"font-bold text-sm",children:"GitHub"})}),s.socials?.linkedin&&h.jsx("a",{href:s.socials.linkedin,target:"_blank",className:"flex items-center gap-4 p-4 rounded-2xl bg-blue-50 text-blue-600",children:h.jsx("span",{className:"font-bold text-sm",children:"LinkedIn"})})]})]}),h.jsx(we.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-3xl shadow-xl shadow-blue-900/5 border border-white/50 p-8",children:h.jsx(Kz,{skills:s.skills||[],isOwnProfile:l,onUpdate:se})})]})]})}),h.jsx(rs,{children:j&&h.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[h.jsx(we.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>F(!1),className:"absolute inset-0 bg-black/70"}),h.jsxs(we.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative w-full max-w-2xl bg-white rounded-3xl p-8 overflow-hidden",children:[h.jsx("h3",{className:"text-2xl font-black mb-6",children:W?.id?"Edit Project":"Add Project"}),h.jsxs("form",{onSubmit:ht,className:"space-y-6",children:[h.jsx("input",{required:!0,placeholder:"Project Title",value:W?.title||"",onChange:Z=>K(U=>({...U,title:Z.target.value})),className:"w-full px-5 py-3 rounded-2xl bg-gray-50 border border-gray-100 outline-none focus:border-[#0066FF]"}),h.jsx("textarea",{required:!0,rows:4,placeholder:"Description",value:W?.description||"",onChange:Z=>K(U=>({...U,description:Z.target.value})),className:"w-full px-5 py-3 rounded-2xl bg-gray-50 border border-gray-100 outline-none focus:border-[#0066FF] resize-none"}),h.jsx("input",{required:!0,placeholder:"Tech Stack (comma separated)",value:B,onChange:Z=>I(Z.target.value),className:"w-full px-5 py-3 rounded-2xl bg-gray-50 border border-gray-100 outline-none focus:border-[#0066FF]"}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{type:"button",onClick:()=>F(!1),className:"flex-1 py-4 font-bold text-gray-400",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:R,className:"flex-[2] py-4 bg-[#0066FF] text-white font-bold rounded-2xl shadow-lg",children:"Save Project"})]})]})]})]})}),h.jsx(rs,{children:M&&h.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[h.jsx(we.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>O(!1),className:"absolute inset-0 bg-black/60"}),h.jsxs(we.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative w-full max-w-md bg-white rounded-3xl p-8",children:[h.jsx("h3",{className:"text-xl font-black mb-4",children:"Send Request"}),h.jsx("textarea",{rows:4,placeholder:"Personalized note (optional)",value:q,onChange:Z=>L(Z.target.value),className:"w-full px-5 py-3 rounded-2xl bg-gray-50 border border-gray-100 outline-none focus:border-[#0066FF] mb-6"}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>O(!1),className:"flex-1 font-bold text-gray-400",children:"Cancel"}),h.jsx("button",{onClick:Xe,disabled:A,className:"flex-[2] py-3 bg-[#0066FF] text-white font-bold rounded-2xl",children:"Send"})]})]})]})}),s&&h.jsx(Xz,{isOpen:d,onClose:()=>p(!1),userId:s.uid,onSuccess:ke})]}):null},XR=6048e5,Jz=864e5,Ih=43200,QE=1440,XE=Symbol.for("constructDateFrom");function wi(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&XE in t?t[XE](e):t instanceof Date?new t.constructor(e):new Date(e)}function en(t,e){return wi(e||t,t)}let Zz={};function nd(){return Zz}function Du(t,e){const n=nd(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=en(t,e?.in),o=s.getDay(),l=(o<r?7:0)+o-r;return s.setDate(s.getDate()-l),s.setHours(0,0,0,0),s}function Sf(t,e){return Du(t,{...e,weekStartsOn:1})}function JR(t,e){const n=en(t,e?.in),r=n.getFullYear(),s=wi(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const o=Sf(s),l=wi(n,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const u=Sf(l);return n.getTime()>=o.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function Cf(t){const e=en(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function yp(t,...e){const n=wi.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function JE(t,e){const n=en(t,e?.in);return n.setHours(0,0,0,0),n}function e$(t,e,n){const[r,s]=yp(n?.in,t,e),o=JE(r),l=JE(s),u=+o-Cf(o),d=+l-Cf(l);return Math.round((u-d)/Jz)}function t$(t,e){const n=JR(t,e),r=wi(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Sf(r)}function Hh(t,e){const n=+en(t)-+en(e);return n<0?-1:n>0?1:n}function n$(t){return wi(t,Date.now())}function r$(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function s$(t){return!(!r$(t)&&typeof t!="number"||isNaN(+en(t)))}function i$(t,e,n){const[r,s]=yp(n?.in,t,e),o=r.getFullYear()-s.getFullYear(),l=r.getMonth()-s.getMonth();return o*12+l}function o$(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function a$(t,e){return+en(t)-+en(e)}function l$(t,e){const n=en(t,e?.in);return n.setHours(23,59,59,999),n}function c$(t,e){const n=en(t,e?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function u$(t,e){const n=en(t,e?.in);return+l$(n,e)==+c$(n,e)}function d$(t,e,n){const[r,s,o]=yp(n?.in,t,t,e),l=Hh(s,o),u=Math.abs(i$(s,o));if(u<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-l*u);let d=Hh(s,o)===-l;u$(r)&&u===1&&Hh(r,o)===1&&(d=!1);const p=l*(u-+d);return p===0?0:p}function h$(t,e,n){const r=a$(t,e)/1e3;return o$(n?.roundingMethod)(r)}function f$(t,e){const n=en(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const p$={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},m$=(t,e,n)=>{let r;const s=p$[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Mg(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const g$={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},y$={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},v$={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},w$={date:Mg({formats:g$,defaultWidth:"full"}),time:Mg({formats:y$,defaultWidth:"full"}),dateTime:Mg({formats:v$,defaultWidth:"full"})},x$={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},b$=(t,e,n,r)=>x$[t];function Uc(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,u=n?.width?String(n.width):l;s=t.formattingValues[u]||t.formattingValues[l]}else{const l=t.defaultWidth,u=n?.width?String(n.width):t.defaultWidth;s=t.values[u]||t.values[l]}const o=t.argumentCallback?t.argumentCallback(e):e;return s[o]}}const _$={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},E$={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},T$={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},S$={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},C$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},I$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},R$=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},A$={ordinalNumber:R$,era:Uc({values:_$,defaultWidth:"wide"}),quarter:Uc({values:E$,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Uc({values:T$,defaultWidth:"wide"}),day:Uc({values:S$,defaultWidth:"wide"}),dayPeriod:Uc({values:C$,defaultWidth:"wide",formattingValues:I$,defaultFormattingWidth:"wide"})};function Bc(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(s);if(!o)return null;const l=o[0],u=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(u)?k$(u,v=>v.test(l)):N$(u,v=>v.test(l));let p;p=t.valueCallback?t.valueCallback(d):d,p=n.valueCallback?n.valueCallback(p):p;const g=e.slice(l.length);return{value:p,rest:g}}}function N$(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function k$(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function P$(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],o=e.match(t.parsePattern);if(!o)return null;let l=t.valueCallback?t.valueCallback(o[0]):o[0];l=n.valueCallback?n.valueCallback(l):l;const u=e.slice(s.length);return{value:l,rest:u}}}const j$=/^(\d+)(th|st|nd|rd)?/i,D$=/\d+/i,M$={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},L$={any:[/^b/i,/^(a|c)/i]},O$={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},V$={any:[/1/i,/2/i,/3/i,/4/i]},F$={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},U$={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},B$={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},z$={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$$={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},W$={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},q$={ordinalNumber:P$({matchPattern:j$,parsePattern:D$,valueCallback:t=>parseInt(t,10)}),era:Bc({matchPatterns:M$,defaultMatchWidth:"wide",parsePatterns:L$,defaultParseWidth:"any"}),quarter:Bc({matchPatterns:O$,defaultMatchWidth:"wide",parsePatterns:V$,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Bc({matchPatterns:F$,defaultMatchWidth:"wide",parsePatterns:U$,defaultParseWidth:"any"}),day:Bc({matchPatterns:B$,defaultMatchWidth:"wide",parsePatterns:z$,defaultParseWidth:"any"}),dayPeriod:Bc({matchPatterns:$$,defaultMatchWidth:"any",parsePatterns:W$,defaultParseWidth:"any"})},ZR={code:"en-US",formatDistance:m$,formatLong:w$,formatRelative:b$,localize:A$,match:q$,options:{weekStartsOn:0,firstWeekContainsDate:1}};function H$(t,e){const n=en(t,e?.in);return e$(n,f$(n))+1}function G$(t,e){const n=en(t,e?.in),r=+Sf(n)-+t$(n);return Math.round(r/XR)+1}function eA(t,e){const n=en(t,e?.in),r=n.getFullYear(),s=nd(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,l=wi(e?.in||t,0);l.setFullYear(r+1,0,o),l.setHours(0,0,0,0);const u=Du(l,e),d=wi(e?.in||t,0);d.setFullYear(r,0,o),d.setHours(0,0,0,0);const p=Du(d,e);return+n>=+u?r+1:+n>=+p?r:r-1}function K$(t,e){const n=nd(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=eA(t,e),o=wi(e?.in||t,0);return o.setFullYear(s,0,r),o.setHours(0,0,0,0),Du(o,e)}function Y$(t,e){const n=en(t,e?.in),r=+Du(n,e)-+K$(n,e);return Math.round(r/XR)+1}function et(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Yi={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return et(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):et(n+1,2)},d(t,e){return et(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return et(t.getHours()%12||12,e.length)},H(t,e){return et(t.getHours(),e.length)},m(t,e){return et(t.getMinutes(),e.length)},s(t,e){return et(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return et(s,e.length)}},ol={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ZE={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Yi.y(t,e)},Y:function(t,e,n,r){const s=eA(t,r),o=s>0?s:1-s;if(e==="YY"){const l=o%100;return et(l,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):et(o,e.length)},R:function(t,e){const n=JR(t);return et(n,e.length)},u:function(t,e){const n=t.getFullYear();return et(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return et(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return et(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Yi.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return et(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=Y$(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):et(s,e.length)},I:function(t,e,n){const r=G$(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):et(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Yi.d(t,e)},D:function(t,e,n){const r=H$(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):et(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return et(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return et(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return et(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=ol.noon:r===0?s=ol.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=ol.evening:r>=12?s=ol.afternoon:r>=4?s=ol.morning:s=ol.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Yi.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Yi.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):et(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):et(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Yi.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Yi.s(t,e)},S:function(t,e){return Yi.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return t2(r);case"XXXX":case"XX":return na(r);case"XXXXX":case"XXX":default:return na(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return t2(r);case"xxxx":case"xx":return na(r);case"xxxxx":case"xxx":default:return na(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+e2(r,":");case"OOOO":default:return"GMT"+na(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+e2(r,":");case"zzzz":default:return"GMT"+na(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return et(r,e.length)},T:function(t,e,n){return et(+t,e.length)}};function e2(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),o=r%60;return o===0?n+String(s):n+String(s)+e+et(o,2)}function t2(t,e){return t%60===0?(t>0?"-":"+")+et(Math.abs(t)/60,2):na(t,e)}function na(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=et(Math.trunc(r/60),2),o=et(r%60,2);return n+s+e+o}const n2=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},tA=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Q$=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return n2(t,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",n2(r,e)).replace("{{time}}",tA(s,e))},X$={p:tA,P:Q$},J$=/^D+$/,Z$=/^Y+$/,eW=["D","DD","YY","YYYY"];function tW(t){return J$.test(t)}function nW(t){return Z$.test(t)}function rW(t,e,n){const r=sW(t,e,n);if(console.warn(r),eW.includes(t))throw new RangeError(r)}function sW(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const iW=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,oW=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,aW=/^'([^]*?)'?$/,lW=/''/g,cW=/[a-zA-Z]/;function uW(t,e,n){const r=nd(),s=r.locale??ZR,o=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,l=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,u=en(t,n?.in);if(!s$(u))throw new RangeError("Invalid time value");let d=e.match(oW).map(g=>{const v=g[0];if(v==="p"||v==="P"){const w=X$[v];return w(g,s.formatLong)}return g}).join("").match(iW).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const v=g[0];if(v==="'")return{isToken:!1,value:dW(g)};if(ZE[v])return{isToken:!0,value:g};if(v.match(cW))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:g}});s.localize.preprocessor&&(d=s.localize.preprocessor(u,d));const p={firstWeekContainsDate:o,weekStartsOn:l,locale:s};return d.map(g=>{if(!g.isToken)return g.value;const v=g.value;(nW(v)||tW(v))&&rW(v,e,String(t));const w=ZE[v[0]];return w(u,v,s.localize,p)}).join("")}function dW(t){const e=t.match(aW);return e?e[1].replace(lW,"'"):t}function hW(t,e,n){const r=nd(),s=n?.locale??r.locale??ZR,o=2520,l=Hh(t,e);if(isNaN(l))throw new RangeError("Invalid time value");const u=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:l}),[d,p]=yp(n?.in,...l>0?[e,t]:[t,e]),g=h$(p,d),v=(Cf(p)-Cf(d))/1e3,w=Math.round((g-v)/60);let T;if(w<2)return n?.includeSeconds?g<5?s.formatDistance("lessThanXSeconds",5,u):g<10?s.formatDistance("lessThanXSeconds",10,u):g<20?s.formatDistance("lessThanXSeconds",20,u):g<40?s.formatDistance("halfAMinute",0,u):g<60?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",1,u):w===0?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",w,u);if(w<45)return s.formatDistance("xMinutes",w,u);if(w<90)return s.formatDistance("aboutXHours",1,u);if(w<QE){const A=Math.round(w/60);return s.formatDistance("aboutXHours",A,u)}else{if(w<o)return s.formatDistance("xDays",1,u);if(w<Ih){const A=Math.round(w/QE);return s.formatDistance("xDays",A,u)}else if(w<Ih*2)return T=Math.round(w/Ih),s.formatDistance("aboutXMonths",T,u)}if(T=d$(p,d),T<12){const A=Math.round(w/Ih);return s.formatDistance("xMonths",A,u)}else{const A=T%12,N=Math.trunc(T/12);return A<3?s.formatDistance("aboutXYears",N,u):A<9?s.formatDistance("overXYears",N,u):s.formatDistance("almostXYears",N+1,u)}}function fW(t,e){return hW(t,n$(t),e)}const pW=({onSelectConversation:t,selectedConversationId:e})=>{const[n,r]=x.useState([]),[s,o]=x.useState(!0);return x.useEffect(()=>{if(!Le.currentUser)return;const l=IU(async u=>{const d=await Promise.all(u.map(async p=>{const g=p.participants.find(v=>v!==Le.currentUser?.uid);if(!g)return{...p,partner:null};try{const v=await Xv(g);return{...p,partner:v}}catch{return{...p,partner:null}}}));r(d.filter(p=>p.partner!==null)),o(!1)});return()=>l()},[]),s?h.jsx("div",{className:"w-full h-full flex items-center justify-center",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n.length===0?h.jsxs("div",{className:"p-8 text-center text-gray-500",children:[h.jsx("p",{children:"No messages yet."}),h.jsx("p",{className:"text-sm mt-2",children:"Connect with students to start chatting!"})]}):h.jsx("div",{className:"flex flex-col h-full overflow-y-auto",children:n.map(l=>h.jsx("div",{onClick:()=>l.partner&&t(l.id,l.partner),className:`p-4 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors ${e===l.id?"bg-blue-50/50 hover:bg-blue-50":""}`,children:h.jsxs("div",{className:"flex gap-3",children:[h.jsx("div",{className:"relative",children:h.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border border-gray-200",children:h.jsx("img",{src:l.partner?.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${l.partner?.name}`,alt:l.partner?.name,className:"w-full h-full object-cover"})})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex justify-between items-start mb-1",children:[h.jsx("h3",{className:`font-semibold text-sm truncate ${l.lastMessage&&!l.lastMessage.read&&l.lastMessage.senderId!==Le.currentUser?.uid?"text-black":"text-gray-900"}`,children:l.partner?.name}),l.updatedAt&&h.jsx("span",{className:"text-[10px] text-gray-400 whitespace-nowrap ml-2",children:fW(new Date(l.updatedAt.seconds*1e3),{addSuffix:!1})})]}),h.jsxs("p",{className:`text-xs truncate ${l.lastMessage&&!l.lastMessage.read&&l.lastMessage.senderId!==Le.currentUser?.uid?"font-bold text-gray-900":"text-gray-500"}`,children:[l.lastMessage?.senderId===Le.currentUser?.uid?"You: ":"",l.lastMessage?.content||"Started a conversation"]})]})]})},l.id))})},mW=({message:t,showAvatar:e,senderName:n,senderAvatar:r})=>{const s=t.senderId===Le.currentUser?.uid;return h.jsxs("div",{className:`flex w-full mb-4 ${s?"justify-end":"justify-start"}`,children:[!s&&e&&h.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden mr-2 flex-shrink-0 border border-gray-100",children:h.jsx("img",{src:r||`https://api.dicebear.com/7.x/avataaars/svg?seed=${n||"User"}`,alt:n,className:"w-full h-full object-cover"})}),!s&&!e&&h.jsx("div",{className:"w-10"})," ",h.jsxs("div",{className:`max-w-[70%] flex flex-col ${s?"items-end":"items-start"}`,children:[h.jsx("div",{className:`px-4 py-2 rounded-2xl text-sm ${s?"bg-[#0066FF] text-white rounded-br-none":"bg-white border border-gray-100 text-gray-800 rounded-bl-none shadow-sm"}`,children:t.content}),h.jsxs("div",{className:"flex items-center gap-1 mt-1 px-1",children:[h.jsx("span",{className:"text-[10px] text-gray-400",children:t.createdAt?.seconds?uW(new Date(t.createdAt.seconds*1e3),"h:mm a"):"Just now"}),s&&h.jsx("span",{className:"text-[10px] text-gray-400",children:t.read?" Read":" Sent"})]})]})]})},gW=({conversationId:t,partner:e})=>{const[n,r]=x.useState([]),[s,o]=x.useState(""),[l,u]=x.useState(!0),d=x.useRef(null),p=()=>{d.current?.scrollIntoView({behavior:"smooth"})};x.useEffect(()=>{u(!0);const w=RU(t,T=>{r(T),u(!1);const A=T[T.length-1];A&&A.senderId!==Le.currentUser?.uid&&!A.read&&AU(t,A.id)});return()=>w()},[t]),x.useEffect(()=>{p()},[n]);const g=async w=>{if(w.preventDefault(),!!s.trim())try{await CU(t,s.trim()),o("")}catch(T){console.error("Error sending message:",T)}},v=w=>{o(w.target.value)};return h.jsxs("div",{className:"flex flex-col h-full bg-white",children:[h.jsx("div",{className:"h-16 border-b border-gray-100 flex items-center px-6 justify-between flex-shrink-0",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-gray-100",children:h.jsx("img",{src:e.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${e.name}`,alt:e.name,className:"w-full h-full object-cover"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-gray-900 text-sm",children:e.name}),h.jsx("p",{className:"text-xs text-green-500 font-medium",children:"Online"})]})]})}),h.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50/50",children:l?h.jsx("div",{className:"flex justify-center pt-10",children:h.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):h.jsxs("div",{className:"space-y-1",children:[n.map((w,T)=>{const A=n[T-1],N=!A||A.senderId!==w.senderId;return h.jsx(mW,{message:w,showAvatar:N,senderName:e.name,senderAvatar:e.avatar},w.id)}),h.jsx("div",{ref:d})]})}),h.jsx("div",{className:"p-4 border-t border-gray-100 bg-white flex-shrink-0",children:h.jsxs("form",{onSubmit:g,className:"flex gap-2 items-center bg-gray-50 rounded-2xl px-2 py-2 border border-gray-100 focus-within:border-blue-100 focus-within:ring-2 focus-within:ring-blue-50 transition-all",children:[h.jsx("button",{type:"button",className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors",children:h.jsx(iU,{className:"w-5 h-5"})}),h.jsx("input",{type:"text",value:s,onChange:v,placeholder:"Type a message...",className:"flex-1 bg-transparent border-none focus:ring-0 text-sm placeholder-gray-400 py-2"}),h.jsx("button",{type:"button",className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors",children:h.jsx(G8,{className:"w-5 h-5"})}),h.jsx("button",{type:"submit",disabled:!s.trim(),className:"p-2 bg-[#0066FF] text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-sm",children:h.jsx(vR,{className:"w-5 h-5"})})]})})]})},yW=()=>{const[t,e]=Mk(),n=t.get("conversationId"),[r,s]=x.useState(n),[o,l]=x.useState(null);x.useEffect(()=>{n&&s(n)},[n]);const u=(d,p)=>{s(d),l(p),e({conversationId:d})};return h.jsxs("div",{className:"h-[calc(100vh-64px)] bg-gray-50 flex overflow-hidden",children:[h.jsxs("div",{className:`w-full md:w-80 lg:w-96 border-r border-gray-200 bg-white flex flex-col ${r?"hidden md:flex":"flex"}`,children:[h.jsx("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center",children:h.jsx("h1",{className:"font-bold text-xl text-gray-900",children:"Messages"})}),h.jsx("div",{className:"p-4 pt-0 mt-4",children:h.jsx("input",{type:"text",placeholder:"Search messages...",className:"w-full bg-gray-100 border-none rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-blue-100 placeholder-gray-400"})}),h.jsx("div",{className:"flex-1 overflow-hidden",children:h.jsx(pW,{onSelectConversation:u,selectedConversationId:r||void 0})})]}),h.jsx("div",{className:`flex-1 flex flex-col ${r?"flex":"hidden md:flex"}`,children:r&&o?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"md:hidden h-16 border-b border-gray-100 flex items-center px-4 bg-white",children:[h.jsx("button",{onClick:()=>{s(null),l(null),e({})},className:"mr-3 text-gray-600 p-1",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})})}),h.jsx("h3",{className:"font-bold",children:"Back"})]}),h.jsx(gW,{conversationId:r,partner:o})]}):h.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-300 bg-gray-50/50",children:[h.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-10 h-10",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z"})})}),h.jsx("p",{className:"font-medium",children:"Select a conversation to start messaging"})]})})]})},vW=()=>{const t={title:"IBM: Data Science",description:"Gain hands-on experience with industry-standard tools and technologies  including data modeling with Python, automation, and applied machine learning  with this comprehensive course, 100% online.",duration:"10 weeks",pace:"12-13 hours per week",startDate:"Jan 28, 2026",enrollBy:"Feb 2, 2026",stats:[{value:"36%",label:"The projected growth of the employment rate for data scientists from 2023 to 2033.",source:"U.S. Bureau of Labor Statistics"},{value:"$112,590",label:"The median annual salary for data scientists as of 2024.",source:"U.S. Bureau of Labor Statistics"}],curriculum:[{title:"Orientation module: Welcome to your Online Campus"},{title:"Module 1: Data Science Methodologies"},{title:"Module 2: Using Python for Data Science"},{title:"Module 3: Python Fundamentals and Data"},{title:"Module 4: SQL for Data Science"},{title:"Module 5: Using Python to Analyze Data"},{title:"Module 6: Data Visualization Using Python"}]},[e,n]=x.useState({firstName:"",lastName:"",email:"",subscribe:!0}),r=o=>{const{name:l,value:u,type:d,checked:p}=o.target;n(g=>({...g,[l]:d==="checkbox"?p:u}))},s=o=>{o.preventDefault(),console.log("Form submitted:",e)};return h.jsx("div",{className:"min-h-screen pt-32 pb-20 bg-white",children:h.jsxs("div",{className:"container-custom mx-auto",children:[h.jsxs("div",{className:"mb-8 text-sm text-gray-500 flex items-center flex-wrap gap-2",children:[h.jsx(Ar,{to:"/",className:"hover:text-[#5865F2] transition-colors",children:"Home"}),h.jsx("span",{children:""}),h.jsx("span",{className:"text-gray-900",children:"Executive Education"}),h.jsx("span",{children:""}),h.jsx("span",{className:"text-gray-400",children:t.title})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[h.jsxs("div",{className:"lg:col-span-2 space-y-12",children:[h.jsxs(we.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[h.jsx("div",{className:"flex items-center gap-4 mb-4",children:h.jsx("div",{className:"h-12 w-12 rounded-xl bg-[#0f172a] flex items-center justify-center text-white shadow-lg",children:h.jsx("span",{className:"text-xl font-bold",children:"IBM"})})}),h.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-[#0f172a] leading-tight tracking-tight",children:t.title}),h.jsx("p",{className:"text-xl text-gray-600 leading-relaxed max-w-2xl font-light",children:t.description}),h.jsxs("div",{className:"flex flex-wrap gap-8 pt-6 border-t border-gray-100",children:[h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(B8,{className:"w-6 h-6 text-[#5865F2] mt-1"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-bold text-[#0f172a]",children:t.duration}),h.jsx("p",{className:"text-sm text-gray-500",children:t.pace})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(yR,{className:"w-6 h-6 text-[#5865F2] mt-1"}),h.jsxs("div",{children:[h.jsxs("p",{className:"font-bold text-[#0f172a]",children:["Starts ",t.startDate]}),h.jsxs("p",{className:"text-sm text-gray-500",children:["Enroll by ",t.enrollBy]})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(mR,{className:"w-6 h-6 text-[#5865F2] mt-1"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-bold text-[#0f172a]",children:"Instructor-paced"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Scheduled classes"})]})]})]})]}),h.jsxs(we.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"py-12 bg-gray-50 rounded-3xl p-8 border border-gray-100",children:[h.jsx("h2",{className:"text-2xl font-bold text-[#0f172a] mb-8 text-center",children:"Industry Insights"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 relative",children:[h.jsx("div",{className:"hidden md:block absolute left-1/2 top-0 bottom-0 w-px bg-gray-200 transform -translate-x-1/2"}),t.stats.map((o,l)=>h.jsxs("div",{className:"text-center space-y-2",children:[h.jsx("p",{className:"text-5xl font-bold text-[#5865F2]",children:o.value}),h.jsx("p",{className:"text-gray-600 font-medium",children:o.label}),h.jsx("p",{className:"text-xs text-gray-400 mt-2",children:o.source})]},l))]})]}),h.jsxs(we.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"space-y-6",children:[h.jsx("h2",{className:"text-3xl font-bold text-[#0f172a]",children:"Course Curriculum"}),h.jsx("p",{className:"text-gray-600 max-w-3xl",children:"Develop advanced data science skills in data analysis, visualization, and machine learning models as you work through the weekly modules of this online program."}),h.jsx("div",{className:"space-y-3 pt-4",children:t.curriculum.map((o,l)=>h.jsxs("div",{className:"bg-white border border-gray-100 p-5 rounded-xl flex items-center justify-between group hover:border-[#5865F2] hover:shadow-md transition-all cursor-pointer",children:[h.jsx("span",{className:"font-medium text-gray-700 group-hover:text-[#5865F2] transition-colors",children:o.title}),h.jsx(O8,{className:"text-gray-400 group-hover:text-[#5865F2] transition-colors w-5 h-5"})]},l))}),h.jsxs("button",{className:"text-[#5865F2] font-bold hover:text-[#4752c4] transition-colors flex items-center gap-2 mt-4",children:["Show Full Curriculum",h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})})]})]})]}),h.jsx("div",{className:"lg:col-span-1",children:h.jsx("div",{className:"sticky top-24",children:h.jsxs(we.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white p-6 md:p-8 rounded-3xl border border-gray-100 shadow-xl shadow-gray-200/50",children:[h.jsx("h3",{className:"text-2xl font-bold text-[#0f172a] mb-2",children:"Get Syllabus"}),h.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Enter your details to receive the full course syllabus and program guide."}),h.jsxs("form",{onSubmit:s,className:"space-y-4",children:[h.jsx("div",{children:h.jsx("input",{type:"text",name:"firstName",placeholder:"First Name",value:e.firstName,onChange:r,className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#5865F2] focus:ring-2 focus:ring-purple-100 outline-none transition-all bg-gray-50 text-gray-900 placeholder-gray-400",required:!0})}),h.jsx("div",{children:h.jsx("input",{type:"text",name:"lastName",placeholder:"Last Name",value:e.lastName,onChange:r,className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#5865F2] focus:ring-2 focus:ring-purple-100 outline-none transition-all bg-gray-50 text-gray-900 placeholder-gray-400",required:!0})}),h.jsx("div",{children:h.jsx("input",{type:"email",name:"email",placeholder:"Email Address",value:e.email,onChange:r,className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#5865F2] focus:ring-2 focus:ring-purple-100 outline-none transition-all bg-gray-50 text-gray-900 placeholder-gray-400",required:!0})}),h.jsxs("div",{className:"space-y-3 pt-2",children:[h.jsx("p",{className:"text-xs text-gray-500",children:"I agree to receive communications about this program."}),h.jsxs("div",{className:"flex gap-4",children:[h.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 cursor-pointer",children:[h.jsx("input",{type:"radio",name:"subscribe",checked:e.subscribe===!0,onChange:()=>n(o=>({...o,subscribe:!0})),className:"accent-[#5865F2] w-4 h-4"}),"Yes"]}),h.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 cursor-pointer",children:[h.jsx("input",{type:"radio",name:"subscribe",checked:e.subscribe===!1,onChange:()=>n(o=>({...o,subscribe:!1})),className:"accent-[#5865F2] w-4 h-4"}),"No"]})]})]}),h.jsx("button",{type:"submit",className:"w-full btn-primary py-4 rounded-xl font-bold text-lg shadow-lg shadow-purple-500/20 hover:shadow-purple-500/30 transform hover:-translate-y-0.5 transition-all mt-4",children:"Download Syllabus"}),h.jsx("p",{className:"text-[10px] text-gray-400 mt-4 text-center leading-tight",children:"By submitting this form, you agree to our Terms of Service and Privacy Policy."})]})]})})})]})]})})},wW=()=>{const{resourceId:t}=f2(),e=er(),n=()=>[{id:"1",title:"Syllabus & Exam Pattern",type:"PDF",url:"#",description:"Official syllabus and detailed exam pattern breakdown."},{id:"2",title:"Previous Year Questions (2020-2024)",type:"PDF",url:"#",description:"Solved papers from the last 5 years."},{id:"3",title:"Important Topics Cheat Sheet",type:"PDF",url:"#",description:"Quick revision notes for high-weightage topics."},{id:"4",title:"Recommended Books List",type:"Book",url:"#",description:"Curated list of best preparation books by toppers."}],r=l=>{switch(l){case"cat":return"CAT Study Materials";case"upsc":return"UPSC Study Materials";case"gate":return"GATE Study Materials";default:return"Study Materials"}},s=n(),o=r(t||"");return h.jsxs("div",{className:"min-h-screen bg-white",children:[h.jsx(_R,{}),h.jsx("main",{className:"pt-32 pb-20 px-6",children:h.jsxs("div",{className:"container-custom mx-auto",children:[h.jsxs(we.button,{onClick:()=>e("/"),className:"mb-8 px-4 py-2 rounded-lg bg-gray-50 hover:bg-gray-100 border border-gray-200 text-gray-600 hover:text-[#5865F2] transition-all flex items-center gap-2 group text-sm font-medium",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:[h.jsx("span",{className:"group-hover:-translate-x-1 transition-transform",children:""})," Back to Dashboard"]}),h.jsxs(we.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-12",children:[h.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-[#0f172a] mb-4",children:o}),h.jsx("p",{className:"text-xl text-gray-500 font-light",children:"Access curated resources to boost your preparation."})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map((l,u)=>h.jsxs(we.div,{className:"bg-white p-6 rounded-2xl border border-gray-100 hover:border-purple-100 hover:shadow-xl hover:shadow-purple-500/5 transition-all duration-300 group",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:u*.1},children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide ${l.type==="PDF"?"bg-red-50 text-red-600":l.type==="Video"?"bg-blue-50 text-blue-600":l.type==="Book"?"bg-yellow-50 text-yellow-600":"bg-green-50 text-green-600"}`,children:l.type}),h.jsx("span",{className:"text-2xl group-hover:scale-110 transition-transform duration-300",children:l.type==="PDF"?"":l.type==="Video"?"":l.type==="Book"?"":""})]}),h.jsx("h3",{className:"text-xl font-bold text-[#0f172a] mb-2 group-hover:text-[#5865F2] transition-colors",children:l.title}),h.jsx("p",{className:"text-gray-500 text-sm mb-6 leading-relaxed",children:l.description}),h.jsxs("a",{href:l.url,className:"inline-flex items-center text-[#5865F2] font-bold hover:text-[#4752c4] transition-colors text-sm",onClick:d=>d.preventDefault(),children:["Access Resource ",h.jsx("span",{className:"ml-1 group-hover:translate-x-1 transition-transform",children:""})]})]},l.id))})]})})]})},xW=()=>{const t=er(),[e,n]=x.useState(!0),[r,s]=x.useState(""),[o,l]=x.useState(""),[u,d]=x.useState(!1),[p,g]=x.useState(""),[v,w]=x.useState(""),T=async()=>{try{const C=(await FT(Le,LC)).user,D=st(xe,"users",C.uid);(await Lr(D)).exists()?t("/"):t("/onboarding")}catch(N){N instanceof Error?g(N.message):g("An unexpected error occurred")}},A=async N=>{N.preventDefault(),d(!0),g(""),w("");try{if(e){const C=await RT(Le,r,o),D=st(xe,"users",C.user.uid);(await Lr(D)).exists()?t("/"):t("/onboarding")}else await IT(Le,r,o),t("/onboarding")}catch(C){C instanceof Error?g(C.message):g("An unexpected error occurred")}finally{d(!1)}};return h.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white relative overflow-hidden font-sans pt-20",children:[h.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[h.jsx("div",{className:"absolute top-[-10%] right-[-5%] w-[500px] h-[500px] bg-purple-100 rounded-full blur-3xl opacity-50"}),h.jsx("div",{className:"absolute bottom-[-10%] left-[-5%] w-[500px] h-[500px] bg-blue-50 rounded-full blur-3xl opacity-50"})]}),h.jsxs(we.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},className:"w-full max-w-md z-10 p-8 md:p-10 bg-white rounded-3xl shadow-xl shadow-gray-200/50 border border-gray-100",children:[h.jsx("div",{className:"flex justify-center mb-6",children:h.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#0066FF] flex items-center justify-center text-white shadow-lg shadow-blue-500/30",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-6 h-6",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3V5"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.5 5.5L17 7"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12H19"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.5 18.5L17 17"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.5 18.5L7 17"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12H5"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.5 5.5L7 7"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 21V10C9 8.34315 10.3431 7 12 7C13.6569 7 15 8.34315 15 10V21"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 7V10"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7V10"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10C17 10 18 11 18 12.5C18 14 17 15 15 15"})]})})}),h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("h1",{className:"text-2xl font-bold text-[#0f172a] mb-2 tracking-tight",children:e?"Welcome back":"Create account"}),h.jsx("p",{className:"text-gray-500 text-sm",children:e?"Please enter your details to sign in":"Start building your future today"})]}),h.jsxs(we.button,{whileHover:{scale:1.01,backgroundColor:"#f8fafc"},whileTap:{scale:.99},onClick:T,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-700 font-medium flex items-center justify-center gap-3 hover:border-gray-300 transition-all mb-6",children:[h.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"w-5 h-5"}),h.jsx("span",{children:"Continue with Google"})]}),h.jsxs("div",{className:"relative flex items-center justify-center mb-6",children:[h.jsx("div",{className:"absolute w-full h-px bg-gray-200"}),h.jsx("span",{className:"relative px-3 bg-white text-xs font-medium text-gray-400",children:"Or continue with email"})]}),h.jsxs("form",{onSubmit:A,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1.5 ml-1",children:"Email address"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-400",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})})}),h.jsx("input",{type:"email",required:!0,value:r,onChange:N=>s(N.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl bg-[#1e293b] border border-transparent text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#0066FF] transition-all",placeholder:"you@university.edu"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1.5 ml-1",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 text-gray-400",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})})}),h.jsx("input",{type:"password",required:!0,value:o,onChange:N=>l(N.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl bg-[#1e293b] border border-transparent text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#0066FF] transition-all",placeholder:"",minLength:6})]})]}),e&&h.jsxs("div",{className:"flex items-center justify-between text-sm",children:[h.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[h.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300 text-[#0066FF] focus:ring-[#0066FF]"}),h.jsx("span",{className:"text-gray-600",children:"Remember me"})]}),h.jsx("button",{type:"button",className:"text-[#0066FF] font-medium hover:underline",children:"Forgot password?"})]}),h.jsxs(rs,{children:[p&&h.jsx(we.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-red-500 text-sm text-center bg-red-50 py-2 rounded-lg",children:p}),v&&h.jsx(we.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-green-600 text-sm text-center bg-green-50 py-2 rounded-lg",children:v})]}),h.jsx(we.button,{whileHover:{scale:1.01},whileTap:{scale:.99},type:"submit",disabled:u,className:`w-full py-3 rounded-xl bg-[#0066FF] text-white font-bold shadow-lg shadow-blue-500/30 hover:bg-blue-700 transition-all ${u?"opacity-70 cursor-not-allowed":""}`,children:u?"Processing...":e?"Sign in":"Sign up"})]}),h.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:h.jsxs("p",{children:[e?"Don't have an account? ":"Already have an account? ",h.jsx("button",{onClick:()=>n(!e),className:"text-[#0066FF] font-bold hover:underline ml-1",children:e?"Sign up for free":"Log in"})]})})]})]})},bW=()=>{const t=er(),[e,n]=x.useState(!1),[r,s]=x.useState(""),[o,l]=x.useState(""),[u,d]=x.useState(""),[p,g]=x.useState(""),[v,w]=x.useState(""),[T,A]=x.useState([]),[N,C]=x.useState(""),[D,j]=x.useState("");Cn.useEffect(()=>{(async()=>{const I=Le.currentUser;if(I){const R=st(xe,"users",I.uid),P=await Lr(R);if(P.exists()){const M=P.data();s(M.name||""),l(M.role||""),d(M.institution||""),g(M.bio||""),A(M.skills||[]),C(M.socials?.github||""),j(M.socials?.linkedin||"")}}})()},[]);const F=B=>{B.key==="Enter"&&v.trim()&&(B.preventDefault(),T.length<5&&!T.includes(v.trim())&&(A([...T,v.trim()]),w("")))},W=B=>{A(T.filter(I=>I!==B))},K=async B=>{B.preventDefault(),n(!0);try{const I=Le.currentUser;if(!I)throw new Error("No user logged in");await sp(st(xe,"users",I.uid),{name:r,role:o,institution:u,bio:p,skills:T,socials:{github:N,linkedin:D},stats:{projects:0,stars:0,followers:0,following:0},avatar:I.photoURL||`https://api.dicebear.com/7.x/avataaars/svg?seed=${r}`,email:I.email,joinedAt:new Date().toISOString()},{merge:!0}),t("/profile")}catch(I){console.error("Error saving profile:",I),alert("Failed to save profile. Please try again.")}finally{n(!1)}};return h.jsx("div",{className:"min-h-screen pt-24 pb-12 bg-gray-50 flex items-center justify-center",children:h.jsxs(we.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-2xl bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("h1",{className:"text-3xl font-bold text-[#0f172a] mb-2",children:r?"Update Your Profile":"Complete Your Profile"}),h.jsx("p",{className:"text-gray-500",children:r?"Update your details below":"Tell us a bit about yourself to get started"})]}),h.jsxs("form",{onSubmit:K,className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full Name"}),h.jsx("input",{type:"text",required:!0,value:r,onChange:B=>s(B.target.value),className:"w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-200 focus:border-[#0066FF] focus:ring-2 focus:ring-blue-100 outline-none transition-all",placeholder:"John Doe"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Role / Title"}),h.jsx("input",{type:"text",required:!0,value:o,onChange:B=>l(B.target.value),className:"w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-200 focus:border-[#0066FF] focus:ring-2 focus:ring-blue-100 outline-none transition-all",placeholder:"Full Stack Developer"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"College / University"}),h.jsx("input",{type:"text",required:!0,value:u,onChange:B=>d(B.target.value),className:"w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-200 focus:border-[#0066FF] focus:ring-2 focus:ring-blue-100 outline-none transition-all",placeholder:"University of Technology"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"About Me"}),h.jsx("textarea",{required:!0,value:p,onChange:B=>g(B.target.value),rows:4,className:"w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-200 focus:border-[#0066FF] focus:ring-2 focus:ring-blue-100 outline-none transition-all resize-none",placeholder:"I am passionate about..."})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Skills ",h.jsx("span",{className:"text-gray-400 font-normal",children:"(Max 5)"})]}),h.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:T.map(B=>h.jsxs("span",{className:"px-3 py-1 bg-blue-50 text-[#0066FF] rounded-lg text-sm font-medium flex items-center gap-2",children:[B,h.jsx("button",{type:"button",onClick:()=>W(B),className:"hover:text-red-500",children:""})]},B))}),h.jsx("input",{type:"text",value:v,onChange:B=>w(B.target.value),onKeyDown:F,disabled:T.length>=5,className:"w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-200 focus:border-[#0066FF] focus:ring-2 focus:ring-blue-100 outline-none transition-all disabled:opacity-50",placeholder:T.length>=5?"Max skills reached":"Type skill and press Enter"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"GitHub (Optional)"}),h.jsx("input",{type:"text",value:N,onChange:B=>C(B.target.value),className:"w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-200 focus:border-[#0066FF] focus:ring-2 focus:ring-blue-100 outline-none transition-all",placeholder:"github.com/username"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"LinkedIn (Optional)"}),h.jsx("input",{type:"text",value:D,onChange:B=>j(B.target.value),className:"w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-200 focus:border-[#0066FF] focus:ring-2 focus:ring-blue-100 outline-none transition-all",placeholder:"linkedin.com/in/username"})]})]}),h.jsx("button",{type:"submit",disabled:e,className:"w-full py-4 rounded-xl bg-[#0066FF] text-white font-bold text-lg shadow-lg shadow-blue-500/30 hover:shadow-blue-500/50 hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-70 disabled:cursor-not-allowed",children:e?"Saving...":r?"Update Profile":"Complete Profile"})]})]})})},_W=({onSearchChange:t,onFilterChange:e,onSortChange:n})=>h.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-4 mb-8",children:h.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[h.jsx("div",{className:"flex-grow",children:h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",placeholder:"Search by name, headline, or skill...",onChange:r=>t(r.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0066FF]/20 focus:border-[#0066FF] transition-all text-sm"}),h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})})]})}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.jsxs("select",{onChange:r=>e("institution",r.target.value),className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600 focus:outline-none focus:ring-2 focus:ring-[#0066FF]/20 focus:border-[#0066FF]",children:[h.jsx("option",{value:"",children:"University (All)"}),h.jsx("option",{value:"IIT Bombay",children:"IIT Bombay"})]}),h.jsxs("select",{onChange:r=>e("role",r.target.value),className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600 focus:outline-none focus:ring-2 focus:ring-[#0066FF]/20 focus:border-[#0066FF]",children:[h.jsx("option",{value:"",children:"Role (All)"}),h.jsx("option",{value:"Frontend",children:"Frontend"}),h.jsx("option",{value:"Backend",children:"Backend"}),h.jsx("option",{value:"Fullstack",children:"Fullstack"}),h.jsx("option",{value:"Designer",children:"Designer"}),h.jsx("option",{value:"Researcher",children:"Researcher"})]}),h.jsxs("select",{onChange:r=>n(r.target.value),className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600 focus:outline-none focus:ring-2 focus:ring-[#0066FF]/20 focus:border-[#0066FF]",children:[h.jsx("option",{value:"recent",children:"Recently Active"}),h.jsx("option",{value:"connections",children:"Most Connections"}),h.jsx("option",{value:"university",children:"Same University"})]})]})]})}),EW=()=>{const[t,e]=x.useState(null);return x.useEffect(()=>{const n=Ea(Le,r=>{e(r)});return()=>n()},[]),t?h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm",children:[h.jsx("div",{className:"h-14 bg-gradient-to-r from-blue-400 to-[#0066FF]"}),h.jsxs("div",{className:"px-4 pb-4 -mt-8 text-center border-b border-gray-100",children:[h.jsx(Ar,{to:"/profile",children:h.jsx("div",{className:"w-17 h-17 rounded-full border-2 border-white bg-blue-100 mx-auto flex items-center justify-center text-[#0066FF] font-bold text-2xl overflow-hidden hover:opacity-90 transition-opacity",children:t.email?.[0].toUpperCase()})}),h.jsxs("div",{className:"mt-4",children:[h.jsx(Ar,{to:"/profile",className:"font-bold text-gray-900 hover:underline",children:t.displayName||t.email?.split("@")[0]}),h.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:"Student & Aspiring Developer at CollabX"})]})]}),h.jsxs("div",{className:"py-3",children:[h.jsx("div",{className:"px-4 py-1 hover:bg-gray-100 cursor-pointer transition-colors group",children:h.jsxs("div",{className:"flex justify-between items-center text-xs",children:[h.jsx("span",{className:"text-gray-500 group-hover:text-gray-700",children:"Profile viewers"}),h.jsx("span",{className:"text-[#0066FF] font-bold",children:"42"})]})}),h.jsx("div",{className:"px-4 py-1 hover:bg-gray-100 cursor-pointer transition-colors group",children:h.jsxs("div",{className:"flex justify-between items-center text-xs",children:[h.jsx("span",{className:"text-gray-500 group-hover:text-gray-700",children:"Project views"}),h.jsx("span",{className:"text-[#0066FF] font-bold",children:"156"})]})})]}),h.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 hover:bg-gray-100 cursor-pointer transition-colors group",children:[h.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-wider",children:"Access exclusive tools"}),h.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[h.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-sm"}),h.jsx("span",{className:"text-xs font-bold text-gray-800 group-hover:text-[#0066FF]",children:"Try Premium for Free"})]})]}),h.jsxs(Ar,{to:"/saved",className:"px-4 py-3 border-t border-gray-100 flex items-center gap-2 hover:bg-gray-100 transition-colors",children:[h.jsx(I8,{className:"h-4 w-4 text-gray-500"}),h.jsx("span",{className:"text-xs font-bold text-gray-800",children:"My Items"})]})]}),h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm sticky top-20",children:[h.jsxs("div",{className:"p-3",children:[h.jsx("div",{className:"flex items-center justify-between mb-2",children:h.jsx("span",{className:"text-xs font-medium text-gray-900",children:"Recent"})}),h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 hover:bg-gray-100 p-1 rounded cursor-pointer group",children:[h.jsx(xR,{className:"h-4 w-4"}),h.jsx("span",{className:"group-hover:text-gray-800 truncate",children:"React Developers Hub"})]}),h.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 hover:bg-gray-100 p-1 rounded cursor-pointer group",children:[h.jsx(lu,{className:"h-4 w-4"}),h.jsx("span",{className:"group-hover:text-gray-800 truncate",children:"UI/UX Design Projects"})]})]}),h.jsx("div",{className:"mt-4 mb-2",children:h.jsx("span",{className:"text-xs font-bold text-[#0066FF] hover:underline cursor-pointer",children:"Groups"})}),h.jsxs("div",{className:"mt-4 mb-2 flex items-center justify-between font-bold text-[#0066FF] hover:underline cursor-pointer",children:[h.jsx("span",{className:"text-xs",children:"Events"}),h.jsx(wR,{className:"h-4 w-4 text-gray-600 hover:bg-gray-100 rounded p-0.5"})]}),h.jsx("div",{className:"mt-4 mb-2",children:h.jsx("span",{className:"text-xs font-bold text-[#0066FF] hover:underline cursor-pointer",children:"Followed Hashtags"})})]}),h.jsx("div",{className:"border-t border-gray-100 p-3 text-center hover:bg-gray-100 cursor-pointer transition-colors",children:h.jsx("span",{className:"text-sm font-bold text-gray-500",children:"Discover more"})})]})]}):h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm",children:[h.jsx("div",{className:"h-14 bg-gradient-to-r from-blue-400 to-[#0066FF]"}),h.jsxs("div",{className:"px-4 pb-4 -mt-7 text-center",children:[h.jsx("div",{className:"w-16 h-16 rounded-full border-2 border-white bg-blue-50 mx-auto flex items-center justify-center text-blue-500 font-bold text-xl",children:"?"}),h.jsxs("div",{className:"mt-4",children:[h.jsx("h3",{className:"font-bold text-gray-900",children:"Welcome to CollabX!"}),h.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sign in to start collaborating"})]}),h.jsx("button",{className:"w-full mt-4 py-2 border-2 border-[#0066FF] text-[#0066FF] rounded-full text-sm font-semibold hover:bg-blue-50 transition-colors",children:"Sign In"})]})]})};function TW({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{fillRule:"evenodd",d:"M12.97 3.97a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06l6.22-6.22H3a.75.75 0 0 1 0-1.5h16.19l-6.22-6.22a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const SW=x.forwardRef(TW);function CW({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{d:"M7.493 18.5c-.425 0-.82-.236-.975-.632A7.48 7.48 0 0 1 6 15.125c0-1.75.599-3.358 1.602-4.634.151-.192.373-.309.6-.397.473-.183.89-.514 1.212-.924a9.042 9.042 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75A.75.75 0 0 1 15 2a2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H14.23c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23h-.777ZM2.331 10.727a11.969 11.969 0 0 0-.831 4.398 12 12 0 0 0 .52 3.507C2.28 19.482 3.105 20 3.994 20H4.9c.445 0 .72-.498.523-.898a8.963 8.963 0 0 1-.924-3.977c0-1.708.476-3.305 1.302-4.666.245-.403-.028-.959-.5-.959H4.25c-.832 0-1.612.453-1.918 1.227Z"}))}const IW=x.forwardRef(CW);function RW({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const r2=x.forwardRef(RW);function AW({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}const NW=x.forwardRef(AW),kW=()=>{const t=[{name:"Sarah Chen",role:"Full Stack Developer",college:"Stanford University"},{name:"Alex Rivera",role:"UI/UX Designer",college:"MIT"},{name:"James Wilson",role:"ML Engineer",college:"IIT Bombay"}],e=[{title:"Project: Decentralized Voting",views:"1.2k",time:"12h ago"},{title:"Resource: Mastering React 19",views:"3.4k",time:"1d ago"},{title:"Roadmap: AI/ML 2024",views:"5k",time:"2d ago"}];return h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3 shadow-sm",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("h3",{className:"font-bold text-gray-900 text-sm",children:"Add to your feed"}),h.jsx(r2,{className:"h-4 w-4 text-gray-400 cursor-pointer"})]}),h.jsx("div",{className:"flex flex-col gap-4",children:t.map((n,r)=>h.jsxs("div",{className:"flex gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 shrink-0 flex items-center justify-center text-[#0066FF] font-bold text-xs uppercase",children:n.name[0]}),h.jsxs("div",{className:"flex flex-col min-w-0",children:[h.jsx("span",{className:"font-bold text-sm text-gray-900 truncate hover:text-[#0066FF] hover:underline cursor-pointer",children:n.name}),h.jsxs("span",{className:"text-xs text-gray-500 truncate",children:[n.role," at ",n.college]}),h.jsxs("button",{className:"mt-1.5 flex items-center justify-center gap-1 px-3 py-1 border border-gray-500 text-gray-600 rounded-full text-sm font-bold hover:bg-gray-50 hover:border-gray-800 transition-colors w-24",children:[h.jsx(NW,{className:"h-4 w-4"}),h.jsx("span",{children:"Follow"})]})]})]},r))}),h.jsx("div",{className:"mt-4 pt-2 border-t border-gray-50",children:h.jsxs("button",{className:"flex items-center gap-1 text-gray-500 hover:bg-gray-100 p-1 rounded transition-colors w-full group",children:[h.jsx("span",{className:"text-sm font-bold group-hover:text-gray-700",children:"View all recommendations"}),h.jsx(SW,{className:"h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})]}),h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-3 shadow-sm sticky top-20",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("h3",{className:"font-bold text-gray-900 text-sm",children:"CollabX Trending"}),h.jsx(r2,{className:"h-4 w-4 text-gray-400"})]}),h.jsx("div",{className:"flex flex-col gap-3",children:e.map((n,r)=>h.jsxs("div",{className:"group cursor-pointer",children:[h.jsx("h4",{className:"text-sm font-bold text-gray-800 group-hover:text-[#0066FF]",children:n.title}),h.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-gray-500 mt-0.5",children:[h.jsxs("span",{children:[n.views," readers"]}),h.jsx("span",{children:""}),h.jsx("span",{children:n.time})]})]},r))}),h.jsxs("div",{className:"mt-4 text-[11px] text-gray-400 flex flex-wrap justify-center gap-x-3 gap-y-1",children:[h.jsx("span",{className:"hover:underline hover:text-[#0066FF] cursor-pointer",children:"About"}),h.jsx("span",{className:"hover:underline hover:text-[#0066FF] cursor-pointer",children:"Accessibility"}),h.jsx("span",{className:"hover:underline hover:text-[#0066FF] cursor-pointer",children:"Help Center"}),h.jsx("span",{className:"hover:underline hover:text-[#0066FF] cursor-pointer",children:"Privacy & Terms"}),h.jsx("span",{className:"hover:underline hover:text-[#0066FF] cursor-pointer",children:"Ad Choices"}),h.jsx("span",{className:"hover:underline hover:text-[#0066FF] cursor-pointer",children:"Advertising"}),h.jsx("span",{className:"hover:underline hover:text-[#0066FF] cursor-pointer",children:"Business Services"})]}),h.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2",children:[h.jsx("div",{className:"w-4 h-4 rounded bg-[#0066FF] flex items-center justify-center text-white text-[8px] font-bold",children:"X"}),h.jsx("span",{className:"text-xs text-gray-500",children:"CollabX Corporation  2024"})]})]})]})},rd=({children:t})=>h.jsx("div",{className:"main-content",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[h.jsx("div",{className:"hidden lg:block lg:col-span-3",children:h.jsx(EW,{})}),h.jsx("div",{className:"col-span-1 lg:col-span-6",children:t}),h.jsx("div",{className:"hidden lg:block lg:col-span-3",children:h.jsx(kW,{})})]})}),PW=()=>{const t=er(),[e,n]=x.useState([]),[r,s]=x.useState(!0),[o,l]=x.useState(""),[u,d]=x.useState({institution:"",role:""}),[p,g]=x.useState("recent"),[v,w]=x.useState(null);x.useEffect(()=>{(async()=>{try{const C=Le.currentUser;if(C){const F=st(xe,"users",C.uid),W=await Lr(F);W.exists()&&w(W.data())}const D=await Nn(rt(xe,"users")),j=[];D.forEach(F=>{const W=F.data();F.id!==C?.uid&&j.push({...W,uid:F.id})}),n(j)}catch(C){console.error("Error fetching students:",C)}finally{s(!1)}})()},[]);const T=x.useMemo(()=>e.filter(N=>{const C=o.toLowerCase(),D=N.name.toLowerCase().includes(C)||N.role.toLowerCase().includes(C)||N.headline&&N.headline.toLowerCase().includes(C)||N.skills?.some(W=>W.toLowerCase().includes(C)),j=!u.institution||N.college===u.institution||N.institution===u.institution,F=!u.role||N.role.toLowerCase().includes(u.role.toLowerCase());return D&&j&&F}).sort((N,C)=>{if(p==="connections")return(C.stats?.connections||0)-(N.stats?.connections||0);if(p==="university"&&(v?.college||v?.institution)){const D=v?.college||v?.institution,j=N.college===D||N.institution===D?1:0;return(C.college===D||C.institution===D?1:0)-j}return 0}),[e,o,u,p,v]),A=()=>h.jsxs("div",{className:"bg-white rounded-xl overflow-hidden border border-gray-200 shadow-sm p-4 h-[320px] animate-pulse",children:[h.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 mx-auto mb-4 mt-8"}),h.jsx("div",{className:"h-4 bg-gray-100 rounded w-3/4 mx-auto mb-2"}),h.jsx("div",{className:"h-3 bg-gray-100 rounded w-1/2 mx-auto mb-4"}),h.jsx("div",{className:"h-3 bg-gray-100 rounded w-2/3 mx-auto mb-6"}),h.jsx("div",{className:"h-8 bg-gray-100 rounded-full w-full"})]});return h.jsx(rd,{children:h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"p-2 bg-blue-50 rounded-lg text-[#0066FF]",children:h.jsx(xR,{className:"h-6 w-6"})}),h.jsx("h1",{className:"text-2xl font-bold text-[#0f172a]",children:"Network Discovery"})]}),h.jsx("p",{className:"text-gray-500 text-sm",children:"Connect with ambitious students from top universities and build your community."})]}),h.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm sticky top-[72px] z-10",children:h.jsx(_W,{onSearchChange:l,onFilterChange:(N,C)=>d(D=>({...D,[N]:C})),onSortChange:g})}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:r?Array.from({length:6}).map((N,C)=>h.jsx(A,{},C)):h.jsx(rs,{children:T.length>0?T.map(N=>h.jsx(IR,{student:N,onClick:()=>t(`/profile/${N.uid}`)},N.uid)):h.jsxs("div",{className:"col-span-full py-12 text-center bg-white rounded-xl border border-gray-200",children:[h.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(Ju,{className:"w-8 h-8 text-gray-400"})}),h.jsx("h3",{className:"text-lg font-bold text-[#0f172a] mb-2",children:"No students found"}),h.jsx("p",{className:"text-gray-500 text-sm",children:"Try adjusting your filters or search query."})]})})})]})})},jW=()=>{const[t,e]=x.useState(""),[n,r]=x.useState(""),[s,o]=x.useState(""),[l,u]=x.useState("idle"),d=async p=>{p.preventDefault(),u("submitting");try{await $s(rt(xe,"feedback"),{name:t,email:n,message:s,created_at:tt.now()}),u("success"),e(""),r(""),o(""),setTimeout(()=>u("idle"),3e3)}catch(g){console.error("Error submitting feedback:",g),u("error"),setTimeout(()=>u("idle"),3e3)}};return h.jsx("section",{id:"contact",className:"py-24 bg-gray-50",children:h.jsxs("div",{className:"container-custom mx-auto max-w-4xl",children:[h.jsxs("div",{className:"text-center mb-16",children:[h.jsx("h2",{className:"text-4xl font-bold text-[#0f172a] mb-4",children:"Get in Touch"}),h.jsx("p",{className:"text-lg text-gray-500",children:"Have feedback or questions? We'd love to hear from you."})]}),h.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8 md:p-12",children:h.jsxs("form",{onSubmit:d,className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),h.jsx("input",{type:"text",id:"name",value:t,onChange:p=>e(p.target.value),required:!0,className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-[#0066FF] focus:ring-2 focus:ring-blue-100 outline-none transition-all",placeholder:"Your name"})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),h.jsx("input",{type:"email",id:"email",value:n,onChange:p=>r(p.target.value),required:!0,className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-[#0066FF] focus:ring-2 focus:ring-blue-100 outline-none transition-all",placeholder:"your@email.com"})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),h.jsx("textarea",{id:"message",value:s,onChange:p=>o(p.target.value),required:!0,rows:4,className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-[#0066FF] focus:ring-2 focus:ring-blue-100 outline-none transition-all resize-none",placeholder:"How can we help you?"})]}),h.jsx("button",{type:"submit",disabled:l==="submitting",className:"w-full btn-primary py-3 rounded-lg font-semibold text-lg shadow-lg shadow-blue-500/20 disabled:opacity-70 disabled:cursor-not-allowed",children:l==="submitting"?"Sending...":"Send Message"}),l==="success"&&h.jsx(we.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-green-50 text-green-600 rounded-lg text-center font-medium",children:"Message sent successfully! Thank you for your feedback."}),l==="error"&&h.jsx(we.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-red-50 text-red-600 rounded-lg text-center font-medium",children:"Something went wrong. Please try again."})]})})]})})},Qi=({children:t})=>{const[e,n]=x.useState(!0),[r,s]=x.useState(!1);return x.useEffect(()=>{const o=Ea(Le,l=>{s(!!l),n(!1)});return()=>o()},[]),e?h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#0066FF]"})}):r?h.jsx(h.Fragment,{children:t}):h.jsx(sk,{to:"/login"})},DW=()=>{const{pathname:t,hash:e}=Or();return x.useEffect(()=>{e||window.scrollTo(0,0)},[t,e]),null},MW=async t=>{try{return(await $s(rt(xe,"posts"),{...t,likesCount:0,commentsCount:0,repostsCount:0,createdAt:fn()})).id}catch(e){throw console.error("Error creating post:",e),e}},LW=t=>{const e=Ft(rt(xe,"posts"),bi("createdAt","desc"));return tv(e,n=>{const r=n.docs.map(s=>({id:s.id,...s.data()}));t(r)})},OW=async(t,e)=>{try{const n=st(xe,"posts",t),r=await Nn(Ft(rt(xe,"likes"),Vt("postId","==",t),Vt("userId","==",e)));r.empty?(await $s(rt(xe,"likes"),{postId:t,userId:e,createdAt:fn()}),await Bs(n,{likesCount:h0(1)})):(await ip(st(xe,"likes",r.docs[0].id)),await Bs(n,{likesCount:h0(-1)}))}catch(n){throw console.error("Error toggling like:",n),n}},VW=()=>{const[t,e]=x.useState([]),[n,r]=x.useState(""),[s,o]=x.useState(!1),l=Le.currentUser;x.useEffect(()=>{const g=LW(v=>{e(v)});return()=>g()},[]);const u=async g=>{if(g.preventDefault(),!(!l||!n.trim()||s)){o(!0);try{await MW({userId:l.uid,authorName:l.displayName||"Anonymous User",authorAvatar:l.photoURL||"",authorRole:"Student",content:n,type:"post",tags:n.match(/#\w+/g)||[]}),r("")}catch(v){console.error("Failed to create post:",v)}finally{o(!1)}}},d=async g=>{if(l)try{await OW(g,l.uid)}catch(v){console.error("Failed to toggle like:",v)}},p=g=>{if(!g)return"Just now";const v=g.toDate?g.toDate():new Date(g),T=Math.floor((new Date().getTime()-v.getTime())/1e3);return T<60?`${T}s ago`:T<3600?`${Math.floor(T/60)}m ago`:T<86400?`${Math.floor(T/3600)}h ago`:`${Math.floor(T/86400)}d ago`};return h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm",children:[h.jsxs("div",{className:"flex gap-3",children:[h.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center text-[#0066FF] font-bold text-lg shrink-0 overflow-hidden",children:l?.photoURL?h.jsx("img",{src:l.photoURL,alt:"Me",className:"w-full h-full object-cover"}):l?.displayName?.[0]||l?.email?.[0]||"U"}),h.jsxs("form",{onSubmit:u,className:"flex-1",children:[h.jsx("textarea",{value:n,onChange:g=>r(g.target.value),placeholder:"Start a project or share an update...",className:"w-full text-left px-4 py-3 border border-gray-200 rounded-2xl text-gray-800 hover:bg-gray-50 transition-colors text-sm font-medium resize-none focus:outline-none focus:ring-1 focus:ring-blue-100",rows:2}),n.trim()&&h.jsx("div",{className:"flex justify-end mt-2",children:h.jsx("button",{type:"submit",disabled:s,className:"bg-[#0066FF] text-white px-4 py-1.5 rounded-full text-sm font-bold disabled:opacity-50 hover:bg-blue-600 transition-colors",children:s?"Posting...":"Post"})})]})]}),h.jsxs("div",{className:"flex justify-between mt-3 px-2 border-t border-gray-50 pt-2",children:[h.jsxs("button",{className:"flex items-center gap-2 text-gray-500 hover:bg-gray-100 p-2 rounded transition-colors group",children:[h.jsx(aU,{className:"h-5 w-5 text-blue-400"}),h.jsx("span",{className:"text-sm font-medium group-hover:text-gray-700",children:"Media"})]}),h.jsxs("button",{className:"flex items-center gap-2 text-gray-500 hover:bg-gray-100 p-2 rounded transition-colors group",children:[h.jsx(yR,{className:"h-5 w-5 text-yellow-500"}),h.jsx("span",{className:"text-sm font-medium group-hover:text-gray-700",children:"Event"})]}),h.jsxs("button",{className:"flex items-center gap-2 text-gray-500 hover:bg-gray-100 p-2 rounded transition-colors group",children:[h.jsx($8,{className:"h-5 w-5 text-orange-400"}),h.jsx("span",{className:"text-sm font-medium group-hover:text-gray-700",children:"Write article"})]})]})]}),t.map(g=>h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 py-3 shadow-sm",children:[h.jsxs("div",{className:"flex justify-between px-4 mb-2",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center text-[#0066FF] font-bold text-lg overflow-hidden shrink-0",children:g.authorAvatar?h.jsx("img",{src:g.authorAvatar,alt:g.authorName,className:"w-full h-full object-cover"}):g.authorName[0]}),h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("span",{className:"text-sm font-bold text-gray-900 flex items-center gap-1 hover:text-[#0066FF] hover:underline cursor-pointer",children:[g.authorName,h.jsx("span",{className:"text-xs font-normal text-gray-400",children:" 1st"})]}),h.jsx("span",{className:"text-[11px] text-gray-500 truncate w-48 sm:w-80",children:g.authorRole||"Student"}),h.jsxs("span",{className:"text-[11px] text-gray-400 flex items-center gap-1",children:[p(g.createdAt),"  ",h.jsx(TE,{className:"h-3 w-3"})]})]})]}),h.jsx("button",{className:"text-gray-500 hover:bg-gray-100 rounded-full h-8 w-8 flex items-center justify-center transition-colors",children:h.jsx(q8,{className:"h-6 w-6"})})]}),h.jsxs("div",{className:"px-4 mb-3",children:[h.jsx("p",{className:"text-sm text-gray-800 leading-normal whitespace-pre-wrap",children:g.content}),g.tags&&g.tags.length>0&&h.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:g.tags.map(v=>h.jsx("span",{className:"text-sm font-bold text-[#0066FF] hover:underline cursor-pointer",children:v},v))})]}),g.imageUrl&&h.jsx("div",{className:"mb-3",children:h.jsx("img",{src:g.imageUrl,alt:"Post content",className:"w-full h-auto max-h-[512px] object-cover"})}),h.jsxs("div",{className:"px-4 flex justify-between items-center pb-2 border-b border-gray-50",children:[h.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-gray-500 hover:text-[#0066FF] cursor-pointer",children:[h.jsx("div",{className:"flex -space-x-1",children:h.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500 flex items-center justify-center text-white",children:h.jsx(IW,{className:"h-2.5 w-2.5"})})}),h.jsx("span",{children:g.likesCount||0})]}),h.jsxs("div",{className:"flex gap-2 text-[11px] text-gray-500",children:[h.jsxs("span",{className:"hover:text-[#0066FF] hover:underline cursor-pointer",children:[g.commentsCount||0," comments"]}),h.jsx("span",{children:""}),h.jsxs("span",{className:"hover:text-[#0066FF] hover:underline cursor-pointer",children:[g.repostsCount||0," shares"]})]})]}),h.jsxs("div",{className:"flex px-2 pt-1",children:[h.jsxs("button",{onClick:()=>d(g.id),className:"flex-1 flex items-center justify-center gap-2 py-2.5 text-gray-500 hover:bg-gray-100 rounded transition-colors group",children:[h.jsx(J8,{className:"h-5 w-5 group-hover:scale-110"}),h.jsx("span",{className:"text-sm font-bold",children:"Like"})]}),h.jsxs("button",{className:"flex-1 flex items-center justify-center gap-2 py-2.5 text-gray-500 hover:bg-gray-100 rounded transition-colors group",children:[h.jsx(M8,{className:"h-5 w-5 group-hover:scale-110"}),h.jsx("span",{className:"text-sm font-bold",children:"Comment"})]}),h.jsxs("button",{className:"flex-1 flex items-center justify-center gap-2 py-2.5 text-gray-500 hover:bg-gray-100 rounded transition-colors group",children:[h.jsx(uU,{className:"h-5 w-5 group-hover:scale-110"}),h.jsx("span",{className:"text-sm font-bold",children:"Repost"})]}),h.jsxs("button",{className:"flex-1 flex items-center justify-center gap-2 py-2.5 text-gray-500 hover:bg-gray-100 rounded transition-colors group",children:[h.jsx(vR,{className:"h-5 w-5 -rotate-45 group-hover:scale-110"}),h.jsx("span",{className:"text-sm font-bold",children:"Send"})]})]})]},g.id)),t.length===0&&h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center text-gray-500",children:[h.jsx(TE,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),h.jsx("p",{children:"No posts yet. Be the first to share something!"})]})]})},FW=()=>{const[t,e]=x.useState("All"),[n,r]=x.useState(""),[s,o]=x.useState([]),[l,u]=x.useState(!0),[d,p]=x.useState(null),[g,v]=x.useState(!1),[w,T]=x.useState(!1),[A,N]=x.useState(null);x.useEffect(()=>{C();const B=Ea(Le,I=>{p(I)});return()=>B()},[]);const C=async()=>{u(!0);const B=await _U();o(B),u(!1)},D=async B=>{if(!d){v(!0);return}N(B);try{await bU(B),await C()}catch(I){console.error("Failed to join project:",I)}finally{N(null)}},j=()=>{d?T(!0):v(!0)},F=["All","AI/ML","Web Dev","Mobile","Blockchain","Design"],W=s.filter(B=>{const I=t==="All"||B.category===t,R=B.title.toLowerCase().includes(n.toLowerCase())||B.description.toLowerCase().includes(n.toLowerCase())||B.techStack?.some(P=>P.toLowerCase().includes(n.toLowerCase()));return I&&R}),K=()=>h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm animate-pulse",children:[h.jsx("div",{className:"h-40 bg-gray-100"}),h.jsxs("div",{className:"p-4",children:[h.jsx("div",{className:"h-4 bg-gray-100 rounded w-3/4 mb-3"}),h.jsx("div",{className:"h-3 bg-gray-100 rounded w-full mb-2"}),h.jsx("div",{className:"h-3 bg-gray-100 rounded w-2/3 mb-4"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("div",{className:"h-4 bg-gray-100 rounded w-12"}),h.jsx("div",{className:"h-4 bg-gray-100 rounded w-12"})]})]})]});return h.jsxs(rd,{children:[h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-blue-50 rounded-lg text-[#0066FF]",children:h.jsx(lu,{className:"h-6 w-6"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-[#0f172a]",children:"Collaboration Projects"}),h.jsx("p",{className:"text-gray-500 text-sm",children:"Find projects to join and talented students to collaborate with."})]})]}),h.jsxs("button",{onClick:j,className:"bg-[#0066FF] text-white px-5 py-2 rounded-full text-sm font-bold shadow-lg shadow-blue-500/20 hover:bg-blue-600 transition-all flex items-center justify-center gap-2",children:[h.jsx(wR,{className:"h-5 w-5"}),"Post Project"]})]})}),h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm sticky top-[72px] z-10 space-y-4",children:[h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(Ju,{className:"h-5 w-5 text-gray-400"})}),h.jsx("input",{type:"text",placeholder:"Search by title, description, or stack...",value:n,onChange:B=>r(B.target.value),className:"block w-full pl-10 pr-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-[#0066FF] focus:bg-white focus:border-transparent transition-all"})]}),h.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 no-scrollbar",children:[h.jsxs("div",{className:"flex items-center gap-1.5 mr-2 shrink-0 text-gray-500",children:[h.jsx(Y8,{className:"h-4 w-4"}),h.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Filters:"})]}),F.map(B=>h.jsx("button",{onClick:()=>e(B),className:`px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap border transition-all ${t===B?"bg-[#0066FF] border-[#0066FF] text-white shadow-md":"bg-white border-gray-200 text-gray-600 hover:border-gray-300 hover:bg-gray-50"}`,children:B},B))]})]}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:l?Array.from({length:4}).map((B,I)=>h.jsx(K,{},I)):h.jsx(rs,{children:W.length>0?W.map(B=>h.jsxs(we.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm hover:shadow-md transition-all flex flex-col group cursor-pointer",children:[h.jsxs("div",{className:"h-40 overflow-hidden relative",children:[h.jsx("img",{src:B.thumbnailUrl||`https://source.unsplash.com/random/800x600?tech,${B.category}`,alt:B.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),h.jsx("div",{className:"absolute top-3 left-3",children:h.jsx("span",{className:"bg-white/90 backdrop-blur-sm px-2.5 py-1 rounded-md text-[10px] font-bold text-[#0f172a] uppercase border border-white shadow-sm",children:B.category})})]}),h.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center text-[#0066FF] font-bold text-[10px] overflow-hidden shrink-0",children:B.ownerAvatar?h.jsx("img",{src:B.ownerAvatar,alt:B.ownerName,className:"w-full h-full object-cover"}):B.ownerName[0]}),h.jsx("span",{className:"text-xs text-gray-500 font-medium",children:B.ownerName})]}),h.jsx("h3",{className:"text-lg font-bold text-[#0f172a] group-hover:text-[#0066FF] transition-colors mb-1 line-clamp-1",children:B.title}),h.jsx("p",{className:"text-xs text-gray-600 line-clamp-2 mb-4 h-8",children:B.description}),h.jsx("div",{className:"flex flex-wrap gap-1 mb-4 h-6 overflow-hidden",children:B.techStack?.map(I=>h.jsxs("span",{className:"text-[10px] font-bold text-[#0066FF] bg-blue-50 px-2 py-0.5 rounded",children:["#",I]},I))}),h.jsxs("div",{className:"mt-auto pt-3 border-t border-gray-50 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[h.jsx(lu,{className:"h-4 w-4"}),h.jsxs("span",{className:"text-[11px] font-medium",children:[B.members?.length||0," members"]})]}),h.jsx("button",{onClick:I=>{I.stopPropagation(),!B.members?.includes(d?.uid||"")&&(B.pendingRequests?.includes(d?.uid||"")||D(B.id))},disabled:A===B.id||B.members?.includes(d?.uid||"")||B.pendingRequests?.includes(d?.uid||""),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${B.members?.includes(d?.uid||"")?"bg-green-50 text-green-600 border border-green-100 cursor-default":B.pendingRequests?.includes(d?.uid||"")?"bg-yellow-50 text-yellow-600 border border-yellow-100 cursor-default":"bg-[#0066FF] text-white hover:bg-blue-600"}`,children:B.members?.includes(d?.uid||"")?"Joined":B.pendingRequests?.includes(d?.uid||"")?"Pending":A===B.id?"Joining...":"Join"})]})]})]},B.id)):h.jsxs("div",{className:"col-span-full py-16 text-center bg-white rounded-xl border border-gray-200",children:[h.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4 text-gray-400",children:h.jsx(lu,{className:"w-8 h-8"})}),h.jsx("h3",{className:"text-lg font-bold text-[#0f172a] mb-2",children:"No projects found"}),h.jsx("p",{className:"text-gray-500 text-sm",children:"Be the first to post a project in this category!"})]})})})]}),h.jsx(Bv,{isOpen:g,onClose:()=>v(!1)}),h.jsx(TR,{isOpen:w,onClose:()=>T(!1),onSuccess:C})]})},UW=()=>{const t=er(),[e,n]=x.useState([]),[r,s]=x.useState(!0),[o,l]=x.useState("");x.useEffect(()=>{u()},[]);const u=async()=>{try{const g=rt(xe,"resources"),v=Ft(g),T=(await Nn(v)).docs.map(A=>({id:A.id,...A.data()}));T.length===0?n([{id:"cat",title:"CAT Resources",description:"Comprehensive study materials, mock tests, and guides for Common Admission Test preparation.",icon:"",color:"badge-blue"},{id:"upsc",title:"UPSC Resources",description:"Curated notes, current affairs, and syllabus breakdowns for Civil Services Examination.",icon:"",color:"badge-yellow"},{id:"gate",title:"GATE Resources",description:"Subject-wise notes, previous year questions, and technical resources for Graduate Aptitude Test in Engineering.",icon:"",color:"badge-green"}]):n(T)}catch(g){console.error("Error fetching resources:",g)}finally{s(!1)}},d=e.filter(g=>g.title.toLowerCase().includes(o.toLowerCase())||g.description.toLowerCase().includes(o.toLowerCase())),p=()=>h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 animate-pulse",children:[h.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg mb-4"}),h.jsx("div",{className:"h-5 bg-gray-100 rounded w-3/4 mb-3"}),h.jsx("div",{className:"h-3 bg-gray-100 rounded w-full mb-2"}),h.jsx("div",{className:"h-3 bg-gray-100 rounded w-2/3"})]});return h.jsx(rd,{children:h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"p-2 bg-blue-50 rounded-lg text-[#0066FF]",children:h.jsx(gR,{className:"h-6 w-6"})}),h.jsx("h1",{className:"text-2xl font-bold text-[#0f172a]",children:"Learning Resources"})]}),h.jsx("p",{className:"text-gray-500 text-sm",children:"Curated study materials and exam preparation guides to help you excel."})]}),h.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm sticky top-[72px] z-10",children:h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(Ju,{className:"h-5 w-5 text-gray-400"})}),h.jsx("input",{type:"text",placeholder:"Search resources, exams, or topics...",value:o,onChange:g=>l(g.target.value),className:"block w-full pl-10 pr-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-[#0066FF] focus:bg-white transition-all"})]})}),h.jsx("div",{className:"grid grid-cols-1 gap-4",children:r?Array.from({length:3}).map((g,v)=>h.jsx(p,{},v)):h.jsx(rs,{children:d.length>0?d.map(g=>h.jsxs(we.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},onClick:()=>t(`/resource/${g.id}`),className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-all cursor-pointer group flex items-start gap-4",children:[h.jsx("div",{className:"w-14 h-14 bg-gray-50 rounded-xl flex items-center justify-center text-3xl shrink-0 group-hover:scale-110 transition-transform",children:g.icon}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsx("h3",{className:"text-lg font-bold text-[#0f172a] group-hover:text-[#0066FF] transition-colors",children:g.title}),h.jsx(x8,{className:"h-4 w-4 text-gray-300 group-hover:text-[#0066FF] group-hover:translate-x-1 transition-all"})]}),h.jsx("p",{className:"text-sm text-gray-500 line-clamp-2 leading-relaxed mb-3",children:g.description}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[10px] font-bold text-[#0066FF] bg-blue-50 px-2.5 py-1 rounded-md uppercase tracking-wider",children:"Study Guide"}),h.jsx("span",{className:"text-[10px] font-bold text-gray-400 bg-gray-50 px-2.5 py-1 rounded-md uppercase tracking-wider",children:"Free Access"})]})]})]},g.id)):h.jsxs("div",{className:"py-16 text-center bg-white rounded-xl border border-gray-200",children:[h.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4 text-gray-400",children:h.jsx(mR,{className:"w-8 h-8"})}),h.jsx("h3",{className:"text-lg font-bold text-[#0f172a] mb-2",children:"No resources found"}),h.jsx("p",{className:"text-gray-500 text-sm",children:"Try different keywords or check back later."})]})})})]})})},BW=()=>{const t=er(),[e,n]=x.useState([]),[r,s]=x.useState(!0),[o,l]=x.useState("");x.useEffect(()=>{u()},[]);const u=async()=>{try{const v=rt(xe,"roadmaps"),w=Ft(v,bi("created_at","desc")),A=(await Nn(w)).docs.map(N=>({id:N.id,...N.data()}));n(A)}catch(v){console.error("Error fetching roadmaps:",v)}finally{s(!1)}},d=e.filter(v=>v.title.toLowerCase().includes(o.toLowerCase())||v.description.toLowerCase().includes(o.toLowerCase())),p=v=>{v.link&&(v.link.startsWith("http")||v.link.startsWith("https"))?window.open(v.link,"_blank"):(t(`/roadmap/${v.id}`),window.scrollTo(0,0))},g=()=>h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5 animate-pulse",children:[h.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-xl mb-4"}),h.jsx("div",{className:"h-5 bg-gray-100 rounded w-2/3 mb-3"}),h.jsx("div",{className:"h-3 bg-gray-100 rounded w-full mb-2"}),h.jsx("div",{className:"h-3 bg-gray-100 rounded w-1/2"})]});return h.jsx(rd,{children:h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"p-2 bg-blue-50 rounded-lg text-[#0066FF]",children:h.jsx(Wh,{className:"h-6 w-6"})}),h.jsx("h1",{className:"text-2xl font-bold text-[#0f172a]",children:"Learning Roadmaps"})]}),h.jsx("p",{className:"text-gray-500 text-sm",children:"Structured paths to help you master new skills and prepare for exams."})]}),h.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm sticky top-[72px] z-10",children:h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx(Ju,{className:"h-5 w-5 text-gray-400"})}),h.jsx("input",{type:"text",placeholder:"Search roadmaps by skill or career path...",value:o,onChange:v=>l(v.target.value),className:"block w-full pl-10 pr-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-[#0066FF] focus:bg-white transition-all"})]})}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:r?Array.from({length:4}).map((v,w)=>h.jsx(g,{},w)):h.jsx(rs,{children:d.length>0?d.map(v=>h.jsxs(we.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},onClick:()=>p(v),className:"bg-white rounded-xl border border-gray-200 p-5 shadow-sm hover:shadow-md transition-all cursor-pointer group flex flex-col",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center text-[#0066FF] group-hover:scale-110 transition-transform",children:h.jsx(Wh,{className:"h-6 w-6"})}),v.is_official&&h.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-yellow-600 bg-yellow-50 px-2 py-1 rounded-md",children:[h.jsx(hU,{className:"h-3 w-3"}),"OFFICIAL"]})]}),h.jsx("h3",{className:"text-lg font-bold text-[#0f172a] group-hover:text-[#0066FF] transition-colors mb-1 line-clamp-1",children:v.title}),h.jsx("p",{className:"text-xs text-gray-500 line-clamp-2 leading-relaxed mb-4 flex-1",children:v.description}),h.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-50",children:[h.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:v.category||"General"}),h.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-[#0066FF]",children:["VIEW PATH",h.jsx(F8,{className:"h-3 w-3"})]})]})]},v.id)):h.jsxs("div",{className:"col-span-full py-16 text-center bg-white rounded-xl border border-gray-200",children:[h.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4 text-gray-400",children:h.jsx(Wh,{className:"w-8 h-8"})}),h.jsx("h3",{className:"text-lg font-bold text-[#0f172a] mb-2",children:"No roadmaps found"}),h.jsx("p",{className:"text-gray-500 text-sm",children:"Try searching for different skills or paths."})]})})})]})})},zW=()=>{const t=Or();return Cn.useEffect(()=>{if(t.hash){const e=t.hash.substring(1);setTimeout(()=>{const n=document.getElementById(e);if(n){const o=n.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:o,behavior:"smooth"})}},100)}},[t.hash]),t.hash?h.jsxs("main",{className:"bg-white min-h-screen",children:[h.jsx(yU,{}),h.jsx("div",{id:"roadmaps",children:h.jsx(vU,{})}),h.jsx("div",{id:"projects",children:h.jsx(TU,{})}),h.jsx("div",{id:"resources",children:h.jsx(SU,{})}),h.jsx(MU,{}),h.jsx(jW,{})]}):h.jsx(rd,{children:h.jsx(VW,{})})},$W=()=>h.jsxs("div",{className:"min-h-screen bg-[#f3f2ef] text-[#0f172a] font-sans",children:[h.jsx(DW,{}),h.jsx(_R,{}),h.jsxs(ok,{children:[h.jsx(fr,{path:"/",element:h.jsx(zW,{})}),h.jsx(fr,{path:"/profile",element:h.jsx(Qi,{children:h.jsx(YE,{})})}),h.jsx(fr,{path:"/profile/:userId",element:h.jsx(Qi,{children:h.jsx(YE,{})})}),h.jsx(fr,{path:"/students",element:h.jsx(Qi,{children:h.jsx(PW,{})})}),h.jsx(fr,{path:"/projects",element:h.jsx(Qi,{children:h.jsx(FW,{})})}),h.jsx(fr,{path:"/resources",element:h.jsx(Qi,{children:h.jsx(UW,{})})}),h.jsx(fr,{path:"/roadmaps",element:h.jsx(Qi,{children:h.jsx(BW,{})})}),h.jsx(fr,{path:"/onboarding",element:h.jsx(Qi,{children:h.jsx(bW,{})})}),h.jsx(fr,{path:"/messages",element:h.jsx(Qi,{children:h.jsx(yW,{})})}),h.jsx(fr,{path:"/roadmap/:roadmapId",element:h.jsx(vW,{})}),h.jsx(fr,{path:"/resource/:resourceId",element:h.jsx(wW,{})}),h.jsx(fr,{path:"/login",element:h.jsx(xW,{})})]})]});mN.createRoot(document.getElementById("root")).render(h.jsx(x.StrictMode,{children:h.jsx(Nk,{children:h.jsx($W,{})})}));
